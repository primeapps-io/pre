<div class="modal setup-modal modal-1100" tabindex="-1" role="dialog">
    <div class="modal-header">
        <div class="flex-between">
            <h4 class="modal-title">New Report</h4>
            <div>
                <ul class="list-unstyled list-inline">
                    <li>
                        <button type="button" ng-click="$hide();" class="btn add-button btn-radius btn-gray">
                            <i class="fas fa-times"></i>{{'Common.Cancel' | translate}}
                        </button>
                    </li>

                    <li ng-show="wizardStep !=3 && wizardStep !=3 && wizardStep !=0">
                        <button type="button"
                                class="btn btn-radius btn-blue "
                                ng-click="validate(viewForm, true);">
                            <i class="fas fa-angle-left"></i> {{'Common.Previous' | translate}}
                        </button>
                    </li>

                    <li ng-show="wizardStep !=3">
                        <button type="button" class="btn btn-radius btn-blue "
                                ng-click="wizardStep  ==0 ? validate('filter') : (wizardStep ===1 ?   validate('area') : validate('summary'))">
                            {{'Common.Next' | translate}}<i class="fas fa-angle-right"></i>
                        </button>
                    </li>
                    <li ng-show="wizardStep ===3">
                        <button type="submit" ng-click="save();"
                                class="btn add-button btn-radius btn-blue">
                            <i class="fas fa-save"></i>{{'Common.Save' | translate}}
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="modal-dialog">
        <div class="modal-content view-form">
            <div class="modal-body">
                <div class="megalist">
                    <div class="modal-menu">
                        <ul class="list-unstyled">
                            <li><a ng-class="{'active':wizardStep==0}"
                                   ng-click="validate('info') ? wizardStep = 0 : false"> Report Info </a></li>
                            <li><a ng-class="{'active':wizardStep==1}"
                                   ng-click="validate('filter') ? wizardStep = 1 : false">{{'Report.FilterOptions' |
                                translate}}</a></li>
                            <li><a ng-class="{'active':wizardStep==2}"
                                   ng-click="validate('area') ? wizardStep = 2 : false">{{'Report.AreaSelection' |
                                translate }}</a></li>
                            <li><a ng-class="{'active':wizardStep==3}"
                                   ng-click="validate('summary') ? wizardStep = 3 : false">{{'Report.ReportSummary' |
                                translate}}</a></li>
                        </ul>
                    </div>
                    <div>
                        <form name="reportForm" class="form-horizontal form-custom" ng-submit="save()"
                              autocomplete="off" novalidate>

                            <div class="section" id="section1" ng-show="wizardStep === 0">
                                <div class="panel">
                                    <div class="form-group"
                                         ng-class="{'has-error': reportForm.$submitted && reportForm.name.$invalid}">
                                        <label class="control-label">
                                            {{'Report.ReportName' | translate}}
                                            <span class="required-label">(required)</span>
                                        </label>
                                        <input name="name" class="form-control" maxlength="50" required
                                               ng-model="reportModel.name"/>
                                    </div>
                                    <div class="form-group"
                                         ng-class="{'has-error': reportForm.$submitted && reportForm.module_id.$invalid}">
                                        <label class="control-label">
                                            {{'Report.Module' | translate}}
                                            <span class="required-label">(required)</span>
                                        </label>
                                        <select class="form-control"
                                                name="module_id"
                                                required
                                                ng-model="reportModel.module_id"
                                                ng-change="selectModule()"
                                                ng-disabled="id"
                                                ng-options="o.id as o['label_' + language + '_singular'] for o in modules | filter:{display:'!false'}:true | orderNotZero | orderBy:'order'">
                                            <option value="">{{'Common.Select' | translate}}</option>
                                        </select>
                                    </div>
                                    <div class="form-group"
                                         ng-class="{'has-error': reportForm.$submitted && reportForm.category_id.$invalid}">
                                        <label class="control-label">
                                            {{'Report.ReportCategory' | translate}}
                                            <span class="required-label">(required)</span>
                                        </label>
                                        <select class="form-control"
                                                name="category_id"
                                                required
                                                ng-model="reportModel.category_id"
                                                ng-options="o.id as o.name for o in reportCategory | orderBy:'order'">
                                            <option value="">{{'Common.Select' | translate}}</option>
                                        </select>
                                    </div>
                                    <div class="form-group"
                                         ng-class="{'has-error': reportForm.$submitted && reportForm.report_type.$invalid}">
                                        <label class="control-label col-sm-12">
                                            {{'Report.ReportType' | translate}}
                                            <span class="required-label">(required)</span>
                                        </label>

                                        <label class="radio-inline newinput">
                                            <input name="report_type" required type="radio" style="margin-left: -16px;"
                                                   ng-model="reportModel.report_type"
                                                   value="tabular"
                                                   ng-disabled="isEdit">
                                            {{'Report.ListviewReport' | translate}}
                                            <span></span>
                                        </label>
                                        <label class="radio-inline newinput">
                                            <input name="report_type" required type="radio"
                                                   ng-model="reportModel.report_type"
                                                   value="summary"
                                                   style="margin-left: -16px;"
                                                   ng-disabled="isEdit">
                                            {{'Report.SummaryReport' | translate}}
                                            <span></span>
                                        </label>
                                        <label class="radio-inline newinput">
                                            <input name="report_type" required type="radio"
                                                   ng-model="reportModel.report_type"
                                                   value="single"
                                                   style="margin-left: -16px;"
                                                   ng-disabled="isEdit">
                                            {{'Report.Single' | translate}}
                                            <span></span>
                                        </label>

                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-12 control-label">Paylaşım Bilgisi:</label>
                                        <div class="sharing">
                                            <label class="radio-inline newinput">
                                                <input type="radio" ng-model="reportModel.sharing_type" value="me">
                                                {{'View.ShareMe' | translate}}
                                                <span></span>
                                            </label>
                                            <label class="radio-inline newinput">
                                                <input type="radio" ng-model="reportModel.sharing_type"
                                                       value="everybody">
                                                {{'View.ShareEveryone' | translate}}
                                                <span></span>
                                            </label>
                                            <!--<label class="radio-inline newinput">-->
                                            <!--<input type="radio" ng-model="reportModel.sharing_type" value="custom">-->
                                            <!--{{'View.ShareCustom' | translate}}-->
                                            <!--<span></span>-->
                                            <!--</label>-->
                                        </div>
                                        <!--<div class="shared-users" ng-if="reportModel.sharing_type === 'custom'">-->
                                        <!--<label class="control-label">{{'View.SharedUsers' | translate}}:</label>-->
                                        <!--<tags-input name="shares"-->
                                        <!--class="shared-users-input form-control"-->
                                        <!--ng-model="reportModel.shares"-->
                                        <!--display-property="full_name"-->
                                        <!--key-property="id"-->
                                        <!--placeholder="{{'Common.MultiselectPlaceholder' | translate}}"-->
                                        <!--replace-spaces-with-dashes="false"-->
                                        <!--add-from-autocomplete-only="true">-->
                                        <!--<auto-complete source="lookupUser($query)"-->
                                        <!--min-length="0"-->
                                        <!--load-on-focus="true"-->
                                        <!--load-on-empty="true"-->
                                        <!--max-results-to-show="9999"></auto-complete>-->

                                        <!--</tags-input>-->
                                        <!--</div>-->
                                    </div>
                                    <div class="form-group"
                                         ng-show="reportForm.$submitted && (reportForm.reportName.$error.required || reportForm.module.$error.required || reportForm.$error.reportType)">
                                        <div class="callout callout-danger">
                                            <p ng-if="reportForm.reportName.$error.required || reportForm.module.$error.required">
                                                {{'Module.RequiredError' | translate}}
                                            </p>
                                            <p ng-if="reportForm.$error.operations">
                                                {{
                                                'Report.ReportTypeRequiredError' |
                                                translate
                                                }}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="section" id="section2" ng-show="wizardStep === 1">
                                <h4>Filter Criteria</h4>
                                <div class="panel">

                                    <div ng-if="loadingFilter" clas="page-loading">
                                        <i class="fa fa-sm fa-spinner fa-pulse"></i>
                                    </div>
                                    <div class="table-responsive" ng-show="!loadingFilter">
                                        <table class="filter-table">
                                            <thead>
                                            <tr>
                                                <th style="padding-left: 5px; padding-right: 10px;">{{'View.No' |
                                                    translate}}
                                                </th>
                                                <th>{{'View.Field' | translate}}</th>
                                                <th>{{'View.Operator' | translate}}</th>
                                                <th>{{'View.Value' | translate}}</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="filter in reportModel.filterList">
                                                <td class="form-group">
                                                    <span class="filter-no">{{filter.no}}.</span>
                                                </td>
                                                <td class="form-group">
                                                    <select id="field"
                                                            name="field"
                                                            class="form-control ng-animate-disabled"
                                                            ng-options="o as o['label_' + language] for o in module.fields | filter:{deleted:'!true'} | orderBy:'order' track by o.name"
                                                            ng-change="filter.value = null; filter.operator = null;  filter.disabled = false; filter.costumeDate =null "
                                                            ng-model="filter.field">
                                                        <option value="">{{'Common.Select' | translate}}</option>
                                                    </select>
                                                </td>
                                                <td class="form-group">
                                                    <select id="operator"
                                                            name="operator"
                                                            class="form-control ng-animate-disabled"
                                                            ng-options="o as o.label[language] for o in filter.field.operators | orderBy:'order' track by o.order"
                                                            ng-change="operatorChanged(filter.field, $index)"
                                                            ng-model="filter.operator"
                                                            ng-if="!filter.field.lookupModulePrimaryField  || filter.field.lookup_type ==='users'">
                                                        <option value="">{{'Common.Select' | translate}}</option>
                                                    </select>
                                                    <select class="form-control ng-animate-disabled"
                                                            ng-options="o as o.label[language] for o in filter.field.lookupModulePrimaryField.operators | orderBy:'order' track by o.order"
                                                            ng-change="operatorChanged(filter.field, $index)"
                                                            ng-model="filter.operator"
                                                            ng-if="filter.field.lookupModulePrimaryField && filter.field.lookup_type !='users'">
                                                        <option value="">{{'Common.Select' | translate}}</option>
                                                    </select>
                                                </td>
                                                <td class="form-group">
                                                    <input type="text"
                                                           class="form-control ng-animate-disabled"
                                                           ng-model="filter.value"
                                                           ng-disabled="filter.disabled"
                                                           maxlength="100"
                                                           ng-if="!filter.field.lookupModulePrimaryField ? (filter.field.data_type === 'text_single' || filter.field.data_type === 'text_multi' || filter.field.data_type === 'email' || filter.field.data_type === undefined) : (filter.field.lookupModulePrimaryField.data_type === 'text_single' || filter.field.lookupModulePrimaryField.data_type === 'text_multi' || filter.field.lookupModulePrimaryField.data_type === 'email' || filter.field.lookupModulePrimaryField.data_type === undefined)&& filter.field.lookup_type !='users'"/>

                                                    <input type="text"
                                                           class="form-control ng-animate-disabled"
                                                           ng-model="filter.value"
                                                           ng-disabled="filter.disabled"
                                                           maxlength="50"
                                                           numeric
                                                           ng-if="!filter.field.lookupModulePrimaryField ? (filter.field.data_type === 'number' || filter.field.data_type === 'number_auto') : (filter.field.lookupModulePrimaryField.data_type === 'number' || filter.field.lookupModulePrimaryField.data_type === 'number_auto')"/>

                                                    <input type="text"
                                                           class="form-control ng-animate-disabled"
                                                           ng-model="filter.value"
                                                           ng-disabled="filter.disabled"
                                                           maxlength="19"
                                                           places="filter.field.decimal_places || 2"
                                                           number-decimal
                                                           ng-if="!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'number_decimal' : filter.field.lookupModulePrimaryField.data_type === 'number_decimal'"/>

                                                    <input type="text"
                                                           class="form-control ng-animate-disabled"
                                                           ng-model="filter.value"
                                                           ng-disabled="filter.disabled"
                                                           maxlength="50"
                                                           places="filter.field.decimal_places || 2"
                                                           currency-symbol="filter.field.currency_symbol"
                                                           number-currency
                                                           ng-if="!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'currency' : filter.field.lookupModulePrimaryField.data_type === 'currency'"/>

                                                    <select class="form-control ng-animate-disabled pull-left"
                                                            style="margin-right: 8px;"
                                                            ng-model="filter.costumeDate"
                                                            ng-change="dateChange(filter)"
                                                            ng-options="o.value as o.label for o in costumeDateFilter"
                                                            ng-if="!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'date_time' || filter.field.data_type === 'date'  : filter.field.lookupModulePrimaryField.data_type === 'date_time' || filter.field.data_type === 'date'">
                                                        <option value="">{{'Common.Select' | translate}}</option>
                                                    </select>
                                                    <input type="number"
                                                           style="width: 50px;float: left; margin-right: 6px;"
                                                           class="form-control ng-animate-disabled "
                                                           ng-model="filter.valueX"
                                                           ng-change="nextPrevDateChange(filter)"
                                                           ng-class="{'has-error': viewForm.$submitted && viewForm[filter.field.name+$index+'valueX'].$invalid}"
                                                           required
                                                           name="{{filter.field.name+$index+'valueX'}}"
                                                           ng-if="(!filter.field.lookupModulePrimaryField || filter.field.data_type === 'date_time' || filter.field.lookupModulePrimaryField.data_type === 'date') && (filter.costumeDate==='costumeN' || filter.costumeDate==='costumeW' || filter.costumeDate==='costumeM' || filter.costumeDate==='costumeY')">
                                                    <select class="form-control ng-animate-disabled pull-left"
                                                            style="margin-right: 8px; width: 90px;"
                                                            ng-class="{'has-error': viewForm.$submitted && viewForm[filter.field.name+$index+'nextprevdatetype'].$invalid}"
                                                            required
                                                            name="{{filter.field.name+$index+'nextprevdatetype'}}"
                                                            ng-model="filter.nextprevdatetype"
                                                            ng-change="nextPrevDateTypeChange(filter)"
                                                            ng-options="o.value as o.label for o in dateFormat"
                                                            ng-if="(!filter.field.lookupModulePrimaryField || filter.field.data_type === 'date_time' || filter.field.lookupModulePrimaryField.data_type === 'date') && (filter.costumeDate==='costumeN' || filter.costumeDate==='costumeW' || filter.costumeDate==='costumeM' || filter.costumeDate==='costumeY')">
                                                        <option value="">{{'Common.Select' | translate}}</option>
                                                    </select>
                                                    <span style="float: left;padding-top: 6px;"
                                                          ng-if="(!filter.field.lookupModulePrimaryField || filter.field.data_type === 'date_time' || filter.field.lookupModulePrimaryField.data_type === 'date')&& (filter.costumeDate==='costumeN' || filter.costumeDate==='costumeW' || filter.costumeDate==='costumeM' || filter.costumeDate==='costumeY')">
                                                    {{filter.valueX >0 ? ('View.After' | translate) : 'View.Before' | translate   }}
                                                </span>

                                                    <input type="text"
                                                           class="form-control ng-animate-disabled hide"
                                                           ng-model="filter.value"
                                                           ng-if="(!filter.field.lookupModulePrimaryField || filter.field.data_type === 'date_time' || filter.field.lookupModulePrimaryField.data_type === 'date') && (filter.costumeDate==='costumeN' || filter.costumeDate==='costumeW' || filter.costumeDate==='costumeM' || filter.costumeDate==='costumeY')">

                                                    <input type="text"
                                                           class="form-control ng-animate-disabled"
                                                           ng-model="filter.value"
                                                           ng-disabled="filter.disabled"
                                                           data-autoclose="1"
                                                           data-date-type="iso"
                                                           data-min-date="{{(filter.field.validation.min ? (filter.field.validation.min === 'today' ? currentDayMin : filter.field.validation.min) : undefined)}}"
                                                           data-max-date="{{(filter.field.validation.max ? (filter.field.validation.max === 'today' ? currentDayMax : filter.field.validation.max) : undefined)}}"
                                                           data-icon-left="fa fa-chevron-left"
                                                           data-icon-right="fa fa-chevron-right"
                                                           data-placement="bottom-right"
                                                           bs-datepicker
                                                           ng-if="(!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'date' : filter.field.lookupModulePrimaryField.data_type === 'date' )&& filter.costumeDate==='costume'">

                                                    <div class="clearfix datetime-pick"
                                                         ng-if="(!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'date_time' : filter.field.lookupModulePrimaryField.data_type === 'date_time') && filter.costumeDate==='costume'">
                                                        <input type="text"
                                                               class="form-control ng-animate-disabled date-pick"
                                                               ng-model="filter.value"
                                                               ng-change="dateTimeChanged(filter.field)"
                                                               ng-disabled="filter.disabled"
                                                               placeholder="{{'Common.Date' | translate}}"
                                                               data-autoclose="1"
                                                               data-date-type="iso"
                                                               data-min-date="{{(filter.field.validation.min ? (filter.field.validation.min === 'today' ? currentDayMin : filter.field.validation.min) : undefined)}}"
                                                               data-max-date="{{(filter.field.validation.max ? (filter.field.validation.max === 'today' ? currentDayMax : filter.field.validation.max) : undefined)}}"
                                                               data-icon-left="fa fa-chevron-left"
                                                               data-icon-right="fa fa-chevron-right"
                                                               data-placement="bottom-right"
                                                               bs-datepicker>
                                                        <input type="text"
                                                               class="form-control ng-animate-disabled time-pick"
                                                               ng-model="filter.value"
                                                               ng-disabled="!filter.value"
                                                               placeholder="{{'Common.Time' | translate}}"
                                                               data-autoclose="1"
                                                               data-time-type="iso"
                                                               data-icon-up="fa fa-chevron-up"
                                                               data-icon-down="fa fa-chevron-down"
                                                               data-length="1"
                                                               data-minute-step="10"
                                                               data-arrow-behavior="picker"
                                                               data-placement="bottom-right"
                                                               bs-timepicker>
                                                    </div>

                                                    <input type="text"
                                                           class="form-control ng-animate-disabled"
                                                           ng-model="filter.value"
                                                           ng-disabled="filter.disabled"
                                                           placeholder="{{'Common.Time' | translate}}"
                                                           data-autoclose="1"
                                                           data-time-type="iso"
                                                           data-icon-up="fa fa-chevron-up"
                                                           data-icon-down="fa fa-chevron-down"
                                                           data-length="1"
                                                           data-minute-step="10"
                                                           data-arrow-behavior="picker"
                                                           data-placement="bottom-right"
                                                           bs-timepicker
                                                           ng-if="!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'time' : filter.field.lookupModulePrimaryField.data_type === 'time'">

                                                    <select class="form-control ng-animate-disabled"
                                                            ng-model="filter.value"
                                                            ng-disabled="filter.disabled"
                                                            ng-options="o as o.label[language] for o in modulePicklists[!filter.field.lookupModulePrimaryField ? filter.field.picklist_id : filter.field.lookupModulePrimaryField.picklist_id] track by o.id"
                                                            ng-if="!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'picklist' : filter.field.lookupModulePrimaryField.data_type === 'picklist'">
                                                        <option value="">{{'Common.Select' | translate}}</option>
                                                    </select>


                                                    <tags-input class="ng-animate-disabled"
                                                                ng-model="filter.value"
                                                                display-property="labelStr"
                                                                key-property="id"
                                                                placeholder="{{'Common.MultiselectPlaceholder' | translate}}"
                                                                replace-spaces-with-dashes="false"
                                                                add-from-autocomplete-only="true"
                                                                ng-disabled="filter.disabled"
                                                                ng-if="!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'multiselect' : filter.field.lookupModulePrimaryField.data_type === 'multiselect'">
                                                        <auto-complete source="multiselect($query, filter.field)"
                                                                       min-length="0"
                                                                       load-on-focus="true"
                                                                       load-on-empty="true"
                                                                       max-results-to-show="9999"></auto-complete>
                                                    </tags-input>

                                                    <tags-input class="ng-animate-disabled"
                                                                ng-model="filter.value"
                                                                display-property="full_name"
                                                                key-property="id"
                                                                max-tags="1"
                                                                placeholder="{{'Common.Search' | translate}}"
                                                                replace-spaces-with-dashes="false"
                                                                add-from-autocomplete-only="true"
                                                                ng-disabled="filter.disabled"
                                                                ng-if="!filter.field.lookupModulePrimaryField ? (filter.field.data_type === 'lookup' && filter.field.lookup_type === 'users') :  filter.field.lookup_type === 'users'">
                                                        <auto-complete source="lookupUser($query, 'logged_in_user')"
                                                                       min-length="0"
                                                                       load-on-focus="true"
                                                                       load-on-empty="true"
                                                                       max-results-to-show="9999"></auto-complete>
                                                    </tags-input>

                                                    <input type="text"
                                                           class="form-control ng-animate-disabled"
                                                           ng-model="filter.value"
                                                           ng-disabled="filter.disabled"
                                                           maxlength="100"
                                                           ng-if="!filter.field.lookupModulePrimaryField ? (filter.field.data_type === 'lookup' && filter.field.lookup_type != 'users') : (filter.field.lookupModulePrimaryField.data_type === 'lookup' && filter.lookupModulePrimaryField.field.lookup_type != 'users')"/>

                                                    <select class="form-control ng-animate-disabled"
                                                            ng-model="filter.value"
                                                            ng-options="o as o.label[language] for o in modulePicklists['yes_no'] track by o.id"
                                                            ng-if="!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'checkbox' : filter.field.lookupModulePrimaryField.data_type === 'checkbox'">
                                                        <option value="">{{'Common.Select' | translate}}</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="wizard-buttons text-right">
                                        <a href="#/app/reports" class="btn btn-custom">{{'Common.Cancel' |
                                            translate}}</a>
                                        <button type="button" class="btn btn-primary btn-w-sm"
                                                ng-click="wizardStep = 0">
                                            {{'Common.Previous' | translate}} <i class="fa fa-angle-left pull-left"
                                                                                 style="margin-top: 3px;"></i></button>
                                        <button type="button" class="btn btn-primary btn-w-sm"
                                                ng-click="step2()">
                                            {{'Common.Next' | translate}} <i class="fa fa-angle-right pull-right"
                                                                             style="margin-top: 3px;"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="section" id="section3" ng-show="wizardStep === 2">
                                <div class="panel" ng-init="setFields()" ng-if="reportModel.report_type=='tabular'">

                                    <div class="row">
                                        <div class="col-sm-12">
                                            <h4>{{'Report.ViewedArea' | translate}}</h4>

                                            <div class="fields-header">
                                                <span class="title-left">{{'View.AvailableFields' | translate}}</span>
                                                <span class="title-right">{{'View.SelectedFields' | translate}}</span>
                                            </div>
                                            <div class="fields clearfix">
                                                <div id="availableFields" class="container-left">
                                                    <div ng-repeat="field in fields.availableFields"
                                                         ng-class="{'dragable':!field.seperator, 'seperator':field.seperator, 'seperator-main':field.name === 'seperator-main'}">
                                                        {{field.label}} <i class="fa fa-arrows"
                                                                           ng-if="!field.seperator"></i>
                                                    </div>
                                                </div>
                                                <div class="container-middle">
                                                    <i class="fa fa-exchange"></i>
                                                </div>
                                                <div id="selectedFields" class="container-right">
                                                    <div ng-repeat="field in fields.selectedFields"
                                                         class="dragable">{{field.label + ' ' +
                                                        field.labelExt}} <i
                                                                class="fa fa-arrows"></i></div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                </div>

                                <div class="panel" ng-if="reportModel.report_type=='summary'">
                                    <h4>{{'Report.GroupArea' | translate}}</h4>
                                    <div class="form-group"
                                         ng-class="{'has-error': reportForm.$submitted && reportForm.group_field.$invalid}">
                                        <label>
                                            <span class="required-field">*</span>{{
                                            'Report.GroupArea'
                                            | translate
                                            }}:
                                        </label>
                                        <select class="form-control"
                                                name="group_field"
                                                ng-model="reportModel.group_field"
                                                ng-change="changeGroupField()"
                                                required
                                                ng-options="o.name as o.label for o in fields.availableFields">
                                            <option value="">
                                                {{'Common.Select' | translate}}
                                            </option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="sel2">
                                            {{
                                            'Report.OrderArea' |
                                            translate
                                            }}:
                                        </label>
                                        <select class="form-control"
                                                ng-model="reportModel.sort_field" id="sel2"
                                                ng-options="o.name as o.label for o in fields.availableFields">
                                            <option value="">
                                                {{'Common.Select' | translate}}
                                            </option>
                                        </select>
                                    </div>
                                </div>

                                <div class="panel table-responsive">
                                    <h4> {{ 'Report.CalculationFields' | translate}} </h4>

                                    <table class="table">
                                        <thead>
                                        <tr>
                                            <th></th>
                                            <th class="text-center">
                                                {{'Report.sum' | translate}}
                                            </th>
                                            <th class="text-center">
                                                {{'Report.avg' | translate}}
                                            </th>
                                            <th class="text-center">
                                                {{ 'Report.min' | translate }}
                                            </th>
                                            <th class="text-center">
                                                {{'Report.max' | translate }}
                                            </th>
                                            <th class="text-center"></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="field in numberField">
                                            <td> {{field.label}}</td>
                                            <td class="text-center">
                                                <label class="radio-inline newinput">
                                                    <input type="radio"
                                                           ng-model="field.Aggregation"
                                                           ng-click="aggregationChange({field:field.name,aggregation_type:'sum'},field)"
                                                           value="sum-{{field.name}}"
                                                           name="{{ reportModel.report_type === 'summary' || reportModel.report_type ===  'single' ? module.id : field.name }}"
                                                    >
                                                    <span></span>
                                                </label>

                                            </td>
                                            <td class="text-center">
                                                <label class="radio-inline newinput">
                                                    <input type="radio"
                                                           ng-model="field.Aggregation"
                                                           value="avg-{{field.name}}"
                                                           ng-click="aggregationChange({field:field.name,aggregation_type:'avg'},field)"
                                                           name="{{ reportModel.report_type ===  'summary' || reportModel.report_type ===  'single' ? module.id : field.name }}"
                                                           style="">
                                                    <span></span>
                                                </label>
                                            </td>
                                            <td class="text-center">
                                                <label class="radio-inline newinput">
                                                    <input type="radio"
                                                           ng-model="field.Aggregation"
                                                           value="min-{{field.name}}"
                                                           ng-click="aggregationChange({field:field.name,aggregation_type:'min'},field)"
                                                           name="{{ reportModel.report_type ===  'summary' || reportModel.report_type ===  'single' ? module.id : field.name }}"
                                                    >
                                                    <span></span>
                                                </label>
                                            </td>
                                            <td class="text-center">
                                                <label class="radio-inline newinput">
                                                    <input type="radio"
                                                           ng-model="field.Aggregation"
                                                           value="max-{{field.name}}"
                                                           ng-click="aggregationChange({field:field.name,aggregation_type:'max'},field)"
                                                           name="{{ reportModel.report_type ===  'summary' || reportModel.report_type ===  'single' ? module.id : field.name }}"
                                                           style="">
                                                    <span></span>
                                                </label>
                                            </td>
                                            <td class="text-center"
                                                ng-click="removeSelectAggregation(field)">
                                                <input type="button" class="btn add-button btn-radius"
                                                       ng-click="removeSelectAggregation(field)"
                                                       value="Clean"/>
                                            </td>

                                        </tr>
                                        <tr ng-if="reportModel.report_type !=  'tabular'">
                                            <td>
                                                {{'Report.count' | translate}}
                                            </td>
                                            <td colspan="5" class="text-center">
                                                <label class="radio-inline newinput">
                                                    <input type="radio"
                                                           ng-model="countField.Aggregation"
                                                           ng-click="aggregationChange({field:'created_by',aggregation_type:'count'})"
                                                           value="count-created_by"
                                                           name="{{ reportModel.report_type ===  'summary' || reportModel.report_type ===  'single' ? module.id : 'created_at' }}"
                                                           style="">
                                                    <span></span>
                                                </label>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>

                                    <!--<div class="row">-->
                                    <!--<div class="col-sm-12 ">-->
                                    <!--<label style="margin-bottom: 15px;" ng-show="">-->
                                    <!--Not :Eğer-->
                                    <!--herhangi bir seçim-->
                                    <!--alanı seçilmes kayıt saysını-->
                                    <!--hesaplama alana olarak setlenir-->
                                    <!--</label>-->
                                    <!--<br>-->


                                    <!--</div>-->
                                    <!--</div>-->

                                </div>

                                <div class="panel" ng-if="reportModel.report_type=='summary'">
                                    <h4>{{'Report.Chart.Name' | translate}}</h4>
                                    <div class="form-group"
                                         ng-class="{'has-error': reportForm.$submitted && reportForm.chartTypes.$invalid}">
                                        <label for="chartTypes">
                                            {{'Report.Chart.Type' | translate}} :
                                        </label>
                                        <select class="form-control" id="chartTypes"
                                                ng-model="reportModel.chart.type"
                                                name="chartTypes"
                                                required
                                                ng-options="o.name as o.label for o in chartTypes">
                                            <option value="">
                                                {{'Common.Select' | translate}}
                                            </option>
                                        </select>
                                    </div>
                                    <div class="form-group"
                                         ng-class="{'has-error': reportForm.$submitted && reportForm.xaxis_name.$invalid}">
                                        <label for="xaxis_name">
                                            {{
                                            'Report.Chart.XaxisName' |
                                            translate
                                            }}:
                                        </label>
                                        <input class="form-control"
                                               id="xaxis_name"
                                               required
                                               ng-model="reportModel.chart.xaxis_name"
                                               name="xaxis_name"/>
                                    </div>
                                    <div class="form-group"
                                         ng-class="{'has-error': reportForm.$submitted && reportForm.yaxis_name.$invalid}">
                                        <label for="yaxis_name">
                                            {{
                                            'Report.Chart.YaxisName' |
                                            translate
                                            }}:
                                        </label>
                                        <input class="form-control"
                                               id="yaxis_name"
                                               required
                                               ng-model="reportModel.chart.yaxis_name"
                                               name="yaxis_name"/>
                                    </div>
                                </div>

                                <div class="panel" ng-if="reportModel.report_type=='single'">
                                    <h4>{{'Report.Widget.Name' | translate}}</h4>
                                    <div class="form-group"
                                         ng-class="{'has-error': reportForm.$submitted && reportForm.yaxis_name.$invalid}">
                                        <label>
                                            {{
                                            'Report.Widget.Icon' |
                                            translate
                                            }}:
                                        </label>

                                        <button type="button" data-container="form"
                                                class="form-control btn btn-default"
                                                data-placeholder="{{'Common.Icon' | translate}}-"
                                                ng-model="reportModel.widget.icon"
                                                data-html="1" data-toggle="true"
                                                bs-options="icon.value as icon.label for icon in icons"
                                                bs-select>
                                            <span class="caret"></span>
                                        </button>
                                    </div>
                                    <div class="form-group"
                                         ng-class="{'has-error': reportForm.$submitted && reportForm.colorpicker.$invalid}">
                                        <label>
                                            {{
                                            'Report.Widget.Color' |
                                            translate
                                            }}:
                                        </label>
                                        <input name="colorpicker" type="color"
                                               class="form-control"
                                               required
                                               ng-model="reportModel.widget.color">
                                    </div>
                                </div>
                            </div>

                            <div class="section" id="section4" ng-show="wizardStep === 3">
                                <div class="panel">
                                    <h4>Summary</h4>
                                    <div class="row ">
                                        <label class="col-sm-3 control-label">
                                            {{'Report.ReportName' | translate}}:
                                        </label>
                                        <div class="col-sm-5">
                                            <span> {{ reportModel.name }} </span>
                                        </div>
                                    </div>
                                    <div class="row ">
                                        <label class="col-sm-3 control-label">
                                            {{'Report.Module' | translate}}:
                                        </label>
                                        <div class="col-sm-5">
                                            <span> {{ module['label_'+language+'_plural'] }} </span>
                                        </div>
                                    </div>

                                    <div class="row ">
                                        <label class="col-sm-3 control-label">
                                            {{'Report.ReportType' | translate}}:
                                        </label>
                                        <div class="col-sm-5">
                                            <span> {{ reportModel.report_type  === 'summary' ? ('Report.SummaryReport' | translate) :  reportModel.report_type  === 'single' ? ('Report.Single' | translate) :('Report.ListviewReport' | translate) }} </span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

