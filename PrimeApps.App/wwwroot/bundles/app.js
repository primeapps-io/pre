"use strict";angular.module("primeapps",["ngAnimate","ui.router","oc.lazyLoad","ngCookies","mgcrea.ngStrap","ui.bootstrap","pascalprecht.translate","tmh.dynamicLocale","angular-ladda","ui.utils","ngTable","xeditable","angularFileUpload","ui.bootstrap.showErrors","ngToast","blockUI","vr.directives.slider","ui.sortable","ngImgCrop","images-resizer","ui.tree","angular-plupload","dragularModule","angucomplete-alt","ngTagsInput","ui.tinymce","ui.mask","ui.ace","ui.select","ngSanitize","angularResizable","ngclipboard","mentio","mwl.calendar","angular.filter"]).config(["$locationProvider","$compileProvider","$filterProvider","$controllerProvider","$provide","$httpProvider","$qProvider","$sceDelegateProvider","$translateProvider","tmhDynamicLocaleProvider","$datepickerProvider","ngToastProvider","blockUIConfig","$animateProvider","pluploadOptionProvider","config","uiSelectConfig",function(e,r,a,t,l,o,i,n,u,s,c,p,d,g,m,v,f){function h(e){var r=angular.bind(e,e.fromUrl);return e.fromUrl=function(e,a){if(null!==e&&angular.isDefined(e)&&("function"==typeof e&&(e=e.call(e,a)),angular.isString(e)&&routeTemplateUrls&&routeTemplateUrls.length>0))for(var t=0;t<routeTemplateUrls.length;t++)e.indexOf(routeTemplateUrls[t])>-1&&(e+=e.indexOf("?")<0?"?":"&",e+="v="+(new Date).getTime()/1e3);return r(e,a)},e}angular.module("primeapps").controller=t.register,angular.module("primeapps").service=l.service,angular.module("primeapps").factory=l.factory,angular.module("primeapps").directive=r.directive,angular.module("primeapps").filter=a.register,angular.module("primeapps").value=l.value,angular.module("primeapps").constant=l.constant,angular.module("primeapps").provider=l.provider,e.hashPrefix("");var $=[];cdnUrl&&$.push(cdnUrl+"**"),blobUrl&&$.push(blobUrl+"**"),angular.forEach(trustedUrls,function(e){$.push(e.url+"**")}),$.length>0&&($.push("self"),n.resourceUrlWhitelist($)),o.interceptors.push("genericInterceptor");var b=window.localStorage.getItem("NG_TRANSLATE_LANG_KEY");b||(b="en"),customLanguage&&(b=customLanguage),window.localStorage.setItem("NG_TRANSLATE_LANG_KEY",b),moment.locale(b),u.useStaticFilesLoader({prefix:cdnUrl+"locales/",suffix:".json"}).useLocalStorage().preferredLanguage(b).useSanitizeValueStrategy(null);var S=window.localStorage.locale_key||b;s.defaultLocale(S),s.localeLocationPattern("scripts/vendor/locales/angular-locale_{{locale}}.js"),angular.extend(c.defaults,{startWeek:1}),p.configure({verticalPosition:"top",horizontalPosition:"center",className:"info",timeout:5e3,dismissButton:!0}),d.autoBlock=!1,d.message="",d.templateUrl=cdnUrl+"view/common/blockui.html",g.classNameFilter(/^(?:(?!ng-animate-disabled).)*$/),mOxie.Mime.mimes.csv=".csv",m.setOptions({runtimes:"html5",url:"storage/upload",chunk_size:"5mb",multipart:!0,unique_names:!0}),f.theme="bootstrap",f.resetSearchInput=!0,l.decorator("$templateFactory",["$delegate",h])}]).run(["$rootScope","$location","$state","$q","$window","AuthService","AppService","editableOptions","$localStorage","$translate","$cache","helper",function(e,r,a,t,l,o,i,n,u,s,c,p){n.theme="bs3",e.theme=u.read("theme");var d=p.parseQueryString(l.location.hash.substr(2)),g=d.lang,m=o.isAuthenticated();return e.preview=preview,!g||"en"!==g&&"tr"!==g||(u.write("NG_TRANSLATE_LANG_KEY",g),s.use(g),e.language=g),m?(e.$on("$stateChangeStart",function(){try{e.currentPath=r.$$url}catch(a){return}}),void(e.app="crm")):void(l.location.href="/")}]);
"use strict";angular.module("primeapps").factory("genericInterceptor",["$q","$injector","$window","$localStorage","$filter","ngToast","$cookies","$rootScope",function(e,r,t,a,n,o,s,c){return{request:function(e){e.headers=e.headers||{};var r=a.read("access_token");(blobUrl&&e.url.indexOf(blobUrl)>-1||routeTemplateUrls&&routeTemplateUrls.length>0&&routeTemplateUrls.indexOf(e.url)>-1)&&(e.headers["Access-Control-Allow-Origin"]="*"),r&&e.url.indexOf("/token")<0&&(""===blobUrl||e.url.indexOf(blobUrl)<0)&&(!routeTemplateUrls||routeTemplateUrls.length<1||routeTemplateUrls.indexOf(e.url)<0)&&(e.headers.Authorization="Bearer "+r),c.branchAvailable&&(e.headers.branch_id=c.user.branchId);var t=s.get("app_id"),n=s.get("tenant_id");if(t&&(e.headers["X-App-Id"]=t),n&&(e.headers["X-Tenant-Id"]=n),trustedUrls.length>0){var o=function(e){switch(e){case"X-User-Id":case"x-user-id":case"user_id":return c.user.id;case"X-Tenant-Id":case"x-tenant-id":case"tenant_id":return c.user.tenant_id;case"X-App-Id":case"x-app-id":case"app_id":return t;case"X-Auth-Key":case"x-auth-key":return encryptedUserId;case"X-Branch-Id":case"x-branch-id":case"branch_id":return c.branchAvailable?c.user.branchId:"";case"X-Tenant-Language":case"x-tenant-language":return c.user.tenant_language?c.user.tenant_language:""}};angular.forEach(trustedUrls,function(r){e.url.indexOf(r.url)>-1&&(r.headers&&angular.forEach(r.headers,function(r,t){r.indexOf("::dynamic")>-1?e.headers[t]=o(t):e.headers[t]=r}),e.headers["Access-Control-Allow-Origin"]="*")})}return e},responseError:function(r){return 401===r.status?r.config.url.indexOf("/token")>-1?e.reject(r):void("Unauthorized"===r.statusText?(a.remove("access_token"),a.remove("refresh_token"),t.location.href="/logout"):t.location.href="/"):500===r.status&&r.config.url.indexOf("/User/MyAccount")>-1?(a.remove("access_token"),a.remove("refresh_token"),t.location.href="/logout",e.reject(r)):402===r.status?(t.location.href="#/paymentform",e.reject(r)):403===r.status?(t.location.href="#/app/dashboard",o.create({content:n("translate")("Common.Forbidden"),className:"danger"}),e.reject(r)):404===r.status?(r.config.ignoreNotFound||(t.location.href="#/app/dashboard",o.create({content:n("translate")(r.config.url.indexOf("/module")>-1?"Common.NotFoundRecord":"Common.NotFound"),className:"warning"})),e.reject(r)):navigator.onLine&&421!==r.status&&429!==r.status?400===r.status||409===r.status?e.reject(r):(o.create({content:n("translate")("Common.Error"),className:"danger"}),e.reject(r)):(o.create({content:n("translate")("Common.NetworkError"),className:"warning"}),e.reject(r))}}}]);
"use strict";var sectionComponents={},currentSectionComponentsTemplate=[],replaceDynamicValues=function(e){var r=e.split("{appConfigs.");if(r.length>1)for(var t in r)if(r.hasOwnProperty(t)){if(!r[t])continue;var l=r[t].split("}")[0];e=e.replace("{appConfigs."+l+"}",appConfigs[l])}return e},loadSectionComponents=function(e,r,t){if(currentSectionComponentsTemplate=[],account.modules){var l=e("filter")(account.modules,{name:r},!0)[0].id;if(sectionComponents["component"+l])for(var o=sectionComponents["component"+l],n=0;n<o.length;n++){var s=angular.fromJson(o[n].content).files;angular.forEach(s,function(e){t.push(replaceDynamicValues(e))}),currentSectionComponentsTemplate.push(replaceDynamicValues(angular.fromJson(o[n].content).app.templateUrl))}}};angular.module("primeapps").config(["$stateProvider","$urlRouterProvider",function(e,r){if(token&&(window.localStorage.access_token=token),window.localStorage.getItem("access_token")){if(e.state("app",{url:"/app","abstract":!0,templateUrl:"view/app.html",controller:"AppController",resolve:{AppService:"AppService",start:["$rootScope","AppService",function(e,r){return e.user?void 0:r.getMyAccount()}]}}),e.state("app.home",{url:"/home",views:{app:{templateUrl:cdnUrl+"view/app/home/home.html",controller:"HomeController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/home/homeController.js",cdnUrl+"view/app/directory/directoryDirective.js"])}]}}).state("app.dashboard",{url:"/dashboard",views:{app:{templateUrl:cdnUrl+"view/app/dashboard/dashboard.html",controller:"DashboardController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load(["scripts/vendor/angular-fusioncharts.js",cdnUrl+"view/app/dashboard/dashboardService.js",cdnUrl+"view/app/dashboard/dashboardController.js"])}]}}).state("app.moduleList",{url:"/modules/:type?viewid",views:{app:{templateUrl:cdnUrl+"view/app/module/moduleList.html",controller:"ModuleListController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/module/moduleListController.js",cdnUrl+"view/app/module/moduleFormController.js",cdnUrl+"view/app/email/bulkEMailController.js",cdnUrl+"view/app/sms/bulkSMSController.js",cdnUrl+"view/app/actionbutton/actionButtonFrameController.js",cdnUrl+"view/app/email/templateService.js",cdnUrl+"view/app/leave/collectiveLeaveController.js",cdnUrl+"view/app/module/exportDataController.js"])}]}}).state("app.moduleDetail",{url:"/module/:type?id?ptype?pid?rptype?rtab?pptype?ppid?prtab?rpptype?rppid?rprtab?back?freeze",views:{app:{templateUrl:cdnUrl+"view/app/module/moduleDetail.html",controller:"ModuleDetailController"}},resolve:{AppService:"AppService",plugins:["$rootScope","$state","$$animateJs","$ocLazyLoad","$filter","AppService",function(e,r,t,l,o,n){var s=[cdnUrl+"view/app/module/moduleDetailController.js",cdnUrl+"view/app/module/moduleFormModalController.js",cdnUrl+"view/app/email/bulkEMailController.js",cdnUrl+"view/app/module/moduleAddModalController.js",cdnUrl+"view/app/email/singleEmailController.js",cdnUrl+"view/app/sms/singleSMSController.js",cdnUrl+"view/app/actionbutton/actionButtonFrameController.js",cdnUrl+"view/app/location/locationFormModalController.js",cdnUrl+"view/app/email/templateService.js"];if(window.location.hash.split("/")[3]){var a=window.location.hash.split("/")[3];a.search("/?")>-1&&(a=a.split("?")[0])}return a&&loadSectionComponents(o,a,s),l.load(s)}]}}).state("app.moduleForm",{url:"/moduleForm/:type?stype?id?ptype?pid?rtab?pptype?ppid?prtab?back?clone?revise?many?field?value",views:{app:{templateUrl:cdnUrl+"view/app/module/moduleForm.html",controller:"ModuleFormController"}},resolve:{AppService:"AppService",plugins:["$rootScope","$state","$$animateJs","$ocLazyLoad","$filter","AppService",function(e,r,t,l,o,n){var s=[cdnUrl+"view/app/module/moduleFormController.js",cdnUrl+"view/app/module/moduleFormModalController.js",cdnUrl+"view/app/actionbutton/actionButtonFrameController.js"];if(window.location.hash.split("/")[3]){var a=window.location.hash.split("/")[3];a.search("/?")>-1&&(a=a.split("?")[0])}return googleMapsApiKey&&"your-google-maps-api-key"!==googleMapsApiKey&&s.push({type:"js",path:"https://maps.googleapis.com/maps/api/js?key="+googleMapsApiKey+"&libraries=places"}),a&&loadSectionComponents(o,a,s),l.load(s)}]}}).state("app.viewForm",{url:"/viewForm/:type?id",views:{app:{templateUrl:cdnUrl+"view/app/view/viewForm.html",controller:"ViewFormController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/view/viewFormController.js",cdnUrl+"view/app/view/viewService.js"])}]}}).state("app.tasks",{url:"/tasks",views:{app:{templateUrl:cdnUrl+"view/app/tasks/tasks.html",controller:"TaskController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/tasks/taskController.js",cdnUrl+"view/app/tasks/taskService.js",cdnUrl+"view/app/tasks/taskDirective.js"])}]}}).state("app.documents",{url:"/documents/:type?id",views:{app:{templateUrl:cdnUrl+"view/app/documents/documents.html",controller:"DocumentController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/documents/documentController.js"])}]}}).state("app.calendar",{url:"/calendar",views:{app:{templateUrl:cdnUrl+"view/app/calendar/calendar.html",controller:"CalendarController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/calendar/calendarController.js",cdnUrl+"view/app/module/moduleFormModalController.js"])}]}}).state("app.documentSearch",{url:"/documentSearch",views:{app:{templateUrl:cdnUrl+"view/app/documents/advDocumentSearch.html",controller:"AdvDocumentSearchController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/documents/advDocumentSearchController.js"])}]}}).state("app.timesheet",{url:"/timesheet?user?project?month?ctype",views:{app:{templateUrl:cdnUrl+"view/app/timesheet/timesheet.html",controller:"TimesheetController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/timesheet/timesheetController.js",cdnUrl+"view/app/timesheet/timesheetModalController.js",cdnUrl+"view/app/timesheet/timesheetFrameController.js"])}]}}).state("app.timesheetList",{url:"/timesheetList",views:{app:{templateUrl:cdnUrl+"view/app/timesheet/timesheetList.html",controller:"TimesheetListController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/timesheet/timesheetListController.js"])}]}}).state("app.newsfeed",{url:"/newsfeed",views:{app:{templateUrl:cdnUrl+"view/app/newsfeed/newsfeed.html",controller:"NewsfeedController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/newsfeed/newsfeedController.js",cdnUrl+"view/app/module/moduleFormModalController.js"])}]}}).state("app.import",{url:"/import/:type",views:{app:{templateUrl:cdnUrl+"view/app/data/import.html",controller:"ImportController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load(["scripts/vendor/xlsx.core.min.js",cdnUrl+"view/app/data/importController.js",cdnUrl+"view/app/data/importService.js"])}]}}).state("app.importCsv",{url:"/importcsv/:type",views:{app:{templateUrl:cdnUrl+"view/app/data/csv/import.html",controller:"ImportController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/data/csv/importController.js",cdnUrl+"view/app/data/csv/importService.js"])}]}}).state("app.leadconvert",{url:"/leadconvert?id",views:{app:{templateUrl:cdnUrl+"view/app/convert/leadConvert.html",controller:"LeadConvertController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/convert/leadConvertController.js",cdnUrl+"view/app/convert/leadConvertService.js"])}]}}).state("app.personalconvert",{url:"/personalconvert?id",views:{app:{templateUrl:"view/app/convert/personalConvert.html",controller:"PersonalConvertController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load(["view/app/convert/personalConvertController.js?v="+version,"view/app/convert/personalConvertService.js?v="+version])}]}}).state("app.quoteconvert",{url:"/quoteconvert?id",views:{app:{templateUrl:cdnUrl+"view/app/convert/quoteConvert.html",controller:"QuoteConvertController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/convert/quoteConvertController.js",cdnUrl+"view/app/convert/quoteConvertService.js"])}]}}).state("app.analytics",{url:"/analytics?id",views:{app:{templateUrl:cdnUrl+"view/app/analytics/analytics.html",controller:"AnalyticsController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/analytics/analyticsService.js",cdnUrl+"view/app/analytics/analyticsController.js"])}]}}).state("app.analyticsForm",{url:"/analyticsForm?id",views:{app:{templateUrl:cdnUrl+"view/app/analytics/analyticsForm.html",controller:"AnalyticsFormController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/analytics/analyticsService.js",cdnUrl+"view/app/analytics/analyticsFormController.js"])}]}}).state("app.reports",{url:"/reports?categoryId?id",views:{app:{templateUrl:cdnUrl+"view/app/reports/reportCategory.html",controller:"ReportsController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load(["scripts/vendor/angular-fusioncharts.js",cdnUrl+"view/app/reports/reportsService.js",cdnUrl+"view/app/reports/reportCategoryController.js"])}]}}).state("app.timetracker",{url:"/timetracker?user?year?month?week",views:{app:{templateUrl:cdnUrl+"view/app/timesheet/timetracker.html",controller:"TimetrackerController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/timesheet/timetrackerController.js",cdnUrl+"view/app/timesheet/timetrackerModalController.js",cdnUrl+"view/app/timesheet/timetrackerService.js"])}]}}).state("app.expense",{url:"/expense?user?year?month?week",views:{app:{templateUrl:cdnUrl+"view/app/expensesheet/expense.html",controller:"ExpenseController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/expensesheet/expenseController.js",cdnUrl+"view/app/module/moduleFormModalController.js"])}]}}).state("app.report",{url:"/report",views:{app:{templateUrl:cdnUrl+"view/app/reports/createReport.html",controller:"CreateReportController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/reports/reportsService.js",cdnUrl+"view/app/reports/createReportController.js"])}]}}).state("app.directory",{url:"/directory?id",views:{app:{templateUrl:cdnUrl+"view/app/directory/directoryDetail.html",controller:"DirectoryDetailController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/directory/directoryDetailController.js",cdnUrl+"view/app/directory/directoryDirective.js"])}]}}),e.state("app.setup",{url:"/setup","abstract":!0,views:{app:{templateUrl:cdnUrl+"view/setup/setup.html",controller:"SetupController"}},resolve:{start:["$rootScope","$q","$state","AppService",function(e,r,t,l){var o=r.defer();return e.user?o.resolve():l.getMyAccount().then(function(){o.resolve()}),o.promise}]}}).state("app.setup.settings",{url:"/settings",views:{app:{templateUrl:cdnUrl+"view/setup/settings/settings.html",controller:"SettingController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/settings/settingController.js",cdnUrl+"view/setup/settings/settingService.js"])}]}}).state("app.setup.general",{url:"/general",views:{app:{templateUrl:cdnUrl+"view/setup/general/generalSettings.html",controller:"GeneralSettingsController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/general/generalSettingsController.js",cdnUrl+"view/setup/general/generalSettingsService.js"])}]}}).state("app.setup.organization",{url:"/organization",views:{app:{templateUrl:cdnUrl+"view/setup/organization/organization.html",controller:"OrganizationController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/organization/organizationController.js",cdnUrl+"view/setup/organization/organizationService.js"])}]}}).state("app.setup.notifications",{url:"/notifications",views:{app:{templateUrl:cdnUrl+"view/setup/notifications/notifications.html",controller:"NotificationController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/notifications/notificationController.js",cdnUrl+"view/setup/notifications/notificationService.js"])}]}}).state("app.setup.users",{url:"/users",views:{app:{templateUrl:cdnUrl+"view/setup/users/users.html",controller:"UserController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/users/userController.js",cdnUrl+"view/setup/users/userService.js",cdnUrl+"view/setup/workgroups/workgroupService.js",cdnUrl+"view/setup/profiles/profileService.js",cdnUrl+"view/setup/roles/roleService.js",cdnUrl+"view/setup/usercustomshares/userCustomShareService.js",cdnUrl+"view/setup/license/licenseService.js"])}]}}).state("app.setup.profiles",{url:"/profiles",views:{app:{templateUrl:cdnUrl+"view/setup/profiles/profiles.html",controller:"ProfileController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/profiles/profileController.js",cdnUrl+"view/setup/profiles/profileService.js"])}]}}).state("app.setup.profile",{url:"/profile?id&clone",views:{app:{templateUrl:cdnUrl+"view/setup/profiles/profileForm.html",controller:"ProfileFormController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/profiles/profileFormController.js",cdnUrl+"view/setup/profiles/profileService.js"])}]}}).state("app.setup.roles",{url:"/roles",views:{app:{templateUrl:cdnUrl+"view/setup/roles/roles.html",controller:"RoleController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/roles/roleController.js",cdnUrl+"view/setup/roles/roleService.js"])}]}}).state("app.setup.role",{url:"/role?id&reportsTo",views:{app:{templateUrl:cdnUrl+"view/setup/roles/roleForm.html",controller:"RoleFormController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/roles/roleFormController.js",cdnUrl+"view/setup/roles/roleService.js"])}]}}).state("app.setup.modules",{url:"/modules",views:{app:{templateUrl:cdnUrl+"view/setup/modules/modulesSetup.html",controller:"ModuleSetupController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/modules/moduleSetupController.js",cdnUrl+"view/setup/modules/moduleSetupService.js",cdnUrl+"view/setup/license/licenseService.js"])}]}}).state("app.setup.module",{url:"/module?id&clone&redirect",views:{app:{templateUrl:cdnUrl+"view/setup/modules/moduleSetupForm.html",controller:"ModuleFormSetupController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/modules/moduleSetupFormController.js",cdnUrl+"view/setup/modules/moduleSetupLayoutController.js",cdnUrl+"view/setup/modules/moduleSetupService.js",cdnUrl+"view/app/location/locationFormModalController.js"])}]}}).state("app.setup.modulerelations",{url:"/module/relations/:module",views:{app:{templateUrl:cdnUrl+"view/setup/modules/moduleRelations.html",controller:"ModuleRelationController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/modules/moduleRelationController.js",cdnUrl+"view/setup/modules/moduleSetupService.js"])}]}}).state("app.setup.moduledependencies",{url:"/module/dependencies/:module",views:{app:{templateUrl:cdnUrl+"view/setup/modules/moduleDependencies.html",controller:"ModuleDependencyController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/modules/moduleDependencyController.js",cdnUrl+"view/setup/modules/moduleSetupService.js"])}]}}).state("app.setup.actionButtons",{url:"/module/actionButtons/:module",views:{app:{templateUrl:cdnUrl+"view/setup/modules/actionButtons.html",controller:"ActionButtonsController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/modules/actionButtonsController.js",cdnUrl+"view/setup/modules/moduleSetupService.js"])}]}}).state("app.setup.moduleProfileSettings",{url:"/module/moduleProfileSettings/:module",views:{app:{templateUrl:cdnUrl+"view/setup/modules/moduleProfileSettings.html",controller:"ModuleProfileSettingController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/modules/moduleProfileSettingsController.js",cdnUrl+"view/setup/modules/moduleSetupService.js"])}]}}).state("app.setup.leadconvertmap",{url:"/leadconvertmap",views:{app:{templateUrl:cdnUrl+"view/setup/convert/leadConvertMap.html",controller:"LeadConvertMapController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/convert/leadConvertMapController.js",cdnUrl+"view/setup/convert/convertMapService.js"])}]}}).state("app.setup.candidateconvertmap",{url:"/candidateconvertmap",views:{app:{templateUrl:cdnUrl+"view/setup/convert/candidateConvertMap.html",controller:"CandidateConvertMapController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/convert/candidateConvertMapController.js",cdnUrl+"view/setup/convert/convertMapService.js"])}]}}).state("app.setup.quoteconvertmap",{url:"/quoteconvertmap",views:{app:{templateUrl:cdnUrl+"view/setup/convert/quoteConvertMap.html",controller:"quoteConvertMapController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/convert/quoteConvertMapController.js",cdnUrl+"view/setup/convert/convertMapService.js"])}]}}).state("app.setup.import",{url:"/importhistory",views:{app:{templateUrl:cdnUrl+"view/setup/importhistory/importHistory.html",controller:"ImportHistoryController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/importhistory/importHistoryController.js",cdnUrl+"view/setup/importhistory/importHistoryService.js"])}]}}).state("app.setup.messaging",{url:"/messaging",views:{app:{templateUrl:cdnUrl+"view/setup/messaging/messaging.html",controller:"MessagingController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/messaging/messagingController.js",cdnUrl+"view/setup/messaging/messagingService.js"])}]}}).state("app.setup.office",{url:"/office",views:{app:{templateUrl:cdnUrl+"view/setup/office/office.html",controller:"OfficeController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/office/officeController.js",cdnUrl+"view/setup/office/officeService.js"])}]}}).state("app.setup.phone",{url:"/phone",views:{app:{templateUrl:cdnUrl+"view/setup/phone/phone.html",controller:"PhoneSettingsController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/phone/phoneSettingsController.js",cdnUrl+"view/setup/phone/phoneSettingsService.js"])}]}}).state("app.setup.auditlog",{url:"/auditlog",views:{app:{templateUrl:cdnUrl+"view/setup/auditlog/auditlogs.html",controller:"AuditLogController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/auditlog/auditLogController.js",cdnUrl+"view/setup/auditlog/auditLogService.js"])}]}}).state("app.setup.templates",{url:"/templates",views:{app:{templateUrl:cdnUrl+"view/setup/templates/templates.html",controller:"TemplateController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/templates/templateService.js",cdnUrl+"view/setup/templates/templateController.js"])}]}}).state("app.setup.template",{url:"/template?id",views:{app:{templateUrl:cdnUrl+"view/setup/templates/templateForm.html",controller:"TemplateFormController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/templates/templateService.js",cdnUrl+"view/setup/templates/templateFormController.js"])}]}}).state("app.setup.templateguide",{url:"/templateguide",views:{app:{templateUrl:cdnUrl+"view/setup/templates/templateGuide.html",controller:"TemplateGuideController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/templates/templateGuideController.js"])}]}}).state("app.setup.menu",{url:"/menu",views:{app:{templateUrl:cdnUrl+"view/setup/menu/menu.html",controller:"MenuController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/menu/menuController.js",cdnUrl+"view/setup/menu/menuService.js"])}]}}).state("app.setup.menu_list",{url:"/menu_list",views:{app:{templateUrl:cdnUrl+"view/setup/menu/menuList.html",controller:"MenuListController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/menu/menuListController.js",cdnUrl+"view/setup/menu/menuService.js"])}]}}).state("app.setup.workflows",{url:"/workflows",views:{app:{templateUrl:cdnUrl+"view/setup/workflow/workflows.html",controller:"WorkflowController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/workflow/workflowController.js",cdnUrl+"view/setup/workflow/workflowService.js"])}]}}).state("app.setup.workflow",{url:"/workflow?id",views:{app:{templateUrl:cdnUrl+"view/setup/workflow/workflowForm.html",controller:"WorkflowFormController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/workflow/workflowFormController.js",cdnUrl+"view/setup/workflow/workflowService.js"])}]}}).state("app.setup.approvel_process",{url:"/approvel_process",views:{app:{templateUrl:cdnUrl+"view/setup/approvel_process/approvelProcesses.html",controller:"ApprovelProcessController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/approvel_process/approvelProcessController.js",cdnUrl+"view/setup/approvel_process/approvelProcessService.js"])}]}}).state("app.setup.help",{url:"/help",views:{app:{templateUrl:cdnUrl+"view/setup/help/helpPage.html",controller:"HelpController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/help/helpController.js"])}]}}).state("app.setup.helpside",{url:"/helpside",views:{app:{templateUrl:cdnUrl+"view/setup/help/helpPageSide.html",controller:"HelpController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/help/helpController.js"])}]}}).state("app.setup.helpsides",{url:"/helpsides",views:{app:{templateUrl:cdnUrl+"view/setup/help/helpPageSides.html",controller:"HelpController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/help/helpController.js"])}]}}).state("app.setup.approvel",{url:"/approvel?id",views:{app:{templateUrl:cdnUrl+"view/setup/approvel_process/approvelProcessForm.html",controller:"ApprovelProcessFormController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/approvel_process/approvelProcessFormController.js",cdnUrl+"view/setup/approvel_process/approvelProcessService.js"])}]}}).state("app.setup.warehouse",{url:"/warehouse",views:{app:{templateUrl:cdnUrl+"view/setup/warehouse/warehouse.html",controller:"WarehouseController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/app/analytics/analyticsService.js",cdnUrl+"view/setup/warehouse/warehouseController.js"])}]}}).state("app.setup.usergroups",{url:"/usergroups",views:{app:{templateUrl:cdnUrl+"view/setup/usergroups/userGroups.html",controller:"UserGroupController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/usergroups/userGroupController.js",cdnUrl+"view/setup/usergroups/userGroupService.js"])}]}}).state("app.setup.usercustomshares",{url:"/usercustomshares",views:{app:{templateUrl:cdnUrl+"view/setup/usercustomshares/userCustomShares.html",controller:"UserCustomShareController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/usercustomshares/userCustomShareController.js",cdnUrl+"view/setup/usercustomshares/userCustomShareService.js"])}]}}).state("app.setup.usercustomshare",{url:"/usercustomshare?id&clone",views:{app:{templateUrl:cdnUrl+"view/setup/usercustomshares/userCustomShareForm.html",controller:"UserCustomShareFormController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/usercustomshares/userCustomShareFormController.js",cdnUrl+"view/setup/usercustomshares/userCustomShareService.js"])}]}}).state("app.setup.outlook",{url:"/outlook",views:{app:{templateUrl:cdnUrl+"view/setup/outlook/outlook.html",controller:"OutlookController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/outlook/outlookController.js",cdnUrl+"view/setup/outlook/outlookService.js"])}]}}).state("app.setup.usergroup",{url:"/usergroup?id&clone",views:{app:{templateUrl:cdnUrl+"view/setup/usergroups/userGroupForm.html",controller:"UserGroupFormController"}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load([cdnUrl+"view/setup/usergroups/userGroupFormController.js",cdnUrl+"view/setup/usergroups/userGroupService.js"])}]}}),e.state("paymentform",{url:"/paymentform",templateUrl:cdnUrl+"view/app/payment/paymentForm.html",controller:"PaymentFormController"}),""!==components){var t=angular.fromJson(components);angular.forEach(t,function(r){if(r.content){var t=[],l=angular.fromJson(r.content);if(1001===r.place)return void(sectionComponents["component"+r.module_id]?sectionComponents.push(r):(sectionComponents["component"+r.module_id]=[],sectionComponents["component"+r.module_id].push(r)));l.app.templateUrl=replaceDynamicValues(l.app.templateUrl);for(var o="t"===l.local?"views/app/"+r.name+"/":blobUrl+"/components/"+("app"===l.level||preview?"app-"+applicationId:"tenant-"+tenantId)+"/"+r.name+"/",n=0;n<l.files.length;n++)l.files[n]=replaceDynamicValues(l.files[n]),t.push(0===l.files[n].lastIndexOf("http",0)?l.files[n]:o+l.files[n]);e.state("app."+r.name,{cache:!1,url:"/"+l.url,views:{app:{templateUrl:function(e){var r="?";for(var t in e)e[t]&&(r+=t+"="+e[t]+"&");r=r.substring(0,r.length-1);var n=0===l.app.templateUrl.lastIndexOf("http",0)?l.app.templateUrl:o+l.app.templateUrl;return r.length>1&&(n+=r),n},controller:l.app.controller}},resolve:{plugins:["$$animateJs","$ocLazyLoad",function(e,r){return r.load(t)}]}})}})}r.otherwise("/app/dashboard")}}]);
"use strict";angular.module("primeapps").constant("config",{apiUrl:"api/",clientId:"00000000000000000000000000000000",planIdMembers:"7673E999-18FB-497F-A958-84DCA43031CC",planIdUsers:"F89E4FBF-A50F-40BA-BBEC-FE027F3F1524"}).constant("blacklist",{passwords:[]});
"use strict";angular.module("primeapps").constant("taskDate",{today:(new Date).setHours(23,59,59,0),tomorrow:(new Date).setHours(47,59,59,0),nextWeek:(new Date).setHours(191,59,59,0),future:new Date("2100-12-12").getTime()}).constant("entityTypes",{user:"11111111-1111-1111-1111-111111111111",task:"22222222-2222-2222-2222-222222222222",document:"33333333-3333-3333-3333-333333333333",note:"44444444-4444-4444-4444-444444444444",comment:"55555555-5555-5555-5555-555555555555"}).constant("component",{avatars:1,tasks:2,documents:4,entities:8,users:16,licenses:32}).constant("operations",{read:"read",modify:"modify",write:"write",remove:"remove"}).constant("dataTypes",{text_single:{name:"text_single",label:{en:"Text (Single Line)",tr:"Yazı (Tek Satır)"},operators:["is","is_not","contains","not_contain","starts_with","ends_with","empty","not_empty"],order:1},text_multi:{name:"text_multi",label:{en:"Text (Multi Line)",tr:"Yazı (Çok Satır)"},operators:["is","is_not","contains","not_contain","starts_with","ends_with","empty","not_empty"],order:2},number:{name:"number",label:{en:"Number",tr:"Sayı"},operators:["equals","not_equal","greater","greater_equal","less","less_equal","empty","not_empty"],order:3},number_auto:{name:"number_auto",label:{en:"Number (Auto)",tr:"Sayı (Otomatik)"},operators:["equals","not_equal","greater","greater_equal","less","less_equal","empty","not_empty"],order:4},number_decimal:{name:"number_decimal",label:{en:"Number (Decimal)",tr:"Sayı (Ondalık)"},operators:["equals","not_equal","greater","greater_equal","less","less_equal","empty","not_empty"],order:5},currency:{name:"currency",label:{en:"Currency",tr:"Para"},operators:["equals","not_equal","greater","greater_equal","less","less_equal","empty","not_empty"],order:6},date:{name:"date",label:{en:"Date",tr:"Tarih"},operators:["equals","not_equal","greater","greater_equal","less","less_equal","empty","not_empty"],order:7},date_time:{name:"date_time",label:{en:"Date / Time",tr:"Tarih / Saat"},operators:["equals","not_equal","greater","greater_equal","less","less_equal","empty","not_empty"],order:8},time:{name:"time",label:{en:"Time",tr:"Saat"},operators:["equals","not_equal","greater","greater_equal","less","less_equal","empty","not_empty"],order:9},email:{name:"email",label:{en:"E-Mail",tr:"E-Posta"},operators:["is","is_not","contains","not_contain","starts_with","ends_with","empty","not_empty"],order:10},picklist:{name:"picklist",label:{en:"Pick List",tr:"Seçim Listesi"},operators:["is","is_not","empty","not_empty"],order:11},multiselect:{name:"multiselect",label:{en:"Multi Select",tr:"Çoklu Seçim"},operators:["contains","not_contain","is","is_not","empty","not_empty"],order:12},lookup:{name:"lookup",label:{en:"Lookup",tr:"Arama"},operators:[],order:13},checkbox:{name:"checkbox",label:{en:"Check Box",tr:"Onay Kutusu"},operators:["equals","not_equal"],order:14},document:{name:"document",label:{en:"Document",tr:"Doküman"},operators:["starts_with","is"],order:15},url:{name:"url",label:{en:"Url",tr:"Url"},operators:["is","is_not","contains","not_contain","starts_with","ends_with","empty","not_empty"],order:16},location:{name:"location",label:{en:"Location",tr:"Konum"},operators:["is","is_not","contains","not_contain","starts_with","ends_with","empty","not_empty"],order:17},image:{name:"image",label:{en:"Image",tr:"Resim"},operators:["is","is_not","contains","not_contain","starts_with","ends_with","empty","not_empty"],order:18},rating:{name:"rating",label:{en:"Rating",tr:"Derecelendirme"},operators:["equals","not_equal","greater","greater_equal","less","less_equal","empty","not_empty"],order:19},tag:{name:"tag",label:{en:"Tag",tr:"Tag"},operators:["contains","not_contain","is","is_not","empty","not_empty"],order:20}}).constant("operators",{contains:{name:"contains",label:{en:"contains",tr:"içerir"},order:1},not_contain:{name:"not_contain",label:{en:"doesn't contain",tr:"içermez"},order:2},is:{name:"is",label:{en:"is",tr:"eşit"},order:3},is_not:{name:"is_not",label:{en:"isn't",tr:"eşit değil"},order:4},equals:{name:"equals",label:{en:"equals",tr:"eşit"},order:5},not_equal:{name:"not_equal",label:{en:"doesn't equal",tr:"eşit değil"},order:6},starts_with:{name:"starts_with",label:{en:"starts with",tr:"ile başlar"},order:7},ends_with:{name:"ends_with",label:{en:"ends with",tr:"ile biter"},order:8},empty:{name:"empty",label:{en:"empty",tr:"boş"},order:9},not_empty:{name:"not_empty",label:{en:"not empty",tr:"boş değil"},order:10},greater:{name:"greater",label:{en:"greater",tr:"büyük"},order:11},greater_equal:{name:"greater_equal",label:{en:"greater or equal",tr:"büyük eşit"},order:12},less:{name:"less",label:{en:"less",tr:"küçük"},order:13},less_equal:{name:"less_equal",label:{en:"less or equal",tr:"küçük eşit"},order:14}}).constant("activityTypes",[{type:1,id:1,label:{en:"Task",tr:"Görev"},system_code:"task",value:"task",order:1,hidden:!1},{type:1,id:2,label:{en:"Event",tr:"Etkinlik"},system_code:"event",value:"event",order:2,hidden:!1},{type:1,id:3,label:{en:"Call",tr:"Arama"},system_code:"call",value:"call",order:3,hidden:!1}]).constant("transactionTypes",[{type:1,id:350,label:{en:"Collection",tr:"Tahsilat"},system_code:"collection",value:"collection",order:1,show:!0},{type:2,id:351,label:{en:"Payment",tr:"Ödeme"},system_code:"payment",value:"payment",order:2,show:!0},{type:1,id:352,label:{en:"Sales Invoice",tr:"Satış Faturası"},system_code:"sales_invoice",value:"sales_invoice",order:3,show:!0},{type:2,id:353,label:{en:"Purchase Invoice",tr:"Alış Faturası"},system_code:"purchase_invoice",value:"purchase_invoice",order:4,show:!0}]).constant("yesNo",[{type:2,id:4,label:{en:"Yes",tr:"Evet"},system_code:"true",order:1},{type:2,id:5,label:{en:"No",tr:"Hayır"},system_code:"false",order:2}]).constant("systemFields",["id","deleted","shared_users","shared_user_groups","shared_users_edit","shared_user_groups_edit","is_sample","is_converted","master_id","migration_id","import_id","created_by","updated_by","created_at","updated_at","currency"]).constant("systemRequiredFields",{all:["owner","created_by","created_at","updated_by","updated_at"],activities:["activity_type","related_module","related_to","subject","task_due_date","task_status","task_notification","task_reminder","reminder_recurrence","event_start_date","event_end_date","event_reminder","call_time"],opportunities:["amount","closing_date","stage","probability","expected_revenue"],products:["name","unit_price","usage_unit","purchase_price","vat_percent","using_stock","stock_quantity","critical_stock_limit"],quotes:["account","quote_stage","total","vat_total","grand_total","discount_amount","discount_percent","discount_type","vat_list","email"],sales_orders:["account","order_stage","total","vat_total","grand_total","discount_amount","discount_percent","discount_type","vat_list","email","currency"],purchase_orders:["supplier","order_stage","total","vat_total","grand_total","discount_amount","discount_percent","discount_type","vat_list","email","currency"],calisanlar:["sabit_devreden_izin","devreden_izin","kalan_izin_hakki","hakedilen_izin"],human_resources:["sabit_devreden_izin","devreden_izin","kalan_izin_hakki","hakedilen_izin"],izinler:["bitis_tarihi","baslangic_tarihi","from_entry_type","to_entry_type","mevcut_kullanilabilir_izin","hesaplanan_alinacak_toplam_izin","custom_approver","talep_edilen_izin","calisan","izin_turu"],izin_turleri:["adi","yillik_izin","yillik_hakedilen_limit_gun","tek_seferde_alinabilecek_en_fazla_izin_gun","izin_hakkindan_dusulsun","yillik_izin_hakki_gun","cuma_gunu_alinan_izinlere_cumartesiyi_de_ekle","izin_hakkindan_takvim_gunu_olarak_dusulsun","resmi_tatiller_ile_birlestirilebilir","izin_borclanma_yapilabilir","saatlik_kullanim_yapilir","saatlik_kullanimi_yukari_yuvarla","dogum_gunu_izni","sonraki_doneme_devredilen_izin_gun","ilk_izin_kullanimi_hakedis_zamani_ay","yasa_gore_asgari_izin_gun","yillik_izine_ek_izin_suresi_ekle","yillik_izine_ek_izin_suresi_gun","ek_izin_sonraki_yillara_devreder","oncelikle_yillik_izin_kullanimi_dusulur","toplam_calisma_saati","dogum_gunu_izni_kullanimi","sadece_tam_gun_olarak_kullanilir"],current_accounts:["transaction_type","date","customer","supplier"],stock_transactions:["transaction_date","stock_transaction_type","quantity","product","sales_order","purchase_order","supplier","customer"],holidays:["date","country"]}).constant("systemReadonlyFields",{all:["owner","created_by","created_at","updated_by","updated_at"],activities:["activity_type","related_module","related_to","task_status"],opportunities:["expected_revenue"],products:["unit_price","vat_percent","purchase_price","stock_quantity"],quotes:["account","quote_stage","total","vat_total","grand_total","discount_amount","discount_percent","discount_type","email"],orders:["account","order_stage","total","vat_total","grand_total","discount_amount","discount_percent","discount_type","email"],current_accounts:["transaction_type","date","amount","customer","supplier"],holidays:["date","country"],timetrackers:["week","month","year","timetracker_id","date_range","toplam_saat"],timetracker_items:["saat","tarih","izindir","related_timetracker"]}).value("guidEmpty","00000000-0000-0000-0000-000000000000").value("emailRegex",/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);
"use strict";angular.module("primeapps").factory("$localStorage",["$window",function(e){return{set:function(n,t){e.localStorage[n]=angular.toJson(t)},get:function(e){var n=this.read(e);return n?angular.fromJson(n):null},write:function(n,t){e.localStorage[n]=t},read:function(n){return e.localStorage[n]},remove:function(n){e.localStorage.removeItem(n)}}}]).factory("$sessionStorage",["$window",function(e){return{set:function(n,t){e.sessionStorage[n]=angular.toJson(t)},get:function(e){var n=this.read(e);return n?angular.fromJson(n):null},write:function(n,t){e.sessionStorage[n]=t},read:function(n){return e.sessionStorage[n]},remove:function(n){e.sessionStorage.removeItem(n)},clear:function(){e.sessionStorage.clear()}}}]).factory("$cache",["$cacheFactory",function(e){return e("primeapps")}]).factory("sipHelper",["$rootScope","$timeout","$filter","$localStorage","$sessionStorage","$q","$http","config","$cache","$state","$window","$popover",function(e,n,t,r,s,o,i,a,l,u,c,f){function p(t){t&&(t.off("bye"),t.off("progress"),t.off("accepted"),t.off("rejected"),t.off("cancel"),t.off("terminated"),t.off("muted"),t.off("unmuted"),t.off("hold"),t.off("unhold"),t.off("refer"),t.off("failed"),t=null),e.sipUser.session&&n(function(){e.sipUser.session=null})}function d(e,n){var t=document.getElementById(e);"play"==n?(t.play(),t.loop=!0):(t.pause(),t.currentTime=0)}function m(r,s){r.on("bye",function(e){}),r.on("failed",function(e){}),r.on("progress",function(r){n(function(){"OUTBOUND"==s?(e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.Ringing"),e.sipUser.lineInfo.State="Ringing",d("DialSound","play")):(e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.IncomingCall"),U.showSipPhone("call"),e.sipUser.lineInfo.State=t("translate")("Setup.Phone.IncomingCall"),e.sipUser.activePhoneScreen="connectingScreen")})}),r.on("cancel",function(){n(function(){d("IncomingSound","pause"),d("DialSound","pause"),e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.CanceledByUser"),e.sipUser.lineInfo.State="Cancel"})}),r.on("accepted",function(s){n(function(){"IncomingCall"==e.sipUser.lineInfo.State?e.transferShow=!0:e.transferShow=!1,e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.CallActive"),e.sipUser.lineInfo.State="Active",d("DialSound","pause"),d("IncomingSound","pause");var n=document.getElementsByTagName("video")[0],s=r.mediaHandler.getRemoteStreams()[0];"undefined"!=typeof n.srcObject?n.srcObject=s:"undefined"!=typeof n.mozSrcObject?n.mozSrcObject=s:"undefined"!=typeof n.src&&(n.src=URL.createObjectURL(s)),h()})}),r.on("rejected",function(t,o){e.sipUser.session===r&&n(function(){"OUTBOUND"===s&&(d("DialSound","pause"),d("BusySound","play"),"OUTBOUND"==s&&(e.sipUser.lineInfo.PhoneStatus=t.reason_phrase,e.sipUser.lineInfo.State="Reject"))})}),r.on("muted",function(r){n(function(){e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.CallMuted"),e.sipUser.lineInfo.State="Active",e.sipUser.lineInfo.IsMuted=!0})}),r.on("unmuted",function(r){n(function(){d("DialSound","pause"),d("IncomingSound","pause"),e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.CallActive"),e.sipUser.lineInfo.State="Active",e.sipUser.lineInfo.IsMuted=!1})}),r.on("hold",function(r){n(function(){e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.Hold"),e.sipUser.lineInfo.State="Active",e.sipUser.lineInfo.IsHold=!0})}),r.on("unhold",function(r){n(function(){d("DialSound","pause"),d("IncomingSound","pause"),e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.CallActive"),e.sipUser.lineInfo.State="Active",e.sipUser.lineInfo.IsHold=!1})}),r.on("refer",r.followRefer(function(e){})),r.on("terminated",function(s,o){n(function(){e.sipUser.session=null,e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.Hangup"),e.sipUser.lineInfo.State="Hangup",n(function(){d("BusySound","pause"),e.sipUser.userAgent.isRegistered()&&(e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.Ready"),e.sipUser.lineInfo.State="Ready",e.sipUser.lineInfo.TalkingTimer=0,e.sipUser.lineInfo.ActiveNumber=null,e.sipUser.activePhoneScreen="readyScreen",e.sipUser.lineInfo.ModuleName=null,e.sipUser.lineInfo.RecordId=null,e.sipUser.lineInfo.TalkingRecordInfo=null,e.transferShow=!1,e.sipUser.lineInfo.IsMuted=!1,e.sipUser.lineInfo.IsHold=!1)},1e3),p(r),g()},2e3)})}function h(){e.sipUser.lineInfo.TalkingTimer++,S=n(h,1e3)}function g(){n.cancel(S),e.sipUser.lineInfo.TalkingTimer=0}function v(r,s,o){var l=t("filter")(e.modules,{name:r},!0)[0],u=t("filter")(l.fields,{primary:!0})[0],c=[];c.push("id"),c.push(u.name);var f={fields:c,filters:[],sort_field:"id",sort_direction:"asc",limit:1,offset:0};f.filters.push({field:s,operator:"contains",value:o.substring(2,12),no:1}),i.post(a.apiUrl+"record/find/"+r,f).then(function(i){var a,l;if(i.data&&i.data.length){var c=i.data[0];a=c[u.name],l=c.id}else a=t("translate")("Common.NewRecord"),l=0;n(function(){e.sipUser.lineInfo.ModuleName=r,e.sipUser.lineInfo.RecordId=l,e.sipUser.lineInfo.TalkingRecordInfo=a,e.sipUser.lineInfo.Field=s,e.sipUser.lineInfo.Value=o})})}var U=this,S=null;return{register:function(){var r=this;e.sipUser.userAgent||(e.sipUser.userAgent=new SIP.UA({uri:e.sipUser.Extension+"@"+e.sipUser.SipUri,wsServers:[e.sipUser.Server],authorizationUser:e.sipUser.Extension,password:e.sipUser.Password,log:{builtinEnabled:!1,level:0},rtcpMuxPolicy:"negotiate"}),e.sipUser.userAgent.on("connecting",function(n){e.sipUser.events.IsConnecting=!0,e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.Connecting"),e.sipUser.lineInfo.State="Connecting"}),e.sipUser.userAgent.on("unregistered",function(r,s){n(function(){e.sipUser.events.IsRegistered=!1,e.sipUser.events.IsConnecting=!1,e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.Unregistered"),e.sipUser.lineInfo.State="Unregistered"})}),e.sipUser.userAgent.on("registered",function(){n(function(){e.sipUser.events.IsRegistered=!0,e.sipUser.events.IsConnecting=!1,e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.Ready"),e.sipUser.lineInfo.State="Ready"})}),e.sipUser.userAgent.on("disconnected",function(){n(function(){e.sipUser.events.IsRegistered=!1,e.sipUser.events.IsConnecting=!1,e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.Disconnected"),e.sipUser.lineInfo.State="Disconnected"})}),e.sipUser.userAgent.on("registrationFailed",function(r,s){n(function(){e.sipUser.events.IsRegistered=!1,e.sipUser.events.IsConnecting=!1,e.sipUser.events.RegistrationError=!0,e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.RegistrationError"),e.sipUser.lineInfo.State="RegistrationError"})}),e.sipUser.userAgent.on("invite",function(s){if(null===e.sipUser.session)n(function(){e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.IncomingCall"),r.showSipPhone("call"),e.sipUser.lineInfo.State="IncomingCall",e.sipUser.activePhoneScreen="connectingScreen",e.sipUser.lineInfo.TalkingNumber=s.request.from.friendlyName}),m(s,"INBOUND"),n(function(){d("IncomingSound","play"),e.sipUser.session=s,e.sipUser.lineInfo.ActiveNumber=s.request.from.friendlyName,v(e.sipUser.RecordDetailModuleName,e.sipUser.RecordDetailPhoneFieldName,e.sipUser.lineInfo.TalkingNumber)});else{var o={statusCode:600};s.reject(o)}}),e.sipUser.userAgent.off("invite",function(r){n(function(){e.sipUser.session=null,e.sipUser.userAgent.isRegistered()?(e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.Ready"),e.sipUser.lineInfo.State="Ready"):(e.sipUser.lineInfo.PhoneStatus=t("translate")("Setup.Phone.Hangup"),e.sipUser.lineInfo.State="Hangup")})}))},unRegister:function(){var n={all:!0};e.sipUser.userAgent.unregister(n),e.sipUser.userAgent=null,p(e.sipUser.session)},isRegistered:function(){e.sipUser.userAgent.isRegistered()?e.sipUser.IsRegistered=!0:e.sipUser.IsRegistered=!1},getUA:function(){return e.sipUser.userAgent},dial:function(t,r){var s={media:{constraints:{audio:!0,video:!1}}},o=e.sipUser.userAgent.invite(t,s);m(o,"OUTBOUND"),n(function(){e.sipUser.session=o})},transfer:function(n){e.sipUser.session.refer(n)},mute:function(){e.sipUser.session.mute()},hold:function(){e.sipUser.session.hold()},unmute:function(){e.sipUser.session.unmute()},unhold:function(){e.sipUser.session.unhold()},isOutGoingRequest:function(e){return e.request?!e.request.server_transaction:null},goRecordDetail:function(n,t){"true"===e.sipUser.IsAutoRecordDetail&&(c.location.href="#/app/module/"+n+"?id="+t)},findRecordGoDetail:function(e,n,t){v(e,n,t)},showSipPhone:function(n){void 0==n?e.sipPhone||(e.sipPhone={},e.sipPhone[e.app]=e.sipPhone[e.app]||f(angular.element(document.getElementById("sipPhoneBtn")),{templateUrl:cdnUrl+"view/app/phone/sipPhone.html",placement:"bottom",animation:"am-flip-x",scope:e,container:"body",autoClose:!1,show:!0,delay:{show:500,hide:100}})):e.sipPhone?e.sipPhone[e.app].show():this.showSipPhone()}}}]).factory("helper",["$rootScope","$timeout","$filter","$localStorage","$sessionStorage","$q","$http","config","$cache",function(e,n,t,r,s,o,i,a,l){return{hasCustomProfilePermission:function(n){if(!(e.customProfilePermissions&&e.customProfilePermissions.length>0))return!1;for(var t=0;t<e.customProfilePermissions.length;t++){var r=e.customProfilePermissions[t];if(r.profileId==e.user.profile.id){for(var s=!1,o=0;o<r.permissions.length;o++){var i=r.permissions[o];i==n&&(s=!0)}return!!s}}return!1},SnakeToCamel:function(e,n){function t(e,n,r){if(0===r||!angular.isObject(e))return e;for(var s={},o=Object.keys(e),i=0;i<o.length;i++)s[n(o[i])]=t(e[o[i]],n,r-1);return s}function r(e){var n="_",t=/(?=[A-Z])/;return e.split(t).join(n).toLowerCase()}return angular.isObject(e)?("undefined"==typeof n&&(n=1),t(e,r,n)):r(e)},getTime:function(e){if(!e)return"";var n=new Date(e);return n.getTime()},dateDiff:function(e){var n=new Date;n.setHours(0,0,0,0);var t=Math.floor((e>n?e-n:n-e)/864e5);return t},hideLoader:function(){-1===document.body.className.indexOf("loaded")&&(document.body.className+=" loaded"),n(function(){var e=document.getElementById("loader");e&&e.parentNode.removeChild(e)},300)},getFileExtension:function(e){var n=e.split(".");return n.length<2?"":n=n[n.length-1].toLowerCase()||""},arrayObjectIndexOf:function(e,n){for(var t=0;t<e.length;t++)if(angular.equals(e[t],n))return t;return-1},hasPermission:function(n,r,s){"related_to"===n&&(n="activities"),"stage_history"===n&&(n="opportunities");var o=t("filter")(e.modules,{name:n},!0)[0];if(!o)return!1;var i=t("filter")(e.user.profile.permissions,{module_id:o.id},!0)[0];if(i&&i[r])return"Modify"!==r&&"Remove"!==r||!s||s.shared_users_edit&&-1!==s.shared_users_edit.indexOf(e.user.ID)||!s.shared_users||!(s.shared_users.indexOf(e.user.ID)>-1);if(s)switch(r){case"Read":if(s.shared_users&&s.shared_users.indexOf(e.user.id)>-1)return!0;if(s.shared_user_groups&&e.user.groups.length)for(var a in s.shared_user_groups)if(e.user.groups.indexOf(s.shared_user_groups[a])>-1)return!0;return!1;case"Remove":case"Modify":if(e.user.profile.has_admin_rights)return!0;if(s.shared_users_edit&&s.shared_users_edit.indexOf(e.user.id)>-1)return!0;if(s.shared_user_groups_edit)for(var a in s.shared_user_groups_edit)if(e.user.groups.indexOf(s.shared_user_groups_edit[a])>-1)return!0;return!1}return!1},hasDocumentsPermission:function(n){var r=t("filter")(e.user.profile.permissions,{type:1})[0];return r?r[n]:!1},hasAdminRights:function(){return e.user.profile.has_admin_rights},getCulture:function(){var e=r.read("NG_TRANSLATE_LANG_KEY")||"tr";switch(e){case"tr":return"tr-TR";case"en":return"en-US"}},getCurrency:function(){var e=r.read("NG_TRANSLATE_LANG_KEY")||"tr";switch(e){case"tr":return"TRY";case"en":return"USD"}},getCurrentDateMin:function(){var e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e},getCurrentDateMax:function(){var e=new Date;return e.setHours(23),e.setMinutes(59),e.setSeconds(59),e.setMilliseconds(0),e},floorMinutes:function(e){var n=3e5;return new Date(Math.floor(e.getTime()/n)*n)},lookupProfile:function(e,n,t){var r=o.defer();if(!e&&!n)return r.resolve([]),r.promise;var s={fields:["id","name"],filters:[{field:"name",operator:"starts_with",value:e,no:1},{field:"deleted",operator:"equals",value:!1,no:2}],limit:20,sort_field:"name",sort_direction:"asc"};return e||(s.filters.shift(),s.filters[0].no=1),i.post(a.apiUrl+"record/find/profiles",s).then(function(e){if(e=e.data,!e)return r.resolve([]),r.promise;for(var n=[],t=0;t<e.length;t++){var s=e[t],o={};o.id=s.id,o.name=s.name,n.push(o)}r.resolve(n)})["catch"](function(e){r.reject(e.data)}),r.promise},lookupRole:function(n,t,r){var s=o.defer();if(!n&&!t)return s.resolve([]),s.promise;var l={fields:["id","label_en","label_tr"],filters:[{field:"label_"+e.user.tenant_language,operator:"starts_with",value:n,no:1},{field:"deleted",operator:"equals",value:!1,no:2}],limit:20,sort_field:"label_"+e.user.tenant_language,sort_direction:"asc"};return n||(l.filters.shift(),l.filters[0].no=1),i.post(a.apiUrl+"record/find/roles",l).then(function(n){if(n=n.data,!n)return s.resolve([]),s.promise;for(var t=[],r=0;r<n.length;r++){var o=n[r],i={};i.id=o.id,i.name=o["label_"+e.user.tenant_language],t.push(i)}s.resolve(t)})["catch"](function(e){s.reject(e.data)}),s.promise},lookupUser:function(e,n,r){var s=o.defer();if(!e&&!n)return s.resolve([]),s.promise;var l={fields:["id","full_name","email","is_active"],filters:[{field:"full_name",operator:"starts_with",value:e,no:1},{field:"is_active",operator:"equals",value:!0,no:2}],limit:20,sort_field:"full_name",sort_direction:"asc"};if(r&&1==r)for(var u=0;u<l.filters.length;u++){var c=l.filters[u];if("is_active"==c.field){var f=l.filters.indexOf(c);l.filters.splice(f,1)}}return e||(l.filters.shift(),l.filters[0].no=1),i.post(a.apiUrl+"record/find/users",l).then(function(r){if(r=r.data,!r)return s.resolve([]),s.promise;var o=[];if(n&&!e){var i={};switch(i.id=0,n){case"record_owner":i.email="[owner]",i.full_name=t("translate")("Common.RecordOwner");break;case"logged_in_user":i.email="[me]",i.full_name=t("translate")("Common.LoggedInUser")}o.push(i)}for(var a=0;a<r.length;a++){var l=r[a],u={};u.id=l.id,u.email=l.email,u.full_name=l.full_name,o.push(u)}s.resolve(o)})["catch"](function(e){s.reject(e.data)}),s.promise},lookupUserAndGroup:function(e,n,t){var r=o.defer();if(!t)return r.resolve([]),r.promise;var s={module_id:e,is_readonly:n,search_term:t};return i.post(a.apiUrl+"record/lookup_user",s).then(function(e){return e.data?void r.resolve(e.data):(r.resolve([]),r.promise)})["catch"](function(e){r.reject(e.data)}),r.promise},getPicklists:function(n,r){for(var s=o.defer(),u={},c=[],f=this,p=0;p<n.length;p++){var d=n[p],m=l.get("picklist_"+d);if(0!==d)!m||r?c.push(d):u[d]=m;else{if(m&&!r){u[d]=m;break}for(var h=[],g=0;g<e.modules.length;g++){var v=e.modules[g];if(0!=v.order&&"users"!==v.name){var U={};U.id=parseInt(v.id)+9e5,U.type=9e5,U.order=v.order,U.label={},U.label.en=v.label_en_singular,U.label.tr=v.label_tr_singular,U.labelStr=v["label_"+e.language+"_singular"],U.value=v.name,h.push(U)}}h=t("orderBy")(h,"order"),u[9e5]=h,l.put("picklist_"+9e5,h)}}return c.length<=0?(s.resolve(u),s.promise):(i.post(a.apiUrl+"picklist/find",c).then(function(r){if(!r.data)return s.resolve(u),s.promise;for(var o=0;o<n.length;o++){var i=n[o];if(!(c.indexOf(i)<0)){var a=f.mergePicklists(r.data);a=t("orderBy")(a,"label_"+e.language),u[i]=a,l.put("picklist_"+i,u[i])}}s.resolve(u)})["catch"](function(e){s.reject(e.data)}),s.promise)},mergePicklists:function(n){var t=[];if(n)for(var r=0;r<n.length;r++)for(var s=n[r],o=0;o<s.items.length;o++){var i=s.items[o],a={};a.type=s.id,a.id=i.id,a.label={},a.label.en=i.label_en,a.label.tr=i.label_tr,a.label_en=i.label_en,a.label_tr=i.label_tr,a.value=i.value,a.value2=i.value2,a.value3=i.value3,a.system_code=i.system_code,a.order=i.order,a.inactive=i.inactive,a.labelStr=a.label[e.user.tenant_language],t.push(a)}return t},getSlug:function(e,n){if(!e)return"";n||(n="_");for(var t,r,s={" ":" ","¡":"!","¢":"c","£":"lb","¥":"yen","¦":"|","§":"SS","¨":'"',"©":"(c)","ª":"a","«":"<<","¬":"not","­":"-","®":"(R)","°":"^0","±":"+/-","²":"^2","³":"^3","´":"'","µ":"u","¶":"P","·":".","¸":",","¹":"^1","º":"o","»":">>","¼":" 1/4 ","½":" 1/2 ","¾":" 3/4 ","¿":"?","À":"`A","Á":"'A","Â":"^A","Ã":"~A","Ä":'"A',"Å":"A","Æ":"AE","Ç":"C","È":"`E","É":"'E","Ê":"^E","Ë":'"E',"Ì":"`I","Í":"'I","Î":"^I","Ï":'"I',"Ð":"D","Ñ":"~N","Ò":"`O","Ó":"'O","Ô":"^O","Õ":"~O","Ö":'"O',"×":"x","Ø":"O","Ù":"`U","Ú":"'U","Û":"^U","Ü":'"U',"Ý":"'Y","Þ":"Th","ß":"ss","à":"`a","á":"'a","â":"^a","ã":"~a","ä":'"a',"å":"a","æ":"ae","ç":"c","è":"`e","é":"'e","ê":"^e","ë":'"e',"ì":"`i","í":"'i","î":"^i","ï":'"i',"ð":"d","ñ":"~n","ò":"`o","ó":"'o","ô":"^o","õ":"~o","ö":'"o',"÷":":","ø":"o","ù":"`u","ú":"'u","û":"^u","ü":'"u',"ý":"'y","þ":"th","ÿ":'"y',"Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"'C","ć":"'c","Ĉ":"^C","ĉ":"^c","Ċ":"C","ċ":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"^G","ĝ":"^g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"^H","ĥ":"^h","Ħ":"H","ħ":"h","Ĩ":"~I","ĩ":"~i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĳ":"IJ","ĳ":"ij","Ĵ":"^J","ĵ":"^j","Ķ":"K","ķ":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"L","ł":"l","Ń":"'N","ń":"'n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","ŉ":"'n","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":'"O',"ő":'"o',"Œ":"OE","œ":"oe","Ŕ":"'R","ŕ":"'r","Ŗ":"R","ŗ":"r","Ř":"R","ř":"r","Ś":"'S","ś":"'s","Ŝ":"^S","ŝ":"^s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","Ũ":"~U","ũ":"~u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":'"U',"ű":'"u',"Ų":"U","ų":"u","Ŵ":"^W","ŵ":"^w","Ŷ":"^Y","ŷ":"^y","Ÿ":'"Y',"Ź":"'Z","ź":"'z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","ſ":"s"},o=[],i=0;i<e.length;i++)(r=e.charCodeAt(i))<384&&(t=String.fromCharCode(r),o.push(s[t]||t));return e=o.join(""),e=e.replace(/[^\w\s-]/g,"").trim().toLowerCase(),e.replace(/[-\s]+/g,n)},roundBy:function(e,n,t){var r=n*Math.pow(10,t);return r=e(r),r/Math.pow(10,t)},parseQueryString:function(e){var n,t,r,s,o,i,a,l={};if(null===e)return l;n=e.split("&");for(var u=0;u<n.length;u++)t=n[u],r=t.indexOf("="),-1===r?(s=t,o=null):(s=t.substr(0,r),o=t.substr(r+1)),i=decodeURIComponent(s),a=decodeURIComponent(o),l[i]=a;return l},replaceDynamicValues:function(e){var n=e.split("{appConfigs.");if(n.length>1)for(var t in n)if(n.hasOwnProperty(t)){if(!n[t])continue;var r=n[t].split("}")[0];e=e.replace("{appConfigs."+r+"}",appConfigs[r])}return e}}}]).factory("convert",["helper",function(e){return{fromMsDate:function(n){return n=e.getTime(n),new Date(n)},toMsDate:function(e){return"/Date("+e.getTime()+")/"}}}]).factory("exportFile",function(){return{excel:function(e,n){for(var t=e[0].length-1,r=0,s={columns:"",rows:""},o={excel:'<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>',excelML:'<?xml version="1.0"?><?mso-application progid="Excel.Sheet"?><ss:Workbook xmlns:="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40"><ss:Styles><ss:Style ss:ID="1"><ss:Font ss:Bold="1"/></ss:Style></ss:Styles><ss:Worksheet ss:Name="Sheet1"><ss:Table>{columns}{rows}</ss:Table></ss:Worksheet></ss:Workbook>',rowOpen:"<ss:Row>",rowClose:"</ss:Row>",dataOpenString:'<ss:Data ss:Type="String">',dataOpenNumber:'<ss:Data ss:Type="Number">',dataClose:"</ss:Data>",column:'<ss:Column ss:Width="80"/>',cellOpen:"<ss:Cell>",cellClose:"</ss:Cell>"},i=function(e){if(null===e||void 0===e)return"";var n="<![CDATA["+e+"]]>",t=e.toString(),r=t.indexOf(",")>-1||t.indexOf("\r")>-1||t.indexOf("\n")>-1,s=t.indexOf('"')>-1;return s&&(n=n.replace(/"/g,'""')),(r||s)&&(n='"'+n+'"'),n},a=function(e){return window.btoa(unescape(encodeURIComponent(e)))},l=function(e,n){return e.replace(/{(\w+)}/g,function(e,t){return n[t]})},u=0;t>u;u++)s.columns+=o.column;for(var c,f=0;c=e[f];f++){s.rows+=o.rowOpen,r=e[f].length;for(var p=0;r>p;p++){var d=c[p];s.rows+=o.cellOpen,"number"==typeof d?s.rows+=o.dataOpenNumber:s.rows+=o.dataOpenString,s.rows+=i(d),s.rows+=o.dataClose,s.rows+=o.cellClose}s.rows+=o.rowClose}for(var m=a(l(o.excelML,s)),h=atob(m),g=new Array(h.length),v=0;v<h.length;v++)g[v]=h.charCodeAt(v);var U=new Uint8Array(g),S=new Blob([U],{type:"application/octet-stream"});saveAs(S,n)}}}).factory("officeHelper",["$http","config",function(e,n){return{officeTenantInfo:function(){return e.get(n.apiUrl+"User/ActiveDirectoryInfo")}}}]).factory("components",["$rootScope","$timeout","$filter","$localStorage","$sessionStorage","$q","$http","config","$cache","ngToast","$injector","$state","$stateParams","helper","$modal",function($rootScope,$timeout,$filter,$localStorage,$sessionStorage,$q,$http,config,$cache,ngToast,$injector,$state,$stateParams,helper,$modal){return{run:function(place,type,scope,record,field){place=place.split(/(?=[A-Z])/).join("_").toLowerCase(),type=type.split(/(?=[A-Z])/).join("_").toLowerCase();var ModuleService=$injector.get("ModuleService"),components=$filter("filter")(scope.module.components,function(e){return e.place===place&&e.type===type&&(e.module_id===scope.module.id||0===e.module_id)&&!e.deleted},!0);if(components=$filter("orderBy")(components,"order"),components&&components.length>0)for(var i=0;i<components.length;i++){var component=components[i];eval(component.content)}}}}]),String.prototype.toUpperCaseTurkish=function(){return this.replace(/i/g,"İ").toLocaleUpperCase()},String.prototype.toLowerCaseTurkish=function(){return this.replace(/I/g,"ı").toLocaleLowerCase()},String.prototype.replaceAll=function(e,n){function t(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}return this.replace(new RegExp(t(e),"g"),n)},Array.prototype.getUnique=function(){for(var e={},n=[],t=0,r=this.length;r>t;++t)e.hasOwnProperty(this[t])||(n.push(this[t]),e[this[t]]=1);return n};
"use strict";angular.module("primeapps").directive("focus",["$timeout",function(e){return function(t,n,a){t.$watch(a.focus,function(t){t&&e(function(){n[0].focus()},0,!1)})}}]).directive("blur",function(){return function(e,t,n){t.bind("blur",function(){e.$apply(n.blur)})}}).directive("customBackground",function(){return{restrict:"A",controller:["$scope","$element","$location","$localStorage",function(e,t,n,a){var l=function(){return n.path()},o=function(n){return t.removeClass("app auth self authingo"),n.indexOf("/app/")>-1?t.addClass("app"):n.indexOf("/auth/")>-1?(e.backgroundShow=!1,(n.indexOf("/auth/register")>-1||n.indexOf("/auth/verify")>-1)&&(e.backgroundShow=!0,e.language=a.read("NG_TRANSLATE_LANG_KEY")||"tr"),t.addClass("auth")):n.indexOf("/paymentform")>-1||n.indexOf("/join")>-1?t.addClass("self"):void 0};return o(n.path()),e.$watch(l,function(e,t){return e!==t?o(e):void 0})}]}}).directive("languageClass",function(){return{restrict:"A",controller:["$rootScope","$scope","$element",function(e,t,n){var a=function(){return e.language},l=function(e,t){return t&&n.removeClass(t),n.addClass(e)};return l(e.language),t.$watch(a,function(e,t){return e!==t?l(e,t):void 0})}]}}).directive("appClass",function(){return{restrict:"A",controller:["$rootScope","$scope","$element",function(e,t,n){var a=function(){return e.app},l=function(e,t){return t&&n.removeClass(t),n.addClass(e)};return l(e.app),t.$watch(a,function(e,t){return e!==t?l(e,t):void 0})}]}}).directive("confirmClick",["$popover","$timeout",function(e,t){return{restrict:"A",scope:{action:"&"},link:function(n,a,l){a.bind("click",function(){t(function(){var t=l.placement||"bottom",o=l.confirmMessage||"Are you sure?",r=l.confirmYes||"Yes",i=l.confirmNo||"No",s=e(a,{title:o,placement:t,trigger:"manual",autoClose:!0,contentTemplate:"view/common/confirm.html?v="+version});s.$promise.then(function(){s.$scope.yesText=r,s.$scope.noText=i,s.show()}),s.$scope.confirm=function(){s.$scope.confirming=!0,n.action()}},0)})}}}]).directive("customOnChange",function(){return{require:"ngModel",link:function(e,t,n,a){t.bind("change",function(){e.$apply(function(){t.length>0&&(a.$setViewValue(t[0].files[0].name),a.$render())})})}}}).directive("autoGrow",function(){return function(e,t,n){var a=function(){t.css("height","auto");var e=t[0].offsetHeight,n=t[0].scrollHeight;n>e&&t.css("height",n+"px")};e.$watch(n.ngModel,function(){a()}),t.bind("focus",function(){a()}),n.$set("ngTrim","false")}}).directive("resetField",["$compile","$timeout",function(e,t){return{require:"ngModel",scope:{},link:function(n,a,l,o){var r=/text|search|tel|url|email|password/i;if("INPUT"!==a[0].nodeName)throw new Error("resetField is limited to input elements");if(!r.test(l.type))throw new Error("Invalid input type for resetField: "+l.type);var i=e('<i ng-show="enabled" ng-mousedown="reset()" class="fa fa-times-circle"></i>')(n);a.after(i),n.reset=function(){o.$setViewValue(null),o.$render(),t(function(){a[0].focus()},0,!1)},a.bind("input",function(){n.enabled=!o.$isEmpty(a.val())}).bind("focus",function(){n.enabled=!o.$isEmpty(a.val()),n.$apply()}).bind("blur",function(){n.enabled=!1,n.$apply()})}}}]).directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,t,n,a){a.$validators.compareTo=function(t){return t==e.otherModelValue},e.$watch("otherModelValue",function(){a.$validate()})}}}).directive("ngThumb",["$window",function(e){var t={support:!(!e.FileReader||!e.CanvasRenderingContext2D),isFile:function(t){return angular.isObject(t)&&t instanceof e.File},isImage:function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(t)>-1}};return{restrict:"A",template:"<canvas/>",link:function(e,n,a){function l(e){var t=new Image;t.onload=o,t.src=e.target.result}function o(){var e=r.width||this.width/this.height*r.height,t=r.height||this.height/this.width*r.width;i.attr({width:e,height:t}),i[0].getContext("2d").drawImage(this,0,0,e,t)}if(t.support){var r=e.$eval(a.ngThumb);if(t.isFile(r.file)&&t.isImage(r.file)){var i=n.find("canvas"),s=new FileReader;s.onload=l,s.readAsDataURL(r.file)}}}}}]).directive("numeric",function(){return{require:"ngModel",scope:{min:"=minValue",max:"=maxValue",ngRequired:"=ngRequired"},link:function(e,t,n,a){a.$parsers.push(function(t){if(void 0===t||t.indexOf(" ").length>-1)return"";var n=t.replace(/[^0-9]/g,"");return n!=t&&(a.$setViewValue(n),a.$render()),a.$validators.min=function(t){return!e.ngRequired&&isNaN(t)?!0:"undefined"!=typeof e.min?t>=parseInt(e.min):!0},e.$watch("min",function(){a.$validate()}),a.$validators.max=function(t){return!e.ngRequired&&isNaN(t)?!0:"undefined"!=typeof e.max?t<=parseInt(e.max):!0},e.$watch("max",function(){a.$validate()}),n})}}}).directive("restrict",["$parse",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,a){t.$watch(a.ngModel,function(n){n&&e(a.ngModel).assign(t,n.replace(new RegExp(a.restrict,"g"),""))})}}}]).directive("placeholder",["$timeout",function(e){var t=document.createElement("input");return"placeholder"in t?{}:{link:function(t,n,a){e(function(){n.val(a.placeholder),n.bind("focus",function(){n.val()==a.placeholder&&n.val("")}).bind("blur",function(){""==n.val()&&n.val(a.placeholder)})})}}}]).directive("ngEnter",function(){return function(e,t,n){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(n.ngEnter)}),t.preventDefault())})}}).directive("subTable",["$rootScope","ngTableParams","ngToast","blockUI","$filter","$cache","helper","exportFile","operations","ModuleService","components",function(e,t,n,a,l,o,r,i,s,u,c){return{restrict:"EA",scope:{relatedModule:"=",parentModule:"=",reload:"=",showFilter:"=",isSelectable:"@",disableSelectAll:"@",disableLinks:"@"},templateUrl:"view/common/subtable.html?v="+version,controller:["$scope",function(t){t.loading=!0,t.relatedModule.loading=!0,t.module=l("filter")(e.modules,{name:t.relatedModule.related_module},!0)[0],t.type=t.relatedModule.related_module,t.readonly=t.relatedModule.readonly||!1,t.parentType=t.relatedModule.relation_field,t.parentId=t.$parent.id,t.language=e.language,t.operations=s,t.hasPermission=r.hasPermission,t.lookupUser=r.lookupUser,t.relatedModuleInModal=!(!t.$parent.selectedRelatedModule||!t.$parent.selectedRelatedModule.relatedModuleInModal),t.previousParentType=t.$parent.previousParentType,t.previousParentId=t.$parent.previousParentId,t.previousReturnTab=t.$parent.previousReturnTab,t.isAdmin=e.user.profile.has_admin_rights,t.hideDeleteAll=l("filter")(e.deleteAllHiddenModules,t.parentModule+"|"+t.type,!0)[0];var d=l("filter")(e.modules,{name:"sales_invoices"},!0);if(d.length<1)t.salesInvoiceModule=!1;else{if(t.salesInvoiceModule=!0,"flat"!=t.relatedModule.detail_view_type)var p=t.$parent.$parent.picklistsModule.transaction_type;else var p=t.$parent.$parent.picklistsModule.transaction_type;angular.forEach(p,function(e){"sales_invoice"===e.system_code&&(e.show=!1),"purchase_invoice"===e.system_code&&(e.show=!1)})}var m=[10,25,50,100],f=t.relatedModule.display_fields,g=t.parentType+(t.isSelectable?"":t.parentId);t.cacheKey=g+"_"+t.module.name,t.$parent["selectedRows"+t.type]=[];var h="many_to_many"===t.relatedModule.relation_type,v=[];if((void 0===t.isSelectable||null===t.isSelectable)&&(t.isSelectable=!1),!t.isSelectable){var b=t.parentType;if(h&&(b=t.parentModule!=t.module.name?t.parentModule+"_id":t.parentModule+"1_id"),v.push({field:b,operator:"equals",value:t.parentId,no:1}),"related_to"===t.parentType){var y=l("filter")(e.modules,{name:t.parentModule},!0)[0];t.parentType=t.parentModule,v.push({field:"related_module",operator:"is",value:y["label_"+e.user.tenant_language+"_singular"],no:1})}}t.isSelectable=!0,h&&(t.cacheKey=g+"_"+t.relatedModule.relation_field+"_"+t.relatedModule.related_module);var T=a.instances.get("tableBlockUISubTable"+t.cacheKey);u.setTable(t,T,m,10,angular.copy(v),g,t.type,t.isSelectable,t.disableLinks?null:t.parentId,t.disableLinks?null:t.parentType,f,t.relatedModule,t.parentModule,t.relatedModule.id,t.previousParentType,t.previousParentId,t.previousReturnTab,t.$parent),t.tableParams.disableSelectAll=t.disableSelectAll,t.isManyToManyModal=!0,t.refresh=function(e){o.remove(t.cacheKey),e&&(t.tableParams.filterList=v,t.tableParams.refreshing=!0),t.tableParams.reloading=!0,t.tableParams.reload()},t.$watch("reload",function(e){e&&t.refresh(!1)}),t.$watch("showFilter",function(e){e&&(t.tableParams.showFilter=!t.tableParams.showFilter)}),t["delete"]=function(e){u.getRecord(t.module.name,e).then(function(n){var a=u.processRecordSingle(n.data,t.$parent.$parent.module,t.$parent.$parent.picklistsModule);t.executeCode=!1,c.run("BeforeDelete","Script",t,a),t.executeCode||u.deleteRecord(t.module.name,e).then(function(){setTimeout(function(){u.getRecord(t.parentModule,t.parentId).then(function(e){var n=u.processRecordSingle(e.data,t.$parent.$parent.module,t.$parent.$parent.picklistsModule);u.formatRecordFieldValues(n,t.$parent.$parent.module,t.$parent.$parent.picklistsModule),c.run("AfterDelete","Script",t,n),t.$parent.$parent.$parent.record=n;var a=t.parentModule+"_"+t.parentModule;o.remove(a),t.tableParams.reload()})},1e3)})})},t.deleteRelation=function(e){var n={};n[t.parentModule+"_id"]=parseInt(t.parentId),n[t.relatedModule.related_module+"_id"]=e,u.deleteRelation(t.parentModule,t.relatedModule.related_module,n).then(function(){o.remove(t.cacheKey),t.tableParams.reload()})},t.multiselect=function(e,n){var a=[];return angular.forEach(t.tableParams.picklists[n.picklist_id],function(t){t.inactive||t.labelStr.toLowerCase().indexOf(e)>-1&&a.push(t)}),a},t.selectAllModal=function(e,n){t.$parent["selectedRows"+t.type]=[],t.isAllSelectedModal?t.isAllSelectedModal=!1:(t.isAllSelectedModal=!0,angular.forEach(n,function(e){e.fields.forEach(function(n){1==n.primary&&t.$parent["selectedRows"+t.type].push({id:e.id,displayName:n.valueFormatted})})}))},t.selectRow=function(e,n){e.target.checked?n.fields.forEach(function(e){1!=e.primary||e.isJoin||t.$parent["selectedRows"+t.type].push({id:n.id,displayName:e.valueFormatted})}):t.$parent["selectedRows"+t.type]=t.$parent["selectedRows"+t.type].filter(function(e){return e.id!=n.id}),t.isAllSelectedModal=!1},t.isRowSelected=function(e){return t.$parent["selectedRows"+t.type].filter(function(t){return t.id==e}).length>0},t.$parent.$parent.$parent.isManyToMany=h,t.deleteSelectedsSubTable=function(){if(!t.relatedModuleInModal){if(!t.$parent["selectedRows"+t.type]||!t.$parent["selectedRows"+t.type].length)return;var e=[];t.$parent["selectedRows"+t.type].filter(function(t){e.push(t.id)}),u.deleteRecordBulk(t.module.name,e).then(function(){o.remove(t.cacheKey),t.tableParams.reloading=!0,t.tableParams.reload(),t.$parent["selectedRows"+t.type]=[],t.isAllSelectedModal=!1;var n={};n.data=e.length})}},t["export"]=function(){if(!t.relatedModuleInModal){if(t.tableParams.total()<1)return;var a=!1;try{a=!!new Blob}catch(o){}if(!a)return void n.create({content:l("translate")("Module.ExportUnsupported"),className:"warning",timeout:8e3});if(t.tableParams.total()>3e3)return void n.create({content:l("translate")("Module.ExportWarning"),className:"warning",timeout:8e3});var r=t.module["label_"+e.language+"_plural"]+"-"+l("date")(new Date,"dd-MM-yyyy")+".xls";t.exporting=!0,u.getCSVData(t,t.type).then(function(e){n.create({content:l("translate")("Module.ExcelExportSuccess"),className:"success",timeout:5e3}),i.excel(e,r),t.exporting=!1})}}}]}}]).directive("numberCurrency",["$rootScope","$filter","$locale","helper",function(e,t,n,a){return{restrict:"A",require:"ngModel",scope:{minValue:"=",maxValue:"=",currencySymbol:"=",ngRequired:"=",places:"=",rounding:"="},link:function(l,o,r,i){function s(e){return RegExp("\\d|\\-|\\"+e,"g")}function u(e){return RegExp("\\-{0,1}((\\"+e+")|([0-9]{1,}\\"+e+"?))&?[0-9]{0,100}","g")}function c(e){e=String(e);var o=n.NUMBER_FORMATS.DECIMAL_SEP,r=null,i=t("currency")("-1",d(),l.places),c=i.indexOf("1"),p=i.substring(0,c);if(e=e.replace(p,"-"),RegExp("^-[\\s]*$","g").test(e)&&(e="-0"),s(o).test(e)){var g=e.match(s(o)).join("").match(u(o));if(g&&(g=g[0].replace(o,".")),!g)return null;switch(r=parseFloat(g),f){case"off":r=a.roundBy(Math.round,r,m);break;case"down":r=a.roundBy(Math.floor,r,m);break;case"up":r=a.roundBy(Math.ceil,r,m)}}return r}function d(){return l.currencySymbol?("false"===l.currencySymbol&&(l.currencySymbol=""),l.currencySymbol):e.currencySymbol?e.currencySymbol:n.NUMBER_FORMATS.CURRENCY_SYM}function p(){for(var e=i.$formatters,t=e.length,n=i.$$rawModelValue;t--;)n=e[t](n);i.$setViewValue(n),i.$render()}if("false"!==r.numberCurrency){var m="undefined"!=typeof l.places&&null!=l.places?l.places:2,f="undefined"!=typeof l.rounding&&null!=l.rounding?l.rounding:"none";i.$parsers.push(function(e){var t=c(e);return("."==t||"-."==t)&&(t=".0"),parseFloat(t)}),o.on("blur",function(){i.$commitViewValue(),p()}),i.$formatters.unshift(function(e){return t("currency")(e,d(),l.places)}),i.$validators.min=function(e){return!l.ngRequired&&isNaN(e)?!0:"undefined"!=typeof l.minValue?e>=parseFloat(l.minValue):!0},i.$validators.max=function(e){return!l.ngRequired&&isNaN(e)?!0:"undefined"!=typeof l.maxValue?e<=parseFloat(l.maxValue):!0},l.$watch("maxValue",function(){i.$validate()}),l.$watch("minValue",function(){i.$validate()}),l.$watch("currencySymbol",function(){i.$commitViewValue(),p()}),i.$validators.places=function(e){return!e||!isNaN(e)}}}}}]).directive("numberDecimal",["$rootScope","$filter","$locale","helper",function(e,t,n,a){return{restrict:"A",require:"ngModel",scope:{min:"=minValue",max:"=maxValue",ngRequired:"=",places:"=",rounding:"="},link:function(e,l,o,r){function i(e){return RegExp("\\d|\\-|\\"+e,"g")}function s(e){return RegExp("\\-{0,1}((\\"+e+")|([0-9]{1,}\\"+e+"?))&?[0-9]{0,100}","g")}function u(l){l=String(l);var o=n.NUMBER_FORMATS.DECIMAL_SEP,r=null,u=t("number")("-1",e.places),c=u.indexOf("1"),m=u.substring(0,c);if(l=l.replace(m,"-"),RegExp("^-[\\s]*$","g").test(l)&&(l="-0"),i(o).test(l)){var f=l.match(i(o)).join("").match(s(o));if(f&&(f=f[0].replace(o,".")),!f)return null;switch(r=parseFloat(f),p){case"off":r=a.roundBy(Math.round,r,d);break;case"down":r=a.roundBy(Math.floor,r,d);break;case"up":r=a.roundBy(Math.ceil,r,d)}}return r}function c(){for(var e=r.$formatters,t=e.length,n=r.$$rawModelValue;t--;)n=e[t](n);r.$setViewValue(n),r.$render()}if("false"!==o.numberDecimal){var d="undefined"!=typeof e.places&&null!=e.places?e.places:2,p="undefined"!=typeof e.rounding&&null!=e.rounding?e.rounding:"none";r.$parsers.push(function(e){var t=u(e);return("."==t||"-."==t)&&(t=".0"),parseFloat(t)}),l.on("blur",function(){r.$commitViewValue(),c()}),r.$formatters.unshift(function(n){return t("number")(n,e.places)}),r.$validators.min=function(t){return!e.ngRequired&&isNaN(t)?!0:"undefined"!=typeof e.min?t>=parseFloat(e.min):!0},e.$watch("min",function(){r.$validate()}),r.$validators.max=function(t){return!e.ngRequired&&isNaN(t)?!0:"undefined"!=typeof e.max?t<=parseFloat(e.max):!0},e.$watch("max",function(){r.$validate()}),r.$validators.places=function(e){return!e||!isNaN(e)}}}}}]).directive("tooltip",function(){return{restrict:"A",link:function(e,t){$(t).hover(function(){$(t).tooltip("show")},function(){$(t).tooltip("hide")})}}}).directive("editableCustomSelect",["$rootScope","editableDirectiveFactory",function(e,t){var n="Seçiniz -->";return"en"===e.language&&(n="Please select -->"),t({directiveName:"editableCustomSelect",inputTpl:'<select><option value="">'+n+"</option></select>"})}]).directive("customScripting",["$timeout","ngToast","ModuleService","$modal","$http","config","$filter","blockUI",function($timeout,ngToast,ModuleService,$modal,$http,config,$filter,blockUI){return{restrict:"A",link:function(scope,element,attrs){element.bind("click",function(){scope.toast=function(e,t,n,a){$timeout(function(){ngToast.create({content:e,className:t,timeout:n||5e3,dismissButton:a||!1,dismissOnClick:!a,dismissOnTimeout:!a})})};try{$timeout(function(){var customScript=attrs.customScripting;eval(customScript)})}catch(e){return scope.$parent.$parent.scriptRunning[scope.$parent.custombutton.id]=!1,null}})}}}]).directive("webHook",["$http","ngToast","$filter",function(e,t,n){return{restrict:"A",link:function(a,l,o){l.bind("click",function(){var l=angular.fromJson(o.webHook);if(l.template&&l.url){a.loading=!0;var r=l.template.split(","),i={},s=a.$parent.$parent.record;angular.forEach(r,function(e){var t=s[e];t&&(i[e]=t.length>0?t:t.labelStr)}),e.post(l.url,i).then(function(){t.create({content:n("translate")("Common.ProcessTriggerSuccess"),className:"success"})}).error(function(){t.create({content:n("translate")("Common.Error"),className:"danger"}),a.loading=!1})}})}}}]).directive("customModalFrame",[function(){return{restrict:"A",link:function(e,t,n){t.bind("click",function(){angular.fromJson(n.customModalFrame)})}}}]).directive("uiTinymceMulti",["$rootScope","uiTinymceConfig",function(e,t){t=t||{};var n=0;return{require:"ngModel",link:function(a,l,o,r){var i,s,u;o.id||o.$set("id","uiTinymce"+n++),s={setup:function(e){e.on("init",function(){r.$render()}),e.on("ExecCommand",function(){e.save(),r.$setViewValue(l.val()),a.$$phase||a.$apply()}),e.on("KeyUp",function(){e.save(),r.$setViewValue(l.val()),a.$$phase||a.$apply()})},style_formats:[{title:"tr"===e.language?"Yazı Boyutu":"Font Size",items:[{title:"tr"===e.language?"Çok Büyük":"Very Big",block:"h2",styles:{fontWeight:"normal"}},{title:"tr"===e.language?"Büyük":"Big",block:"h3",styles:{fontWeight:"normal"}},{title:("tr"===e.language,"Normal"),block:"h4",styles:{fontWeight:"normal"}},{title:"tr"===e.language?"Küçük":"Small",block:"h5",styles:{fontWeight:"normal"}},{title:"tr"===e.language?"Çok Küçük":"Very Small",block:"h6",styles:{fontWeight:"normal"}}]}],mode:"exact",elements:o.id,language:e.language,menubar:!1,statusbar:!1,plugins:"fullscreen paste",paste_as_text:!0,toolbar:"bold italic bullist numlist | styleselect | fullscreen",skin:"lightgray",theme:"modern",height:"200"},i=o.uiTinymce?a.$eval(o.uiTinymce):{},angular.extend(s,t,i),setTimeout(function(){tinymce.init(s)}),r.$render=function(){u||(u=tinymce.get(o.id)),u&&u.setContent(r.$viewValue||"")}}}}]).directive("location",["$rootScope","config","$filter","$timeout",function(e,t,n,a){return{restrict:"E",require:"^?ngModel",link:function(e,t,n,l){function o(e){u.latitude=e.coords.latitude,u.longitude=e.coords.longitude,u.zoom=10,i()}function r(){i()}function i(){var n=t[0];if(e.addres&&!e.location){var l=new google.maps.Geocoder;l.geocode({address:e.addres},function(e,t){a(function(){"OK"===t?(u.latitude=e[0].geometry.location.lat(),u.longitude=e[0].geometry.location.lng(),s(n)):s(n)})})}else s(n)}function s(t){if(e.location){var n=e.location.split(",");u.latitude=n[0],u.longitude=n[1],u.zoom=17}var a=new google.maps.LatLng(u.latitude,u.longitude),o={center:a,zoom:u.zoom},r=new google.maps.Map(t,o),i=new google.maps.Marker({draggable:!0,animation:google.maps.Animation.DROP,position:a});l.$setViewValue(u.latitude+","+u.longitude);var s=new google.maps.InfoWindow;r.addListener("mouseup",function(e){var t=e.latLng;l.$setViewValue(t.lat()+","+t.lng()),s.setContent(t.lat()+","+t.lng()),s.open(r,i)}),r.addListener("click",function(t){var n=t.latLng,n=t.latLng;e.ngModel=n.lat()+","+n.lng(),s.setContent(n.lat()+","+n.lng()),i.setPosition(n),s.open(r,i),l.$setViewValue(n.lat()+","+n.lng())}),i.setMap(r)}var u={latitude:39.93948807471046,longitude:32.85907745361328,zoom:5};navigator.geolocation.getCurrentPosition(o,r)}}}]).directive("trial",["$rootScope","$modal","$http","config","$filter","ngToast",function(e,t,n,a,l,o){return{restrict:"EA",templateUrl:"view/app/trial/trial-box.html?v="+version,controller:["$scope",function(r){var i=window.location.hostname;if(i.indexOf("ofisim.com")>-1||i.indexOf("localhost")>-1){r.promotion={fullName:e.user.full_name,phoneNumber:e.user.phone,email:e.user.email,useCount:"",sector:""};var s=new Date,u=new Date(e.user.created_at),c=(s-u)/1e3;c=Math.abs(Math.floor(c)),r.day=15-Math.floor(c/86400),r.isPaid=e.user.is_paid_customer,r.trailMessage=l("translate")("Trial.DaysRemainingForYourTrial",{remaining:r.day}),r.sector=[{label_tr:"Ağaç İşleri, Kağıt ve Kağıt Ürünleri",label_en:"Woodworking Industry",value:"Ağaç İşleri, Kağıt ve Kağıt Ürünleri"},{label_tr:"Banka, Finans",label_en:"Banking & Finance",value:"Banka, Finans"},{label_tr:"Bilişim Teknolojileri",label_en:"Information Technology",value:"Bilişim Teknolojileri"},{label_tr:"Çevre",label_en:"Environmental",value:"Çevre"},{label_tr:"Diğer",label_en:"Çevre",value:"Diğer"},{label_tr:"Eğitim",label_en:"Education",value:"Eğitim"},{label_tr:"Elektrik, Elektronik",label_en:"Electronics",value:"Elektrik, Elektronik"},{label_tr:"Enerji",label_en:"Energy",value:"Enerji"},{label_tr:"Gıda",label_en:"Food & Beverage",value:"Gıda"},{label_tr:"Hukuk Firmaları",label_en:"Law Firms",value:"Hukuk Firmaları"},{label_tr:"İnşaat",label_en:"Construction",value:"İnşaat"},{label_tr:"Kamu Kurumları",label_en:"Government",value:"Kamu Kurumları"},{label_tr:"Kar Amacı Gütmeyen Kurumlar",label_en:"Non Profit Organizations",value:"Kar Amacı Gütmeyen Kurumlar"},{label_tr:"Kimya, Petrol, Lastik ve Plastik",label_en:"Chemicals",value:"Enerji"},{label_tr:"Kültür, Sanat",label_en:"Çevre",value:"Kültür, Sanat"},{label_tr:"Madencilik",label_en:"Mining",value:"Madencilik"},{label_tr:"Medya, İletişim",label_en:"Media & Press",value:"Medya, İletişim"},{label_tr:"Otomotiv",label_en:"Automotive",value:"Otomotiv"},{label_tr:"Perakende",label_en:"Retail",value:"Perakende"},{label_tr:"Sağlık ve Sosyal Hizmetler",label_en:"Healthcare",value:"Sağlık ve Sosyal Hizmetler"},{label_tr:"Tarım, Avcılık, Balıkçılık",label_en:"Agriculture",value:"Tarım, Avcılık, Balıkçılık"},{label_tr:"Tekstil, Hazır Giyim, Deri",label_en:"Textile",value:"Tekstil, Hazır Giyim, Deri"},{label_tr:"Telekomünikasyon",label_en:"Telecommunication",value:"Telekomünikasyon"},{label_tr:"Ticaret (Satış ve Pazarlama)",label_en:"Sales & Marketing",value:"Ticaret (Satış ve Pazarlama)"},{label_tr:"Turizm, Konaklama",label_en:"Hospitality",value:"Turizm, Konaklama"},{label_tr:"Ulaştırma, Lojistik ve Haberleşme",label_en:"Transportation & Logistics",value:"Ulaştırma, Lojistik ve Haberleşme"},{label_tr:"Üretim",label_en:"Manufacturing",value:"Üretim"}],r.language=e.language,r.showPromotionModal=function(i){r.trailType=i,r.promotionModal=r.promotionModal||t({scope:r,templateUrl:"/view/app/trial/promotionFormModal.html",size:"modal-sm",controller:function(){r.sendEmail=function(t){if(t.$valid){var i={};i.Subject="promotion"==r.trailType?"Tanıtım İsteği":"Satın Alma Talebi",i.TemplateWithBody='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office"><head> <title></title> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <style type="text/css"> body, .maintable { height: 100% !important; width: 100% !important; margin: 0; padding: 0; } img, a img { border: 0; outline: none; text-decoration: none; } .imagefix { display: block; } p { margin-top: 0; margin-right: 0; margin-left: 0; padding: 0; } .ReadMsgBody { width: 100%; } .ExternalClass { width: 100%; } .ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div { line-height: 100%; } img { -ms-interpolation-mode: bicubic; } body, table, td, p, a, li, blockquote { -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; } </style> <style type="text/css"> @media only screen and (max-width: 600px) { .rtable { width: 100% !important; table-layout: fixed; } .rtable tr { height: auto !important; display: block; } .contenttd { max-width: 100% !important; display: block; } .contenttd:after { content: ""; display: table; clear: both; } .hiddentds { display: none; } .imgtable, .imgtable table { max-width: 100% !important; height: auto; float: none; margin: 0 auto; } .imgtable.btnset td { display: inline-block; } .imgtable img { width: 100%; height: auto; display: block; } table { float: none; table-layout: fixed; } } </style> <!--[if gte mso 9]><xml> <o:OfficeDocumentSettings> <o:AllowPNG/> <o:PixelsPerInch>96</o:PixelsPerInch> </o:OfficeDocumentSettings></xml><![endif]--></head><body style="overflow: auto; padding:0; margin:0; font-size: 14px; font-family: arial, helvetica, sans-serif; cursor:auto; background-color:#444545"> <table cellspacing="0" cellpadding="0" width="100%" bgcolor="#444545"> <tr> <td style="FONT-SIZE: 0px; HEIGHT: 20px; LINE-HEIGHT: 0"></td> </tr> <tr> <td valign="top"> <table class="rtable" style="WIDTH: 600px; MARGIN: 0px auto" cellspacing="0" cellpadding="0" width="600" align="center" border="0"> <tr> <td class="contenttd" style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent"> <table style="WIDTH: 100%" cellspacing="0" cellpadding="0" align="left"> <tr class="hiddentds"> <td style="FONT-SIZE: 0px; HEIGHT: 0px; WIDTH: 367px; LINE-HEIGHT: 0; mso-line-height-rule: exactly"></td> <td style="FONT-SIZE: 0px; HEIGHT: 0px; WIDTH: 233px; LINE-HEIGHT: 0; mso-line-height-rule: exactly"></td> </tr> <tr style="HEIGHT: 10px"> <th class="contenttd" style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; VERTICAL-ALIGN: middle; BORDER-BOTTOM: medium none; FONT-WEIGHT: normal; PADDING-BOTTOM: 20px; TEXT-ALIGN: left; PADDING-TOP: 20px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 15px; BACKGROUND-COLOR: transparent"></th> <th class="contenttd" style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; VERTICAL-ALIGN: middle; BORDER-BOTTOM: medium none; FONT-WEIGHT: normal; PADDING-BOTTOM: 20px; TEXT-ALIGN: left; PADDING-TOP: 20px; PADDING-LEFT: 15px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent"></th> </tr> </table> </td> </tr> <tr> <td class="contenttd" style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: #feffff"> <table style="WIDTH: 100%" cellspacing="0" cellpadding="0" align="left"> <tr class="hiddentds"> <td style="FONT-SIZE: 0px; HEIGHT: 0px; WIDTH: 600px; LINE-HEIGHT: 0; mso-line-height-rule: exactly"></td> </tr> <tr style="HEIGHT: 20px"> <th class="contenttd" style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; VERTICAL-ALIGN: bottom; BORDER-BOTTOM: medium none; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: #1296f7"> <p style="FONT-SIZE: 36px; MARGIN-BOTTOM: 1em; FONT-FAMILY: arial, helvetica, sans-serif; MARGIN-TOP: 0px; COLOR: #fffeff; LINE-HEIGHT: 36px; BACKGROUND-COLOR: transparent; mso-line-height-rule: exactly" align="center"><br /> '+i.Subject+'</p> </th> </tr> </table> </td> </tr> <tr> <td class="contenttd" style="BORDER-TOP: #e73d11 5px solid; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: #feffff"> <table style="WIDTH: 100%" cellspacing="0" cellpadding="0" align="left"> <tr class="hiddentds"> <td style="FONT-SIZE: 0px; HEIGHT: 0px; WIDTH: 600px; LINE-HEIGHT: 0; mso-line-height-rule: exactly" colspan="2"></td> </tr> <tr style="HEIGHT: 71px"> <th class="contenttd" style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; VERTICAL-ALIGN: middle; BORDER-BOTTOM: medium none; FONT-WEIGHT: normal; PADDING-BOTTOM: 5px; TEXT-ALIGN: left; PADDING-TOP: 5px; PADDING-LEFT: 15px; BORDER-LEFT: medium none; PADDING-RIGHT: 15px; BACKGROUND-COLOR: transparent" colspan="2"> <div> <p style="FONT-SIZE: 18px; MARGIN-BOTTOM: 1em; FONT-FAMILY: geneve, arial, helvetica, sans-serif; MARGIN-TOP: 0px; COLOR: #2d2d2d; TEXT-ALIGN: justify; PADDING-LEFT: 110px; LINE-HEIGHT: 29px; BACKGROUND-COLOR: transparent; mso-line-height-rule: exactly" align="justify"><strong><br />&#304;sim Soyisim</strong>:'+r.promotion.fullName+"<br /> <strong>Telefon Numaras&#305;</strong>:"+r.promotion.phoneNumber+"<br /> <strong>E-Posta</strong>: "+r.promotion.email+"<br /> <strong>Uygulamay&#305; Kullanacak Ki&#351;i Say&#305;s&#305;</strong>: "+r.promotion.useCount+"<br /> <strong>Sekt&ouml;r</strong> :"+r.promotion.sector.value+"<br /> <strong>M&uuml;&#351;teri Epostas&#305;</strong>: "+e.user.email+'</p> </div> </th> </tr> </table> </td> </tr> <tr> <td class="contenttd" style="BORDER-TOP: #e73d11 5px solid; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: #feffff"> <table style="WIDTH: 100%" cellspacing="0" cellpadding="0" align="left"> <tr class="hiddentds"> <td style="FONT-SIZE: 0px; HEIGHT: 0px; WIDTH: 600px; LINE-HEIGHT: 0; mso-line-height-rule: exactly"></td> </tr> <tr style="HEIGHT: 20px"> <th class="contenttd" style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; VERTICAL-ALIGN: top; BORDER-BOTTOM: medium none; FONT-WEIGHT: normal; PADDING-BOTTOM: 20px; TEXT-ALIGN: left; PADDING-TOP: 20px; PADDING-LEFT: 15px; BORDER-LEFT: medium none; PADDING-RIGHT: 15px; BACKGROUND-COLOR: transparent"></th> </tr> </table> </td> </tr> </table> </td> </tr> <tr> <td style="FONT-SIZE: 0px; HEIGHT: 8px; LINE-HEIGHT: 0">&nbsp;</td> </tr> </table> <!-- Created with MailStyler 2.0.1.300 --></body></html>',i.ToAddresses=["info@ofisim.com"],n.post(a.apiUrl+"messaging/send_external_email",i).then(function(){o.create({content:l("translate")("Trial.RequestMessage"),className:"success",timeout:5e3}),r.promotionModal.hide()})}}},backdrop:"static",show:!1}),r.promotionModal.$promise.then(r.promotionModal.show)},r.day>=0&&r.day<=15&&e.user.id===e.user.tenant_id&&!r.isPaid&&!e.preview&&(e.trial=!0)}}]}}]).directive("helpPage",["$rootScope","$modal","$http","config","$filter","ngToast","HelpService","$sce","$cache","$localStorage",function(e,t,n,a,l,o,r,i,s,u){return{restrict:"EA",scope:{moduleId:"=",route:"="},controller:["$scope",function(n){if(e.isMobile())return!1;if(n.openHelpModal=function(){n.helpModal=n.helpModal||t({scope:n,templateUrl:"view/setup/help/helpPageModal.html",animation:"am-fade",backdrop:!0,show:!1,tag:"helpModal",container:"body"}),n.helpModal.$promise.then(n.helpModal.show)},n.selectedClose=!0,n.selectedCloseModalForRoute=2,n.selectedCloseModalForModule=!0,u.read("startPage")){if(n.startPage=JSON.parse(u.read("startPage")),u.read("routeShow")){n.selectedCloseStartPage=JSON.parse(u.read("routeShow"));var a=l("filter")(n.selectedCloseStartPage,{name:n.route})[0]}var o=l("filter")(n.startPage,{name:n.route})[0];a?n.selectedCloseModalForRoute=a.value:o&&(n.selectedCloseModalForRoute=o.value)}if(u.read("moduleShow")){n.selectedCloseModal=JSON.parse(u.read("moduleShow"));var c=l("filter")(n.selectedCloseModal,{name:n.moduleId})[0];c&&(n.selectedCloseModalForModule=c.value)}if(u.read("routeShow")){n.selectedCloseRoute=JSON.parse(u.read("routeShow"));var a=l("filter")(n.selectedCloseRoute,{name:n.route})[0];n.selectedCloseModalForRoute=a?a.value:2}n.openModal=function(){if(n.helpTemplatesModal&&"publish"===n.helpTemplatesModal.show_type&&(n.helpTemplate=i.trustAsHtml(n.helpTemplatesModal.template),u.read("ModalShow")&&(n.selectedClose=JSON.parse(u.read("ModalShow"))),n.selectedClose===!0)){if(n.moduleId&&n.selectedCloseModalForModule)if(n.openHelpModal(),u.read("moduleShow")){n.modalModules=JSON.parse(u.read("moduleShow")),n.modulShowArray={name:n.moduleId,value:!1};var t=l("filter")(n.modalModules,{name:n.modulShowArray.name})[0];t||(n.modalModules.push(n.modulShowArray),u.write("moduleShow",JSON.stringify(n.modalModules)))}else n.modalModules=[],n.modulShowArray={
name:n.moduleId,value:!1},n.modalModules.push(n.modulShowArray),u.write("moduleShow",JSON.stringify(n.modalModules));if(n.route&&1===n.selectedCloseModalForRoute&&u.read("startPage")){n.startPage=JSON.parse(u.read("startPage"));var a=l("filter")(n.startPage,{name:n.route})[0];if(a&&1===a.value){var o=[],r={name:e.currentPath,value:2};o.push(r),u.write("startPage",JSON.stringify(o))}}n.route&&2===n.selectedCloseModalForRoute&&(n.openHelpModal(),u.read("routeShow")?(n.routes=JSON.parse(u.read("routeShow")),n.routeShowArray={name:n.route,value:3},n.routes.push(n.routeShowArray),u.write("routeShow",JSON.stringify(n.routes))):(n.routes=[],n.routeShowArray={name:n.route,value:3},n.routes.push(n.routeShowArray),u.write("routeShow",JSON.stringify(n.routes))))}};var d="help-";n.moduleId&&(d+="-"+n.moduleId),n.route&&(n.route.replace("/","--"),d+=n.route),s.get(d)&&(n.helpTemplatesModal=s.get(d),n.selectedClose&&n.openModal()),n.helpTemplatesModal||r.getByType("modal",n.moduleId,n.route).then(function(e){e.data&&(n.helpTemplatesModal=e.data,s.put(d,e.data),n.selectedClose&&n.openModal())}),n.showModal=function(){(n.moduleId||n.route)&&u.write("ModalShow",!1)}}]}}]).directive("zxPasswordMeter",["$filter",function(e){return{scope:{value:"=",max:"@?"},templateUrl:"view/common/password-meter.html?v="+version,link:function(t){t.type="",t.max=t.max?t.max:4,t.firstRun=!0,t.$watch("value.password",function(e){(e||e.length>0||t.visible)&&(t.visible=!0)}),t.$watch("value.score",function(n){var a=n/t.max;0===a?(t.type="progress-bar-danger",t.text=e("translate")("Common.Awful"),t.width=25):.25>=a?(t.type="progress-bar-warning",t.text=e("translate")("Common.Weak"),t.width=40):.5>=a?(t.type="progress-bar-info",t.text=e("translate")("Common.Moderate"),t.width=50):.75>=a?(t.type="progress-bar-info",t.text=e("translate")("Common.Strong"),t.width=80):(t.type="progress-bar-success",t.text=e("translate")("Common.Perfect"),t.width=100)})}}}]).directive("inputStars",[function(){function e(e){return Number(e)===e&&e%1!==0}function t(t,n,a,l){function o(e,t){return e.pageX<t.getBoundingClientRect().left+t.offsetWidth/2}var r={get allowHalf(){return"string"==typeof a.allowHalf&&"false"!=a.allowHalf},get readonly(){return"false"!=a.readonly&&(a.readonly||""===a.readonly)},get fullIcon(){return a.iconFull||"fa-star"},get halfIcon(){return a.iconHalf||"fa-star-half-o"},get emptyIcon(){return a.iconEmpty||"fa-star-o"},get iconBase(){return a.iconBase||"fa fa-fw"},get iconHover(){return a.iconHover||"angular-input-stars-hover"}};t.items=new Array(+a.max),t.listClass=a.listClass||"angular-input-stars",l.$render=function(){t.lastValue=e(l.$viewValue)?Math.round(2*parseFloat(l.$viewValue))/2:parseFloat(l.$viewValue)||0},t.getClass=function(e){var n;if(e>=t.lastValue)n=r.iconBase+" "+r.emptyIcon;else{var a=e+.5;n=r.allowHalf&&a===t.lastValue?r.iconBase+" "+r.halfIcon+" active ":r.iconBase+" "+r.fullIcon+" active "}return r.readonly?n+" readonly":n},t.unpaintStars=function(e,n){t.paintStars(t.lastValue-1,n)},t.paintStars=function(e,t){if(!r.readonly){for(var a=n.find("li").find("i"),l=0;l<a.length;l++){var o,i,s=angular.element(a[l]);e>=l?(o=[r.emptyIcon,r.halfIcon],i=[r.iconHover,r.fullIcon,"active"]):(o=[r.fullIcon,r.iconHover,r.halfIcon,"active"],i=r.allowHalf&&e+.5===l?[r.halfIcon,"active"]:[r.emptyIcon]),s.removeClass(o.join(" ")),s.addClass(i.join(" "))}t||a.removeClass(r.iconHover)}},t.setValue=function(e,n){if(!r.readonly){var i,s=n.target;if(i=r.allowHalf&&o(n,s)?e+.5:e+1,i===t.lastValue&&(i=0),t.lastValue=i,l.$setViewValue(i),l.$render(),a.onStarClick)try{t.$parent.$eval(a.onStarClick,{$event:n})}catch(n){}}}}var n={restrict:"EA",replace:!0,template:'<ul ng-class="listClass"><li ng-touch="paintStars($index)" ng-mouseenter="paintStars($index, true, $event)" ng-mouseleave="unpaintStars($index, false)" ng-repeat="item in items track by $index"><i  ng-class="getClass($index)" ng-click="setValue($index, $event)"></i></li></ul>',require:"ngModel",scope:{bindModel:"=ngModel"},link:t};return n}]);
"use strict";angular.module("primeapps").filter("msDate",["convert",function(r){return function(t){return t?r.fromMsDate(t):void 0}}]).filter("taskDateActive",["convert","helper","$filter","taskDate",function(r,t,e,n){return function(r){if(r){var a=t.dateDiff(r),u=new Date;if(u.setHours(0,0,0,0),u>r){var i=0===a?"ExpiredSingle":"Expired";return e("translate")("Tasks."+i,{days:a+1})}return 0===a?e("translate")("Tasks.Today"):1===a?e("translate")("Tasks.Tomorrow"):7>a?e("date")(r,"EEEE"):r===n.future?e("translate")("Tasks.Future"):u.getYear()===new Date(r).getYear()?e("date")(r,"d MMMM"):e("date")(r,"d MMMM yyyy")}}}]).filter("taskDateCompleted",["convert","helper","$filter",function(r,t,e){return function(r){if(r){var n=t.dateDiff(r),a=new Date;return a.setHours(0,0,0,0),0===n?e("translate")("Tasks.Today"):1===n?e("translate")("Tasks.Yesterday"):7>=n?e("translate")("Tasks.DaysAgo",{days:n}):a.getYear()===new Date(r).getYear()?e("date")(r,"d MMMM"):e("date")(r,"d MMMM yyyy")}}}]).filter("taskDateOptions",["convert","helper","$filter","taskDate",function(r,t,e,n){return function(r){if(r)switch(r){case n.future:return e("translate")("Tasks.Future");case n.today:return e("translate")("Tasks.Today");case n.tomorrow:return e("translate")("Tasks.Tomorrow");case n.nextWeek:return e("translate")("Tasks.NextWeek");default:return e("date")(r,"d MMMM yyyy")}}}]).filter("taskLabel",["convert","helper",function(r,t){return function(r){if(r){var e=t.dateDiff(r),n=new Date;return n.setHours(0,0,0,0),n>r?"danger":0===e?"warning":1===e?"success":"info"}}}]).filter("roundNumber",function(){return function(r,t){if(isNaN(r))return r;var e="1"+new Array(+(t>0&&t+1)).join("0");return Math.round(r*e)/e}}).filter("size",["$filter",function(r){return function(t){if(!t)return"-";var e=1024,n=1024*e,a=1024*n,u=1024*a;return t>=0&&e>t?t+" B":t>=e&&n>t?r("roundNumber")(t/e,1)+" KB":t>=n&&a>t?r("roundNumber")(t/n,1)+" MB":t>=a&&u>t?r("roundNumber")(t/a,1)+" GB":t>=u?r("roundNumber")(t/u,1)+" TB":t+" B"}}]).filter("relativeTime",["helper",function(){return function(r){var t=moment.utc(r);return t.fromNow()}}]).filter("storagePercent",function(){return function(r,t){return Math.round(100*t/r)}}).filter("capitalize",["helper",function(r){return function(t){return r.capitalize(t)}}]).filter("orderByLabel",function(){return function(r,t,e){var n=angular.copy(r);return n.sort(function(r,e){var n=r["label_"+t].toUpperCase(),a=e["label_"+t].toUpperCase();return n.localeCompare(a)}),e&&n.reverse(),n}}).filter("format",function(){return function(r){var t=arguments;return r.replace(/\{(\d+)\}/g,function(r,e){return t[1*e+1]})}}).filter("mask",function(){function r(){return"_"}function t(t){if(n[t])return n[t];var e=0,i=[],o=[],f="",s=0;if(angular.isString(t)){var l=!1,c=0,d=t.split(""),p=!1;angular.forEach(d,function(t,n){p?(p=!1,f+=t,e++):a===t?p=!0:u[t]?(i.push(e),f+=r(n-c),o.push(u[t]),e++,l||s++,l=!1):"?"===t?(l=!0,c++):(f+=t,e++)})}return i.push(i.slice().pop()+1),n[t]={maskCaretMap:i,maskPlaceholder:f}}function e(r,t){r=r||"";var e="",n=t.maskCaretMap.slice();return angular.forEach(t.maskPlaceholder.split(""),function(t,a){r.length&&a===n[0]?(e+=r.charAt(0)||"_",r=r.substr(1),n.shift()):e+=t}),e}var n={},a="\\",u={9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/};return function(r,n){var a=t(n),u=e(r,a);return u}}).filter("filterWithOr",function(r){var t=function(r,t){if(angular.isUndefined(r))return!1;if(null===r||null===t)return r===t;if(angular.isObject(t)&&!angular.isArray(t)||angular.isObject(r)&&!hasCustomToString(r))return!1;if(r=(""+r).toLowerCase(),angular.isArray(t)){var e=!1;return t.forEach(function(t){t=(""+t).toLowerCase(),-1!==r.indexOf(t)&&(e=!0)}),e}return t=(""+t).toLowerCase(),-1!==r.indexOf(t)};return function(e,n){return r("filter")(e,n,t)}}).filter("formatToMinuteAndSecond",function(){return function(r){function t(r){return(10>r?"0":"")+r}var e=r%60,n=Math.floor(r/60),a=Math.floor(n/60);return t(a)+":"+t(n)+":"+t(e)}}).filter("orderNotZero",function(){return function(r){var t=[];return angular.forEach(r,function(r){0!=r.order&&t.push(r)}),t}}).filter("titleCase",function(){return function(r){return r.charAt(0).toUpperCase()+r.slice(1)}}).filter("trustUrl",["$sce",function(r){return function(t){return r.trustAsResourceUrl(t)}}]);
"use strict";angular.module("primeapps").factory("AuthService",["$http","config","$localStorage","$window","$location","$timeout","$rootScope","$q","$sessionStorage","$cache",function(e,t,r,o,n,a,s,c,i,u){return{isUniqueEmail:function(r){return e.get(t.apiUrl+"Public/IsUniqueEmail?email="+r)},register:function(r){return e.post(t.apiUrl+"account/register",r)},activate:function(r,o,n){return e.get(t.apiUrl+"account/activate?userId="+r+"&token="+o+"&culture="+n)},token:function(r,o){var n="grant_type=password&client_id="+t.clientId+"&username="+r+"&password="+o;return e.post(t.apiUrl+"token",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},refresh:function(){var o=c.defer(),n=r.get("refresh_token"),a="grant_type=refresh_token&client_id="+t.clientId+"&refresh_token="+n;return e.post(t.apiUrl+"token",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){r.set("access_token",e.data.access_token),r.set("refresh_token",e.data.refresh_token),o.resolve(e.data)})["catch"](function(e){r.remove("access_token"),r.remove("refresh_token"),o.reject(e.data)}),o.promise},checkCampaignCode:function(r,o){return e.post(t.apiUrl+"Public/CheckCampaignCode",{Code:r,LicenseID:o})},resendActivationMail:function(r,o){return e.get(t.apiUrl+"account/resend_activation?email="+r+"&culture="+o)},changePassword:function(r,o,n){return e.post(t.apiUrl+"account/change_password",{OldPassword:r,NewPassword:o,ConfirmPassword:n})},forgotPassword:function(r,o){return e.get(t.apiUrl+"account/forgot_password?email="+r+"&culture="+o)},resetPassword:function(r,o,n,a){return e.post(t.apiUrl+"account/reset_password",{UserId:r,Token:o,Password:n,ConfirmPassword:a})},logoutComplete:function(){r.remove("access_token"),r.remove("refresh_token"),r.remove("Workgroup"),i.clear(),u.removeAll()},isAuthenticated:function(){return!!r.read("access_token")},resetScope:function(){var e=["authLogo","currentPath","pageTitle","theme","app"];for(var t in s)"$"!==t.substring(0,1)&&-1===e.indexOf(t)&&delete s[t]},getCustomInfo:function(r){return e.get(t.apiUrl+"Public/GetCustomInfo?customDomain="+r)}}}]);
"use strict";angular.module("primeapps").factory("AppService",["$rootScope","$http","$localStorage","$cache","$q","$filter","$timeout","$state","config","helper","sipHelper","entityTypes","taskDate","dataTypes","activityTypes","operators","systemRequiredFields","systemReadonlyFields","$window","$modal","$sce","AuthService","$cookies","blockUI",function(e,a,t,i,l,r,o,p,s,m,u,d,n,g,c,h,y,f,_,v,I,k,b,w){return{getMyAccount:function(i){if(!i&&e.config&&e.user&&e.workgroups&&e.modules&&e.users)return null;var o=this,d=l.defer(),g=function(){t.remove("access_token"),t.remove("refresh_token"),t.remove("Workgroup")};return a.post(s.apiUrl+"User/MyAccount",{}).then(function(i){if(200!=i.status||!i.data)return g(),null===i.data?d.resolve(401):d.resolve(!1),k.logout().then(function(a){e.app="crm",k.logoutComplete(),b.remove("tenant_id"),window.location=a.data.redirect_url,w.stop()}),d.promise;var h=window.location.hostname,y=i.data.user.appId,f=!0;if(h.indexOf("localhost")<0&&(h.indexOf("crm.ofisim.com")>-1&&1!=y?f=!1:"test.ofisim.com"===h&&1!=y?f=!1:"dev.ofisim.com"===h&&1!=y?f=!1:h.indexOf("kobi.ofisim.com")>-1&&2!=y?f=!1:h.indexOf("kobi-test.ofisim.com")>-1&&2!=y?f=!1:h.indexOf("asistan.ofisim.com")>-1&&3!=y?f=!1:h.indexOf("asistan-test.ofisim.com")>-1&&3!=y?f=!1:h.indexOf("ik.ofisim.com")>-1&&4!=y?f=!1:h.indexOf("ik-test.ofisim.com")>-1&&4!=y?f=!1:h.indexOf("ik-dev.ofisim.com")>-1&&4!=y?f=!1:h.indexOf("hr.ofisim.com")>-1&&8!=y?f=!1:h.indexOf("hr-test.ofisim.com")>-1&&8!=y?f=!1:h.indexOf("hr-dev.ofisim.com")>-1&&8!=y?f=!1:h.indexOf("cagri.ofisim.com")>-1&&5!=y?f=!1:h.indexOf("cagri-test.ofisim.com")>-1&&5!=y&&(f=!1)),!f)return void(_.location.href="/auth/login?Error=isNotValidApp");var S=[];S.push(a.get(s.apiUrl+"module/get_all")),S.push(a.get(s.apiUrl+"messaging/get_config")),S.push(a.get(s.apiUrl+"User/get_all")),S.push(a.get(s.apiUrl+"Profile/GetAllBasic")),S.push(a.get(s.apiUrl+"module/get_module_settings")),S.push(a.get(s.apiUrl+"phone/get_config")),S.push(a.get(s.apiUrl+"process/get_all")),S.push(a.get(s.apiUrl+"module_profile_settings/get_all")),S.push(a.get(s.apiUrl+"help/get_all")),S.push(a.get(s.apiUrl+"help/get_first_screen?templateType=modal&firstscreen="+!0)),S.push(a.get(s.apiUrl+"menu/get/"+i.data.user.profile.id)),S.push(a.get(s.apiUrl+"settings/get_all/custom?userId="+i.data.user.id)),S.push(a.get(s.apiUrl+"settings/get_all/1")),S.push(a.get(s.apiUrl+"settings/get_by_key/1/custom_profile_permissions")),l.all(S).then(function(h){if(h.length<6||200!=h[0].status||200!=h[1].status||200!=h[2].status||200!=h[3].status||200!=h[4].status||200!=h[5].status||!h[0].data||!h[1].data||!h[2].data||!h[3].data||!h[4].data)return g(),d.resolve(!1),d.promise;var y=i.data.user.isDemo||!1,f=i.data,_=y?r("filter")(h[0].data,function(e){return e.created_by_id==f.user.id||"system"==e.system_type},!0):h[0].data,k=h[1].data,b=y?r("filter")(h[2].data,function(e){return e.id==f.user.id},!0):h[2].data,w=y?r("filter")(h[3].data,function(e){return e.created_by_id==f.user.id||e.is_persistent===!0},!0):h[3].data,S=h[4].data,M=h[5].data,A=h[11].data;if(f.instances.length<1)return void p.go("join");for(var z=_.map(function(e){return e.name}),N=_.length-1;N>=0;N--)for(var P=_[N].fields.length-1;P>=0;P--)"lookup"==_[N].fields[P].data_type&&"users"!=_[N].fields[P].lookup_type&&"profiles"!=_[N].fields[P].lookup_type&&"roles"!=_[N].fields[P].lookup_type&&"relation"!=_[N].fields[P].lookup_type&&-1===z.indexOf(_[N].fields[P].lookup_type)&&_[N].fields.splice(P,1);e.user=f.user,e.workgroups=f.instances,e.multiTenant=f.apps;var x=t.read("Workgroup");if(e.workgroup=f.instances[0],x){var F=r("filter")(f.instances,{instanceID:x},!0)[0];F&&(e.workgroup=F)}s.imageUrl=blobUrl+"/",s.storage_host=blobUrl+"/",e.config=s,e.taskDate=n,e.users=b,e.language=t.read("NG_TRANSLATE_LANG_KEY"),e.locale=t.read("locale_key"),e.currencySymbol=o.getCurrencySymbol(e.workgroup.currency),e.modules=_,e.modules.push(o.getUserModule()),e.modules.push(o.getProfileModule()),e.modules.push(o.getRoleModule()),e.profiles=w,e.moduleSettings=S,e.system={},e.approvalProcesses=h[6].data,e.helpPageFirstScreen=h[9].data;var U=h[12].data;e.user.settings=[];for(var T=0;T<A.length;T++)e.user.settings[A[T].key]=A[T];if(e.user.settings.has_analytics&&("True"===e.user.settings.has_analytics.value?e.user.has_analytics=!0:e.user.has_analytics=!1),e.openFirtScreenHelpModal=function(){return e.isMobile=function(){var e=!1;return function(a){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},e.isMobile()?!1:(e.helpModal=e.helpModal||v({scope:e,templateUrl:"view/setup/help/helpPageModal.html",animation:"",backdrop:"static",show:!1,tag:"createModal"}),void e.helpModal.$promise.then(e.helpModal.show))},e.firtScreenShow=!0,e.helpPageFirstScreen&&"publish"===e.helpPageFirstScreen.show_type){if(e.helpTemplate=I.trustAsHtml(e.helpPageFirstScreen.template),t.read("FirstScreen")&&(e.firtScreenShow=JSON.parse(t.read("FirstScreen"))),e.firtScreenShow&&e.openFirtScreenHelpModal(),!t.read("startPage")){var R=[],O={name:e.currentPath,value:1};R.push(O),t.write("startPage",JSON.stringify(R))}t.write("FirstScreen",!1),e.showModal=function(){t.write("ModalShow",!1)}}e.customMenu=!1;var E=r("filter")(h[10].data,{deleted:!1},!0);E.length>0&&(e.customMenu=!0,e.menu=r("orderBy")(E,"order",!1));var D=h[13].data;D&&(e.customProfilePermissions=JSON.parse(D.value).profilePermissions);var q=h[7].data;if(q.length>0)for(var H=0;H<q.length;H++)for(var $=q[H],C=0;C<$.profile_list.length;C++){var j=$.profile_list[C];if(parseInt(j)===e.user.profile.id){var Y=r("filter")(e.modules,{id:$.module_id},!0)[0];if(Y)if(e.customMenu){var B;if(B=r("filter")(e.menu,{route:Y.name},!0)[0],!B)for(var L=0;L<e.menu.length;L++)if(!B){var V=e.menu[L];B=r("filter")(V.menu_items,{route:Y.name},!0)[0]}if(!B)var B={};B.label_tr=$.label_tr_plural,B.label_en=$.label_en_plural,B.menu_icon=$.menu_icon,Y.display=$.display,$.display||(B.hide=!0)}else Y.label_en_plural=$.label_en_plural,Y.label_en_singular=$.label_en_singular,Y.label_tr_plural=$.label_tr_plural,Y.label_tr_singular=$.label_tr_singular,Y.menu_icon=$.menu_icon,Y.display=$.display}}if(e.customMenu)for(var K=0;K<e.menu.length;K++){var G=e.menu[K];if(r("filter")(G.menu_items,{hide:!0},!0).length===G.menu_items.length&&(G.hide=!0),G.module_id){var J=r("filter")(e.modules,{id:G.module_id},!0)[0];G.display=J.display}else{G.display=!0;for(var W=0;W<G.menu_items.length;W++)if(G.menu_items[W].module_id){var Q=r("filter")(e.modules,{id:G.menu_items[W].module_id},!0)[0];G.menu_items[W].display=Q.display}else G.menu_items[W].display=!0}}e.isActivityModuleExist=!1,r("filter")(e.modules,{name:"activities"},!0).length>0&&(e.isActivityModuleExist=!0);var X=r("filter")(e.modules,{name:"holidays"},!0)[0];if(X){var Z=r("filter")(X.fields,{name:"country"},!0)[0];m.getPicklists([Z.picklist_id]).then(function(t){var i=t[Z.picklist_id],l=r("filter")(i,{value:"tr"},!0)[0],o=r("filter")(i,{value:"en"},!0)[0],p={};p.limit=1e3,"tr"===e.language&&l?p.filters=[{field:"country",operator:"equals",value:l.labelStr,no:1}]:o&&(p.filters=[{field:"country",operator:"is",value:o.labelStr}]),a.post(s.apiUrl+"record/find/holidays",p).then(function(a){for(var t=a.data,i=[],l=0;l<t.length;l++){var r=moment(t[l].date).format("DD-MM-YYYY");i.push(r)}e.holidaysData=t,e.holidays=i})})}if(k&&(k.SystemEMail&&(k.SystemEMail.enable_ssl="True"===k.SystemEMail.enable_ssl),k.PersonalEMail&&(k.PersonalEMail.enable_ssl="True"===k.PersonalEMail.enable_ssl),e.system.messaging=k),e.workgroup.licenses.sip_license_count>0&&(angular.isObject(M)?e.phoneSettings=M:e.phoneSettings={},e.phoneSettings.sipLicenseCount=e.workgroup.licenses.sip_license_count,M.sipUsers)){var ee=r("filter")(M.sipUsers,{userId:f.user.id.toString(),isActive:"true"},!0)[0];if(ee){var ae=[];ae.push(a.get(s.apiUrl+"phone/get_sip_password")),l.all(ae).then(function(a){if(200===a[0].status){var t=a[0].data;e.sipUser={Extension:ee.extension,Server:ee.server,SipUri:ee.sipuri,Password:t,UserId:ee.userId,IsAutoRegister:ee.isAutoRegister,IsAutoRecordDetail:ee.isAutoRecordDetail,RecordDetailModuleName:ee.recordDetailModuleName,RecordDetailPhoneFieldName:ee.recordDetailPhoneFieldName,userAgent:null,events:{},session:null,line:null,lineInfo:{State:null,TalkingTimer:0,TalkingNumber:null,ActiveNumber:null,IncomingCallNumber:null,TalkingRecordInfo:null,IsMuted:!1,IsHold:!1,ModuleName:null,RecordId:null},activePhoneScreen:"readyScreen",numberToDial:""},e.sipAccessRights=!0,"true"===ee.isAutoRegister&&u.register()}})}}e.locale||(e.locale=e.language,t.write("locale_key",e.language));for(var T=0;T<e.modules.length;T++){var te=e.modules[T];te=o.processModule(te),te.menu_icon||o.setModuleMenuIcon(te)}if(e.tasksNamePlural=r("filter")(e.moduleSettings,{key:"tasks_name_plural"},!0)[0],e.tasksNameSingular=r("filter")(e.moduleSettings,{key:"tasks_name_singular"},!0)[0],e.activityTypeCustom=r("filter")(e.moduleSettings,{key:"activity_type_custom"},!0)[0],e.helpIconHide=r("filter")(e.moduleSettings,{key:"help_icon_hide"},!0)[0],e.helpIconHide=e.helpIconHide&&"true"===e.helpIconHide.value,e.showTimesheetMenu=r("filter")(e.moduleSettings,{key:"show_timesheet_menu"},!0)[0],e.showTimesheetMenu=e.showTimesheetMenu&&"true"===e.showTimesheetMenu.value,e.taskReminderAuto=r("filter")(e.moduleSettings,{key:"task_reminder_auto"},!0)[0],e.taskReminderAuto=e.taskReminderAuto&&"true"===e.taskReminderAuto.value,e.detailViewType=r("filter")(e.moduleSettings,{key:"detail_view_type"},!0)[0],e.detailViewType=e.detailViewType?e.detailViewType.value:"tab",e.advancedDocumentSearch=r("filter")(e.moduleSettings,{key:"advanced_document_search"},!0)[0],e.advancedDocumentSearch=e.advancedDocumentSearch?e.advancedDocumentSearch.value&&e.user.profile.document_search:!1,e.showNotes=r("filter")(e.moduleSettings,{key:"show_notes"},!0)[0],e.showNotes=e.showNotes?e.showNotes.value:!0,e.calendarFields=r("filter")(e.moduleSettings,{key:"calendar_fields"},!0)[0],e.showSaveAndNew=r("filter")(e.moduleSettings,{key:"show_save_and_new"},!0)[0],e.showSaveAndNew=e.showSaveAndNew?e.showSaveAndNew.value:!0,e.personalConvertShow=r("filter")(e.moduleSettings,{key:"personal_convert_show"},!0)[0],e.personalConvertShow=e.personalConvertShow?e.personalConvertShow.value:!1,e.permissionsReport=r("filter")(e.user.profile.permissions,{type:2},!0)[0],e.permissionsNewsfeed=r("filter")(e.user.profile.permissions,{type:3},!0)[0],e.deleteAllHiddenModules=r("filter")(e.moduleSettings,{key:"delete_all_hidden_modules"},!0)[0],e.deleteAllHiddenModules=e.deleteAllHiddenModules?e.deleteAllHiddenModules.value.split(","):[],e.showAttachments=r("filter")(e.moduleSettings,{key:"show_attachments"},!0)[0],e.showAttachments=e.showAttachments?e.showAttachments.value:!0,e.newEpostaFieldName=r("filter")(e.moduleSettings,{key:"e_posta"},!0)[0],e.newEpostaFieldName=e.newEpostaFieldName?e.newEpostaFieldName.value:void 0,e.newAdFieldName=r("filter")(e.moduleSettings,{key:"ad"},!0)[0],e.newAdFieldName=e.newAdFieldName?e.newAdFieldName.value:void 0,e.newSoyadFieldName=r("filter")(e.moduleSettings,{key:"soyad"},!0)[0],e.newSoyadFieldName=e.newSoyadFieldName?e.newSoyadFieldName.value:void 0,U){e.showAccountOwner=r("filter")(U,{key:"show_admin"},!0)[0],e.showSubscriber=r("filter")(U,{key:"show_subscriber"},!0)[0];var ie=r("filter")(U,{key:"employee"},!0)[0];e.isEmployee=ie?ie.value:void 0;var le=r("filter")(h[12].data,{key:"branch"},!0)[0];if(e.branchAvailable=le?"t"===le.value:void 0,e.branchAvailable&&e.isEmployee){var re={filters:[{field:e.newEpostaFieldName?e.newEpostaFieldName:"e_posta",operator:"is",value:f.user.email,no:1},{field:"deleted",operator:"equals",value:!1,no:2}],limit:1};a.post(s.apiUrl+"record/find/"+e.isEmployee,re).then(function(a){var t=a.data;t.length>0?(e.user.calisanId=t[0].id,e.user.branchId=t[0].branch):f.user.profile.has_admin_rights&&(e.user.branchId=1)})}}o.setCustomActivityTypes(c),m.hideLoader(),d.resolve(!0)})}),e.pageTitle||(e.pageTitle="Ofisim.com"),d.promise},getProfileModule:function(){var e={};e.id=1e3,e.name="profiles",e.system_type="system",e.order=999,e.display=!1,e.label_en_singular="Profile",e.label_en_plural="Profiles",e.label_tr_singular="Profil",e.label_tr_plural="Profiller",e.menu_icon="fa fa-users",e.sections=[],e.fields=[];var a={};a.name="profile_information",a.system_type="system",a.order=1,a.column_count=1,a.label_en="Profile Information",a.label_tr="Profil Bilgisi",a.display_form=!0,a.display_detail=!0;var t={};return t.name="name",t.system_type="system",t.data_type="text_single",t.order=2,t.section=1,t.section_column=1,t.primary=!0,t.inline_edit=!1,t.label_en="Name",t.label_tr="İsim",t.display_list=!0,t.display_form=!0,t.display_detail=!0,e.fields.push(t),e},getRoleModule:function(){var a={};a.id=1001,a.name="roles",a.system_type="system",a.order=999,a.display=!1,a.label_en_singular="Role",a.label_en_plural="Roles",a.label_tr_singular="Rol",a.label_tr_plural="Roller",a.menu_icon="fa fa-users",a.sections=[],a.fields=[];var t={};t.name="role_information",t.system_type="system",t.order=1,t.column_count=1,t.label_en="Role Information",t.label_tr="Rol Bilgisi",t.display_form=!0,t.display_detail=!0;var i={};i.name="label_en",i.system_type="system",i.data_type="text_single",i.order=2,i.section=1,i.section_column=1,i.primary="en"==e.user.tenant_language,i.inline_edit=!1,i.label_en="Name English",i.label_tr="İsim İngilizce",i.display_list=!0,i.display_form=!0,i.display_detail=!0,a.fields.push(i);var l={};return l.name="label_tr",l.system_type="system",l.data_type="text_single",l.order=2,l.section=1,l.section_column=1,l.primary="tr"==e.user.tenant_language,l.inline_edit=!1,l.label_en="Name Turkish",l.label_tr="İsim Türkçe",l.display_list=!0,l.display_form=!0,l.display_detail=!0,a.fields.push(l),a},getUserModule:function(){var e={};e.id=999,e.name="users",e.system_type="system",e.order=999,e.display=!1,e.label_en_singular="User",e.label_en_plural="Users",e.label_tr_singular="Kullanıcı",e.label_tr_plural="Kullanıcılar",e.menu_icon="fa fa-users",e.sections=[],e.fields=[];var a={};a.name="user_information",a.system_type="system",a.order=1,a.column_count=1,a.label_en="User Information",a.label_tr="Kullanıcı Bilgisi",a.display_form=!0,a.display_detail=!0;var t={};t.name="email",t.system_type="system",t.data_type="email",t.order=2,t.section=1,t.section_column=1,t.primary=!1,t.inline_edit=!0,t.label_en="Email",t.label_tr="Eposta",t.display_list=!0,t.display_form=!0,t.display_detail=!0,e.fields.push(t);var i={};i.name="first_name",i.system_type="system",i.data_type="text_single",i.order=3,i.section=1,i.section_column=1,i.primary=!1,i.inline_edit=!0,i.editable=!0,i.show_label=!0,i.label_en="First Name",i.label_tr="Adı",i.display_list=!0,i.display_form=!0,i.display_detail=!0,e.fields.push(i);var l={};l.name="last_name",l.system_type="system",l.data_type="text_single",l.order=4,l.section=1,l.section_column=1,l.primary=!1,l.inline_edit=!0,l.editable=!0,l.show_label=!0,l.label_en="Last Name",l.label_tr="Soyadı",l.display_list=!0,l.display_form=!0,l.display_detail=!0,e.fields.push(l);var r={};r.name="full_name",r.system_type="system",r.data_type="text_single",r.order=5,r.section=1,r.section_column=1,r.primary=!0,r.inline_edit=!0,r.editable=!0,r.show_label=!0,r.label_en="Name",r.label_tr="Adı Soyadı",r.display_list=!0,r.display_form=!0,r.display_detail=!0,r.combination={},r.combination.field_1="first_name",r.combination.field_2="last_name",e.fields.push(r);var o={};o.name="phone",o.system_type="system",o.data_type="text_single",o.order=6,o.section=1,o.section_column=1,o.primary=!1,o.inline_edit=!0,o.label_en="Phone",o.label_tr="Telefon",o.display_list=!0,o.display_form=!0,o.display_detail=!0,e.fields.push(o);var p={};p.name="profile_id",p.system_type="system",p.data_type="number",p.order=6,p.section=1,p.section_column=1,p.primary=!1,p.inline_edit=!0,p.editable=!0,p.show_label=!0,p.label_en="Profile Id",p.label_tr="Profile Id",p.display_list=!0,p.display_form=!0,p.display_detail=!0,e.fields.push(p);var s={};return s.name="role_id",s.system_type="system",s.data_type="number",s.order=7,s.section=1,s.section_column=1,s.primary=!1,s.inline_edit=!0,s.editable=!0,s.show_label=!0,s.label_en="Role Id",s.label_tr="Role Id",s.display_list=!0,s.display_form=!0,s.display_detail=!0,e.fields.push(s),e},processModule:function(a){for(var t=0;t<a.sections.length;t++){var i=a.sections[t];i.columns=[];var l=[];i.permissions&&(l=angular.copy(i.permissions)),i.permissions=[];for(var o=0;o<e.profiles.length;o++){var p=e.profiles[o];p.is_persistent&&p.has_admin_rights&&(p.name=r("translate")("Setup.Profiles.Administrator")),p.is_persistent&&!p.has_admin_rights&&(p.name=r("translate")("Setup.Profiles.Standard"));var s=r("filter")(l,{profile_id:p.id},!0)[0];s?i.permissions.push({id:s.id,profile_id:p.id,profile_name:p.name,profile_is_admin:p.has_admin_rights,type:s.type}):i.permissions.push({profile_id:p.id,profile_name:p.name,profile_is_admin:p.has_admin_rights,type:"full"})}for(var m=1;m<=i.column_count;m++){var u={};u.no=m,i.columns.push(u)}}for(var d=0;d<a.fields.length;d++){var n=a.fields[d];if(n.label=n["label_"+e.language],n.dataType=g[n.data_type],n.operators=[],n.sectionObj=r("filter")(a.sections,{name:n.section},!0)[0],"lookup"===n.data_type){if("users"!=n.lookup_type&&"profiles"!=n.lookup_type&&"roles"!=n.lookup_type&&"relation"!=n.lookup_type){var c=r("filter")(e.modules,{name:n.lookup_type},!0)[0];if(!c)continue;n.lookupModulePrimaryField=r("filter")(c.fields,{primary_lookup:!0},!0)[0],n.lookupModulePrimaryField||(n.lookupModulePrimaryField=r("filter")(c.fields,{primary:!0},!0)[0]);for(var _=g[n.lookupModulePrimaryField.data_type],v=0;v<_.operators.length;v++){var I=_.operators[v],k=h[I];n.operators.push(k)}}else if(n.operators.push(h.equals),n.operators.push(h.not_equal),n.operators.push(h.empty),n.operators.push(h.not_empty),"users"===n.lookup_type){var c=r("filter")(e.modules,{name:"users"},!0)[0];n.lookupModulePrimaryField=r("filter")(c.fields,{primary:!0},!0)[0]}else if("profiles"===n.lookup_type){var c=r("filter")(e.modules,{name:"profiles"},!0)[0];n.lookupModulePrimaryField=r("filter")(c.fields,{primary:!0},!0)[0]}else if("roles"===n.lookup_type){var c=r("filter")(e.modules,{name:"roles"},!0)[0];n.lookupModulePrimaryField=r("filter")(c.fields,{primary:!0},!0)[0]}}else for(var b=0;b<n.dataType.operators.length;b++){var w=n.dataType.operators[b],S=h[w];n.operators.push(S)}"related_module"===n.name&&(n.picklist_original_id=angular.copy(n.picklist_id),n.picklist_id=9e5),(y.all.indexOf(n.name)>-1||y[a.name]&&y[a.name].indexOf(n.name)>-1)&&(n.systemRequired=!0),(f.all.indexOf(n.name)>-1||f[a.name]&&f[a.name].indexOf(n.name)>-1)&&(n.systemReadonly=!0);var M=[];n.permissions&&(M=angular.copy(n.permissions)),n.permissions=[];for(var A=0;A<e.profiles.length;A++){var z=e.profiles[A];z.is_persistent&&z.has_admin_rights&&(z.name=r("translate")("Setup.Profiles.Administrator")),z.is_persistent&&!z.has_admin_rights&&(z.name=r("translate")("Setup.Profiles.Standard"));var N=r("filter")(M,{profile_id:z.id},!0)[0];N?n.permissions.push({id:N.id,profile_id:z.id,profile_name:z.name,profile_is_admin:z.has_admin_rights,type:N.type}):n.permissions.push({profile_id:z.id,profile_name:z.name,profile_is_admin:z.has_admin_rights,type:"full"})}}if(a.dependencies)for(var P=0;P<a.dependencies.length;P++){var x=a.dependencies[P],F=r("filter")(a.fields,{name:x.child_field,inline_edit:!0},!0)[0];F&&(F.inline_edit=!1);var U=r("filter")(a.fields,{name:x.parent_field,inline_edit:!0},!0)[0];if(U&&(U.inline_edit=!1),"display"===x.dependency_type){a.display_dependencies||(a.display_dependencies=[]);var T={};if(T.field=x.parent_field,T.dependent_field=x.child_field,T.dependent_section=x.child_section,T.otherwise=x.otherwise,T.deleted=x.deleted,T.values=[],x.values&&!angular.isArray(x.values))for(var R=x.values.split(","),O=0;O<R.length;O++){var E=R[O];T.values.push(parseInt(E))}a.display_dependencies.push(T)}else if(x.value_map&&!angular.isArray(x.value_map)){x.value_maps={};for(var D=x.value_map.split("|"),q=0;q<D.length;q++){for(var H=D[q],$=H.split(";"),C=$[1].split(","),j=[],Y=0;Y<C.length;Y++){var B=C[Y];j.push(parseInt(B))}x.value_maps[$[0]]=j}}}if(a.relations)for(var L=0;L<a.relations.length;L++){var V=a.relations[L];V.display_fields=V.display_fields_array}return"activities"===a.name&&(a.display_calendar=!0),a},getCurrencySymbol:function(e){if(e)switch(e){case"TRY":return"₺";case"USD":return"$"}},removeSampleData:function(){return a["delete"](s.apiUrl+"data/remove_sample_data")},setModuleMenuIcon:function(e){switch(e.name){case"products":e.menu_icon="fa fa-shopping-cart";break;case"leads":e.menu_icon="fa fa-coffee";break;case"sales_orders":e.menu_icon="fa fa-credit-card";break;case"accounts":e.menu_icon="fa fa-cubes";break;case"contacts":e.menu_icon="fa fa-users";break;case"quotes":e.menu_icon="fa fa-file-pdf-o";break;case"opportunities":e.menu_icon="fa fa-star-half-empty";break;case"activities":e.menu_icon="fa fa-paper-plane";break;case"current_accounts":e.menu_icon="fa fa-calculator";break;case"suppliers":e.menu_icon="fa fa-truck";break;default:e.menu_icon="fa fa-square"}},setCustomActivityTypes:function(a){var t=r("filter")(e.moduleSettings,{key:"custom_activity_types"},!0)[0];if(t){for(var i=0;i<a.length;i++){var l=a[i];l.hidden=!0}for(var o=t.value.split("|"),p=0;p<o.length;p++){var s=o[p],m=s.split(":"),u=m[0],d=m[1],n=r("filter")(a,{system_code:u},!0)[0];n&&(n.hidden=!1,n.label[e.user.tenant_language]=d)}}},changeTenant:function(e,t,i,l){return a.get(s.apiUrl+"account/change_tenant?userId="+e+"&tenantId="+parseInt(t)+"&appId="+parseInt(i)+"&email="+l)},addApp:function(e){return a.get(s.apiUrl+"platform/office_app_create?appId="+e)},getHelp:function(){return a.get(s.apiUrl+"help/get_all")}}}]),angular.module("primeapps").constant("helps",{maps:[{route:"default",help:"https://help.ofisim.com/",language:"en",appId:1},{route:"default",help:"https://help.ofisim.com/",language:"en",appId:2},{route:"default",help:"https://help.ofisim.com/",language:"en",appId:3},{route:"default",help:"https://help.ofisim.com/",language:"en",appId:4},{route:"default",help:"https://help.ofisim.com/",language:"en",appId:5},{route:"default",help:"https://yardim.ofisim.com/category/genel/",language:"tr",appId:1},{route:"default",help:"https://yardim.ofisim.com/category/genel/",language:"tr",appId:2},{route:"default",help:"https://yardim.ofisim.com/category/asistan/",language:"tr",appId:3},{route:"default",help:"https://yardim.ofisim.com/category/ik/",language:"tr",appId:4},{route:"default",help:"https://yardim.ofisim.com/category/cagri/",language:"tr",appId:5},{route:"default-setup",help:"https://yardim.ofisim.com/category/ayarlar/",language:"tr",appId:1},{route:"default-setup",help:"https://yardim.ofisim.com/category/ayarlar/",language:"tr",appId:2},{route:"default-setup",help:"https://yardim.ofisim.com/category/asistan-10/",language:"tr",appId:3},{route:"default-setup",help:"https://yardim.ofisim.com/category/ik-13/",language:"tr",appId:4},{route:"default-setup",help:"https://yardim.ofisim.com/category/cagri-9",language:"tr",appId:5},{route:"#/app/dashboard",help:"https://yardim.ofisim.com/category/genel/",language:"tr",appId:1},{route:"#/app/dashboard",help:"https://yardim.ofisim.com/category/genel/",language:"tr",appId:2},{route:"#/app/dashboard",help:"https://yardim.ofisim.com/category/asistan/",language:"tr",appId:3},{route:"#/app/dashboard",help:"https://yardim.ofisim.com/category/ik/",language:"tr",appId:4},{route:"#/app/dashboard",help:"https://yardim.ofisim.com/category/cagri/",language:"tr",appId:5},{route:"#/app/import/",help:"https://yardim.ofisim.com/genel-kullanim-iceri-veri-aktarimi/",language:"tr",appId:1},{route:"#/app/import/",help:"https://yardim.ofisim.com/genel-kullanim-iceri-veri-aktarimi/",language:"tr",appId:2},{route:"#/app/import/",help:"https://yardim.ofisim.com/genel-kullanim-iceri-veri-aktarimi/",language:"tr",appId:3},{route:"#/app/import/",help:"https://yardim.ofisim.com/genel-kullanim-iceri-veri-aktarimi/",language:"tr",appId:4},{route:"#/app/import/",help:"https://yardim.ofisim.com/genel-kullanim-iceri-veri-aktarimi/",language:"tr",appId:5},{route:"#/app/modules/leads",help:"https://yardim.ofisim.com/musteri-adaylari/",language:"tr",appId:1},{route:"#/app/modules/leads",help:"https://yardim.ofisim.com/musteri-adaylari/",language:"tr",appId:2},{route:"#/app/modules/leads",help:"https://yardim.ofisim.com/musteri-adaylari/",language:"tr",appId:3},{route:"#/app/modules/leads",help:"https://yardim.ofisim.com/musteri-adaylari/",language:"tr",appId:4},{route:"#/app/modules/leads",help:"https://yardim.ofisim.com/musteri-adaylari/",language:"tr",appId:5},{route:"#/app/modules/accounts",help:"https://yardim.ofisim.com/firma-liste-gorunumu/",language:"tr",appId:1},{route:"#/app/modules/accounts",help:"https://yardim.ofisim.com/firma-liste-gorunumu/",language:"tr",appId:2},{route:"#/app/modules/accounts",help:"https://yardim.ofisim.com/firma-liste-gorunumu/",language:"tr",appId:3},{route:"#/app/modules/accounts",help:"https://yardim.ofisim.com/firma-liste-gorunumu/",language:"tr",appId:4},{route:"#/app/modules/accounts",help:"https://yardim.ofisim.com/firma-liste-gorunumu/",language:"tr",appId:5},{route:"#/app/module/accounts",help:"https://yardim.ofisim.com/firma-detaylari/",language:"tr",appId:1},{route:"#/app/module/accounts",help:"https://yardim.ofisim.com/firma-detaylari/",language:"tr",appId:2},{route:"#/app/module/accounts",help:"https://yardim.ofisim.com/firma-detaylari/",language:"tr",appId:3},{route:"#/app/module/accounts",help:"https://yardim.ofisim.com/firma-detaylari/",language:"tr",appId:4},{route:"#/app/module/accounts",help:"https://yardim.ofisim.com/firma-detaylari/",language:"tr",appId:5},{route:"#/app/modules/contacts",help:"https://yardim.ofisim.com/kontak-kisi-yonetimi/",language:"tr",appId:1},{route:"#/app/modules/contacts",help:"https://yardim.ofisim.com/kontak-kisi-yonetimi/",language:"tr",appId:2},{route:"#/app/modules/contacts",help:"https://yardim.ofisim.com/kontak-kisi-yonetimi/",language:"tr",appId:3},{route:"#/app/modules/contacts",help:"https://yardim.ofisim.com/kontak-kisi-yonetimi/",language:"tr",appId:4},{route:"#/app/modules/contacts",help:"https://yardim.ofisim.com/kontak-kisi-yonetimi/",language:"tr",appId:5},{route:"#/app/modules/opportunities",help:"https://yardim.ofisim.com/firsat-yonetimi/",language:"tr",appId:1},{route:"#/app/modules/opportunities",help:"https://yardim.ofisim.com/firsat-yonetimi/",language:"tr",appId:2},{route:"#/app/modules/opportunities",help:"https://yardim.ofisim.com/firsat-yonetimi/",language:"tr",appId:3},{route:"#/app/modules/opportunities",help:"https://yardim.ofisim.com/firsat-yonetimi/",language:"tr",appId:4},{route:"#/app/modules/opportunities",help:"https://yardim.ofisim.com/firsat-yonetimi/",language:"tr",appId:5},{route:"#/app/modules/activities",help:"https://yardim.ofisim.com/aktivite-liste-gorunumu/",language:"tr",appId:1},{route:"#/app/modules/activities",help:"https://yardim.ofisim.com/aktivite-liste-gorunumu/",language:"tr",appId:2},{route:"#/app/modules/activities",help:"https://yardim.ofisim.com/aktivite-liste-gorunumu/",language:"tr",appId:3},{route:"#/app/modules/activities",help:"https://yardim.ofisim.com/aktivite-liste-gorunumu/",language:"tr",appId:4},{route:"#/app/modules/activities",help:"https://yardim.ofisim.com/aktivite-liste-gorunumu/",language:"tr",appId:5},{route:"#/app/modules/products",help:"https://yardim.ofisim.com/urunler-modulu/",language:"tr",appId:1},{route:"#/app/modules/products",help:"https://yardim.ofisim.com/urunler-modulu/",language:"tr",appId:2},{route:"#/app/modules/products",help:"https://yardim.ofisim.com/urunler-modulu/",language:"tr",appId:3},{route:"#/app/modules/products",help:"https://yardim.ofisim.com/urunler-modulu/",language:"tr",appId:4},{route:"#/app/modules/products",help:"https://yardim.ofisim.com/urunler-modulu/",language:"tr",appId:5},{route:"#/app/modules/quotes",help:"https://yardim.ofisim.com/teklif-yonetimi/",language:"tr",appId:1},{route:"#/app/modules/quotes",help:"https://yardim.ofisim.com/teklif-yonetimi/",language:"tr",appId:2},{route:"#/app/modules/quotes",help:"https://yardim.ofisim.com/teklif-yonetimi/",language:"tr",appId:3},{route:"#/app/modules/quotes",help:"https://yardim.ofisim.com/teklif-yonetimi/",language:"tr",appId:4},{route:"#/app/modules/quotes",help:"http://yardim.ofisim.com/teklif-hazirlama-ve-yonetimi/",language:"tr",appId:5},{route:"#/app/modules/sales_orders",help:"https://yardim.ofisim.com/siparis-yonetimi/",language:"tr",appId:1},{route:"#/app/modules/sales_orders",help:"https://yardim.ofisim.com/siparis-yonetimi/",language:"tr",appId:2},{route:"#/app/modules/sales_orders",help:"https://yardim.ofisim.com/siparis-yonetimi/",language:"tr",appId:3},{route:"#/app/modules/sales_orders",help:"https://yardim.ofisim.com/siparis-yonetimi/",language:"tr",appId:4},{route:"#/app/modules/sales_orders",help:"http://yardim.ofisim.com/satis-detaylari-ve-liste-gorunumu/",language:"tr",appId:5},{route:"#/app/calendar",help:"https://yardim.ofisim.com/takvim-gorunumu/",language:"tr",appId:1},{route:"#/app/calendar",help:"https://yardim.ofisim.com/takvim-gorunumu/",language:"tr",appId:2},{route:"#/app/calendar",help:"http://yardim.ofisim.com/takvim-gorunumu-3/",language:"tr",appId:3},{route:"#/app/calendar",help:"http://yardim.ofisim.com/takvim-gorunumu-2/",language:"tr",appId:4},{route:"#/app/calendar",help:"http://yardim.ofisim.com/takvim-gorunumu-4/",language:"tr",appId:5},{route:"#/app/setup/messaging",help:"https://yardim.ofisim.com/kisisel-ayarlar-2/",language:"tr",appId:1},{route:"#/app/setup/messaging",help:"https://yardim.ofisim.com/kisisel-ayarlar-2/",language:"tr",appId:2},{route:"#/app/setup/messaging",help:"https://yardim.ofisim.com/kisisel-ayarlar-4/",language:"tr",appId:3},{route:"#/app/setup/messaging",help:"http://yardim.ofisim.com/kisisel-ayarlar/",language:"tr",appId:4},{route:"#/app/setup/messaging",help:"https://yardim.ofisim.com/kisisel-ayarlar-3/",language:"tr",appId:5},{route:"#/app/setup/users",
help:"https://yardim.ofisim.com/kullanici-yonetimi-kullanicilar/",language:"tr",appId:1},{route:"#/app/setup/users",help:"https://yardim.ofisim.com/kullanici-yonetimi-kullanicilar/",language:"tr",appId:2},{route:"#/app/setup/users",help:"https://yardim.ofisim.com/kullanici-yonetimi-kullanicilar/",language:"tr",appId:3},{route:"#/app/setup/users",help:"http://yardim.ofisim.com/kullanici-yonetimi-kullanicilar-2/",language:"tr",appId:4},{route:"#/app/setup/users",help:"http://yardim.ofisim.com/kullanici-yonetimi-kullanicilar-3/",language:"tr",appId:5},{route:"#/app/setup/profiles",help:"https://yardim.ofisim.com/kullanici-yonetimi-profiller/",language:"tr",appId:1},{route:"#/app/setup/profiles",help:"https://yardim.ofisim.com/kullanici-yonetimi-profiller/",language:"tr",appId:2},{route:"#/app/setup/profiles",help:"https://yardim.ofisim.com/kullanici-yonetimi-profiller/",language:"tr",appId:3},{route:"#/app/setup/profiles",help:"http://yardim.ofisim.com/kullanici-yonetimi-profiller-2/",language:"tr",appId:4},{route:"#/app/setup/profiles",help:"http://yardim.ofisim.com/kullanici-yonetimi-profiller-3/",language:"tr",appId:5},{route:"#/app/setup/organization",help:"https://yardim.ofisim.com/firma-ayarlari/",language:"tr",appId:1},{route:"#/app/setup/organization",help:"https://yardim.ofisim.com/firma-ayarlari/",language:"tr",appId:2},{route:"#/app/setup/organization",help:"https://yardim.ofisim.com/firma-ayarlari-4/",language:"tr",appId:3},{route:"#/app/setup/organization",help:"http://yardim.ofisim.com/kullanici-yonetimi-kullanicilar-2/",language:"tr",appId:4},{route:"#/app/setup/organization",help:"https://yardim.ofisim.com/firma-ayarlari-3/",language:"tr",appId:5},{route:"#/app/setup/license",help:"https://yardim.ofisim.com/lisans-ayarlari/",language:"tr",appId:1},{route:"#/app/setup/license",help:"https://yardim.ofisim.com/lisans-ayarlari/",language:"tr",appId:2},{route:"#/app/setup/license",help:"https://yardim.ofisim.com/lisans-ayarlari/",language:"tr",appId:3},{route:"#/app/setup/license",help:"https://yardim.ofisim.com/lisans-ayarlari/",language:"tr",appId:4},{route:"#/app/setup/license",help:"https://yardim.ofisim.com/lisans-ayarlari/",language:"tr",appId:5},{route:"#/app/modules/",help:"https://yardim.ofisim.com/category/genel/",language:"tr",appId:1},{route:"#/app/modules/",help:"https://yardim.ofisim.com/category/genel/",language:"tr",appId:2},{route:"#/app/modules/",help:"https://yardim.ofisim.com/category/asistan/",language:"tr",appId:3},{route:"#/app/modules/",help:"https://yardim.ofisim.com/category/ik/",language:"tr",appId:4},{route:"#/app/modules/",help:"https://yardim.ofisim.com/category/cagri/",language:"tr",appId:5},{route:"#/app/module/",help:"https://yardim.ofisim.com/category/genel/",language:"tr",appId:1},{route:"#/app/module/",help:"https://yardim.ofisim.com/category/genel/",language:"tr",appId:2},{route:"#/app/module/",help:"https://yardim.ofisim.com/category/asistan/",language:"tr",appId:3},{route:"#/app/module/",help:"https://yardim.ofisim.com/category/ik/",language:"tr",appId:4},{route:"#/app/module/",help:"https://yardim.ofisim.com/category/cagri/",language:"tr",appId:5},{route:"#/app/moduleForm/",help:"https://yardim.ofisim.com/category/genel/",language:"tr",appId:1},{route:"#/app/moduleForm/",help:"https://yardim.ofisim.com/category/genel/",language:"tr",appId:2},{route:"#/app/moduleForm/",help:"https://yardim.ofisim.com/category/asistan/",language:"tr",appId:3},{route:"#/app/moduleForm/",help:"https://yardim.ofisim.com/category/ik/",language:"tr",appId:4},{route:"#/app/moduleForm/",help:"https://yardim.ofisim.com/category/cagri/",language:"tr",appId:5},{route:"#/app/modules/leads",help:"http://yardim.ofisim.com/musteri-adaylari/",language:"tr",appId:1},{route:"#/app/modules/leads",help:"http://yardim.ofisim.com/musteri-adaylari/",language:"tr",appId:2},{route:"#/app/modules/leads",help:"http://yardim.ofisim.com/musteri-adaylari/",language:"tr",appId:3},{route:"#/app/modules/leads",help:"http://yardim.ofisim.com/musteri-adaylari/",language:"tr",appId:4},{route:"#/app/modules/leads",help:"http://yardim.ofisim.com/musteri-adaylari/",language:"tr",appId:5},{route:"#/app/modules/accounts",help:"http://yardim.ofisim.com/firma-liste-gorunumu/",language:"tr",appId:1},{route:"#/app/modules/accounts",help:"http://yardim.ofisim.com/firma-liste-gorunumu/",language:"tr",appId:2},{route:"#/app/modules/accounts",help:"http://yardim.ofisim.com/firma-detaylari-ve-liste-gorunumu/",language:"tr",appId:3},{route:"#/app/modules/accounts",help:"http://yardim.ofisim.com/firma-liste-gorunumu/",language:"tr",appId:4},{route:"#/app/modules/accounts",help:"http://yardim.ofisim.com/firma-liste-gorunumu/",language:"tr",appId:5},{route:"#/app/modules/izinler",help:"http://yardim.ofisim.com/izin-detaylari-ve-liste-gorunumu/",language:"tr",appId:1},{route:"#/app/modules/izinler",help:"http://yardim.ofisim.com/izin-detaylari-ve-liste-gorunumu/",language:"tr",appId:2},{route:"#/app/modules/izinler",help:"http://yardim.ofisim.com/izin-detaylari-ve-liste-gorunumu/",language:"tr",appId:3},{route:"#/app/modules/izinler",help:"http://yardim.ofisim.com/izin-detaylari-ve-liste-gorunumu/",language:"tr",appId:4},{route:"#/app/modules/izinler",help:"http://yardim.ofisim.com/izin-detaylari-ve-liste-gorunumu/",language:"tr",appId:5},{route:"#/app/modules/harcamalar",help:"https://yardim.ofisim.com/harcama-detaylari-ve-liste-gorunumu/",language:"tr",appId:1},{route:"#/app/modules/harcamalar",help:"https://yardim.ofisim.com/harcama-detaylari-ve-liste-gorunumu/",language:"tr",appId:2},{route:"#/app/modules/harcamalar",help:"https://yardim.ofisim.com/harcama-detaylari-ve-liste-gorunumu/",language:"tr",appId:3},{route:"#/app/modules/harcamalar",help:"https://yardim.ofisim.com/harcama-detaylari-ve-liste-gorunumu/",language:"tr",appId:4},{route:"#/app/modules/harcamalar",help:"https://yardim.ofisim.com/harcama-detaylari-ve-liste-gorunumu/",language:"tr",appId:5},{route:"#/app/modules/zimmetler",help:"http://yardim.ofisim.com/zimmet-detaylari-ve-liste-gorunumu/",language:"tr",appId:1},{route:"#/app/modules/zimmetler",help:"http://yardim.ofisim.com/zimmet-detaylari-ve-liste-gorunumu/",language:"tr",appId:2},{route:"#/app/modules/zimmetler",help:"http://yardim.ofisim.com/zimmet-detaylari-ve-liste-gorunumu/",language:"tr",appId:3},{route:"#/app/modules/zimmetler",help:"http://yardim.ofisim.com/zimmet-detaylari-ve-liste-gorunumu/",language:"tr",appId:4},{route:"#/app/modules/zimmetler",help:"http://yardim.ofisim.com/zimmet-detaylari-ve-liste-gorunumu/",language:"tr",appId:5},{route:"#/app/modules/talepler",help:"http://yardim.ofisim.com/talep-detaylari-ve-liste-gorunumu/",language:"tr",appId:1},{route:"#/app/modules/talepler",help:"http://yardim.ofisim.com/talep-detaylari-ve-liste-gorunumu/",language:"tr",appId:2},{route:"#/app/modules/talepler",help:"http://yardim.ofisim.com/talep-detaylari-ve-liste-gorunumu/",language:"tr",appId:3},{route:"#/app/modules/talepler",help:"http://yardim.ofisim.com/talep-detaylari-ve-liste-gorunumu/",language:"tr",appId:4},{route:"#/app/modules/talepler",help:"http://yardim.ofisim.com/talep-detaylari-ve-liste-gorunumu/",language:"tr",appId:5},{route:"#/app/modules/odemeler",help:"http://yardim.ofisim.com/odemeler-detay-ve-liste-gorunumu/",language:"tr",appId:1},{route:"#/app/modules/odemeler",help:"http://yardim.ofisim.com/odemeler-detay-ve-liste-gorunumu/",language:"tr",appId:2},{route:"#/app/modules/odemeler",help:"http://yardim.ofisim.com/odemeler-detay-ve-liste-gorunumu/",language:"tr",appId:3},{route:"#/app/modules/odemeler",help:"http://yardim.ofisim.com/odemeler-detay-ve-liste-gorunumu/",language:"tr",appId:4},{route:"#/app/modules/odemeler",help:"http://yardim.ofisim.com/odemeler-detay-ve-liste-gorunumu/",language:"tr",appId:5},{route:"#/app/modules/egitimler",help:"http://yardim.ofisim.com/egitim-detay-ve-liste-gorunumu/",language:"tr",appId:1},{route:"#/app/modules/egitimler",help:"http://yardim.ofisim.com/egitim-detay-ve-liste-gorunumu/",language:"tr",appId:2},{route:"#/app/modules/egitimler",help:"http://yardim.ofisim.com/egitim-detay-ve-liste-gorunumu/",language:"tr",appId:3},{route:"#/app/modules/egitimler",help:"http://yardim.ofisim.com/egitim-detay-ve-liste-gorunumu/",language:"tr",appId:4},{route:"#/app/modules/egitimler",help:"http://yardim.ofisim.com/egitim-detay-ve-liste-gorunumu/",language:"tr",appId:5},{route:"#/app/modules/vize_islemleri",help:"http://yardim.ofisim.com/vize-detay-ve-liste-gorunumu/",language:"tr",appId:1},{route:"#/app/modules/vize_islemleri",help:"http://yardim.ofisim.com/vize-detay-ve-liste-gorunumu/",language:"tr",appId:2},{route:"#/app/modules/vize_islemleri",help:"http://yardim.ofisim.com/vize-detay-ve-liste-gorunumu/",language:"tr",appId:3},{route:"#/app/modules/vize_islemleri",help:"http://yardim.ofisim.com/vize-detay-ve-liste-gorunumu/",language:"tr",appId:4},{route:"#/app/modules/vize_islemleri",help:"http://yardim.ofisim.com/vize-detay-ve-liste-gorunumu/",language:"tr",appId:5},{route:"#/app/module/activities",help:"http://yardim.ofisim.com/etkinlikler-ve-gorev-olusturma/",language:"tr",appId:1},{route:"#/app/module/activities",help:"http://yardim.ofisim.com/etkinlikler-ve-gorev-olusturma/",language:"tr",appId:2},{route:"#/app/module/activities",help:"http://yardim.ofisim.com/etkinlikler-ve-gorev-olusturma/",language:"tr",appId:3},{route:"#/app/module/activities",help:"http://yardim.ofisim.com/etkinlikler-ve-gorev-olusturma/",language:"tr",appId:4},{route:"#/app/module/activities",help:"http://yardim.ofisim.com/etkinlikler-ve-gorev-olusturma/",language:"tr",appId:5},{route:"#/app/module/seyahatler",help:"http://yardim.ofisim.com/seyahat-detaylari/",language:"tr",appId:1},{route:"#/app/module/seyahatler",help:"http://yardim.ofisim.com/seyahat-detaylari/",language:"tr",appId:2},{route:"#/app/module/seyahatler",help:"http://yardim.ofisim.com/seyahat-detaylari/",language:"tr",appId:3},{route:"#/app/module/seyahatler",help:"http://yardim.ofisim.com/seyahat-detaylari/",language:"tr",appId:4},{route:"#/app/module/seyahatler",help:"http://yardim.ofisim.com/seyahat-detaylari/",language:"tr",appId:5},{route:"#/app/modules/personel",help:"http://yardim.ofisim.com/personel-detaylari-ve-liste-gorunumu/",language:"tr",appId:1},{route:"#/app/modules/personel",help:"http://yardim.ofisim.com/personel-detaylari-ve-liste-gorunumu/",language:"tr",appId:2},{route:"#/app/modules/personel",help:"http://yardim.ofisim.com/personel-detaylari-ve-liste-gorunumu/",language:"tr",appId:3},{route:"#/app/modules/personel",help:"http://yardim.ofisim.com/personel-detaylari-ve-liste-gorunumu/",language:"tr",appId:4},{route:"#/app/modules/personel",help:"http://yardim.ofisim.com/personel-detaylari-ve-liste-gorunumu/",language:"tr",appId:5},{route:"#/app/modules/aramalar",help:"http://yardim.ofisim.com/arama-detaylari-ve-liste-gorunumu/",language:"tr",appId:1},{route:"#/app/modules/aramalar",help:"http://yardim.ofisim.com/arama-detaylari-ve-liste-gorunumu/",language:"tr",appId:2},{route:"#/app/modules/aramalar",help:"http://yardim.ofisim.com/arama-detaylari-ve-liste-gorunumu/",language:"tr",appId:3},{route:"#/app/modules/aramalar",help:"http://yardim.ofisim.com/arama-detaylari-ve-liste-gorunumu/",language:"tr",appId:4},{route:"#/app/modules/aramalar",help:"http://yardim.ofisim.com/arama-detaylari-ve-liste-gorunumu/",language:"tr",appId:5},{route:"#/app/modules/arama_detaylari",help:"http://yardim.ofisim.com/arama-detaylari-ve-liste-gorunumu/",language:"tr",appId:1},{route:"#/app/modules/arama_detaylari",help:"http://yardim.ofisim.com/arama-detaylari-ve-liste-gorunumu/",language:"tr",appId:2},{route:"#/app/modules/arama_detaylari",help:"http://yardim.ofisim.com/arama-detaylari-ve-liste-gorunumu/",language:"tr",appId:3},{route:"#/app/modules/arama_detaylari",help:"http://yardim.ofisim.com/arama-detaylari-ve-liste-gorunumu/",language:"tr",appId:4},{route:"#/app/modules/arama_detaylari",help:"http://yardim.ofisim.com/arama-detaylari-ve-liste-gorunumu/",language:"tr",appId:5},{route:"#/app/setup/templates",help:"http://yardim.ofisim.com/yeni-bir-teklif-olusturma/",language:"tr",appId:1},{route:"#/app/setup/templates",help:"http://yardim.ofisim.com/yeni-bir-teklif-olusturma/",language:"tr",appId:2},{route:"#/app/setup/templates",help:"http://yardim.ofisim.com/yeni-bir-teklif-olusturma/",language:"tr",appId:3},{route:"#/app/setup/templates",help:"http://yardim.ofisim.com/yeni-bir-teklif-olusturma/",language:"tr",appId:4},{route:"#/app/setup/templates",help:"http://yardim.ofisim.com/yeni-bir-teklif-olusturma/",language:"tr",appId:5},{route:"#/app/setup/templateguide",help:"http://yardim.ofisim.com/teklif-sablonu-hazirlama/",language:"tr",appId:1},{route:"#/app/setup/templateguide",help:"http://yardim.ofisim.com/teklif-sablonu-hazirlama/",language:"tr",appId:2},{route:"#/app/setup/templateguide",help:"http://yardim.ofisim.com/teklif-sablonu-hazirlama/",language:"tr",appId:3},{route:"#/app/setup/templateguide",help:"http://yardim.ofisim.com/teklif-sablonu-hazirlama/",language:"tr",appId:4},{route:"#/app/setup/templateguide",help:"http://yardim.ofisim.com/teklif-sablonu-hazirlama/",language:"tr",appId:5},{route:"#/app/modules/activities",help:"http://yardim.ofisim.com/aktivite-liste-gorunumu/",language:"tr",appId:1},{route:"#/app/modules/activities",help:"http://yardim.ofisim.com/aktivite-liste-gorunumu/",language:"tr",appId:2},{route:"#/app/modules/activities",help:"http://yardim.ofisim.com/aktivite-liste-gorunumu/",language:"tr",appId:3},{route:"#/app/modules/activities",help:"http://yardim.ofisim.com/aktivite-liste-gorunumu/",language:"tr",appId:4},{route:"#/app/modules/activities",help:"http://yardim.ofisim.com/aktivite-liste-gorunumu/",language:"tr",appId:5}]});
"use strict";angular.module("primeapps").controller("AppController",["$rootScope","$scope","$location","$state","$cookies","$localStorage","$window","$filter","$anchorScroll","config","$popover","ngToast","entityTypes","guidEmpty","component","convert","helper","sipHelper","operations","blockUI","$cache","helps","AppService","AuthService","$sessionStorage","HelpService","$sce","$modal",function(e,t,a,l,o,n,p,i,s,d,m,r,u,c,h,g,f,v,w,T,b,S,y,k,x,M,A,_){t.hasPermission=f.hasPermission,t.entityTypes=u,t.operations=w,t.sidebar=angular.element(document.getElementById("wrapper")),t.navbar=angular.element(document.getElementById("navbar-wrapper")),t.bottomlinks=angular.element(document.getElementsByClassName("sidebar-bottom-link")),t.appLauncher=angular.element(document.getElementById("app-launcher")),t.appId=a.search().app||1,t.appLogo=e.workgroup.logo_url?blobUrl+"/"+e.workgroup.logo_url:appLogo,t.addingApp=!1,t.tenants=e.multiTenant,t.isTimetrackerExist=!1,t.isExpenseExist=!1,t.componentModules=i("filter")(e.modules,{system_type:"component"},!0),e.isMobile=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},t.addApp=function(e){t.addingApp||(t.addingApp=!0,y.addApp(e).then(function(e){200===e.status&&y.getMyAccount().then(function(e){t.addingApp=!1})}))},t.isTenantActive=function(e){var t=window.location.hostname;return t.indexOf("localhost")<0?t.indexOf("primeapps.io")>-1?!1:(t.indexOf("crm.ofisim.com")>-1||t.indexOf("crm-test.ofisim.com")>-1||t.indexOf("crm-dev.ofisim.com")>-1)&&1===e.AppId?!0:(t.indexOf("ik.ofisim.com")>-1||t.indexOf("ik-test.ofisim.com")>-1||t.indexOf("ik-dev.ofisim.com")>-1)&&4===e.AppId?!0:(t.indexOf("hr.ofisim.com")>-1||t.indexOf("hr-test.ofisim.com")>-1||t.indexOf("hr-dev.ofisim.com")>-1)&&8===e.AppId:!1},t.changeTenant=function(a){t.isTenantActive(a)||(t.confirming=!1,y.changeTenant(e.user.id,a.TenantId,a.AppId,a.Email).then(function(e){if(200===e.status){var t="http://localhost:5554";host.indexOf("localhost")<0&&(t=host.indexOf("ik.ofisim.com")>-1?"https://crm.ofisim.com":host.indexOf("ik-test.ofisim.com")>-1?"https://test.ofisim.com":host.indexOf("ik-dev.ofisim.com")>-1?"https://dev.ofisim.com":host.indexOf("crm.ofisim.com")>-1?"https://ik.ofisim.com":host.indexOf("test.ofisim.com")>-1?"https://ik-test.ofisim.com":host.indexOf("dev.ofisim.com")>-1?"https://ik-dev.ofisim.com":"https://crm.ofisim.com"),p.location.href=t}}))},t.logout=function(){k.logoutComplete(),e.preview?window.location="/logout?preview="+encodeURIComponent(a.$$absUrl.replace("#"+a.$$url,"").split("preview=")[1]):window.location="/logout"},t.go=function(e){p.location.href=e},t.gotoSetup=function(t){e.selectedSetupMenuLink=t,p.location.href=t,a.hash("top"),s()},t.removeSampleData=function(){t.sampleRemoving=!0,y.removeSampleData().then(function(){e.workgroup.hasSampleData=!1,b.remove("leads_leads"),b.remove("accounts_accounts"),b.remove("contacts_contacts"),b.remove("opportunities_opportunities"),b.remove("activities_activities"),b.remove("products_products"),b.remove("quotes_quotes"),b.remove("sales_orders_sales_orders"),b.remove("purchase_orders_purchase_orders"),b.remove("current_accounts_current_accounts"),b.remove("suppliers_suppliers"),b.remove("calendar_events"),t.sampleRemoving=!1,r.create({content:i("translate")("Layout.SampleDataRemoveSuccess"),className:"success"}),e.$broadcast("sample-data-removed"),p.location.href="#/app/dashboard"})};var O=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;t.isAvailableForSmallDevice=function(){return 1024>O},t.isAvailableForSmallDevice(),t.routingPrism=function(e,a){1024>O&&t.toggleLeftMenu();var o=l.$current.url.source;angular.forEach(l.params,function(e,t){var a=o.indexOf(t);":"===o.charAt(a-1)?o=e?o.replace(":"+t,e):o.replace(":"+t,""):"?"===o.charAt(a-1)?o=e?o.replace("?"+t,"?"+t+"="+e):o.replace("?"+t,""):"&"===o.charAt(a-1)&&(o=e?o.replace("&"+t,"&"+t+"="+e):o.replace("&"+t,""))}),a&&e.includes(o)&&l.reload()},t.toggleLeftMenu=function(){angular.element(t.sidebar).toggleClass("toggled"),angular.element(t.sidebar).toggleClass("full-toggled"),angular.element(t.navbar).toggleClass("toggled"),angular.element(t.navbar).toggleClass("full-toggled"),angular.element(t.bottomlinks).toggleClass("hidden"),t.isAvailableForSmallDevice(),t.toggled=!t.toggled},t.toggleFullLeftMenu=function(){angular.element(t.sidebar).toggleClass("full-toggled"),angular.element(t.sidebar).toggleClass("toggled"),angular.element(t.navbar).toggleClass("full-toggled"),angular.element(t.navbar).toggleClass("toggled"),angular.element(t.bottomlinks).toggleClass("hidden");for(var e=angular.element(document.getElementsByClassName("dropdown-menu")),a=0;a<e.length;a++)angular.element(document.getElementsByClassName("dropdown-menu"))[a].click()},t.toggleAppMenu=function(e){angular.element(t.appLauncher).toggleClass("toggled")},t.changeApp=function(a){switch(e.app=a,a){case"crm":l.go("app.dashboard");break;case"analytics":l.go("app.analytics.report");break;case"sync":l.go("app.sync.dashboard")}angular.element(t.appLauncher).toggleClass("toggled")},t.showAppLauncher=function(){return e.user.has_analytics},e.showSipPhone=function(){v.showSipPhone()},e.hideSipPhone=function(){e.sipPhone[e.app].hide()},t.getHelpUrl=function(){var t=window.location.hash;t.indexOf("?")>-1&&(t=window.location.hash.split("?")[0]);var a=i("filter")(S.maps,{route:t,language:e.language,appId:e.user.appId},!0)[0];return a?a.help:(t.indexOf("#/app/modules/")>-1&&(a=i("filter")(S.maps,{route:"#/app/modules/",language:e.language,appId:e.user.appId},!0)[0]),t.indexOf("#/app/module/")>-1&&(a=i("filter")(S.maps,{route:"#/app/module/",language:e.language,appId:e.user.appId},!0)[0]),t.indexOf("#/app/moduleForm/")>-1&&(a=i("filter")(S.maps,{route:"#/app/moduleForm/",language:e.language,appId:e.user.appId},!0)[0]),t.indexOf("#/app/setup/")>-1&&(a=i("filter")(S.maps,{route:"default-setup",language:e.language,appId:e.user.appId},!0)[0]),t.indexOf("#/app/import/")>-1&&(a=i("filter")(S.maps,{route:"#/app/import/",language:e.language,appId:e.user.appId},!0)[0]),a?a.help:(a=i("filter")(S.maps,{route:"default",language:e.language,appId:e.user.appId},!0)[0],a.help))},t.dropdownHide=function(){angular.element(document.getElementsByClassName("dropdown-menu"))[0].click(),angular.element(document.getElementsByClassName("dropdown-menu"))[1].click()},t.reload=function(){t.reloading=!0,y.getMyAccount(!0).then(function(){t.reloading=!1,"app.dashboard"!=l.current.name?(l.go("app.dashboard"),t.$parent.$parent.currentPath="/app/dashboard"):e.$broadcast("sample-data-removed"),r.create({content:i("translate")("Layout.ReloadSuccess"),className:"success"})})},i("filter")(e.modules,{name:"timetrackers"},!0).length>0&&(t.isTimetrackerExist=!0),i("filter")(e.modules,{name:"masraflar"},!0).length>0&&(t.isExpenseExist=!0),e.openHelp=function(e){M.getById(e).then(function(e){t.helpLinkTemplate=e.data,t.helpTemplateSideModal=A.trustAsHtml(t.helpLinkTemplate.template)})},t.helpSide=function(a){if(M.getByType("sidemodal",null,null).then(function(e){t.helps=e.data}),!a){var l,o,n,p=window.location.hash;e.preview?(p.indexOf("/app/modules/")>-1&&(n=!0),l=p.split("/")[2]):(p.indexOf("/app/modules/")>-1&&(n=!0),l=p.split("/")[3]),p.indexOf("/app/module/")>-1&&(o=!0,l=p.split("/")[3].split("?")[0]),p.indexOf("/app/moduleForm/")>-1&&(l=p.split("/")[3].split("?")[0]);var s=i("filter")(e.modules,{name:l},!0)[0];if(l){var s=i("filter")(e.modules,{name:l},!0)[0];if(null!=s)n?M.getModuleType("sidemodal","modulelist",s.id).then(function(e){t.helpTemplatesSide=e.data,t.helpTemplatesSide&&"publish"===t.helpTemplatesSide.show_type?(t.noneHelpTemplate=!1,t.helpTemplateSideModal=A.trustAsHtml(t.helpTemplatesSide.template)):(t.helpTemplateSideModal=null,t.noneHelpTemplate=!0)}):o?M.getModuleType("sidemodal","moduledetail",s.id).then(function(e){t.helpTemplatesSide=e.data,t.helpTemplatesSide&&"publish"===t.helpTemplatesSide.show_type?(t.noneHelpTemplate=!1,t.helpTemplateSideModal=A.trustAsHtml(t.helpTemplatesSide.template)):(t.helpTemplateSideModal=null,t.noneHelpTemplate=!0)}):M.getModuleType("sidemodal","moduleform",s.id).then(function(e){t.helpTemplatesSide=e.data,t.helpTemplatesSide&&"publish"===t.helpTemplatesSide.show_type?(t.noneHelpTemplate=!1,t.helpTemplateSideModal=A.trustAsHtml(t.helpTemplatesSide.template)):(t.helpTemplateSideModal=null,t.noneHelpTemplate=!0)});else{var d=window.location.hash.split("#")[1];M.getByType("sidemodal",null,d).then(function(e){t.helpTemplatesSide=e.data,t.helpTemplatesSide&&"publish"===t.helpTemplatesSide.show_type?(t.noneHelpTemplate=!1,t.helpTemplateSideModal=A.trustAsHtml(t.helpTemplatesSide.template)):(t.helpTemplateSideModal=null,t.noneHelpTemplate=!0)})}}else M.getById(a).then(function(e){t.helpTemplatesSide=e.data,t.helpTemplatesSide&&"publish"===t.helpTemplatesSide.show_type?(t.noneHelpTemplate=!1,t.helpTemplateSideModal=A.trustAsHtml(t.helpTemplatesSide.template)):(t.helpTemplateSideModal=null,t.noneHelpTemplate=!0)});t.modalButtonShow=!1,null!=s&&M.getModuleType("modal","modulelist",s.id).then(function(e){t.helpTemplateModalButton=e.data,t.helpTemplateModalButton&&"publish"===t.helpTemplateModalButton.show_type?t.modalButtonShow=!0:d&&M.getByType("modal",null,d).then(function(e){t.helpTemplatesSideButton=e.data,t.helpTemplatesSideButton&&"publish"===t.helpTemplatesSideButton.show_type&&(t.modalButtonShow=!0)})})}},t.showHelpModal=function(){t.openHelpModal=function(){t.helpModal=t.helpModal||_({scope:t,templateUrl:"view/setup/help/helpPageModal.html",animation:"am-fade",backdrop:!0,show:!1,tag:"helpModal",container:"body"}),t.helpModal.$promise.then(t.helpModal.show)},t.dontShowAgain=!0;var a,l,o,n=window.location.hash;if(n.indexOf("/app/modules/")>-1&&(o=!0),a=n.split("/")[3],n.indexOf("/app/module/")>-1&&(l=!0,a=n.split("/")[3].split("?")[0]),n.indexOf("/app/moduleForm/")>-1&&(a=n.split("/")[3].split("?")[0]),a){var p=i("filter")(e.modules,{name:a},!0)[0];if(null!=p)o?M.getModuleType("modal","modulelist",p.id).then(function(a){t.helpTemplatesSide=a.data,t.helpTemplatesSide&&"publish"===t.helpTemplatesSide.show_type&&(e.helpTemplate=A.trustAsHtml(t.helpTemplatesSide.template),t.openHelpModal())}):M.getModuleType("modal","modulelist",p.id).then(function(a){t.helpTemplatesSide=a.data,t.helpTemplatesSide&&"publish"===t.helpTemplatesSide.show_type&&(e.helpTemplate=A.trustAsHtml(t.helpTemplatesSide.template),t.openHelpModal())});else{var s=window.location.hash.split("#")[1];M.getByType("modal",null,s).then(function(a){t.helpTemplatesSide=a.data,t.helpTemplatesSide&&"publish"===t.helpTemplatesSide.show_type&&(e.helpTemplate=A.trustAsHtml(t.helpTemplatesSide.template),t.openHelpModal())})}}}}]);
"use strict";angular.module("primeapps").factory("NoteService",["$rootScope","$http","config","$filter",function(t,e,n){return{get:function(t){return e.get(n.apiUrl+"note/get/"+t)},like:function(t){return e.post(n.apiUrl+"note/like",t)},find:function(t){return e.post(n.apiUrl+"note/find",t)},count:function(t){return e.post(n.apiUrl+"note/count",t)},create:function(t){return e.post(n.apiUrl+"note/create",t)},update:function(t){return e.put(n.apiUrl+"note/update/"+t.id,t)},"delete":function(t){return e["delete"](n.apiUrl+"note/delete/"+t)}}}]);
"use strict";angular.module("primeapps").directive("noteList",["convert","$localStorage","NoteService","FileUploader","config","ngToast","$filter","helper","$modal","$cookies",function(e,t,a,n,i,o,l,r,s,p){return{restrict:"EA",scope:{moduleId:"=",recordId:"="},templateUrl:cdnUrl+"view/app/note/noteList.html",controller:["$rootScope","$scope",function(e,n){n.user=e.user,n.pagingIcon="fa-chevron-right",n.config=e.config,n.$parent.loadingNotes=!0,n.$parent.allNotesLoaded=!1,n.$parent.currentPage=1,n.$parent.limit=10,n.addActivity=n.$parent.addActivity;var r,d,c=plupload.guid();n.modules=e.modules,n.newNoteForm=!1,n.newsfeed=!0,n.$parent.$parent.module&&(n.newsfeed=!1);var m={module_id:n.$parent.module.id,record_id:n.recordId,limit:n.$parent.limit,offset:0};a.count(m).then(function(e){a.find(m).then(function(t){n.$parent.notes=t.data,n.$parent.loadingNotes=!1,n.$parent.$parent.notesCount=e.data,e.data<=n.$parent.limit&&(n.$parent.hidePaging=!0)})}),n.loadMore=function(){n.$parent.allNotesLoaded||(m.offset=n.$parent.currentPage*n.$parent.limit,n.pagingIcon="fa-spinner fa-spin",a.find(m).then(function(e){if(e=e.data,n.$parent.notes=n.$parent.notes.concat(e),n.pagingIcon="fa-chevron-right",n.$parent.currentPage=n.$parent.currentPage+1,0===e.length)if(n.user.profile.has_admin_rights)n.$parent.allNotesLoaded=!0;else{if(n.$parent.allNotesLoaded)return;m.offset=n.$parent.currentPage*n.$parent.limit,n.pagingIcon="fa-spinner fa-spin",a.find(m).then(function(e){e=e.data,n.$parent.notes=n.$parent.notes.concat(e),n.pagingIcon="fa-chevron-right",n.$parent.currentPage=n.$parent.currentPage+1,n.$parent.allNotesLoaded=!0})}}))},n.addNote=function(e){if(e&&e.text.trim()){n.noteCreating=!0;var t={};t.text=e.text.trim(),t.text.length>3800?(o.create({content:l("translate")("Note.LimitWarn"),className:"warning"}),n.noteCreating=!1):a.create(t).then(function(e){e=e.data;for(var t=new Date,a=t.getDay(),i=(t.getDate(),t.getMonth()+1,t.getFullYear()),o=/(<([^>]+)>)/gi,r=e.text.replace(o,"").split(" "),s=0;s<r.length;s++){if(moment(r[s],"DD/MM/YYYY",!0).isValid()||moment(r[s],"DD.MM.YYYY",!0).isValid()){var p=moment(1e3*moment(r[s],"DD/MM/YYYY HH:mm").unix());e.text=e.text.replace(r[s],'<a href="" ng-click="addActivity('+p+', \'date\')" data-placement="right" bs-tooltip data-title="Etkinlik eklemek için tıklayınız"/>'+r[s]+"</a>")}var d=r[s].toLowerCase();if(l("filter")(u,{code:d},!0).length>0){var c,m=l("filter")(u,{code:d},!0)[0];if("day"===m.type){var g;if("haftaya"===r[s-1]||"hafta"===r[s-1]||"Hafta"===r[s-1]||"Haftaya"===r[s-1]){m.value>a?c=m.value-a+7:(g=a-m.value,c=7-g);var f=r[s-1]+" "+r[s];e.text=e.text.replace(f,'<a href="" ng-click="addActivity('+c+', \'null\')" data-placement="right" bs-tooltip data-title="Etkinlik eklemek için tıklayınız"/>'+r[s-1]+" "+r[s]+"</a>")}else m.value>a?c=m.value-a:(g=a-m.value,c=7-g),e.text=e.text.replace(r[s],'<a href="" ng-click="addActivity('+c+', \'null\')" data-placement="right" bs-tooltip data-title="Etkinlik eklemek için tıklayınız"/>'+r[s]+"</a>")}else if("dayTime"===m.type)c=m.value,e.text=e.text.replace(r[s],'<a href="" ng-click="addActivity('+c+', \'null\')" data-placement="right" bs-tooltip data-title="Etkinlik eklemek için tıklayınız"/>'+r[s]+"</a>");else if("month"===m.type&&(r[s-1]=parseInt(r[s-1]),r[s-1]===parseInt(r[s-1],10))){var _=r[s-1]+"."+m.value+"."+i;c=moment(1e3*moment(_,"DD/MM/YYYY HH:mm").unix());var h=r[s-1]+" "+r[s];e.text=e.text.replace(h,'<a href="" ng-click="addActivity('+c+', \'month\')" data-placement="top" bs-tooltip data-title="Etkinlik eklemek için tıklayınız"/>'+r[s-1]+" "+r[s]+"</a>")}}}var v=new Date;e.created_at=v.setSeconds(v.getSeconds()-1),n.$parent.notes.unshift(e),n.$parent.$parent.notesCount=n.$parent.notesCount+1,n.noteCreating=!1,n.newNoteForm=!1,n.note=null})["catch"](function(){n.noteCreating=!1})}},n.addComment=function(e){if(e.subNote.text&&e.subNote.text.trim()){e.noteCreating=!0;var t={};t.text=e.subNote.text.trim(),t.record_id=n.recordId,t.note_id=e.id,t.module_id=n.$parent.module.id,t.text.length>3800?(o.create({content:l("translate")("Note.LimitWarn"),className:"warning"}),e.noteCreating=!1):a.create(t).then(function(t){e.notes||(e.notes=[]),e.notes.unshift(t.data),e.noteCreating=!1,e.showForm=!1,n.$parent.allNotesLoaded=!1})}},n.updateNote=function(e){if(e.text&&e.text.trim()){e.noteUpdating=!0;var t={};t.id=e.id,t.text=e.text.trim(),a.update(t).then(function(){e.noteUpdating=!1,e.showFormEdit=!1})}},n.deleteNote=function(e,t){a["delete"](e.id).then(function(){t?t.notes.splice(t.notes.indexOf(e),1):n.$parent.notes.splice(n.$parent.notes.indexOf(e),1),n.$parent.$parent.notesCount=n.$parent.notesCount-1})},n.like=function(e,t){var i={note_id:e.id,user_id:n.user.id};a.like(i).then(function(){n.likeButton=!0;var i=e.id;a.get(i).then(function(e){var a=e.data;if(n.likeButton=!1,"sub"===t)for(var o=l("filter")(n.$parent.notes,{id:a.note_id},!0)[0],r=0;r<o.notes.length;r++){var s=o.notes[r];s.id===i&&(s.likes=a.likes)}else l("filter")(n.$parent.notes,{id:a.id},!0)[0].likes=a.likes})})},n.noteLikesList=function(e){n.likes=e,n.noteLikes=n.noteLikes||s({scope:n,templateUrl:"view/app/note/noteLikes.html",animation:"",backdrop:"static",show:!1,tag:"createModal"}),n.noteLikes.$promise.then(n.noteLikes.show)},n.imgUpload={settings:{multi_selection:!1,url:"storage/upload",headers:{Authorization:"Bearer "+t.read("access_token"),Accept:"application/json","X-Tenant-Id":p.get("tenant_id")},multipart_params:{container:c,type:"note",upload_id:0,response_list:""},filters:{mime_types:[{title:"Image files",extensions:"jpg,gif,png"}],max_file_size:"2mb"},resize:{quality:90}},events:{filesAdded:function(e){e.start(),tinymce.activeEditor.windowManager.open({title:l("translate")("Common.PleaseWait"),width:50,height:50,body:[{type:"container",name:"container",label:"",html:"<span>"+l("translate")("EMail.UploadingAttachment")+"</span>"}],buttons:[]})},uploadProgress:function(){},fileUploaded:function(e,t,a){e.settings.multipart_params.response_list="",e.settings.multipart_params.upload_id=0,tinymce.activeEditor.windowManager.close();var n=JSON.parse(a.response);r(i.storage_host+n.public_url,{alt:t.name}),r=null},chunkUploaded:function(e,t,a){var n=JSON.parse(a.response);n.upload_id&&(e.settings.multipart_params.upload_id=n.upload_id),e.settings.multipart_params.response_list+=""==e.settings.multipart_params.response_list?n.e_tag:"|"+n.e_tag},error:function(e,t){switch(this.settings.multipart_params.response_list="",this.settings.multipart_params.upload_id=0,t.code){case-600:tinymce.activeEditor.windowManager.alert(l("translate")("EMail.MaxImageSizeExceeded"))}d&&(d(),d=null)}}},n.fileUpload={settings:{multi_selection:!1,unique_names:!1,url:"storage/upload",headers:{Authorization:"Bearer "+t.read("access_token"),Accept:"application/json","X-Tenant-Id":p.get("tenant_id")},multipart_params:{container:c,type:"note",upload_id:0,response_list:""},filters:{mime_types:[{title:"Email Attachments",extensions:"pdf,doc,docx,xls,xlsx,csv"}],max_file_size:"50mb"}},events:{filesAdded:function(e){e.start(),tinymce.activeEditor.windowManager.open({title:l("translate")("Common.PleaseWait"),width:50,height:50,body:[{type:"container",name:"container",label:"",html:"<span>"+l("translate")("EMail.UploadingAttachment")+"</span>"}],buttons:[]})},uploadProgress:function(){},fileUploaded:function(e,t,a){this.settings.multipart_params.response_list="",this.settings.multipart_params.upload_id=0;var n=JSON.parse(a.response);r(i.storage_host+n.public_url,{alt:t.name}),r=null,tinymce.activeEditor.windowManager.close()},chunkUploaded:function(e,t,a){var n=JSON.parse(a.response);n.upload_id&&(e.settings.multipart_params.upload_id=n.upload_id),e.settings.multipart_params.response_list+=""==e.settings.multipart_params.response_list?n.e_tag:"|"+n.e_tag},error:function(e,t){switch(this.settings.multipart_params.response_list="",this.settings.multipart_params.upload_id=0,t.code){case-600:tinymce.activeEditor.windowManager.alert(l("translate")("EMail.MaxFileSizeExceeded"))}d&&(d(),d=null)}}},n.tinymceTemplate={onChange:function(){},valid_elements:"@[id|class|title|style],a[name|href|target|title|alt|ng-click],#p,blockquote,-ol,-ul,-li,br,img[src|height|width],-sub,-sup,-b,-i,-u,-span,hr",inline:!1,height:125,language:e.language,plugins:["advlist autolink lists link image charmap print preview anchor placeholder","searchreplace visualblocks code fullscreen","insertdatetime table contextmenu paste imagetools wordcount textcolor colorpicker"],imagetools_cors_hosts:["crm.ofisim.com","test.ofisim.com","ofisimcomdev.blob.core.windows.net"],toolbar:" link image imagetools ",menubar:"false",placeholder_attrs:{style:{position:"absolute",top:"5px",left:0,color:"lightgrey",padding:"1%",width:"98%",overflow:"hidden","white-space":"pre-wrap"}},skin:"custom",theme:"modern",file_picker_callback:function(e,t,a){if(r=e,"file"==a.filetype){var n=document.getElementById("uploadFile");n.click()}if("image"==a.filetype){var n=document.getElementById("uploadImage");n.click()}},image_advtab:!0,file_browser_callback_types:"image file",paste_data_images:!0,paste_as_text:!0,spellchecker_language:e.language,images_upload_handler:function(e,t,a){var i=e.blob();r=t,d=a,n.imgUpload.uploader.addFile(i)},resize:!1,width:"99,9%",toolbar_items_size:"small",statusbar:!1};var u=[{code:"pazartesi",type:"day",value:1},{code:"salı",type:"day",value:2},{code:"&ccedil;arşamba",type:"day",value:3},{code:"perşembe",type:"day",value:4},{code:"cuma",type:"day",value:5},{code:"cumartesi",type:"day",value:6},{code:"pazar",type:"day",value:7},{code:"bug&uuml;n",type:"dayTime",value:0},{code:"yarın",type:"dayTime",value:1},{code:"ocak",type:"month",value:1},{code:"şubat",type:"month",value:2},{code:"mart",type:"month",value:3},{code:"nisan",type:"month",value:4},{code:"mayıs",type:"month",value:5},{code:"haziran",type:"month",value:6},{code:"temmuz",type:"month",value:7},{code:"ağustos",type:"month",value:8},{code:"eyl&uuml;l",type:"month",value:9},{code:"ekim",type:"month",value:10},{code:"kasım",type:"month",value:11},{code:"aralık",type:"month",value:12}]}]}}]).directive("noteForm",["$filter","$localStorage","FileUploader","config","convert","entityTypes","NoteService","ngToast","$cookies",function(e,t,a,n,i,o,l,r,s){return{restrict:"EA",scope:{recordId:"=",show:"="},templateUrl:cdnUrl+"view/app/note/noteForm.html",controller:["$scope","$rootScope",function(a,i){a.noteCreating=!1;var o,p,d=plupload.guid();a.create=function(t){if(t&&t.text.trim()){a.noteCreating=!0;var n={};n.text=t.text.trim(),n.record_id=a.recordId,n.module_id=a.$parent.module.id,n.text.length>3800?(r.create({content:e("translate")("Note.LimitWarn"),className:"warning"}),a.noteCreating=!1):l.create(n).then(function(e){e=e.data;var t=new Date;e.created_at=t.setSeconds(t.getSeconds()-1),a.$parent.notes.unshift(e),a.$parent.$parent.notesCount=a.$parent.notesCount+1,a.noteCreating=!1,a.show=!1,a.note=null})["catch"](function(){a.noteCreating=!1})}},a.imgUploadForm={settings:{multi_selection:!1,url:"storage/upload",multipart_params:{container:d,type:"note",upload_id:0,response_list:""},filters:{mime_types:[{title:"Image files",extensions:"jpg,gif,png"}],max_file_size:"2mb"},resize:{quality:90}},events:{filesAdded:function(t){t.start(),tinymce.activeEditor.windowManager.open({title:e("translate")("Common.PleaseWait"),width:50,height:50,body:[{type:"container",name:"container",label:"",html:"<span>"+e("translate")("EMail.UploadingAttachment")+"</span>"}],buttons:[]})},uploadProgress:function(){},fileUploaded:function(e,t,a){e.settings.multipart_params.response_list="",e.settings.multipart_params.upload_id=0,tinymce.activeEditor.windowManager.close();var i=JSON.parse(a.response);o(n.storage_host+i.public_url,{alt:t.name}),o=null},chunkUploaded:function(e,t,a){var n=JSON.parse(a.response);n.upload_id&&(e.settings.multipart_params.upload_id=n.upload_id),e.settings.multipart_params.response_list+=""==e.settings.multipart_params.response_list?n.e_tag:"|"+n.e_tag},error:function(t,a){switch(this.settings.multipart_params.response_list="",this.settings.multipart_params.upload_id=0,a.code){case-600:tinymce.activeEditor.windowManager.alert(e("translate")("EMail.MaxImageSizeExceeded"))}p&&(p(),p=null)}}},a.fileUploadForm={settings:{multi_selection:!1,unique_names:!1,url:"storage/upload",headers:{Authorization:"Bearer "+t.read("access_token"),Accept:"application/json","X-Tenant-Id":s.get("tenant_id")},multipart_params:{container:d,type:"note",upload_id:0,response_list:""},filters:{mime_types:[{title:"Email Attachments",extensions:"pdf,doc,docx,xls,xlsx,csv"}],max_file_size:"50mb"}},events:{filesAdded:function(t){t.start(),tinymce.activeEditor.windowManager.open({title:e("translate")("Common.PleaseWait"),width:50,height:50,body:[{type:"container",name:"container",label:"",html:"<span>"+e("translate")("EMail.UploadingAttachment")+"</span>"}],buttons:[]})},uploadProgress:function(){},fileUploaded:function(e,t,a){this.settings.multipart_params.response_list="",this.settings.multipart_params.upload_id=0;var n=JSON.parse(a.response);o(n.public_url,{alt:t.name}),o=null,tinymce.activeEditor.windowManager.close()},chunkUploaded:function(e,t,a){var n=JSON.parse(a.response);n.upload_id&&(e.settings.multipart_params.upload_id=n.upload_id),e.settings.multipart_params.response_list+=""==e.settings.multipart_params.response_list?n.e_tag:"|"+n.e_tag},error:function(t,a){switch(this.settings.multipart_params.response_list="",this.settings.multipart_params.upload_id=0,a.code){case-600:tinymce.activeEditor.windowManager.alert(e("translate")("EMail.MaxFileSizeExceeded"))}p&&(p(),p=null)}}},a.tinymceTemplate={onChange:function(){},inline:!1,height:150,language:i.language,plugins:["advlist autolink lists link image charmap print preview anchor placeholder","searchreplace visualblocks code fullscreen","insertdatetime table contextmenu paste imagetools wordcount textcolor colorpicker"],imagetools_cors_hosts:["crm.ofisim.com","test.ofisim.com","ofisimcomdev.blob.core.windows.net","localhost"],toolbar:" link image imagetools ",menubar:"false",placeholder_attrs:{style:{position:"absolute",top:"5px",left:0,color:"lightgrey",padding:"1%",width:"98%",overflow:"hidden","white-space":"pre-wrap"}},skin:"custom",theme:"modern",file_picker_callback:function(e,t,a){if(o=e,"file"==a.filetype){var n=document.getElementById("uploadFile");n.click()}if("image"==a.filetype){var n=document.getElementById("uploadImage");n.click()}},image_advtab:!0,file_browser_callback_types:"image file",paste_data_images:!0,paste_as_text:!0,spellchecker_language:i.language,images_upload_handler:function(e,t,n){var i=e.blob();o=t,p=n,a.imgUploadForm.uploader.addFile(i)},resize:!1,width:"99,9%",toolbar_items_size:"small",statusbar:!1}}]}}]).directive("compile",["$compile",function(e){return function(t,a,n){t.$watch(function(e){return e.$eval(n.compile)},function(n){a.html(n),e(a.contents())(t)})}}]).directive("onEnter",function(){return function(e,t,a){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(a.onEnter,{event:t})}),t.preventDefault())})}});
"use strict";angular.module("primeapps").factory("DocumentService",["$http","config","guidEmpty","$filter","helper",function(e,t,n,o,i){return{getDocuments:function(n,o,i){return e.post(t.apiUrl+"Document/GetDocuments",{record_id:o,tenant_id:n,module_id:i})},getEntityDocuments:function(n,o,i){return e.post(t.apiUrl+"Document/GetEntityDocuments",{tenant_id:n,module_id:i,record_id:o})},getDocument:function(n){return e.post(t.apiUrl+"Document/GetDocument",n)},removeModuleDocument:function(n){return e.post(t.apiUrl+"Document/remove_document",n)},advancedSearch:function(n,o,i,r){return e.post(t.apiUrl+"Document/document_search",{module:n,filters:o,top:i,skip:r})},create:function(t,n,o,i,r,u,c,d,m){return e.post("storage/create",{unique_file_name:n,file_name:o,mime_type:i,file_size:r,chunk_size:m||1,description:u,tenant_id:t,record_id:c,module_id:d})},update:function(n,o,i,r,u,c){return e.post(t.apiUrl+"Document/Modify",{id:n,file_name:i,description:r,instance_id:o,record_id:u,module_id:c})},remove:function(n){return e.post(t.apiUrl+"Document/Remove",n)},upload:function(n){return e.post(t.apiUrl+"Document/Upload",n,{headers:{"Content-Type":void 0},transformRequest:angular.identity})},move:function(n,o,i){return e.post(t.apiUrl+"Document/Move",{ID:n,EntityID:o,EntityType:i})},processDocuments:function(e,t,r,u,c){if(r){var d=angular.copy(r);d.CreatedBy==n&&delete d.CreatedBy,e.documents=o("filter")(e.documents,d,!1)}var m={documentList:[],totalDocumentCount:e.total_documents_count,filteredDocumentCount:e.filtered_documents_count};return angular.forEach(e.documents,function(e){var n=e.created_by.id;n||(n=e.created_by);var r=o("filter")(t,{id:n},!0)[0];e.created_by=r,e.timestamp=i.getTime(e.created_time),e.extension=i.getFileExtension(e.name),e.name_plain=e.name.slice(0,e.name.indexOf(e.Extension)-1),m.documentList.push(e)},m.documentList),u&&(m.documentList=o("orderBy")(m.documentList,u,c)),m}}}]);
"use strict";angular.module("primeapps").directive("documentList",["$filter","guidEmpty","entityTypes","helper","operations","DocumentService","$localStorage","config","$stateParams","$window","ngToast",function(e,t,n,o,i,a,r,c,s,l,d){return{restrict:"EA",scope:{documents:"=",entityId:"=",entityType:"=",isAll:"="},templateUrl:cdnUrl+"view/app/documents/documentList.html",controller:["$scope",function(u){u.editedDocument=null,u.documentState={},u.documentUpdating=!1,u.apiUrl=u.$root.config.apiUrl,u.guidEmpty=t,u.hasPermission=o.hasPermission,u.hasDocumentsPermission=o.hasDocumentsPermission,u.entityTypes=n,u.operations=i,u.lightBox=!1,u.type=s.type,u.module=e("filter")(u.$root.modules,{name:s.type},!0)[0],u.moduleId=u.module.id;var m=u.$root.workgroup.tenant_id,p=u.entityId,f=u.moduleId;u.edit=function(e){u.editedDocument=e,u.documentState=angular.copy(e),e.editing=!0},u.cancelEdit=function(){this.document=u.documentState,u.editedDocument=null},u.update=function(e){if(u.editedDocument&&u.editedDocument.name_plain&&u.editedDocument.name_plain.trim()){u.documentUpdating=!0;var t=u.editedDocument.NamePlain.trim()+"."+u.editedDocument.Extension;a.update(u.editedDocument.id,u.$root.workgroup.tenant_id,t,u.editedDocument.description,u.editedDocument.RecordId,u.editedDocument.ModuleId).then(function(){u.documentUpdating=!1,u.editedDocument=null,e.Name=t})["catch"](function(){u.documentUpdating=!1})}},u.remove=function(e){a.remove(e).then(function(){u.isAll?a.getDocuments(m,p,f).then(function(e){var t=a.processDocuments(e.data,u.$root.users);u.$parent.documents=t.documentList,u.$parent.documentsResultSet&&(u.$parent.documentsResultSet.totalDocumentCount=e.data.total_documents_count)}):a.getEntityDocuments(m,p,f).then(function(e){var t=a.processDocuments(e.data,u.$root.users);u.$parent.documents=t.documentList,u.$parent.documentsResultSet.totalDocumentCount=e.data.total_documents_count})})},u.getParentEntityName=function(t,n){var o=e("filter")(u.$root.clientData,{EntityType:t,EntityID:n})[0];return o?o.EntityName:""},u.icon=function(e){var t="fa fa-2x ";switch(e){case"doc":case"docx":t+="fa-file-word-o";break;case"xls":case"xlsx":t+="fa-file-excel-o";break;case"ppt":case"pptx":t+="fa-file-powerpoint-o";break;case"pdf":t+="fa-file-pdf-o";break;case"txt":t+="fa-file-text-o";break;case"bmp":case"jpeg":case"jpg":case"png":case"gif":t+="fa-file-image-o";break;case"zip":t+="fa-file-archive-o";break;case"rar":t+="fa-file-archive-o";break;case"eml":case"msg":t+="fa fa-envelope";break;default:t+="fa-file-o"}return t},u.downloadDocument=function(t){a.getDocument(t.id).then(function(n){n.data?l.open("/storage/download?fileId="+t.id,"_blank"):d.create({content:e("translate")("Documents.NotFound"),className:"warning",timeout:6e3})})},u.getDownloadUrl=function(e){return c.apiUrl+"storage/download?fileID="+e.id+"&access_token="+r.read("access_token")},u.showLightBox=function(e,t){u.lightBox=!0,u.fileData=e,u.Index=t},l.addEventListener("keydown",function(e){switch(e.key){case"ArrowLeft":angular.element(document.getElementById("previous")).triggerHandler("click");break;case"ArrowRight":angular.element(document.getElementById("next")).triggerHandler("click");break;case"Escape":angular.element(document.getElementById("close-lightbox")).triggerHandler("click")}}),u.closeLightBox=function(){u.lightBox=!1}}]}}]).directive("documentForm",["config","guidEmpty","$localStorage","$filter","$q","ngToast","helper","FileUploader","resizeService","DocumentService","$timeout","$stateParams","$cookies",function(e,t,n,o,i,a,r,c,s,l,d,u){return{restrict:"EA",scope:{entityId:"=",entityType:"=",isAll:"=",show:"=",hideCloseButton:"=",hideUploadButton:"=",hideAllPanel:"=",customUploader:"=",entityIdFunc:"&",moduleId:"="},templateUrl:cdnUrl+"view/app/documents/documentForm.html",controller:["$scope","$timeout",function(e,t){function n(e){var t=i.defer(),n=new FileReader;return n.onload=function(e){t.resolve(e.target.result)},n.readAsDataURL(e),t.promise}e.documentCreating=!1;var d=e.$root.workgroup.tenant_id,m=e.entityId,p=u.type;e.module=o("filter")(e.$root.modules,{name:p},!0)[0];var f=e.module.id,g=e.uploader=e.customUploader||new c({url:"storage/upload_whole"});g.onCompleteItem=function(t,n,o){if(200===o){var i=n.unique_name,a=n.chunks,r=t.file.name,c=n.content_type,s=t._file.size,u="";e.customUploader?(m=e.entityIdFunc(),l.create(d,i,r,c,s,u,m,f,a)):l.create(d,i,r,c,s,u,m,f,a)}},e.customUploader||(g.onCompleteAll=function(){t(function(){e.isAll?l.getDocuments(d,m,f).then(function(t){var n=l.processDocuments(t.data,e.$root.users);e.$parent.documents=n.documentList,e.$parent.documentsResultSet.totalDocumentCount=t.data.total_documents_count}):l.getEntityDocuments(d,m,f).then(function(t){var n=l.processDocuments(t.data,e.$root.users);e.$parent.documents=n.documentList,e.$parent.documentsResultSet.totalDocumentCount=t.data.total_documents_count})},2e3)}),g.onWhenAddingFileFailed=function(e,t){switch(t.name){case"docFilter":a.create({content:o("translate")("Documents.FormatError"),className:"warning",timeout:8e3});break;case"sizeFilter":a.create({content:o("translate")("Documents.SizeError"),className:"warning",timeout:6e3});break;case"limitFilter":a.create({content:o("translate")("Documents.LimitError"),className:"warning",timeout:6e3})}},g.onAfterAddingFile=function(e){var t="|"+e.file.type.slice(e.file.type.lastIndexOf("/")+1)+"|";"|jpg|png|jpeg|bmp|gif".indexOf(t)>-1&&n(e._file).then(function(t){e.image=t;var n=new Image;n.onload=function(){n.width<=1024||s.resizeImage(e.image,{width:1024},function(t,n){t||(e._file=h(n),e.file.size=e._file.size)})},n.src=t})},g.filters.push({name:"docFilter",fn:function(e){var t=r.getFileExtension(e.name);if("mpp"===t)return!0;if("rar"===t)var n="|x-rar-compressed|";else if("zip"===t)var n="|zip|";else if("eml"===t)var n="|eml|";else if("msg"===t)var n="|msg|";else var n="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return"|msword|x-rar-compressed|zip|eml|msg|vnd.ms-excel|vnd.ms-powerpoint|vnd.openxmlformats-officedocument.wordprocessingml.document|vnd.openxmlformats-officedocument.wordprocessingml.template|vnd.openxmlformats-officedocument.spreadsheetml.sheet|vnd.openxmlformats-officedocument.presentationml.presentation|vnd.openxmlformats-officedocument.presentationml.template|vnd.openxmlformats-officedocument.presentationml.slideshow|rtf|pdf|plain|tiff|bmp|jpeg|jpg|png|gif|".indexOf(n)>-1}}),g.filters.push({name:"sizeFilter",fn:function(e){return e.size<10485760}});var h=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],o=[],i=0;i<t.length;i++)o.push(t.charCodeAt(i));return new Blob([new Uint8Array(o)],{type:n})}}]}}]).directive("lightboxDirective",function(){return{restrict:"E",transclude:!0,template:"<section ng-transclude></section>"}});
angular.module("primeapps").factory("ModuleService",["$rootScope","$http","config","$q","$filter","$cache","$window","helper","operations","ngTableParams","icons","dataTypes","operators","activityTypes","transactionTypes","yesNo","components",function($rootScope,$http,config,$q,$filter,$cache,$window,helper,operations,ngTableParams,icons,dataTypes,operators,activityTypes,transactionTypes,yesNo,components){return{myAccount:function(){return $http.post(config.apiUrl+"User/MyAccount",{})},getAllUser:function(){return $http.get(config.apiUrl+"User/get_all")},getUserLicenseStatus:function(){return $http.post(config.apiUrl+"License/GetUserLicenseStatus",{})},addUser:function(e){return $http.post(config.apiUrl+"User/add_user",e)},deleteUser:function(e,a){return $http.post(config.apiUrl+"Instance/Dismiss",{UserID:e.ID,EMail:e.email,HasAccount:e.hasAccount,InstanceID:a})},getUserEmailControl:function(e){return $http.get(config.apiUrl+"User/get_user_email_control?Email="+e)},get:function(e){return $http.get(config.apiUrl+"template/get/"+e)},create:function(e){return $http.post(config.apiUrl+"module/create",e)},update:function(e,a){return $http.put(config.apiUrl+"module/update/"+a,e)},"delete":function(e){return $http["delete"](config.apiUrl+"module/delete/"+e)},createModuleRelation:function(e,a){return $http.post(config.apiUrl+"module/create_relation/"+a,e)},updateModuleRelation:function(e,a){return $http.put(config.apiUrl+"module/update_relation/"+a+"/"+e.id,e)},deleteModuleRelation:function(e){return $http["delete"](config.apiUrl+"module/delete_relation/"+e)},createModuleDependency:function(e,a){return $http.post(config.apiUrl+"module/create_dependency/"+a,e)},updateModuleDependency:function(e,a){return $http.put(config.apiUrl+"module/update_dependency/"+a+"/"+e.id,e)},deleteModuleDependency:function(e){return $http["delete"](config.apiUrl+"module/delete_dependency/"+e)},getRecord:function(e,a,l){return $http.get(config.apiUrl+"record/get/"+e+"/"+a,{ignoreNotFound:l})},findRecords:function(e,a){return $rootScope.activeModuleName=null,("current_accounts"===e||"kasa_hareketleri"===e||"banka_hareketleri"===e||"stock_transactions"===e)&&("stock_transactions"===e&&a.sort_field?a.sort_field="transaction_date,id":"stock_transactions"!==e&&a.sort_field&&(a.sort_field+=",id")),$http.post(config.apiUrl+"record/find/"+e,a)},insertRecord:function(e,a){return $http.post(config.apiUrl+"record/create/"+e+"?timezone_offset="+-1*(new Date).getTimezoneOffset(),a)},updateRecord:function(e,a){return delete a.process_id,delete a.process_status,delete a.process_status_order,delete a.operation_type,delete a.process_request_updated_by,delete a.process_request_updated_at,delete a.freeze,$http.put(config.apiUrl+"record/update/"+e+"?timezone_offset="+-1*(new Date).getTimezoneOffset(),a)},deleteRecord:function(e,a){if($rootScope.branchAvailable&&"calisanlar"===e){var l=$q.defer(),i=this;return this.getRecord(e,a).then(function(t){if(t.data){var r=$filter("filter")($rootScope.workgroup.users,{email:t.data.e_posta},!0)[0];r&&i.deleteUser(r,$rootScope.workgroup.tenant_id),$http["delete"](config.apiUrl+"record/delete/"+e+"/"+a).then(function(e){return l.resolve(e),l.promise})}}),l.promise}return $http["delete"](config.apiUrl+"record/delete/"+e+"/"+a)},addRelations:function(e,a,l){return $http.post(config.apiUrl+"record/add_relations/"+e+"/"+a,l)},deleteRelation:function(e,a,l){return $http({method:"DELETE",url:config.apiUrl+"record/delete_relation/"+e+"/"+a,data:l,headers:{"Content-type":"application/json;charset=utf-8"}})},insertRecordBulk:function(e,a){for(var l=0;l<a.length;l++)a[l];return $http.post(config.apiUrl+"record/create_bulk/"+e,a)},deleteRecordBulk:function(e,a){return $http({method:"DELETE",url:config.apiUrl+"record/delete_bulk/"+e,data:a,headers:{"Content-type":"application/json;charset=utf-8"}})},updateRecordBulk:function(e,a){return delete a.record.shared_users_edit,delete a.record.shared_users,delete a.record.shared_user_groups_edit,delete a.record.shared_user_groups,delete a.record.shared_read,$http({method:"Put",url:config.apiUrl+"record/update_bulk/"+e,data:a,headers:{"Content-type":"application/json;charset=utf-8"}})},findPicklist:function(e){return $http.post(config.apiUrl+"picklist/find",e)},setViewState:function(e,a,l){return l&&(e.id=l),e.module_id=a,$http.put(config.apiUrl+"view/set_view_state",e)},deleteView:function(e){return $http["delete"](config.apiUrl+"view/delete/"+e)},approveMultipleProcessRequest:function(e,a){return $http.put(config.apiUrl+"process_request/approve_multiple_request",{record_ids:e,module_name:a})},approveProcessRequest:function(e,a,l){return $http.put(config.apiUrl+"process_request/approve",{record_id:l,module_name:a,operation_type:e})},rejectProcessRequest:function(e,a,l,i){return $http.put(config.apiUrl+"process_request/reject",{record_id:i,module_name:a,operation_type:e,message:l})},deleteProcessRequest:function(e,a){return $http.put(config.apiUrl+"process_request/delete",{record_id:a,module_id:e})},send_approval:function(e,a,l){return $http.put(config.apiUrl+"process_request/send_approval",{record_id:l,module_name:a,operation_type:e})},sendApprovalManuel:function(e){return $http.post(config.apiUrl+"process_request/send_approval_manuel",e)},getProcess:function(e){return $http.get(config.apiUrl+"process/get/"+e)},getAllProcess:function(){return $http.get(config.apiUrl+"process/get_all")},convertSalesInvoice:function(e){return $http.post(config.apiUrl+"convert/convert_sales_orders",e)},convertPurchaseInvoice:function(e){return $http.post(config.apiUrl+"convert/convert_purchase_orders",e)},sendSMS:function(e,a,l,i,t,r){return $http.post(config.apiUrl+"messaging/send_sms",{module_id:e,Ids:a,Query:l,IsAllSelected:i,Message:t,phone_field:r})},sendEMail:function(e,a,l,i,t,r,s,o,n,f,u,d,c,p,m){return $http.post(config.apiUrl+"messaging/send_email",{module_id:e,Ids:a,Query:l,is_all_selected:i,Message:t,e_mail_field:r,Cc:s,Bcc:o,sender_alias:n,provider_type:u,sender_e_mail:f,attachment_container:d,subject:c,attachment_link:p,attachment_name:m})},getTemplates:function(e,a){return $http.get(config.apiUrl+"template/get_all?moduleName="+e+"&type="+a)},processRecordSingle:function(e,a,l){for(var i=0;i<a.fields.length;i++){var t=a.fields[i];this.processRecordField(e,t,l)}return e},formatRecordFieldValues:function(e,a,l){for(var i=0;i<a.fields.length;i++){var t=a.fields[i];this.formatFieldValue(t,e[t.name],l,e,a)}},processRecordMulti:function(e,a,l,i,t,r,s,o,n,f,u,d){for(var c=[],p=function(e,a,l,i,t,r,s,o,n,f,u,d){var c="#/app/module/";if(u.external_link)return void(e.link=d?u.external_link+"?id="+e.value_id+"&back="+l:u.external_link+"?id="+a.id+"&back="+l);"rehber"===l&&(c="#/app/",l="directory");var p;if(f&&(p=f.$parent.record),f&&!p&&(p=f.$parent.$parent.record),f&&!p&&(p=f.$parent.$parent.$parent.record),e.primary||"email"===e.data_type||"url"===e.data_type||"lookup"===e.data_type||"location"===e.data_type){if(e.primary&&!e.isJoin)return void(e.link=c+l+"?id="+a.id+(t?"&ptype="+i+"&pid="+t+"&rtab="+r+(p&&p.freeze?"&freeze=true":"")+(o?"&pptype="+s+"&ppid="+o+"&prtab="+n:""):""));if(e.primary&&e.isJoin&&"users"!==e.value_type&&"profiles"!==e.value_type&&"roles"!==e.value_type)return void(e.link=c+e.value_type+"?id="+e.value_id+(t?"&ptype="+i+"&pid="+t+(p&&p.freeze?"&freeze=true":""):"&back="+l));if("lookup"===e.data_type&&"users"!==e.lookup_type&&"profiles"!==e.lookup_type&&"roles"!==e.lookup_type){var m=e.lookup_type;"object"==typeof e.lookup_type&&(m=e.lookup_type.id);var _=a[e.name+"."+m+".id"];return void(e.link=c+m+"?id="+_+(t?"&ptype="+i+"&pid="+t+"&rtab="+r+(p&&p.freeze?"&freeze=true":"")+(o?"&pptype="+s+"&ppid="+o+"&prtab="+n:""):"&back="+l))}"email"===e.data_type&&(e.link="mailto:"+e.value),"url"===e.data_type&&(e.link=e.value),"location"===e.data_type&&(e.link="http://www.google.com/maps/place/"+e.value)}},m=function(e,a,l,i,t){switch(e.data_type){case"text_single":e.mask&&t?a.valueFormatted=$filter("mask")(t,e.mask):(a.value=t,a.valueFormatted=e.valueFormatted);break;case"lookup":if(!l[i])return;a.value=l[i],a.lookup_type="relation"!==e.lookup_type?e.lookup_type:l[e.lookup_relation],a.valueFormatted=a.value;break;case"picklist":case"multiselect":case"tag":case"checkbox":a.value=e.valueFormatted,a.valueFormatted=e.valueFormatted;break;default:a.value=t,a.valueFormatted=e.valueFormatted}},_=angular.copy(e),v=0;v<_.length;v++){var h=_[v],b={};b.id=h.id||h[a.name+"_id"],h["process.process_requests.process_id"]?(b.isProcessItem=!0,b["process.process_requests.process_status"]=h["process.process_requests.process_status"]):b.isProcessItem=!1,b.shared_users_edit=h.shared_users_edit,b.shared_users=h.shared_users,b.shared_user_groups_edit=h.shared_user_groups_edit,b.shared_user_groups=h.shared_user_groups,b.shared_read=h.shared_read,b.fields=[];for(var g=0;g<i.length;g++){var y=i[g],k=angular.copy(a),$=y.field,w=!1;if(y.field.indexOf(".")>-1){var S=y.field.split(".");if(null!=S[3]&&"primary"===S[3])continue;k=$filter("filter")($rootScope.modules,{name:S[1]},!0)[0],$=S[2],w=!0}for(var D=0;D<k.fields.length;D++){var z=k.fields[D];if($===z.name&&this.hasFieldDisplayPermission(z)){if(null==l){var M=this.getPicklists(a);l=M.$$state.value}this.processRecordsField(h,z,!0),this.formatFieldValue(z,h[y.field],l,h,a);var Y={data_type:z.data_type,name:z.name,primary:z.primary,value:"",isJoin:w,isHtml:z.multiline_type_use_html,image_size_list:z.image_size_list};"rating"===z.data_type&&(Y.max=z.validation.min_length);for(var F in h)if(h.hasOwnProperty(F)){var q=h[F],P=!1;if(F.indexOf(".")>-1){var x=F.split(".");w&&z.primary&&(Y.value_id=h[x[0]+"."+x[1]+".id"],Y.value_type=x[1],P=!0),F=x[2]}if(F!==z.name)continue;m(z,Y,h,F,q),p(Y,h,t,s,r,o,n,f,u,d,z,P)}Y.order=y.order||z.order,b.fields.push(Y)}}}c.push(b)}return c},processRecordField:function(e,a,l){var i=a.name;switch(a.data_type){case"lookup":var t={},r=null===e[i+".id"];void 0===e[i+".id"]&&(a.inline_edit=!1,r=!0);for(var s in e)if(e.hasOwnProperty(s)){var o=e[s];if(s.startsWith(i+".")){if(!r){var n=s.split(".");if(n[0]!==a.name)continue;t[n[1]]=o}delete e[s]}}if(r)return;if("users"===a.lookup_type)t.primary_value=t.full_name;else if("profiles"===a.lookup_type)t.primary_value=t.name;else if("roles"===a.lookup_type)t.primary_value=t["label_"+$rootScope.user.tenant_language];else if("relation"===a.lookup_type)t=e[a.lookup_relation]&&e.related_to?e.related_to:null;else{var f=$filter("filter")($rootScope.modules,{name:a.lookup_type},!0)[0],u=$filter("filter")(f.fields,{primary:!0,deleted:!1},!0)[0];t.primary_value=t[u.name]}e[i]=t;break;case"picklist":var d=$filter("filter")(l[a.picklist_id],{labelStr:e[i],inactive:"!true"},!0)[0];e[i]=d;break;case"multiselect":var c=[];if(e[i]&&e[i].length>0)for(var p=0;p<e[i].length;p++){var m=e[i][p],d=$filter("filter")(l[a.picklist_id],{labelStr:m,inactive:"!true"},!0)[0];d&&c.push(d)}e[i]=c;break;case"date":case"date_time":case"time":if(void 0===e[i]||null===e[i]||!e[i].length)return;e[i]=new Date(e[i])}},processRecordsField:function(e,a){var l=a.name;switch(a.data_type){case"lookup":var i=$filter("filter")($rootScope.modules,{name:a.lookup_type},!0)[0];if(null===i||void 0===i)return;var t=$filter("filter")(i.fields,{primary:!0},!0)[0];e[l]=e[a.name+"."+a.lookup_type+"."+t.name+".primary"];break;case"date":case"date_time":case"time":if(void 0===e[l]||null===e[l]||!e[l].length)return;e[l]=new Date(e[l])}},processUser:function(e){var a={};return a.id=e.id,a.primary_value=e.first_name+" "+e.last_name,a.email=e.email,a},processRecords:function(e,a,l){for(var i=[],t=angular.copy(e),r=0;r<t.length;r++){for(var s=t[r],o=0;o<a.fields.length;o++){var n=a.fields[o];this.processRecordsField(s,n,l),this.formatFieldValue(n,s[n.name],l,s,a)}i.push(s)}return i},formatFieldValue:function(e,a,l,i,t){if(e.valueFormatted="",void 0!==a&&null!==a)switch(e.data_type){case"number_decimal":e.valueFormatted=$filter("number")(a,e.decimal_places||2);break;case"number_auto":var r=a.toString();e.auto_number_prefix&&(r=e.auto_number_prefix+r),e.auto_number_suffix&&(r+=e.auto_number_suffix),e.valueFormatted=r;break;case"currency":var s;if(i&&i.currency)if(angular.isObject(i.currency))s=i.currency.value;else{var o=$filter("filter")(t.fields,{name:"currency"},!0)[0],n=$filter("filter")(l[o.picklist_id],{labelStr:i.currency})[0];n&&n.value&&(s=n.value)}e.valueFormatted=$filter("currency")(a,s||e.currency_symbol||$rootScope.currencySymbol,e.decimal_places||2);break;case"date":e.valueFormatted=$filter("date")(a,"shortDate");break;case"date_time":e.valueFormatted=$filter("date")(a,"short");break;case"time":e.valueFormatted=$filter("date")(a,"shortTime");break;case"picklist":if(angular.isObject(a))e.valueFormatted=a.label[$rootScope.language];else{var f=$filter("filter")(l[e.picklist_id],{labelStr:a},!0)[0];e.valueFormatted=f?f.label[$rootScope.language]:a}break;case"multiselect":for(var u=0;u<a.length;u++){var d=a[u];if(angular.isObject(d))e.valueFormatted+=(d.label?d.label[$rootScope.language]:"")+"; ";else{var f=$filter("filter")(l[e.picklist_id],{labelStr:d},!0)[0];e.valueFormatted+=(f?f.label[$rootScope.language]:d)+"; "}}e.valueFormatted=e.valueFormatted.slice(0,-2);break;case"tag":for(var u=0;u<a.length;u++){var d=a[u];e.valueFormatted+=angular.isObject(d)?" "+d:" "+d+";"}break;case"checkbox":e.valueFormatted=$filter("filter")(l.yes_no,{system_code:a.toString()})[0].label[$rootScope.language];break;default:e.valueFormatted=a}},getPicklists:function(e,a){var l=$q.defer(),i=angular.copy(e.fields),t={},r=[];if(a)for(var s=0;s<e.fields.length;s++){var o=e.fields[s];if("lookup"===o.data_type&&"users"!==o.lookup_type&&"profiles"!==o.lookup_type&&"roles"!==o.lookup_type&&"relation"!==o.lookup_type){var n=$filter("filter")($rootScope.modules,{name:o.lookup_type},!0)[0];if(!n)continue;for(var f=0;f<n.fields.length;f++){var u=n.fields[f];("picklist"===u.data_type||"multiselect"===u.data_type)&&i.push(u)}}}for(var d=function(a,l){if(e.dependencies&&e.dependencies.length>0){var i=$filter("filter")(e.dependencies,{child_field:l.name},!0)[0];if(i&&i.deleted!==!0&&"list_field"===i.dependency_type)for(var t=0;t<a.length;t++){var r=a[t];r.hidden=!0}}},c=0;c<i.length;c++){var p=i[c];if(p.picklist_id){var m=$cache.get("picklist_"+p.picklist_id);if(9e5===p.picklist_id){if(m){t[p.picklist_id]=m;continue}for(var _=[],v=0;v<$rootScope.modules.length;v++){var h=$rootScope.modules[v];if(h.display&&"activities"!==h.name&&helper.hasPermission(h.name,operations.read)){var b={};b.id=parseInt(h.id)+9e5,b.type=9e5,b.system_code=h.name,b.order=h.order,b.label={},b.label.en=h.label_en_singular,b.label.tr=h.label_tr_singular,b.labelStr=h["label_"+$rootScope.user.tenant_language+"_singular"],b.value=h.name,_.push(b)}}_=$filter("orderBy")(_,"order"),t[9e5]=_,$cache.put("picklist_"+9e5,_);continue}m?(m=$filter("orderByLabel")(m,$rootScope.language),p.picklist_sortorder&&!p.deleted&&(m=$filter("orderBy")(m,p.picklist_sortorder)),d(m,p),t[p.picklist_id]=m):r.push(p.picklist_id)}}var g=$cache.get("picklist_activity_type");t.activity_type=g?g:activityTypes;var y=$cache.get("picklist_transaction_type");y?t.transaction_type=y:"accounts"===e.name?t.transaction_type=$filter("filter")(transactionTypes,{type:1},!0):"suppliers"===e.name&&(t.transaction_type=$filter("filter")(transactionTypes,{type:2},!0));var k=$cache.get("picklist_yes_no");return t.yes_no=k?k:yesNo,r.length<=0?(l.resolve(t),l.promise):(r=r.getUnique(),this.findPicklist(r).then(function(a){if(!a.data)return l.resolve(t),l.promise;for(var s=0;s<i.length;s++){var o=i[s];if(o.picklist_id&&!(r.indexOf(o.picklist_id)<0)){var n=helper.mergePicklists(a.data);if(t[o.picklist_id]=$filter("filter")(n,{type:o.picklist_id},!0),t[o.picklist_id]=$filter("orderByLabel")(t[o.picklist_id],$rootScope.language),o.picklist_sortorder&&!o.deleted&&(t[o.picklist_id]=$filter("orderBy")(t[o.picklist_id],o.picklist_sortorder)),e.dependencies&&e.dependencies.length>0){var f=$filter("filter")(e.dependencies,{child_field:o.name},!0)[0];if(f&&1!=f.deleted&&"list_field"===f.dependency_type)for(var u=0;u<t[o.picklist_id].length;u++){var c=t[o.picklist_id][u];c.hidden=!0}}d(t[o.picklist_id],o),$cache.put("picklist_"+o.picklist_id,t[o.picklist_id])}}l.resolve(t)})["catch"](function(e){l.reject(e.data)}),l.promise)},moduleFieldsConvertByKey:function(e){for(var a=[],l=0;l<e.length;l++)a[e[l].name]=e[l];return a},lookup:function(e,a,l,i,t,r){var s=$q.defer(),o=a.lookup_type,n=this,f="lookup"===a.data_type&&a.show_as_dropdown;if("text_single"!==a.lookupModulePrimaryField.data_type&&"picklist"!==a.lookupModulePrimaryField.data_type&&"email"!=a.lookupModulePrimaryField.data_type&&"number"!==a.lookupModulePrimaryField.data_type&&"number_auto"!==a.lookupModulePrimaryField.data_type)return s.resolve([]),s.promise;if("relation"===o&&(o=void 0!==l[a.lookup_relation]?l[a.lookup_relation].value:null),!o)return s.resolve([]),s.promise;var u="users"!==o&&"profiles"!==o&&"roles"!==o?helper.hasPermission(o,operations.read):!0;if(!(u||$rootScope.branchAvailable&&"branches"===o))return s.resolve([]),s.promise;if(!e&&!f)return s.resolve([]),s.promise;var d=$filter("filter")($rootScope.modules,{name:o},!0)[0],c=[];if(c.push(a.lookupModulePrimaryField.name),i)for(var p=0;p<i.length;p++){var m=i[p];m!==a.lookupModulePrimaryField.name&&"id"!==m&&c.push(m)}var _=[];if("number"!==a.lookupModulePrimaryField.data_type&&"number_auto"!==a.lookupModulePrimaryField.data_type)if(t)_.push({field:a.lookupModulePrimaryField.name,operator:"is",value:e,no:1});else switch(a.lookup_search_type){case"contains":_.push({field:a.lookupModulePrimaryField.name,operator:"contains",value:e,no:1});break;case"starts_with":_.push({field:a.lookupModulePrimaryField.name,operator:"starts_with",value:e,no:1});break;default:_.push({field:a.lookupModulePrimaryField.name,operator:"starts_with",value:e,no:1})}else _.push({field:a.lookupModulePrimaryField.name,operator:"equals",value:parseInt(e),no:1});var v={fields:c,filters:_,sort_field:a.lookupModulePrimaryField.name,sort_direction:"asc",limit:1e3,offset:0};f&&(v.filters=[],v.limit=1e3);var h=v.filters.length;("users"===d.name||$rootScope.branchAvailable&&"branches"===o)&&v.filters.push({field:"is_active",operator:"equals",value:!0,no:h+1}),"users"===d.name&&v.filters.push({field:"email",operator:"not_contain",value:"integration_",no:h+1});var b=n.moduleFieldsConvertByKey(d.fields);if(a.filters)for(var g=v.filters.length,y=0;y<a.filters.length;y++){var k=a.filters[y];g++;var $,w=k.value.match(/^\W+(.+)]/i);if(null!==w&&"users"!==a.lookup_type&&"profiles"!==a.lookup_type&&"roles"!==a.lookup_type){var S=w[1].split(".");1===S.length&&l[S[0]]&&($=l[S[0]]),2===S.length&&l[S[0]]&&($=l[S[0]][S[1]]),3===S.length&&l[S[0]]&&($=l[S[0]][S[1]][S[2]]),null!=$&&(v.filters.push({field:k.filter_field,operator:k.operator,value:$,no:g}),v.fields.push(k.filter_field))}else{var D=b[k.filter_field];switch(D.data_type){case"multiselect":case"tag":$=k.value.split("|");break;default:$=k.value}v.filters.push({field:k.filter_field,operator:k.operator,value:$,no:g}),v.fields.push(k.filter_field)}}if(r)for(var z=0;z<r.length;z++){var M=r[z];M.no=v.filters.length+1,v.filters.push(M)}return this.findRecords(o,v).then(function(e){if(!e.data||!e.data.length)return s.resolve([]),s.promise;var l=[];if(i)n.getPicklists(d).then(function(i){for(var t=0;t<e.data.length;t++){var r=e.data[t],o=angular.copy(r);o=n.processRecordSingle(o,d,i),o.primary_value=r[a.lookupModulePrimaryField.name],l.push(o),s.resolve(l)}});else for(var t=0;t<e.data.length;t++){var r=e.data[t];"profiles"===o&&1===r.id&&(r.name="tr"===$rootScope.user.tenant_language?"Sistem Yöneticisi":"Administrator");var f=angular.copy(r);f.primary_value=r[a.lookupModulePrimaryField.name],l.push(f),s.resolve(l)}})["catch"](function(e){s.reject(e.data)}),s.promise},prepareRecord:function(e,a,l){function i(e){var a=document.createElement("div");return a.innerHTML=e,a.innerHTML.toString()}var t=angular.copy(e),r=angular.copy(l);if(l)for(var s=0;s<a.dependencies.length;s++){var o=a.dependencies[s];if("display"===o.dependency_type&&!o.deleted&&!angular.equals(e[o.parent_field],l[o.parent_field]))if(o.values_array&&o.values_array.length>0){for(var n=!0,f=0;f<o.values_array.length;f++){var u=o.values_array[f];if(Array.isArray(e[o.parent_field]))for(var d=0;d<e[o.parent_field].length;d++){var c=e[o.parent_field][d];c.id.toString()===u&&(n=!1)}else e[o.parent_field].id.toString()===u&&(n=!1)}n&&o.child_field&&(t[o.child_field]=null)}else!e[o.parent_field]&&o.child_field&&(t[o.child_field]=null)}for(var s=0;s<a.fields.length;s++){var p=a.fields[s];if("string"==typeof t[p.name]&&""===t[p.name].trim()&&(t[p.name]=void 0),l||t[p.name])if(!l||l[p.name]||t[p.name])if("checkbox"===p.data_type&&null===t[p.name]&&l[p.name]&&(t[p.name]=!1),p.deleted)delete t[p.name];else if(void 0!==t[p.name]&&null!==t[p.name]){switch(r||(r={}),p.data_type){case"number":t[p.name]=parseInt(t[p.name]),r[p.name]=r[p.name]?parseInt(r[p.name]):null;break;case"number_decimal":break;case"checkbox":null===t[p.name]&&void 0===t[p.name]&&(t[p.name]=!1);break;case"currency":t[p.name]=parseFloat(t[p.name]),r[p.name]=r[p.name]?parseFloat(r[p.name]):null;break;case"date":var m=moment(t[p.name]).format().split("+"),_=moment(r[p.name]).format().split("+");t[p.name]=m[0],r[p.name]=r[p.name]?_[0]:null;break;case"picklist":case"lookup":t[p.name]=t[p.name].id,r[p.name]=r[p.name]?r[p.name].id:null;break;case"text_multi":var v=t[p.name];if(p.multiline_type_use_html===!0){var h=i(v);t[p.name]=h}break;case"multiselect":for(var b=[],g=[],f=0;f<t[p.name].length;f++){var y=t[p.name][f];b.push(y.id)}if(r[p.name])for(var d=0;d<r[p.name].length;d++){var k=r[p.name][d];g.push(k.id)}t[p.name]=b&&b.length?b:null,r[p.name]=g&&g.length?g:null;break;case"tag":var $=[];angular.forEach(t[p.name],function(e){$.push(e.text)}),t[p.name]=$.toString()}l&&angular.equals(r[p.name],t[p.name])&&delete t[p.name]}else t[p.name]=null;else delete t[p.name]}if(t.shared_read&&t.shared_read.length){t.shared_users=[],t.shared_user_groups=[];for(var w=0;w<t.shared_read.length;w++){var S=t.shared_read[w];"user"===S.type&&t.shared_users.push(S.id),"group"===S.type&&t.shared_user_groups.push(S.id)}t.shared_users.length||(t.shared_users=null),t.shared_user_groups.length||(t.shared_user_groups=null),delete t.shared_read}else t.shared_users=null,t.shared_user_groups=null,delete t.shared_read;if(t.shared_edit&&t.shared_edit.length){t.shared_users_edit=[],t.shared_user_groups_edit=[];for(var D=0;D<t.shared_edit.length;D++){var z=t.shared_edit[D];"user"===z.type&&t.shared_users_edit.push(z.id),"group"===z.type&&t.shared_user_groups_edit.push(z.id)}t.shared_users_edit.length||(t.shared_users_edit=null),t.shared_user_groups_edit.length||(t.shared_user_groups_edit=null),delete t.shared_edit}else t.shared_users_edit=null,t.shared_user_groups_edit=null,delete t.shared_edit;return t},prepareRecordBulk:function(e,a){for(var l=this,i=[],t=0;t<e.length;t++){var r=e[t],s=l.prepareRecord(r,a);i.push(s)}return i},calculate:function(field,module,record){if(module.calculations){var calculation=$filter("filter")(module.calculations,{field_1:field.name},!0)[0];if(calculation||(calculation=$filter("filter")(module.calculations,{field_2:field.name},!0)[0]),calculation){var calculations=$filter("filter")(module.calculations,{result_field:calculation.result_field},!0);calculations=$filter("orderBy")(calculations,"order");for(var result=0,resultField="",i=0;i<calculations.length;i++){var calculation=calculations[i];result=eval((result||record[calculation.field_1]||0)+calculation.operator+(record[calculation.field_2]||calculation.custom_value||0)),resultField=calculation.result_field}record[resultField]=result||0,this.setCustomCalculations(module,record)}}},setDefaultValues:function(e,a,l){for(var i=0;i<e.fields.length;i++){var t=e.fields[i];if(!t.deleted){var r=t.name;if(void 0!==t.default_value&&null!==t.default_value&&!a[r]){switch(t.data_type){case"text_single":case"text_multi":case"number":case"number_decimal":case"currency":case"url":case"email":case"image":a[r]=t.default_value;break;case"date":case"time":case"date_time":"[now]"===t.default_value&&(a[r]=(new Date).toISOString());break;case"picklist":var s=$filter("filter")(l[t.picklist_id],{id:parseInt(t.default_value)},!0)[0];s||(s={},s.id=a[r],s.type=t.picklist_id,s.label={},s.label.tr=a[r],s.label.en=a[r],s.labelStr=a[r],s.required=!1,s.order=9999,helper.getPicklists([t.picklist_id],!0)),a[t.name]=s;break;case"lookup":var o="[me]"!==t.default_value?parseInt(t.default_value):$rootScope.user.id,n=angular.copy(t);this.getRecord(t.lookup_type,o,!0).then(function(e){var l={};l.id=e.data.id,l.primary_value=e.data[n.lookupModulePrimaryField.name],a[n.name]=l});break;case"multiselect":var f=t.default_value.split(";");a[r]=[];for(var u=0;u<f.length;u++){var d=f[u],c=$filter("filter")(l[t.picklist_id],{id:parseInt(d)},!0)[0];c||(c={},c.id=a[r],c.type=t.picklist_id,c.label={},c.label.tr=a[r],c.label.en=a[r],c.labelStr=a[r],c.required=!1,c.order=9999,c.inactive||helper.getPicklists([t.picklist_id],!0)),t.default_value&&a[r].push(c)}break;case"checkbox":a[t.name]="true"===t.default_value}this.setDisplayDependency(e,a)}}}var p=$filter("filter")(e.fields,{name:"currency",deleted:"!true"})[0];if(("products"===e.name||"quotes"===e.name||"sales_orders"===e.name||"purchase_orders"===e.name)&&!a.currency&&p&&$rootScope.currencySymbol){var m=angular.copy($rootScope.currencySymbol);"₺"===m&&(m="₺");var _=$filter("filter")(l[p.picklist_id],{value:m},!0)[0];a.currency=_,this.setDisplayDependency(e,a)}},setDependency:function(e,a,l,i,t){var r=this;if(!l.id&&l.event_start_date&&"event_start_date"===e.name){var s=new Date(l.event_start_date);0===s.getHours()&&0===s.getSeconds()&&0===s.getMilliseconds()&&(s.setHours(8),l.event_start_date=s),l.event_end_date=new Date(s.getTime()+36e5)}if(l.event_start_date&&l.event_end_date&&"event_end_date"===e.name){var o=new Date(l.event_start_date),n=new Date(l.event_end_date);o>n&&(l.event_start_date=new Date(n.getTime()-36e5))}if(!l.id&&"start_date"===e.calendar_date_type&&l[e.name]){var f=new Date(l[e.name]);0===f.getHours()&&0===f.getSeconds()&&0===f.getMilliseconds()&&(f.setHours(8),l[e.name]=f);var u=$filter("filter")(a.fields,{calendar_date_type:"end_date"},!0)[0];u&&(l[u.name]=new Date(f.getTime()+36e5))}if("end_date"===e.calendar_date_type&&l[e.name]){var d=$filter("filter")(a.fields,{calendar_date_type:"start_date"},!0)[0];if(d&&l[d.name]){var f=new Date(l[d.name]),c=new Date(l[e.name]);f>c&&(l[d.name]=new Date(c.getTime()-36e5))}}if("task_due_date"===e.name&&$rootScope.taskReminderAuto){var p=new Date(l.task_due_date);p.setTime(p.getTime()+288e5),l.task_reminder=p}if(a.dependencies){var m=$filter("filter")(a.dependencies,{parent_field:e.name},!0);if(m&&m.length)for(var _=0;_<m.length;_++){var v=m[_];if(!v.deleted){var h=$filter("filter")(a.fields,{name:v.child_field},!0)[0];if(v.clear)l[v.child_field]=void 0,t.$broadcast("angucomplete-alt:clearInput",v.child_field);else{if(!h)continue;switch(v.dependency_type){case"list_value":case"list_field":l.id||(l[v.child_field]=null);for(var b=i[h.picklist_id],g=0;g<b.length;g++){var y=b[g];delete y.hidden}if("list_value"===v.dependency_type){if(!l[v.parent_field])continue;var k=[];for(var $ in v.value_maps)if(v.value_maps.hasOwnProperty($)){var w=v.value_maps[$];$===l[v.parent_field].id.toString()&&(k=w)}if(!k.length)continue;for(var S=0;S<b.length;S++){var D=b[S];k.indexOf(D.id)<0&&(D.hidden=!0)}}else if("list_field"===v.dependency_type){if(!l[v.parent_field]){for(var z=0;z<b.length;z++){var M=b[z];M.hidden=!0}continue}for(var Y=l[v.parent_field][v.field_map_parent],F=0;F<b.length;F++){var q=b[F];q[v.field_map_child]!==Y&&(q.hidden=!0)}}break;case"list_text":l[v.child_field]=l[v.parent_field]?l[v.parent_field].value||l[v.parent_field].label[$rootScope.language]:null;break;case"lookup_text":l[v.child_field]=l[v.parent_field]?l[v.parent_field][v.field_map_parent]:null;break;case"lookup_list":case"lookup_field":if(!l[v.parent_field])continue;var P=l[v.parent_field][v.field_map_parent],x=i[h.picklist_id],B=null;if("lookup_list"===v.dependency_type){for(var U=0;U<x.length;U++){var T=x[U];T[v.field_map_child]===P&&(B=T)}!B||l.id&&l[v.child_field]||(l[v.child_field]=B)}else if("lookup_field"===v.dependency_type&&P){var O=$filter("filter")($rootScope.modules,{name:h.lookup_type},!0)[0],R=angular.copy(h);R.lookupModulePrimaryField=$filter("filter")(O.fields,{name:v.field_map_child},!0)[0];var C=[h.lookupModulePrimaryField.name];r.lookup(P,R,l,C,!0).then(function(e){if(e[0]){var i=e[0];i.primary_value=i[h.lookupModulePrimaryField.name],l[v.child_field]=i,h.valueChangeDontRun=!0,r.customActions(a,l,t.moduleForm),t.$broadcast("angucomplete-alt:changeInput",v.child_field,i)}})}}}this.calculate(h,a,l)}}}},setDependencyFilter:function(e,a,l,i){var t=angular.copy(l),r=angular.copy(e);if(e.indexOf(".")>-1){var s=e.split(".");t=$filter("filter")($rootScope.modules,{name:s[1]},!0)[0],r=s[2]}if(t.dependencies&&t.dependencies.length){var o=$filter("filter")(t.dependencies,{parent_field:r},!0);if(o&&o.length)for(var n=angular.copy(t.fields),f=0;f<o.length;f++){var u=o[f];if(!u.deleted){var d=$filter("filter")(n,{name:u.child_field},!0)[0];if(d&&a&&"list_field"===u.dependency_type){for(var c=i[d.picklist_id],p=0;p<c.length;p++){var m=c[p];delete m.hidden}for(var _=a[u.field_map_parent],v=0;v<c.length;v++){var h=c[v];h[u.field_map_child]!==_&&(h.hidden=!0)}}}}}},setDisplayDependency:function(e,a){if(e.display_dependencies)for(var l=0;l<e.display_dependencies.length;l++){var i=e.display_dependencies[l];if(!i.deleted){var t=null;if(t=i.dependent_section?$filter("filter")(e.sections,{name:i.dependent_section},!0)[0]:$filter("filter")(e.fields,{name:i.dependent_field},!0)[0])if(void 0!==a[i.field]){var r=null,s=angular.copy(a[i.field]);if(angular.isArray(s)){if(!a[i.field].length){t.hidden=!0,delete a[i.dependent_field];continue}for(var o=0;o<s.length;o++){var n=s[o],f=$filter("filter")(i.values,n.id,!0)[0];!r&&f&&(r=f)}}else i.values?s&&(r="boolean"==typeof s?s:s.id?$filter("filter")(i.values,s.id,!0)[0]:$filter("filter")(i.values,s,!0)[0]):r=s;if(i.otherwise||r)if(i.otherwise&&r)t.hidden=!0,delete a[i.dependent_field];else{if(!i.dependent_section){var u=$filter("filter")(e.fields,{name:i.field},!0)[0];if(u.hidden){t.hidden=!0,delete a[i.dependent_field];continue}}t.hidden=!1}else t.hidden=!0,delete a[i.dependent_field]}else t.hidden=!0,delete a[i.dependent_field]}}},customActions:function(e,a,l,i,t){if("izinler"===e.name){var r=function(e){if(a.calisan&&a.izin_turu&&a.izin_turu_data){var l=moment().date(1).month(0).year(moment().year()).format("YYYY-MM-DD");if(a.izin_turu_data.yillik_izin&&a.calisan_data){var i=moment(a.calisan_data.ise_baslama_tarihi),t=i.get("date"),r=i.get("month"),s=moment().get("year"),o=moment().date(t).month(r).year(s).format("YYYY-MM-DD");moment(o).isAfter(moment().format("YYYY-MM-DD"))&&(s-=1),l=moment().date(t).month(r).year(s).format("YYYY-MM-DD")}a.izin_turu_data.her_ay_yenilenir&&(l=moment().date(1).month(moment().month()).year(moment().year()).format("YYYY-MM-DD"));var n={fields:["hesaplanan_alinacak_toplam_izin","baslangic_tarihi","bitis_tarihi","izin_turu","process.process_requests.process_status"],filters:[{field:"calisan",operator:"equals",value:a.calisan.id,no:1},{field:"baslangic_tarihi",operator:"greater_equal",value:l,no:2},{field:"deleted",operator:"equals",value:!1,no:3},{field:"process.process_requests.process_status",operator:"not_equal",value:3,no:4}],limit:999999};e.findRecords("izinler",n).then(function(e){var l=0;if(a.alinan_izinler=e.data,a.izin_turu_data&&!a.izin_turu_data.yillik_izin){if(e.data.length>0){var i=$filter("filter")(e.data,{izin_turu:a.izin_turu.id},!0);angular.forEach(i,function(e){e.hesaplanan_alinacak_toplam_izin&&(l+=e.hesaplanan_alinacak_toplam_izin)})}else delete a.alinan_izinler,a.mevcut_kullanilabilir_izin=a.izin_turu_data.yillik_hakedilen_limit_gun;if(a.izin_turu_data.saatlik_kullanim_yapilir){
var t=a.izin_turu_data.toplam_calisma_saati,r=a.izin_turu_data.yillik_hakedilen_limit_gun;if(a.izin_turu_data.ogle_tatilini_dikkate_al){var s=parseFloat(moment.duration(moment(a.izin_turu_data.ogle_tatili_bitis).diff(moment(a.izin_turu_data.ogle_tatili_baslangic))).asHours().toFixed(2));t-=s}var o=r*t-l;a.mevcut_kullanilabilir_izin=o}else a.mevcut_kullanilabilir_izin=a.izin_turu_data.yillik_hakedilen_limit_gun-l}else a.izin_turu&&a.izin_turu_data&&a.calisan_data&&a.izin_turu_data.yillik_izin&&a.calisan.e_posta===a.calisan_data.e_posta&&(a.mevcut_kullanilabilir_izin=a.calisan_data.kalan_izin_hakki?a.calisan_data.kalan_izin_hakki:0)})}},s=this;if(a.calisan){var o=$filter("filter")($rootScope.modules,{name:"calisanlar"},!0)[0];o=o?"calisanlar":"human_resources",this.getRecord(o,a.calisan.id).then(function(e){var l=e.data;a.calisan_data=l,a.goreve_baslama_tarihi=l.ise_baslama_tarihi,a.dogum_tarihi=l.dogum_tarihi,r(s)})}a.izin_turu&&(!a.izin_turu_data||a.izin_turu_data&&a.izin_turu_data.id!=a.izin_turu.id)&&(a.mevcut_kullanilabilir_izin=0,this.getRecord("izin_turleri",a.izin_turu.id).then(function(l){var o=l.data;a.izin_turu_data=o,t&&(t.izinTuruData=o,r(s),s.setCustomCalculations(e,a,i,t))}))}if("current_accounts"===e.name){var n=$filter("filter")(t.modules,{name:"sales_invoices"},!0);if(n.length<1)return!1;if("collection"===t.subtype)switch(a.currency.system_code){case"try":$filter("filter")(t.module.fields,{name:"alacak"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"alacak_usd"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"alacak_euro"},!0)[0].display_form=!1,a.alacak_euro&&delete a.alacak_euro,a.alacak_usd&&delete a.alacak_usd;break;case"usd":$filter("filter")(t.module.fields,{name:"alacak"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"alacak_usd"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"alacak_euro"},!0)[0].display_form=!1,a.alacak&&delete a.alacak,a.alacak_euro&&delete a.alacak_euro;break;case"eur":$filter("filter")(t.module.fields,{name:"alacak"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"alacak_usd"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"alacak_euro"},!0)[0].display_form=!0,a.alacak&&delete a.alacak,a.alacak_usd&&delete a.alacak_usd}else if("payment"===t.subtype)switch(a.currency.system_code){case"try":$filter("filter")(t.module.fields,{name:"borc_tl"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"borc_usd"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"borc_euro"},!0)[0].display_form=!1;break;case"usd":$filter("filter")(t.module.fields,{name:"borc_tl"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"borc_usd"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"borc_euro"},!0)[0].display_form=!1;break;case"eur":$filter("filter")(t.module.fields,{name:"borc_tl"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"borc_usd"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"borc_euro"},!0)[0].display_form=!0}if($filter("filter")(t.module.fields,{name:"banka"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"payment_due"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"odendi"},!0)[0].display_form=!1,a.payment_method)switch(a.payment_method.system_code){case"cash":$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].validation.required=!0,$filter("filter")(t.module.fields,{name:"banka"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"payment_due"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"odendi"},!0)[0].display_form=!1,a.banka&&delete a.banka;break;case"bank_transfer":case"credit_card":$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"payment_due"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"odendi"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"banka"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"banka"},!0)[0].validation.required=!0,a.kasa&&delete a.kasa;break;case"cheque":case"bill":$filter("filter")(t.module.fields,{name:"banka"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"payment_due"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"odendi"},!0)[0].display_form=!0,a.odendi&&($filter("filter")(t.module.fields,{name:"banka"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"banka"},!0)[0].validation.required=!1,$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].validation.required=!1)}}},customValidations:function(e,a){function l(e,a){var i=6===moment(e).isoWeekday(),t=7===moment(e).isoWeekday();return i||t||!moment(e).isBusinessDay()?"subtract"===a?l(moment(e).subtract(1,"days"),a):"add"===a?l(moment(e).add(1,"days"),a):void 0:e}if("izinler"===e.name){var i=a.izin_turu_data;if(moment(a.baslangic_tarihi).isSame(a.bitis_tarihi))return $filter("translate")("Leave.Validations.SameDate");if(a.talep_edilen_izin<=0)return $filter("translate")("Leave.Validations.Requested0OfDaysNot");if(a.alinan_izinler&&a.alinan_izinler.length>0)for(var t=0;t<a.alinan_izinler.length;t++)if(!a.id||a.id!==a.alinan_izinler[t].id){var r=moment(moment(Date.parse(moment(a.baslangic_tarihi))).format("YYYY-MM-DDTHH:mm:ss")),s=moment(moment(Date.parse(moment(a.bitis_tarihi))).format("YYYY-MM-DDTHH:mm:ss"));if((r.isBetween(moment(a.alinan_izinler[t].baslangic_tarihi),moment(a.alinan_izinler[t].bitis_tarihi),null,"[)")||s.isBetween(moment(a.alinan_izinler[t].baslangic_tarihi),moment(a.alinan_izinler[t].bitis_tarihi),null,"(]")||r.isSameOrBefore(moment(a.alinan_izinler[t].baslangic_tarihi))&&s.isSameOrAfter(moment(a.alinan_izinler[t].bitis_tarihi)))&&a.alinan_izinler[t].id!==a.id)return $filter("translate")("Leave.Validations.AlreadyHave")}if(i.ilk_izin_kullanimi_hakedis_zamani_ay&&null!==i.ilk_izin_kullanimi_hakedis_zamani_ay&&0!==i.ilk_izin_kullanimi_hakedis_zamani_ay){var o=moment().diff(a.goreve_baslama_tarihi,"months"),n=i.ilk_izin_kullanimi_hakedis_zamani_ay;if(n>o)return $filter("translate")("Leave.Validations.FirstLeaveUse",{month:n})}if(i.yillik_izin){if(null===a.mevcut_kullanilabilir_izin)return $filter("translate")("Leave.Validations.LeaveEnd");if(a.id&&a.process_status){var f=$filter("filter")(a.alinan_izinler,{id:a.id},!0)[0];if(f&&a.hesaplanan_alinacak_toplam_izin>f.hesaplanan_alinacak_toplam_izin&&a.mevcut_kullanilabilir_izin+f.hesaplanan_alinacak_toplam_izin<a.hesaplanan_alinacak_toplam_izin&&!i.izin_borclanma_yapilabilir)return $filter("translate")("Leave.Validations.LeaveEnd")}else if((0===a.mevcut_kullanilabilir_izin||a.mevcut_kullanilabilir_izin<a.hesaplanan_alinacak_toplam_izin)&&!i.izin_borclanma_yapilabilir)return $filter("translate")("Leave.Validations.LeaveEnd");return a.mevcut_kullanilabilir_izin=a.calisan_data.kalan_izin_hakki||0,delete a.goreve_baslama_tarihi,delete a.calisan_data,delete a.izin_turu_data,delete a.dogum_tarihi,delete a.alinan_izinler,""}var u=$filter("filter")(a.alinan_izinler,function(e){return e.izin_turu===a.izin_turu.id&&null!==e["process.process_requests.process_status"]&&(!a.id||a.id&&a.id!==e.id)});if(i.yillik_hakedilen_limit_gun&&0!==i.yillik_hakedilen_limit_gun){var d=0;if(u&&u.length>0&&angular.forEach(u,function(e){e.hesaplanan_alinacak_toplam_izin&&(d+=e.hesaplanan_alinacak_toplam_izin)}),a.izin_turu_data&&a.izin_turu_data.saatlik_kullanim_yapilir){var c=a.izin_turu_data.toplam_calisma_saati;if(a.izin_turu_data.ogle_tatilini_dikkate_al){var p=parseFloat(moment.duration(moment(a.izin_turu_data.ogle_tatili_bitis).diff(moment(a.izin_turu_data.ogle_tatili_baslangic))).asHours().toFixed(2));c-=p}var m=c*i.yillik_hakedilen_limit_gun;if(m<d+a.hesaplanan_alinacak_toplam_izin)return a.izin_turu_data.her_ay_yenilenir?$filter("translate")("Leave.Validations.NotHaveLimitHourMonth",{total_hour:m,remaining_hour:m-d}):$filter("translate")("Leave.Validations.NotHaveLimitHour",{total_hour:m,remaining_hour:m-d})}else if(d+a.hesaplanan_alinacak_toplam_izin>i.yillik_hakedilen_limit_gun)return a.izin_turu_data.her_ay_yenilenir?$filter("translate")("Leave.Validations.NotHaveLimitDayMonth",{total_hour:i.yillik_hakedilen_limit_gun,remaining_hour:i.yillik_hakedilen_limit_gun-d}):$filter("translate")("Leave.Validations.NotHaveLimitDay",{total_hour:i.yillik_hakedilen_limit_gun,remaining_hour:i.yillik_hakedilen_limit_gun-d})}if(null!==i.tek_seferde_alinabilecek_en_fazla_izin_gun&&0!==i.tek_seferde_alinabilecek_en_fazla_izin_gun)if(a.izin_turu_data&&a.izin_turu_data.saatlik_kullanim_yapilir){var c=a.izin_turu_data.toplam_calisma_saati;if(a.izin_turu_data.ogle_tatilini_dikkate_al){var p=parseFloat(moment.duration(moment(a.izin_turu_data.ogle_tatili_bitis).diff(moment(a.izin_turu_data.ogle_tatili_baslangic))).asHours().toFixed(2));c-=p}var m=c*i.tek_seferde_alinabilecek_en_fazla_izin_gun;if(m<a.talep_edilen_izin)return $filter("translate")("Leave.Validations.OneGoHour",{total_hour:i.tek_seferde_alinabilecek_en_fazla_izin_gun*m})}else if(i.tek_seferde_alinabilecek_en_fazla_izin_gun<a.talep_edilen_izin)return $filter("translate")("Leave.Validations.OneGoDay",{total_hour:i.tek_seferde_alinabilecek_en_fazla_izin_gun});if(null===i.resmi_tatiller_ile_birlestirilebilir||i.resmi_tatiller_ile_birlestirilebilir===!1){var _=moment(a.baslangic_tarihi),v=moment(a.bitis_tarihi),h=_.add(-1,"days"),b=$filter("filter")($rootScope.moduleSettings,{key:"work_saturdays"},!0);b=b.length>0&&"t"===b[0].value;var g=7===moment(h).isoWeekday();g||b||(g=6===moment(h).isoWeekday());var y=moment(moment(h).format("YYYY-MM-DD")).isBusinessDay();if(y)for(var t=0;t<$rootScope.holidaysData.length;t++){var k=$rootScope.holidaysData[t];k.half_day&&moment(k.date).isBusinessDay()&&moment(h.format("YYYY-MM-DD")).isSame(moment(k.date).format("YYYY-MM-DD"))&&(y=!1)}if(!g&&!y)return $filter("translate")("Leave.Validations.InfusibleWithHolidays");var $=v;if(i.saatlik_kullanim_yapilir&&($=v.add(1,"days")),g=7===moment($).isoWeekday(),g||b||(g=6===moment($).isoWeekday()),y=moment(moment($).format("YYYY-MM-DD")).isBusinessDay())for(var t=0;t<$rootScope.holidaysData.length;t++){var k=$rootScope.holidaysData[t];k.half_day&&moment(k.date).isBusinessDay()&&moment($.format("YYYY-MM-DD")).isSame(moment(k.date).format("YYYY-MM-DD"))&&(y=!1)}if(!g&&!y)return $filter("translate")("Leave.Validations.InfusibleWithHolidays")}if(i.dogum_gunu_izni)if(i["1_hafta_once_ve_3_hafta_sonra_arasinda_kullanilir"]){var w=moment(a.baslangic_tarihi),S=moment(a.dogum_tarihi).set("year",w.get("year")).subtract(1,"weeks"),D=moment(a.dogum_tarihi).set("year",w.get("year")).add(3,"weeks"),z=moment(w.format("YYYY-MM-DD")).isBetween(S.format("YYYY-MM-DD"),D.format("YYYY-MM-DD"),null,"[]");if(!z)return"Mutlu Yıllar! Doğumgünü iznini doğum gününün 1 hafta öncesinden başlayarak 3 hafta sonrasına kadar olan 4 haftalık süre diliminde kullanabilirsin. İzin tarihini değiştirerek tekrar denemelisin."}else{var M=moment(a.dogum_tarihi),_=moment(a.baslangic_tarihi);if(M=moment(M.year(_.year()).toISOString()),i.dogum_gunu_izni_kullanimi.includes("15")){var Y=_.diff(M,"days");if(0>Y&&(Y=-1*Y),Y>15)return $filter("translate")("Leave.Validations.BirthDayLimitDay")}else if(M.month()!==_.month())return $filter("translate")("Leave.Validations.BirthDayLimitMonth")}if(i["3_gun_arka_arkaya_kullanilamasin"]&&u&&u.length>0&&u.length>0){for(var w=moment(a.baslangic_tarihi).format("YYYY-MM-DD"),F=l(moment(w).subtract(1,"days"),"subtract").format("YYYY-MM-DD"),q=l(moment(F).subtract(1,"days"),"subtract").format("YYYY-MM-DD"),P=l(moment(w).add(1,"days"),"add").format("YYYY-MM-DD"),x=l(moment(P).add(1,"days"),"add").format("YYYY-MM-DD"),B=!1,U=!1,T=!1,O=!1,R=0,C=0,L=0,I=0,t=0;t<u.length;t++)moment(u[t].baslangic_tarihi).format("YYYY-MM-DD")===F?(R=u[t].hesaplanan_alinacak_toplam_izin,B=!0):moment(u[t].baslangic_tarihi).format("YYYY-MM-DD")===q?(C=u[t].hesaplanan_alinacak_toplam_izin,U=!0):moment(u[t].baslangic_tarihi).format("YYYY-MM-DD")===P?(L=u[t].hesaplanan_alinacak_toplam_izin,T=!0):moment(u[t].baslangic_tarihi).format("YYYY-MM-DD")===x&&(I=u[t].hesaplanan_alinacak_toplam_izin,O=!0);if(B&&U&&R+C>=16||T&&O&&L+I>=16||B&&T&&R+L>=16)return"Üst üste 16 saatlik mazeret izni girişi yaptığın için, 16 saati takiben mazeret izni girişi yapamazsın."}return delete a.goreve_baslama_tarihi,delete a.calisan_data,delete a.dogum_tarihi,delete a.izin_turu_data,delete a.alinan_izinler,""}},setCustomCalculations:function(e,a,l,i){if("calisanlar"!==e.name&&"human_resources"!==e.name||a.id||(a.sabit_devreden_izin=a.devreden_izin),"izinler"===e.name){if(a.baslangic_tarihi&&!a.bitis_tarihi&&a.izin_turu_data&&a.izin_turu_data.saatlik_kullanim_yapilir){var t=new Date(a.baslangic_tarihi);t.setHours(8,0,0,0),a.bitis_tarihi=new Date(t).toISOString(),a.baslangic_tarihi=new Date(t).toISOString()}if(a.baslangic_tarihi&&a.bitis_tarihi){var r=new Date(a.baslangic_tarihi),s=new Date(a.bitis_tarihi);r>s&&(s=angular.copy(r),a.bitis_tarihi=new Date(s).toISOString(),a.baslangic_tarihi=new Date(r).toISOString())}if(a.izin_turu_data&&a.baslangic_tarihi&&a.bitis_tarihi){if(a.izin_turu_data.sadece_tam_gun_olarak_kullanilir){var s=new Date(a.bitis_tarihi),r=new Date(a.baslangic_tarihi);r.setHours(8,0,0,0),s.setHours(8,0,0,0),a.bitis_tarihi=new Date(s).toISOString(),a.baslangic_tarihi=new Date(r).toISOString()}if(!a.izin_turu_data.saatlik_kullanim_yapilir&&!a.izin_turu_data.sadece_tam_gun_olarak_kullanilir){var s=new Date(a.bitis_tarihi),r=new Date(a.baslangic_tarihi);s.setHours(0,0,0,0),r.setHours(0,0,0,0),r.toISOString()===s.toISOString()&&(a.from_entry_type=l[i.customLeaveFields.from_entry_type.picklist_id][0]),"entry_type_afternoon"===a.to_entry_type.system_code?s.setHours(12,0,0,0):s.setHours(8,0,0,0),a.bitis_tarihi=new Date(s).toISOString(),"entry_type_afternoon"===a.from_entry_type.system_code?r.setHours(12,0,0,0):r.setHours(8,0,0,0),a.baslangic_tarihi=new Date(r).toISOString()}var o=0,n=moment(a.baslangic_tarihi),f=moment(a.bitis_tarihi);if(a.izin_turu_data.saatlik_kullanim_yapilir){var u=a.izin_turu_data.toplam_calisma_saati;if(a.izin_turu_data.ogle_tatilini_dikkate_al){var d=parseFloat(moment.duration(moment(a.izin_turu_data.ogle_tatili_bitis).diff(moment(a.izin_turu_data.ogle_tatili_baslangic))).asHours().toFixed(2));u-=d}if(!moment(n.format("YYYY-MM-DD")).isSame(f.format("YYYY-MM-DD"))){var s=new Date(a.baslangic_tarihi);s=angular.copy(s),a.bitis_tarihi=new Date(s).toISOString(),f=moment(a.bitis_tarihi)}var c=moment.duration(moment(a.bitis_tarihi).diff(moment(a.baslangic_tarihi)))._data;(c.hours<0||c.minutes<0)&&(s.setHours(moment(a.baslangic_tarihi).hour(),moment(a.baslangic_tarihi).minute(),0,0),a.bitis_tarihi=new Date(s).toISOString(),f=moment(a.bitis_tarihi));var p=moment.duration(f.diff(n)).asHours(),m=a.izin_turu_data.toplam_calisma_saati;if(p>m){var _=p-m;s=moment(s).add(-_,"hours"),a.bitis_tarihi=new Date(s).toISOString(),f=moment(a.bitis_tarihi)}var o=f.diff(n,"minutes")/60;if(a.izin_turu_data.ogle_tatilini_dikkate_al){var v="HH:mm:ss",h=moment(a.izin_turu_data.ogle_tatili_baslangic).format(v),b=moment(a.izin_turu_data.ogle_tatili_bitis).format(v),g=moment(n).format(v),y=moment(f).format(v),k=0;moment(h,v).isSameOrBefore(moment(g,v))?k=moment(b,v).isSameOrBefore(moment(g,v))?0:moment(b,v).isSameOrBefore(moment(y,v))?moment(b,v).diff(moment(g,v),"minutes")/60:o:moment(h,v).isSameOrBefore(moment(y,v))&&(moment(b,v).isSameOrBefore(moment(y,v))?k=moment(b,v).diff(moment(h,v),"minutes")/60:moment(b,v).isSameOrAfter(moment(y,v))&&(k=moment(y,v).diff(moment(h,v),"minutes")/60)),o-=k}}else if(o=a.izin_turu_data.izin_hakkindan_takvim_gunu_olarak_dusulsun?f.diff(n,"days"):n.businessDiff(f),!a.izin_turu_data||a.izin_turu_data.saatlik_kullanim_yapilir||a.izin_turu_data.sadece_tam_gun_olarak_kullanilir){var s=new Date(a.bitis_tarihi),r=new Date(a.baslangic_tarihi);a.izin_turu_data.sadece_tam_gun_olarak_kullanilir||(s.setHours(0,0,0,0),a.bitis_tarihi=new Date(s).toISOString(),r.setHours(0,0,0,0),a.baslangic_tarihi=new Date(r).toISOString()),n=moment(a.baslangic_tarihi),f=moment(a.bitis_tarihi),o=a.izin_turu_data.izin_hakkindan_takvim_gunu_olarak_dusulsun?f.diff(n,"days"):n.businessDiff(f)}else{var $=o;if(n.format("YYYY.MM.DD")!==f.format("YYYY.MM.DD")){if(a.from_entry_type.id!==a.to_entry_type.id){var w=moment(moment(a.baslangic_tarihi).format("YYYY-MM-DD")).isBusinessDay(),S=moment(moment(a.bitis_tarihi).format("YYYY-MM-DD")).isBusinessDay();w&&"entry_type_afternoon"===a.from_entry_type.system_code&&($=o-.5),S&&"entry_type_afternoon"==a.to_entry_type.system_code&&($=o-.5)}}else $=o-.5;$>=0&&(o=$)}var D=$filter("filter")($rootScope.moduleSettings,{key:"work_saturdays"},!0);if(D.length>0?D=D[0]:D.value="f",a.izin_turu_data.cuma_gunu_alinan_izinlere_cumartesiyi_de_ekle&&o>=1&&"t"!==D.value&&!a.izin_turu_data.saatlik_kullanim_yapilir&&!a.izin_turu_data.izin_hakkindan_takvim_gunu_olarak_dusulsun){var z=moment(n).weekdaysInBetween(f,[5]),M=5===moment(n).isoWeekday();if(M&&moment(n).isBusinessDay()&&(f.diff(n,"days")<=3?(a.izin_turu_data.sadece_tam_gun_olarak_kullanilir||!a.izin_turu_data.sadece_tam_gun_olarak_kullanilir&&"entry_type_afternoon"!==a.from_entry_type.system_code&&"entry_type_afternoon"===a.to_entry_type.system_code&&moment(f).isBusinessDay()||!a.izin_turu_data.sadece_tam_gun_olarak_kullanilir&&"entry_type_afternoon"!==a.from_entry_type.system_code&&!a.izin_turu_data.sadece_cuma_ise_tek_gun_say)&&(o+=1):o>=2&&"entry_type_afternoon"!==a.from_entry_type.system_code?o+=1:(a.izin_turu_data.sadece_tam_gun_olarak_kullanilir||!a.izin_turu_data.sadece_tam_gun_olarak_kullanilir&&"entry_type_afternoon"!==a.from_entry_type.system_code)&&(1!==o||a.izin_turu_data.sadece_cuma_ise_tek_gun_say||(o+=1))),5===moment(f).isoWeekday()&&moment(f).isBusinessDay()&&f.diff(n,"days")<2&&(o-=1),z)if(z.length)for(var Y=0;Y<z.length;Y++)moment(z[Y]).isBusinessDay()&&(o+=1);else z.isBusinessDay()&&(o+=1)}if(!a.izin_turu_data.izin_hakkindan_takvim_gunu_olarak_dusulsun)for(var F=0;F<$rootScope.holidaysData.length;F++){var q=$rootScope.holidaysData[F];q.half_day&&moment(q.date).isBusinessDay()&&moment(moment(q.date).format("YYYY-MM-DD")).isBetween(moment(a.baslangic_tarihi).format("YYYY-MM-DD"),moment(a.bitis_tarihi).format("YYYY-MM-DD"),null,"[)")?o-=.5:!q.half_day&&moment(q.date).isBusinessDay()&&moment(moment(q.date).format("YYYY-MM-DD")).isBetween(moment(a.baslangic_tarihi).format("YYYY-MM-DD"),moment(a.bitis_tarihi).format("YYYY-MM-DD"),null,"[)")?o-=1:o>1&&q.half_day&&6===moment(moment(q.date).format("YYYY-MM-DD")).day()&&moment(moment(q.date).format("YYYY-MM-DD")).isBetween(moment(a.baslangic_tarihi).format("YYYY-MM-DD"),moment(a.bitis_tarihi).format("YYYY-MM-DD"),null,"[)")?o-=1:o>1&&!q.half_day&&6===moment(moment(q.date).format("YYYY-MM-DD")).day()&&moment(moment(q.date).format("YYYY-MM-DD")).isBetween(moment(a.baslangic_tarihi).format("YYYY-MM-DD"),moment(a.bitis_tarihi).format("YYYY-MM-DD"),null,"[)")&&(o-=1)}a.izin_turu_data.saatlik_kullanim_yapilir&&a.izin_turu_data.saatlik_kullanimi_yukari_yuvarla&&(o=Math.ceil(o));var P=o;a.izin_turu_data.yillik_izin||a.izin_turu_data.izin_hakkindan_dusulsun||(o=0),a.hesaplanan_alinacak_toplam_izin=o,a.talep_edilen_izin=P}}},updateView:function(e,a){return $http.put(config.apiUrl+"view/update/"+a,e)},getViews:function(e,a,l){var i=this,t=$q.defer(),r=$filter("filter")($rootScope.modules,{id:e},!0)[0];if(a){var s=[],o={};o.active=!0;for(var n=[],f=1,u=0;u<a.length;u++){var d,c=a[u];if(c.indexOf(".")>-1){var p=c.split("."),m=$filter("filter")($rootScope.modules,{name:p[1]},!0)[0];d=$filter("filter")(m.fields,{name:p[2]},!0)[0]}else d=$filter("filter")(r.fields,{name:c},!0)[0];if(d&&i.hasFieldDisplayPermission(d)){var _={};_.field=c,_.order=f,n.push(_),f++}}return o.fields=n,s.push(o),t.resolve(s),t.promise}return l&&l.views?(t.resolve(l.views),t.promise):($http.get(config.apiUrl+"view/get_all/"+e).then(function(e){if(!e.data)return t.resolve([]),t.promise;for(var a=[],l=0;l<e.data.length;l++){for(var s=e.data[l],o=[],n=0;n<s.fields.length;n++){var f,u=s.fields[n];if(u.field.indexOf(".")>-1){var d=u.field.split("."),c=$filter("filter")($rootScope.modules,{name:d[1]},!0)[0];if(!c)continue;f=$filter("filter")(c.fields,{name:d[2]},!0)[0]}else f=$filter("filter")(r.fields,{name:u.field},!0)[0];f&&i.hasFieldDisplayPermission(f)&&o.push(u)}s.fields=o,s.label=s["label_"+$rootScope.language],a.push(s)}a=$filter("orderBy")(a,"label_"+$rootScope.language),t.resolve(a)})["catch"](function(e){t.reject(e.data)}),t.promise)},getViewState:function(e,a){var l=$q.defer();return a&&a.viewState?(l.resolve(a.viewState),l.promise):($http.get(config.apiUrl+"view/get_view_state/"+e).then(function(e){l.resolve(e.data)})["catch"](function(e){l.reject(e.data)}),l.promise)},getViewFields:function(e,a){for(var l=[],i=angular.copy(e.fields),t=0;t<a.length;t++){var r=a[t],s=i,o=r.field,n=null;if(r.field.indexOf(".")>-1){var f=r.field.split(".");if(null!=f[3]&&"primary"===f[3])continue;s=angular.copy($filter("filter")($rootScope.modules,{name:f[1]},!0)[0].fields),o=f[2],n=f[0]}var u=$filter("filter")(s,{name:o},!0)[0];if(u&&this.hasFieldDisplayPermission(u)){null!=n&&(u.parentField=$filter("filter")(i,{name:n},!0)[0]);var d=angular.copy(u);d.fieldName=r.field,d.order=r.order,l.push(d)}}return l},setFilters:function(e,a,l,i,t,r,s){"lookup"===a.data_type&&"users"===a.lookup_type&&"[me]"===i&&(i=$rootScope.user.id),"email"===a.data_type&&"[me.email]"===i&&(i=$rootScope.user.email),"date"===a.data_type&&i&&(moment(i).format("YYYY-MM-DD"),moment(i).isValid()&&(i=moment(i).format("YYYY-MM-DD"))),e||(e=[]),("empty"===t||"not_empty"===t)&&(i="-");var o=$filter("filter")(e,{field:l,operator:t,no:parseInt(r)},!0)[0];if(o)o.operator=t,o.value=i,"document"===a.data_type&&(o.document_search=a.document_search);else{r=r?parseInt(r):e.length+1;var n={};n.field=l,n.operator=t,n.value=i,n.no=r,n.isView=s,"document"===a.data_type&&(n.document_search=a.document_search),e.push(n)}return e},setTable:function(e,a,l,i,t,r,s,o,n,f,u,d,c,p,m,_,v,h){var b=this,g=r+"_"+s;e.isManyToMany=d&&"many_to_many"===d.relation_type,e.isManyToMany&&(g=r+"_"+d.relation_field+"_"+e.module.name),$rootScope.activePages||($rootScope.activePages={}),$rootScope.activeFilters||($rootScope.activeFilters={}),e.tableParams=new ngTableParams({page:1,count:i,load:!1},{counts:l,getData:function(l,i){function o(){var a=angular.copy(e.view.filters);if(a=$filter("orderBy")(a,"no"),a&&a.length>0)for(var l=0;l<a.length;l++){var i=a[l],r=[],s=i.field,o=i.field,n=null;if(s.indexOf(".")<0)r=e.module.fields;else{var f=s.split(".");"process_requests"!==f[1]&&"process_approvers"!==f[1]&&(r=$filter("filter")($rootScope.modules,{name:f[1]},!0)[0].fields),("process_requests"===f[1]||"process_approvers"===f[1])&&(n={},n.data_type="number",n.name="process_status"),"process_approvers"===f[1]&&(n={},n.data_type="lookup",n.lookup_type="users",n.name="user_id"),o=f[2]}n||(n=$filter("filter")(r,{name:o},!0)[0]),n&&("lookup"===n.data_type&&"users"===n.lookup_type&&"0"===i.value&&(i.value=$rootScope.user.id),"multiselect"===n.data_type&&(i.value=i.value.split("|")),"tag"===n.data_type&&(i.value=i.value.split("|")),t=b.setFilters(t,n,s,i.value,i.operator,i.no,!0))}}function k(){e.loading||a.start(),b.getPicklists(e.module,!0).then(function(k){e.tableParams.picklists=k;for(var w in i.filters)if(i.filters.hasOwnProperty(w)){var S=i.filters[w];b.setDependencyFilter(w,S.value,e.module,i.picklists)}b.getViews(e.module.id,u,$).then(function(u){b.getViewState(e.module.id,$).then(function(k){var w=$||{},S=i.count(),D=i.sorting(),z=i.sortClicked,M=null,Y=null,F=e.viewid;D&&Object.keys(D).length>0&&(M=Object.keys(D)[0],Y=D[M]);var q=function(a,l,i){var t;t=i?$filter("filter")(u,{id:parseInt(i)},!0)[0]:$filter("filter")(u,{active:!0})[0],k={},k.active_view=t.id,k.sort_field=a,k.sort_direction=l,k.row_per_page=10,e.viewid&&null!==e.viewid||b.setViewState(k,e.module.id).then(function(e){k.id=e.data.id})};z?k?("kasa_hareketleri"===e.module.name||"banka_hareketleri"===e.module.name?(M="islem_tarihi,id",Y="desc"):"current_accounts"===e.module.name?(M="date,id",Y="desc"):"stock_transactions"===e.module.name?(M="transaction_date,id",Y="desc"):(k.sort_field=M,k.sort_direction=Y),b.setViewState(k,e.module.id,k.id)):q(M,Y,F):k&&k.sort_field&&!F?(M=k.sort_field,Y=k.sort_direction):("kasa_hareketleri"===e.module.name||"banka_hareketleri"===e.module.name?(M="islem_tarihi,id",Y="desc"):"current_accounts"===e.module.name?(M="date,id",Y="desc"):"stock_transactions"===e.module.name?(M="transaction_date,id",Y="desc"):(M="created_at",Y="desc"),q(M,Y,F));var P={};P[M]=Y,i.sorting(P),w.sorting=P,y(u,k,r);var x=e.view&&e.view.filter_logic;if(i.filters&&Object.keys(i.filters).length>0){o();var B=angular.copy(i.filters);if(B)for(var U in B)if(B.hasOwnProperty(U)){var T=B[U],O=[],R=U,C=!1;if(U.indexOf(".")<0)O=e.module.fields;else{var L=U.split(".");O=$filter("filter")($rootScope.modules,{name:L[1]},!0)[0].fields,R=L[2]}var I=$filter("filter")(O,{name:R},!0)[0];if(!I)continue;if(T.operator||(T.operator=$filter("orderBy")(I.operators,"order")[0]),"empty"!==T.operator.name&&"not_empty"!==T.operator.name&&(void 0===T.value||null===T.value||""===T.value||angular.isArray(T.value)&&!T.value.length||("number"===I.data_type||"number_decimal"===I.data_type||"number_auto"===I.data_type||"currency"===I.data_type)&&isNaN(T.value))){delete B[U],delete i.filters[U];var H=t&&$filter("filter")(t,{field:U},!0)[0];!H||angular.isUndefined(H.isView)||H.isView||t.splice(t.indexOf(H),1);continue}var H=t&&$filter("filter")(t,{field:U},!0)[0];H&&!angular.isUndefined(H.isView)&&H.isView&&(angular.isArray(T.value)&&T.value.length||("number"===I.data_type||"number_decimal"===I.data_type||"number_auto"===I.data_type||"currency"===I.data_type)&&!isNaN(T.value)||void 0!==T.value||null!==T.value||""!==T.value)&&t.splice(t.indexOf(H),1);var V,A;if("lookup"===I.data_type&&"users"!==I.lookup_type&&"profiles"!==I.lookup_type&&"roles"!==I.lookup_type&&(V=$filter("filter")($rootScope.modules,{name:I.lookup_type},!0)[0],A=$filter("filter")(V.fields,{primary:!0},!0)[0]),"empty"!==T.operator.name&&"not_empty"!==T.operator.name){if("lookup"!==I.data_type||"users"!==I.lookup_type&&"profiles"!==I.lookup_type&&"roles"!==I.lookup_type||(T.value=T.value[0].id),"lookup"===I.data_type&&"users"!==I.lookup_type&&"profiles"!==I.lookup_type&&"roles"!==I.lookup_type&&(U=I.name+"."+I.lookup_type+"."+A.name,I=A),"picklist"===I.data_type&&(T.value=T.value.label[$rootScope.user.tenant_language]),"multiselect"===I.data_type){for(var E=[],j=0;j<T.value.length;j++){var N=T.value[j];E.push(N.label[$rootScope.user.tenant_language])}T.value=E}if("tag"===I.data_type){for(var E=[],j=0;j<T.value.length;j++){var N=T.value[j];E.push(N.text)}T.value=E}"checkbox"===I.data_type&&(T.value=T.value.system_code)}else if("lookup"===I.data_type&&"users"!==I.lookup_type&&"profiles"!==I.lookup_type&&"roles"!==I.lookup_type){U=I.name+"."+I.lookup_type+"."+A.name;var W=t&&$filter("filter")(t,{field:U},!0)[0];W&&t.splice(t.indexOf(W),1)}if(t)for(var G=0;G<t.length;G++){var Q=t[G];Q.field===U&&Q.operator===T.operator.name&&Q.value===T.value&&(C=!0)}if(C)continue;t=b.setFilters(t,I,U,T.value,T.operator.name),x&&(x="("+x+" and "+t.length+")")}$rootScope.activeFilters[g]=i.filters}var K=[],J=e.view.fields,X=[],Z="";if(e.isManyToMany){var ee=d.related_module===c?d.related_module+"2":d.related_module,ae=$filter("filter")(e.module.fields,{primary:!0},!0)[0];Z=ee+"_id."+d.related_module+"."+ae.name}for(var le=0;le<J.length;le++){var ie=J[le];if(e.isManyToMany){var te=$filter("filter")(e.module.fields,{name:ie.field},!0)[0];if(ie.field.indexOf(".")<0&&"lookup"!==te.data_type){var re=d.related_module===c?d.related_module+"2":d.related_module,se=re+"_id."+d.related_module+"."+ie.field;K.push(se);var oe=angular.copy(ie);oe.field=se,X.push(oe)}}else K.push(ie.field)}if(e.isManyToMany){var ne=d.related_module===c?d.related_module+"2":d.related_module;M=ne+"_id."+d.related_module+"."+M,J=X,e.view.fields=X}if($filter("filter")(e.module.fields,{name:"currency",deleted:"!true"},!0)[0]&&K.indexOf("currency")<0&&!e.isManyToMany&&K.push("currency"),i.filters&&Object.keys(i.filters).length||(o(),e.view.filter_logic&&(x=e.view.filter_logic)),d){var fe="ids-"+e.parentModule+i.page()+"_"+e.parentModule+"_"+e.module.name;if(e.relatedModuleInModal&&$cache.get(fe)&&$cache.get(fe).length>0){var ue=$filter("filter")(t,{operator:"!not_in"},!0)[0];if(t.length>0&&!ue){var de={field:"id",no:t.length+1,operator:"not_in",value:$cache.get(fe)};if(t.length>0)for(var ce=0;ce<t.length;ce++){var pe=t[ce];pe.operator!==de.operator&&pe.value!==de.value&&t.push(de)}else t.push(de)}}}var me={fields:K,filters:t,sort_field:M,sort_direction:Y,limit:S,offset:(i.page()-1)*S};x&&(me.filter_logic=x),e.isManyToMany&&(me.many_to_many=c),w.views=u,w.viewState=k,w.count=S,i.refreshing||(e.fields=b.getViewFields(e.module,J)),e.findRequest=me,e.viewFields=J,w.findRequest=me,e.parentModule||e.viewid||$cache.put(g,w),components.run("EmptyList","Script",e);var _e=function(t,r){e.listFindRequest=t,components.run("BeforeListRequest","Script",e),b.findRecords(e.module.name,e.listFindRequest).then(function(a){var t=!1;if(i.filters)for(var o in i.filters)if(i.filters.hasOwnProperty(o)){var u=i.filters[o];if(u.hasOwnProperty("value")){t=!0;break}}e.isEmpty=a.data.length<1&&!t;var c=b.processRecordMulti(a.data,e.module,e.tableParams.picklists,J,s,n,f,p,m,_,v,h);if(d&&(d.loading=!1),e.parentModule||e.viewid||(r["rows-"+o+i.page()]=c,$cache.put(o,r)),d&&!e.relatedModuleInModal){var g=[];e.listFindRequest={fields:"one_to_many"===d.relation_type?["id"]:[e.module.name+"_id"],filters:[{field:"one_to_many"===d.relation_type?d.relation_field:e.parentModule+"_id",no:1,operator:"equals",value:e.parentId}],limit:9999999,offset:0};var y=d.relation_type?d.relation_type:"many_to_many";e.listFindRequest[y]=e.parentModule,b.findRecords(e.module.name,e.listFindRequest).then(function(e){if(e.data.length>0){for(var a=0;a<e.data.length;a++){var l=e.data[a];g.push(Object.values(l)[0])}$cache.put(fe,g)}})}i.reloading=!1,i.sortClicked=!1,l.resolve(c)})["finally"](function(){e.loading=!1,e.parentId&&components.run("SubListLoaded","Script",e),a.stop(),i.pagination&&($window.scrollTo(0,0),i.pagination=!1)})};if(1===i.page()){var ve=angular.copy(me);if(ve.fields=["total_count()"],ve.limit=1,ve.offset=0,delete ve.sort_field,delete ve.sort_direction,me.filters)for(var he=0;he<me.filters.length;he++){var be=me.filters[he];be.field.indexOf(".")>-1&&be.field.indexOf("process_approvers")<0&&ve.fields.push(be.field)}e.isManyToMany&&ve.fields.indexOf(Z)<0&&ve.fields.push(Z),b.findRecords(e.module.name,ve).then(function(t){t=t.data;var r=0,o=!1;if(i.filters)for(var f in i.filters)if(i.filters.hasOwnProperty(f)){var u=i.filters[f];if(u.hasOwnProperty("value")){o=!0;break}}null!==t&&t.length&&null!==t[0]&&null!==t[0].total_count?(_e(me,w),r=t[0].total_count):(l.resolve([]),e.isEmpty=t.length<1&&!o,e.parentId&&components.run("SubListLoaded","Script",e),e.loading=!1,a.stop()),i.total(r),w.total=r,n&&(e.$parent.$parent["currentTotalCount"+s]=r),d&&(d.total=r),i.pagination&&($window.scrollTo(0,0),i.pagination=!1)})["catch"](function(){e.loading=!1,a.stop()})}else d&&i.total(d.total),_e(me,w)})})})}i.pagination&&$window.scrollTo(0,0),$rootScope.activePages[g]=i.page();var $=$cache.get(g);if(e.selectedRows=[],e.isAllSelected=!1,i.reloading||!$||e.parentModule)if(i.reloading){if(i.page(1),$rootScope.activePages[g]=1,$rootScope.activeFilters[g]=null,i.refreshing&&($=null,t=angular.copy(i.filterList),i.filters=null,i.refreshing=!1),i.renew&&(t=angular.copy(i.filterList)),$){var w={};w.views=angular.copy($.views),
w.viewState=angular.copy($.viewState),$=w}k()}else k();else b.getPicklists(e.module).then(function(t){if(e.tableParams.picklists=t,$.views&&$.views.length&&!e.viewid){y($.views,$.viewState,r),e.fields=b.getViewFields(e.module,e.view.fields),i.sorting($.sorting),i.$params.count=$.count,i.total($.total);var s=$["rows-"+o+i.page()];s&&s.length?(i.total($.total||d.total),e.findRequest=$.findRequest,d&&(d.total=d.total||$.total,d.loading=!1),l.resolve(s),e.loading=!1,a.stop()):k()}else k();for(var o in i.filters)if(i.filters.hasOwnProperty(o)){var n=i.filters[o];b.setDependencyFilter(o,n.value,e.module,i.picklists)}})}}),e.tableParams.filterList=t&&t.length?t:void 0,e.tableParams.isSelectable=o,e.$parent.loadingModal&&(e.tableParams.showFilter=!0),$rootScope.activePages[g]&&e.tableParams.page($rootScope.activePages[g]),$rootScope.activeFilters[g]&&(e.tableParams.filters=$rootScope.activeFilters[g],e.tableParams.showFilter=!0),e.tableParams.load=!0;var y=function(a,l,i){if(e.views=a,e.selectedView){e.view=e.selectedView;for(var t=0;t<a.length;t++){var r=a[t];r.active=r.id===e.selectedView.id}}else l&&i===e.module.name?l&&(e.view=$filter("filter")(a,{id:l.active_view},!0)[0]):e.view=$filter("filter")(a,{active:!0})[0];l&&!e.view&&(e.view=$filter("filter")(a,{active:!0})[0],l.active_view=e.view.id,l.sort_field="created_at",l.sort_direction="desc",l.row_per_page=10,b.setViewState(l,e.module.id,l.id))};e.setDependency=function(a){b.setDependencyFilter(a.fieldName,e.tableParams.filters[a.fieldName].value,e.module,e.tableParams.picklists)};var k=function(a){if(e.tableParams.filters[a.fieldName].operator){var l=new Date(e.tableParams.filters[a.fieldName].value);switch(e.tableParams.filters[a.fieldName].operator.name){case"greater":l.setHours(23),l.setMinutes(59),l.setSeconds(59),l.setMilliseconds(99);break;case"less":l.setHours(0),l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0)}e.tableParams.filters[a.fieldName].value=l}};e.dateTimeChanged=function(e){k(e)},e.operatorChanged=function(a){"empty"===e.tableParams.filters[a.fieldName].operator.name||"not_empty"===e.tableParams.filters[a.fieldName].operator.name?(e.tableParams.filters[a.fieldName].value=null,e.tableParams.filters[a.fieldName].disabled=!0):e.tableParams.filters[a.fieldName].disabled=!1}},getCSVData:function(e,a){var l=this,i=$q.defer(),t=angular.copy(e.findRequest);return t.limit=3e3,t.offset=0,l.findRecords(e.module.name,t).then(function(t){for(var r=l.processRecordMulti(t.data,e.module,e.tableParams.picklists,e.viewFields,a),s=[],o=[],n=$filter("orderBy")(e.fields,"order"),f=0;f<n.length;f++){var u=n[f];o.push(u["label_"+$rootScope.language]+(u.parentField?" ("+u.parentField["label_"+$rootScope.language]+")":""))}s.push(o);for(var d=0;d<r.length;d++){for(var c=r[d],p=[],m=$filter("orderBy")(c.fields,"order"),_=0;_<m.length;_++){var v=m[_];p.push("currency"===v.data_type||"number_decimal"===v.data_type?v.value||"":v.valueFormatted||"")}s.push(p)}i.resolve(s)}),i.promise},getYesNo:function(e){var a={};return a.yes=$filter("filter")(e,{system_code:"true"})[0].label[$rootScope.language],a.no=$filter("filter")(e,{system_code:"false"})[0].label[$rootScope.language],a},getIcons:function(){return icons.icons},getActionButtons:function(e,a){var l=$q.defer(),i="action_button_"+e,t=$cache.get(i);return t&&!a?(l.resolve(t),l.promise):($http.get(config.apiUrl+"action_button/get/"+e).then(function(e){$cache.put(i,e.data),l.resolve(e.data)})["catch"](function(e){l.reject(e.data)}),l.promise)},hasFieldDisplayPermission:function(e){if(!e.permissions)return!0;var a=$filter("filter")(e.permissions,{profile_id:$rootScope.user.profile.id},!0)[0],l=function(e){if(!e.sectionObj||!e.sectionObj.permissions)return!0;var a=$filter("filter")(e.sectionObj.permissions,{profile_id:$rootScope.user.profile.id},!0)[0];return a?"none"!==a.type:!0};return a&&"none"===a.type?!1:l(e)},hasFieldFullPermission:function(e){if(!e.permissions)return!0;var a=$filter("filter")(e.permissions,{profile_id:$rootScope.user.profile.id},!0)[0],l=function(e){if(!e.sectionObj||!e.sectionObj.permissions)return!0;var a=$filter("filter")(e.sectionObj.permissions,{profile_id:$rootScope.user.profile.id},!0)[0];return a?"full"===a.type:!0};return a&&"full"!==a.type?!1:l(e)},hasSectionDisplayPermission:function(e){if(!e.permissions)return!0;var a=$filter("filter")(e.permissions,{profile_id:$rootScope.user.profile.id},!0)[0];return a?"none"!==a.type:!0},hasSectionFullPermission:function(e){if(!e.permissions)return!0;var a=$filter("filter")(e.permissions,{profile_id:$rootScope.user.profile.id},!0)[0];return a?"full"===a.type:!0},hasActionButtonDisplayPermission:function(e){if(!e.permissions)return!0;var a=$filter("filter")(e.permissions,{profile_id:$rootScope.user.profile.id},!0)[0];return a?"none"!==a.type:!0},getDailyRates:function(){return $http.get(config.apiUrl+"exchange_rates/get_daily_rates")},getAllTenantSettingsByType:function(e,a){return $http.get(config.apiUrl+"settings/get_all/"+e+(a?"?user_id="+a:""))},tenantSettingUpdate:function(e){return $http.put(config.apiUrl+"settings/update/"+e.id,e)}}}]),angular.module("primeapps").constant("icons",{icons:[{value:"fa fa-adjust",label:'<i class="fa fa-adjust"> Adjust'},{value:"fa fa-anchor",label:'<i class="fa fa-anchor"> Anchor'},{value:"fa fa-archive",label:'<i class="fa fa-archive"> Archive'},{value:"fa fa-area-chart",label:'<i class="fa fa-area-chart"> Area-chart',chart:!0},{value:"fa fa-arrows",label:'<i class="fa fa-arrows"> Arrows'},{value:"fa fa-arrows-h",label:'<i class="fa fa-arrows-h"> Arrows-h'},{value:"fa fa-arrows-v",label:'<i class="fa fa-arrows-v"> Arrows-v'},{value:"fa fa-asterisk",label:'<i class="fa fa-asterisk"> Asterisk'},{value:"fa fa-at",label:'<i class="fa fa-at"> At'},{value:"fa fa-automobile",label:'<i class="fa fa-automobile"> Automobile'},{value:"fa fa-ban",label:'<i class="fa fa-ban"> Ban'},{value:"fa fa-bank",label:'<i class="fa fa-bank"> Bank'},{value:"fa fa-bar-chart",label:'<i class="fa fa-bar-chart"> Bar-chart',chart:!0},{value:"fa fa-bar-chart-o",label:'<i class="fa fa-bar-chart-o"> Bar-chart-o'},{value:"fa fa-barcode",label:'<i class="fa fa-barcode"> Barcode'},{value:"fa fa-bars",label:'<i class="fa fa-bars"> Bars'},{value:"fa fa-bed",label:'<i class="fa fa-bed"> Bed'},{value:"fa fa-beer",label:'<i class="fa fa-beer"> Beer'},{value:"fa fa-bell",label:'<i class="fa fa-bell"> Bell'},{value:"fa fa-bell-o",label:'<i class="fa fa-bell-o"> Bell-o'},{value:"fa fa-bell-slash",label:'<i class="fa fa-bell-slash"> Bell-slash'},{value:"fa fa-bell-slash-o",label:'<i class="fa fa-bell-slash-o"> Bell-slash-o'},{value:"fa fa-bicycle",label:'<i class="fa fa-bicycle"> Bicycle'},{value:"fa fa-binoculars",label:'<i class="fa fa-binoculars"> Binoculars'},{value:"fa fa-birthday-cake",label:'<i class="fa fa-birthday-cake"> Birthday-cake'},{value:"fa fa-bolt",label:'<i class="fa fa-bolt"> Bolt'},{value:"fa fa-bomb",label:'<i class="fa fa-bomb"> Bomb'},{value:"fa fa-book",label:'<i class="fa fa-book"> Book'},{value:"fa fa-bookmark",label:'<i class="fa fa-bookmark"> Bookmark'},{value:"fa fa-bookmark-o",label:'<i class="fa fa-bookmark-o"> Bookmark-o'},{value:"fa fa-briefcase",label:'<i class="fa fa-briefcase"> Briefcase'},{value:"fa fa-bug",label:'<i class="fa fa-bug"> Bug'},{value:"fa fa-building",label:'<i class="fa fa-building"> Building'},{value:"fa fa-building-o",label:'<i class="fa fa-building-o"> Building-o'},{value:"fa fa-bullhorn",label:'<i class="fa fa-bullhorn"> Bullhorn'},{value:"fa fa-bullseye",label:'<i class="fa fa-bullseye"> Bullseye'},{value:"fa fa-bus",label:'<i class="fa fa-bus"> Bus'},{value:"fa fa-cab",label:'<i class="fa fa-cab"> Cab'},{value:"fa fa-calculator",label:'<i class="fa fa-calculator"> Calculator'},{value:"fa fa-calendar",label:'<i class="fa fa-calendar"> Calendar'},{value:"fa fa-calendar-o",label:'<i class="fa fa-calendar-o"> Calendar-o'},{value:"fa fa-camera",label:'<i class="fa fa-camera"> Camera'},{value:"fa fa-camera-retro",label:'<i class="fa fa-camera-retro"> Camera-retro'},{value:"fa fa-car",label:'<i class="fa fa-car"> Car'},{value:"fa fa-caret-square-o-down",label:'<i class="fa fa-caret-square-o-down"> Caret-square-o-down'},{value:"fa fa-caret-square-o-left",label:'<i class="fa fa-caret-square-o-left"> Caret-square-o-left'},{value:"fa fa-caret-square-o-right",label:'<i class="fa fa-caret-square-o-right"> Caret-square-o-right'},{value:"fa fa-caret-square-o-up",label:'<i class="fa fa-caret-square-o-up"> Caret-square-o-up'},{value:"fa fa-cart-arrow-down",label:'<i class="fa fa-cart-arrow-down"> Cart-arrow-down'},{value:"fa fa-cart-plus",label:'<i class="fa fa-cart-plus"> Cart-plus'},{value:"fa fa-cc",label:'<i class="fa fa-cc"> Cc'},{value:"fa fa-certificate",label:'<i class="fa fa-certificate"> Certificate'},{value:"fa fa-check",label:'<i class="fa fa-check"> Check'},{value:"fa fa-check-circle",label:'<i class="fa fa-check-circle"> Check-circle'},{value:"fa fa-check-circle-o",label:'<i class="fa fa-check-circle-o"> Check-circle-o'},{value:"fa fa-check-square",label:'<i class="fa fa-check-square"> Check-square'},{value:"fa fa-check-square-o",label:'<i class="fa fa-check-square-o"> Check-square-o'},{value:"fa fa-child",label:'<i class="fa fa-child"> Child'},{value:"fa fa-circle",label:'<i class="fa fa-circle"> Circle'},{value:"fa fa-circle-o",label:'<i class="fa fa-circle-o"> Circle-o'},{value:"fa fa-circle-o-notch",label:'<i class="fa fa-circle-o-notch"> Circle-o-notch'},{value:"fa fa-circle-thin",label:'<i class="fa fa-circle-thin"> Circle-thin'},{value:"fa fa-clock-o",label:'<i class="fa fa-clock-o"> Clock-o'},{value:"fa fa-close",label:'<i class="fa fa-close"> Close'},{value:"fa fa-cloud",label:'<i class="fa fa-cloud"> Cloud'},{value:"fa fa-cloud-download",label:'<i class="fa fa-cloud-download"> Cloud-download'},{value:"fa fa-cloud-upload",label:'<i class="fa fa-cloud-upload"> Cloud-upload'},{value:"fa fa-code",label:'<i class="fa fa-code"> Code'},{value:"fa fa-code-fork",label:'<i class="fa fa-code-fork"> Code-fork'},{value:"fa fa-coffee",label:'<i class="fa fa-coffee"> Coffee'},{value:"fa fa-cog",label:'<i class="fa fa-cog"> Cog'},{value:"fa fa-cogs",label:'<i class="fa fa-cogs"> Cogs'},{value:"fa fa-comment",label:'<i class="fa fa-comment"> Comment'},{value:"fa fa-comment-o",label:'<i class="fa fa-comment-o"> Comment-o'},{value:"fa fa-comments",label:'<i class="fa fa-comments"> Comments'},{value:"fa fa-comments-o",label:'<i class="fa fa-comments-o"> Comments-o'},{value:"fa fa-compass",label:'<i class="fa fa-compass"> Compass'},{value:"fa fa-copyright",label:'<i class="fa fa-copyright"> Copyright'},{value:"fa fa-credit-card",label:'<i class="fa fa-credit-card"> Credit-card'},{value:"fa fa-crop",label:'<i class="fa fa-crop"> Crop'},{value:"fa fa-crosshairs",label:'<i class="fa fa-crosshairs"> Crosshairs'},{value:"fa fa-cube",label:'<i class="fa fa-cube"> Cube'},{value:"fa fa-cubes",label:'<i class="fa fa-cubes"> Cubes'},{value:"fa fa-cutlery",label:'<i class="fa fa-cutlery"> Cutlery'},{value:"fa fa-dashboard",label:'<i class="fa fa-dashboard"> Dashboard'},{value:"fa fa-database",label:'<i class="fa fa-database"> Database'},{value:"fa fa-desktop",label:'<i class="fa fa-desktop"> Desktop'},{value:"fa fa-diamond",label:'<i class="fa fa-diamond"> Diamond'},{value:"fa fa-dot-circle-o",label:'<i class="fa fa-dot-circle-o"> Dot-circle-o'},{value:"fa fa-download",label:'<i class="fa fa-download"> Download'},{value:"fa fa-edit",label:'<i class="fa fa-edit"> Edit'},{value:"fa fa-ellipsis-h",label:'<i class="fa fa-ellipsis-h"> Ellipsis-h'},{value:"fa fa-ellipsis-v",label:'<i class="fa fa-ellipsis-v"> Ellipsis-v'},{value:"fa fa-envelope",label:'<i class="fa fa-envelope"> Envelope'},{value:"fa fa-envelope-o",label:'<i class="fa fa-envelope-o"> Envelope-o'},{value:"fa fa-envelope-square",label:'<i class="fa fa-envelope-square"> Envelope-square'},{value:"fa fa-eraser",label:'<i class="fa fa-eraser"> Eraser'},{value:"fa fa-exchange",label:'<i class="fa fa-exchange"> Exchange'},{value:"fa fa-exclamation",label:'<i class="fa fa-exclamation"> Exclamation'},{value:"fa fa-exclamation-circle",label:'<i class="fa fa-exclamation-circle"> Exclamation-circle'},{value:"fa fa-exclamation-triangle",label:'<i class="fa fa-exclamation-triangle"> Exclamation-triangle'},{value:"fa fa-external-link",label:'<i class="fa fa-external-link"> External-link'},{value:"fa fa-external-link-square",label:'<i class="fa fa-external-link-square"> External-link-square'},{value:"fa fa-eye",label:'<i class="fa fa-eye"> Eye'},{value:"fa fa-eye-slash",label:'<i class="fa fa-eye-slash"> Eye-slash'},{value:"fa fa-eyedropper",label:'<i class="fa fa-eyedropper"> Eyedropper'},{value:"fa fa-fax",label:'<i class="fa fa-fax"> Fax'},{value:"fa fa-female",label:'<i class="fa fa-female"> Female'},{value:"fa fa-fighter-jet",label:'<i class="fa fa-fighter-jet"> Fighter-jet'},{value:"fa fa-file-archive-o",label:'<i class="fa fa-file-archive-o"> File-archive-o'},{value:"fa fa-file-audio-o",label:'<i class="fa fa-file-audio-o"> File-audio-o'},{value:"fa fa-file-code-o",label:'<i class="fa fa-file-code-o"> File-code-o'},{value:"fa fa-file-excel-o",label:'<i class="fa fa-file-excel-o"> File-excel-o'},{value:"fa fa-file-image-o",label:'<i class="fa fa-file-image-o"> File-image-o'},{value:"fa fa-file-movie-o",label:'<i class="fa fa-file-movie-o"> File-movie-o'},{value:"fa fa-file-pdf-o",label:'<i class="fa fa-file-pdf-o"> File-pdf-o'},{value:"fa fa-file-photo-o",label:'<i class="fa fa-file-photo-o"> File-photo-o'},{value:"fa fa-file-picture-o",label:'<i class="fa fa-file-picture-o"> File-picture-o'},{value:"fa fa-file-powerpoint-o",label:'<i class="fa fa-file-powerpoint-o"> File-powerpoint-o'},{value:"fa fa-file-sound-o",label:'<i class="fa fa-file-sound-o"> File-sound-o'},{value:"fa fa-file-video-o",label:'<i class="fa fa-file-video-o"> File-video-o'},{value:"fa fa-file-word-o",label:'<i class="fa fa-file-word-o"> File-word-o'},{value:"fa fa-file-zip-o",label:'<i class="fa fa-file-zip-o"> File-zip-o'},{value:"fa fa-film",label:'<i class="fa fa-film"> Film'},{value:"fa fa-filter",label:'<i class="fa fa-filter"> Filter'},{value:"fa fa-fire",label:'<i class="fa fa-fire"> Fire'},{value:"fa fa-fire-extinguisher",label:'<i class="fa fa-fire-extinguisher"> Fire-extinguisher'},{value:"fa fa-flag",label:'<i class="fa fa-flag"> Flag'},{value:"fa fa-flag-checkered",label:'<i class="fa fa-flag-checkered"> Flag-checkered'},{value:"fa fa-flag-o",label:'<i class="fa fa-flag-o"> Flag-o'},{value:"fa fa-flash",label:'<i class="fa fa-flash"> Flash'},{value:"fa fa-flask",label:'<i class="fa fa-flask"> Flask'},{value:"fa fa-folder",label:'<i class="fa fa-folder"> Folder'},{value:"fa fa-folder-o",label:'<i class="fa fa-folder-o"> Folder-o'},{value:"fa fa-folder-open",label:'<i class="fa fa-folder-open"> Folder-open'},{value:"fa fa-folder-open-o",label:'<i class="fa fa-folder-open-o"> Folder-open-o'},{value:"fa fa-frown-o",label:'<i class="fa fa-frown-o"> Frown-o'},{value:"fa fa-futbol-o",label:'<i class="fa fa-futbol-o"> Futbol-o'},{value:"fa fa-gamepad",label:'<i class="fa fa-gamepad"> Gamepad'},{value:"fa fa-gavel",label:'<i class="fa fa-gavel"> Gavel'},{value:"fa fa-gear",label:'<i class="fa fa-gear"> Gear'},{value:"fa fa-gears",label:'<i class="fa fa-gears"> Gears'},{value:"fa fa-gift",label:'<i class="fa fa-gift"> Gift'},{value:"fa fa-glass",label:'<i class="fa fa-glass"> Glass'},{value:"fa fa-globe",label:'<i class="fa fa-globe"> Globe'},{value:"fa fa-graduation-cap",label:'<i class="fa fa-graduation-cap"> Graduation-cap'},{value:"fa fa-group",label:'<i class="fa fa-group"> Group'},{value:"fa fa-hdd-o",label:'<i class="fa fa-hdd-o"> Hdd-o'},{value:"fa fa-headphones",label:'<i class="fa fa-headphones"> Headphones'},{value:"fa fa-heart",label:'<i class="fa fa-heart"> Heart'},{value:"fa fa-heart-o",label:'<i class="fa fa-heart-o"> Heart-o'},{value:"fa fa-heartbeat",label:'<i class="fa fa-heartbeat"> Heartbeat'},{value:"fa fa-history",label:'<i class="fa fa-history"> History'},{value:"fa fa-home",label:'<i class="fa fa-home"> Home'},{value:"fa fa-hotel",label:'<i class="fa fa-hotel"> Hotel'},{value:"fa fa-image",label:'<i class="fa fa-image"> Image'},{value:"fa fa-inbox",label:'<i class="fa fa-inbox"> Inbox'},{value:"fa fa-info",label:'<i class="fa fa-info"> Info'},{value:"fa fa-info-circle",label:'<i class="fa fa-info-circle"> Info-circle'},{value:"fa fa-institution",label:'<i class="fa fa-institution"> Institution'},{value:"fa fa-key",label:'<i class="fa fa-key"> Key'},{value:"fa fa-keyboard-o",label:'<i class="fa fa-keyboard-o"> Keyboard-o'},{value:"fa fa-language",label:'<i class="fa fa-language"> Language'},{value:"fa fa-laptop",label:'<i class="fa fa-laptop"> Laptop'},{value:"fa fa-leaf",label:'<i class="fa fa-leaf"> Leaf'},{value:"fa fa-legal",label:'<i class="fa fa-legal"> Legal'},{value:"fa fa-lemon-o",label:'<i class="fa fa-lemon-o"> Lemon-o'},{value:"fa fa-level-down",label:'<i class="fa fa-level-down"> Level-down'},{value:"fa fa-level-up",label:'<i class="fa fa-level-up"> Level-up'},{value:"fa fa-life-bouy",label:'<i class="fa fa-life-bouy"> Life-bouy'},{value:"fa fa-life-buoy",label:'<i class="fa fa-life-buoy"> Life-buoy'},{value:"fa fa-life-ring",label:'<i class="fa fa-life-ring"> Life-ring'},{value:"fa fa-life-saver",label:'<i class="fa fa-life-saver"> Life-saver'},{value:"fa fa-lightbulb-o",label:'<i class="fa fa-lightbulb-o"> Lightbulb-o'},{value:"fa fa-line-chart",label:'<i class="fa fa-line-chart"> Line-chart',chart:!0},{value:"fa fa-location-arrow",label:'<i class="fa fa-location-arrow"> Location-arrow'},{value:"fa fa-lock",label:'<i class="fa fa-lock"> Lock'},{value:"fa fa-magic",label:'<i class="fa fa-magic"> Magic'},{value:"fa fa-magnet",label:'<i class="fa fa-magnet"> Magnet'},{value:"fa fa-mail-forward",label:'<i class="fa fa-mail-forward"> Mail-forward'},{value:"fa fa-mail-reply",label:'<i class="fa fa-mail-reply"> Mail-reply'},{value:"fa fa-mail-reply-all",label:'<i class="fa fa-mail-reply-all"> Mail-reply-all'},{value:"fa fa-male",label:'<i class="fa fa-male"> Male'},{value:"fa fa-meh-o",label:'<i class="fa fa-meh-o"> Meh-o'},{value:"fa fa-microphone",label:'<i class="fa fa-microphone"> Microphone'},{value:"fa fa-microphone-slash",label:'<i class="fa fa-microphone-slash"> Microphone-slash'},{value:"fa fa-minus",label:'<i class="fa fa-minus"> Minus'},{value:"fa fa-minus-circle",label:'<i class="fa fa-minus-circle"> Minus-circle'},{value:"fa fa-minus-square",label:'<i class="fa fa-minus-square"> Minus-square'},{value:"fa fa-minus-square-o",label:'<i class="fa fa-minus-square-o"> Minus-square-o'},{value:"fa fa-mobile",label:'<i class="fa fa-mobile"> Mobile'},{value:"fa fa-mobile-phone",label:'<i class="fa fa-mobile-phone"> Mobile-phone'},{value:"fa fa-money",label:'<i class="fa fa-money"> Money'},{value:"fa fa-moon-o",label:'<i class="fa fa-moon-o"> Moon-o'},{value:"fa fa-mortar-board",label:'<i class="fa fa-mortar-board"> Mortar-board'},{value:"fa fa-motorcycle",label:'<i class="fa fa-motorcycle"> Motorcycle'},{value:"fa fa-music",label:'<i class="fa fa-music"> Music'},{value:"fa fa-navicon",label:'<i class="fa fa-navicon"> Navicon'},{value:"fa fa-newspaper-o",label:'<i class="fa fa-newspaper-o"> Newspaper-o'},{value:"fa fa-paint-brush",label:'<i class="fa fa-paint-brush"> Paint-brush'},{value:"fa fa-paper-plane",label:'<i class="fa fa-paper-plane"> Paper-plane'},{value:"fa fa-paper-plane-o",label:'<i class="fa fa-paper-plane-o"> Paper-plane-o'},{value:"fa fa-paw",label:'<i class="fa fa-paw"> Paw'},{value:"fa fa-pencil",label:'<i class="fa fa-pencil"> Pencil'},{value:"fa fa-pencil-square",label:'<i class="fa fa-pencil-square"> Pencil-square'},{value:"fa fa-pencil-square-o",label:'<i class="fa fa-pencil-square-o"> Pencil-square-o'},{value:"fa fa-phone",label:'<i class="fa fa-phone"> Phone'},{value:"fa fa-phone-square",label:'<i class="fa fa-phone-square"> Phone-square'},{value:"fa fa-photo",label:'<i class="fa fa-photo"> Photo'},{value:"fa fa-picture-o",label:'<i class="fa fa-picture-o"> Picture-o'},{value:"fa fa-pie-chart",label:'<i class="fa fa-pie-chart"> Pie-chart',chart:!0},{value:"fa fa-plane",label:'<i class="fa fa-plane"> Plane'},{value:"fa fa-plug",label:'<i class="fa fa-plug"> Plug'},{value:"fa fa-plus",label:'<i class="fa fa-plus"> Plus'},{value:"fa fa-plus-circle",label:'<i class="fa fa-plus-circle"> Plus-circle'},{value:"fa fa-plus-square",label:'<i class="fa fa-plus-square"> Plus-square'},{value:"fa fa-plus-square-o",label:'<i class="fa fa-plus-square-o"> Plus-square-o'},{value:"fa fa-power-off",label:'<i class="fa fa-power-off"> Power-off'},{value:"fa fa-print",label:'<i class="fa fa-print"> Print'},{value:"fa fa-puzzle-piece",label:'<i class="fa fa-puzzle-piece"> Puzzle-piece'},{value:"fa fa-qrcode",label:'<i class="fa fa-qrcode"> Qrcode'},{value:"fa fa-question",label:'<i class="fa fa-question"> Question'},{value:"fa fa-question-circle",label:'<i class="fa fa-question-circle"> Question-circle'},{value:"fa fa-quote-left",label:'<i class="fa fa-quote-left"> Quote-left'},{value:"fa fa-quote-right",label:'<i class="fa fa-quote-right"> Quote-right'},{value:"fa fa-random",label:'<i class="fa fa-random"> Random'},{value:"fa fa-recycle",label:'<i class="fa fa-recycle"> Recycle'},{value:"fa fa-refresh",label:'<i class="fa fa-refresh"> Refresh'},{value:"fa fa-remove",label:'<i class="fa fa-remove"> Remove'},{value:"fa fa-reorder",label:'<i class="fa fa-reorder"> Reorder'},{value:"fa fa-reply",label:'<i class="fa fa-reply"> Reply'},{value:"fa fa-reply-all",label:'<i class="fa fa-reply-all"> Reply-all'},{value:"fa fa-retweet",label:'<i class="fa fa-retweet"> Retweet'},{value:"fa fa-road",label:'<i class="fa fa-road"> Road'},{value:"fa fa-rocket",label:'<i class="fa fa-rocket"> Rocket'},{value:"fa fa-rss",label:'<i class="fa fa-rss"> Rss'},{value:"fa fa-rss-square",label:'<i class="fa fa-rss-square"> Rss-square'},{value:"fa fa-search",label:'<i class="fa fa-search"> Search'},{value:"fa fa-search-minus",label:'<i class="fa fa-search-minus"> Search-minus'},{value:"fa fa-search-plus",label:'<i class="fa fa-search-plus"> Search-plus'},{value:"fa fa-send",label:'<i class="fa fa-send"> Send'},{value:"fa fa-send-o",label:'<i class="fa fa-send-o"> Send-o'},{value:"fa fa-server",label:'<i class="fa fa-server"> Server'},{value:"fa fa-share",label:'<i class="fa fa-share"> Share'},{value:"fa fa-share-alt",label:'<i class="fa fa-share-alt"> Share-alt'},{value:"fa fa-share-alt-square",label:'<i class="fa fa-share-alt-square"> Share-alt-square'},{value:"fa fa-share-square",label:'<i class="fa fa-share-square"> Share-square'},{value:"fa fa-share-square-o",label:'<i class="fa fa-share-square-o"> Share-square-o'},{value:"fa fa-shield",label:'<i class="fa fa-shield"> Shield'},{value:"fa fa-ship",label:'<i class="fa fa-ship"> Ship'},{value:"fa fa-shopping-cart",label:'<i class="fa fa-shopping-cart"> Shopping-cart'},{value:"fa fa-sign-in",label:'<i class="fa fa-sign-in"> Sign-in'},{value:"fa fa-sign-out",label:'<i class="fa fa-sign-out"> Sign-out'},{value:"fa fa-signal",label:'<i class="fa fa-signal"> Signal'},{value:"fa fa-sitemap",label:'<i class="fa fa-sitemap"> Sitemap'},{value:"fa fa-sliders",label:'<i class="fa fa-sliders"> Sliders'},{value:"fa fa-smile-o",label:'<i class="fa fa-smile-o"> Smile-o'},{value:"fa fa-soccer-ball-o",label:'<i class="fa fa-soccer-ball-o"> Soccer-ball-o'},{value:"fa fa-sort",label:'<i class="fa fa-sort"> Sort'},{value:"fa fa-sort-alpha-asc",label:'<i class="fa fa-sort-alpha-asc"> Sort-alpha-asc'},{value:"fa fa-sort-alpha-desc",label:'<i class="fa fa-sort-alpha-desc"> Sort-alpha-desc'},{value:"fa fa-sort-amount-asc",label:'<i class="fa fa-sort-amount-asc"> Sort-amount-asc'},{value:"fa fa-sort-amount-desc",label:'<i class="fa fa-sort-amount-desc"> Sort-amount-desc'},{value:"fa fa-sort-asc",label:'<i class="fa fa-sort-asc"> Sort-asc'},{value:"fa fa-sort-desc",label:'<i class="fa fa-sort-desc"> Sort-desc'},{value:"fa fa-sort-down",label:'<i class="fa fa-sort-down"> Sort-down'},{value:"fa fa-sort-numeric-asc",label:'<i class="fa fa-sort-numeric-asc"> Sort-numeric-asc'},{value:"fa fa-sort-numeric-desc",label:'<i class="fa fa-sort-numeric-desc"> Sort-numeric-desc'},{value:"fa fa-sort-up",label:'<i class="fa fa-sort-up"> Sort-up'},{value:"fa fa-space-shuttle",label:'<i class="fa fa-space-shuttle"> Space-shuttle'},{value:"fa fa-spinner",label:'<i class="fa fa-spinner"> Spinner'},{value:"fa fa-spoon",label:'<i class="fa fa-spoon"> Spoon'},{value:"fa fa-square",label:'<i class="fa fa-square"> Square'},{value:"fa fa-square-o",label:'<i class="fa fa-square-o"> Square-o'},{value:"fa fa-star",label:'<i class="fa fa-star"> Star'},{value:"fa fa-star-half",label:'<i class="fa fa-star-half"> Star-half'},{value:"fa fa-star-half-empty",label:'<i class="fa fa-star-half-empty"> Star-half-empty'},{value:"fa fa-star-half-full",label:'<i class="fa fa-star-half-full"> Star-half-full'},{value:"fa fa-star-half-o",label:'<i class="fa fa-star-half-o"> Star-half-o'},{value:"fa fa-star-o",label:'<i class="fa fa-star-o"> Star-o'},{value:"fa fa-street-view",label:'<i class="fa fa-street-view"> Street-view'},{value:"fa fa-suitcase",label:'<i class="fa fa-suitcase"> Suitcase'},{value:"fa fa-sun-o",label:'<i class="fa fa-sun-o"> Sun-o'},{value:"fa fa-support",label:'<i class="fa fa-support"> Support'},{value:"fa fa-tablet",label:'<i class="fa fa-tablet"> Tablet'},{value:"fa fa-tachometer",label:'<i class="fa fa-tachometer"> Tachometer'},{value:"fa fa-tag",label:'<i class="fa fa-tag"> Tag'},{value:"fa fa-tags",label:'<i class="fa fa-tags"> Tags'},{value:"fa fa-tasks",label:'<i class="fa fa-tasks"> Tasks'},{value:"fa fa-taxi",label:'<i class="fa fa-taxi"> Taxi'},{value:"fa fa-terminal",label:'<i class="fa fa-terminal"> Terminal'},{value:"fa fa-thumb-tack",label:'<i class="fa fa-thumb-tack"> Thumb-tack'},{value:"fa fa-thumbs-down",label:'<i class="fa fa-thumbs-down"> Thumbs-down'},{value:"fa fa-thumbs-o-down",label:'<i class="fa fa-thumbs-o-down"> Thumbs-o-down'},{value:"fa fa-thumbs-o-up",label:'<i class="fa fa-thumbs-o-up"> Thumbs-o-up'},{value:"fa fa-thumbs-up",label:'<i class="fa fa-thumbs-up"> Thumbs-up'},{value:"fa fa-ticket",label:'<i class="fa fa-ticket"> Ticket'},{value:"fa fa-times",label:'<i class="fa fa-times"> Times'},{value:"fa fa-times-circle",label:'<i class="fa fa-times-circle"> Times-circle'},{value:"fa fa-times-circle-o",label:'<i class="fa fa-times-circle-o"> Times-circle-o'},{value:"fa fa-tint",label:'<i class="fa fa-tint"> Tint'},{value:"fa fa-toggle-down",label:'<i class="fa fa-toggle-down"> Toggle-down'},{value:"fa fa-toggle-left",label:'<i class="fa fa-toggle-left"> Toggle-left'},{value:"fa fa-toggle-off",label:'<i class="fa fa-toggle-off"> Toggle-off'},{value:"fa fa-toggle-on",label:'<i class="fa fa-toggle-on"> Toggle-on'},{value:"fa fa-toggle-right",label:'<i class="fa fa-toggle-right"> Toggle-right'},{value:"fa fa-toggle-up",label:'<i class="fa fa-toggle-up"> Toggle-up'},{value:"fa fa-trash",label:'<i class="fa fa-trash"> Trash'},{value:"fa fa-trash-o",label:'<i class="fa fa-trash-o"> Trash-o'},{value:"fa fa-tree",label:'<i class="fa fa-tree"> Tree'},{value:"fa fa-trophy",label:'<i class="fa fa-trophy"> Trophy'},{value:"fa fa-truck",label:'<i class="fa fa-truck"> Truck'},{value:"fa fa-tty",label:'<i class="fa fa-tty"> Tty'},{value:"fa fa-umbrella",label:'<i class="fa fa-umbrella"> Umbrella'},{value:"fa fa-university",label:'<i class="fa fa-university"> University'},{value:"fa fa-unlock",label:'<i class="fa fa-unlock"> Unlock'},{value:"fa fa-unlock-alt",label:'<i class="fa fa-unlock-alt"> Unlock-alt'},{value:"fa fa-unsorted",label:'<i class="fa fa-unsorted"> Unsorted'},{value:"fa fa-upload",label:'<i class="fa fa-upload"> Upload'},{value:"fa fa-user",label:'<i class="fa fa-user"> User'},{value:"fa fa-user-plus",label:'<i class="fa fa-user-plus"> User-plus'},{value:"fa fa-user-secret",label:'<i class="fa fa-user-secret"> User-secret'},{value:"fa fa-user-times",label:'<i class="fa fa-user-times"> User-times'},{value:"fa fa-users",label:'<i class="fa fa-users"> Users'},{value:"fa fa-video-camera",label:'<i class="fa fa-video-camera"> Video-camera'},{value:"fa fa-volume-down",label:'<i class="fa fa-volume-down"> Volume-down'},{value:"fa fa-volume-off",label:'<i class="fa fa-volume-off"> Volume-off'},{value:"fa fa-volume-up",label:'<i class="fa fa-volume-up"> Volume-up'},{value:"fa fa-warning",label:'<i class="fa fa-warning"> Warning'},{value:"fa fa-wheelchair",label:'<i class="fa fa-wheelchair"> Wheelchair'},{value:"fa fa-wifi",label:'<i class="fa fa-wifi"> Wifi'},{value:"fa fa-wrench",label:'<i class="fa fa-wrench"> Wrench'}]});
angular.module("primeapps").factory("HelpService",["$http","config","$filter","$rootScope",function(e,t,l,r){return{create:function(l){return e.post(t.apiUrl+"help/create",l)},update:function(l){return e.put(t.apiUrl+"help/update/"+l.id,l)},"delete":function(l){return e["delete"](t.apiUrl+"help/delete/"+l)},getAll:function(l){return e.get(t.apiUrl+"help/get_all?modalType="+l)},getById:function(l){return e.get(t.apiUrl+"help/get/"+l)},getByType:function(l,r,n){return r=r?r:null,n=n?n:null,e.get(t.apiUrl+"help/get_by_type?templateType="+l+"&moduleId="+r+"&route="+n)},getModuleType:function(l,r,n){return n=n?n:null,e.get(t.apiUrl+"help/get_module_type?templateType="+l+"&moduleType="+r+"&moduleId="+n)},getCustomHelp:function(l,r){return e.get(t.apiUrl+"help/get_custom_help?templateType="+l+"&customhelp="+r)},process:function(e,t,n,u){for(var p=[],i=0;i<e.length;i++){var a=e[i];if(a.binding="",a.module_id){var o=l("filter")(t,{id:a.module_id},!0)[0],d=l("filter")(u,{Name:a.module_type},!0)[0];a.binding=(o?o["label_"+r.language+"_singular"]+" (":"")+(d?d.Label+")":"")}else if(a.route_url){var g=l("filter")(n,{value:a.route_url},!0)[0];g&&(a.binding=g.name)}else a.binding=l("translate")("Setup.HelpGuide.Independent");p.push(a)}return p}}}]);
"use strict";angular.module("primeapps").controller("SetupController",["$rootScope","$scope","$filter","$location","helper",function(e,p,r,t,s){p.helper=s,p.selectMenuItem=function(p){e.selectedSetupMenuLink=p.link},p.setMenuItems=function(){if(p.menuItems=[{link:"#/app/setup/settings",label:"Setup.Nav.PersonalSettings",order:1,app:"crm"},{link:"#/app/setup/importhistory",label:"Setup.Nav.Data",order:7,app:"crm"}],s.hasAdminRights()&&!e.preview){var a=[{link:"#/app/setup/users",label:"Setup.Nav.Users",order:2,app:"crm"},{link:"#/app/setup/organization",label:"Setup.Nav.OrganizationSettings",order:3,app:"crm"},{link:"#/app/setup/general",label:"Setup.Nav.System",order:8,app:"crm"}],n=p.menuItems.concat(a);p.menuItems=r("orderBy")(n,"order")}if(!s.hasAdminRights()&&e.customProfilePermissions&&e.customProfilePermissions.length>0)for(var i=0;i<e.customProfilePermissions.length;i++){var o=e.customProfilePermissions[i];if(o.profileId==e.user.profile.id){for(var u=[],l=0;l<o.permissions.length;l++){var m=o.permissions[l];"users"==m&&u.push({link:"#/app/setup/users",label:"Setup.Nav.Users",order:2,app:"crm"}),"general"==m&&u.push({link:"#/app/setup/general",label:"Setup.Nav.System",order:8,app:"crm"}),"organization"==m&&u.push({link:"#/app/setup/organization",label:"Setup.Nav.OrganizationSettings",order:3,app:"crm"})}var c=p.menuItems.concat(u);p.menuItems=r("orderBy")(c,"order")}}var f=t.path();switch(f){case"/app/setup/paymenthistory":f="/app/setup/payment";break;case"/app/setup/profiles":case"/app/setup/profile":f="/app/setup/users";break;case"app/setup/reportForm":f="/app/setup/reports"}var d=r("filter")(p.menuItems,{link:"#"+f})[0];p.selectMenuItem(d?d:p.menuItems[0]),angular.forEach(p.menuItems,function(p){p.active="common"===p.app||p.app===e.app})},p.setMenuItems(),p.menuItemClass=function(p){return e.selectedSetupMenuLink===p.link?"active":""}}]);
"use strict";angular.module("primeapps").factory("PaymentService",["$http","$filter","config",function(t,e,n){return{getPayment:function(){return t.post(n.apiUrl+"Payment/Get",{})},getPaymentHistory:function(e){return t.post(n.apiUrl+"License/GetLicenseStatus",angular.toJson(e))},checkCampaignCode:function(e){return t.get(n.apiUrl+"Payment/CheckCampaign?code="+e)},update:function(e){return t.post(n.apiUrl+"Payment/SaveOrUpdate",e)},updateCampaign:function(e,a){return t.post(n.apiUrl+"Payment/UpdateCampaignCode",{PaymentId:e,CampaignCode:a})},changeCurrency:function(e){return t.post(n.apiUrl+"User/ChangeCurrency",angular.toJson(e))},processPaymentHistory:function(t){var n={};angular.copy(t,n);var a=[];return n.LicenseHistory=null,angular.forEach(t.LicenseHistory,function(t){var n=[],a={};angular.copy(t,a),a.InvoiceDetails=null,angular.forEach(t.InvoiceDetails,function(t){var r=e("filter")(n,{Title:t.Title},!0)[0];if(r)r.Amount+=t.Amount,r.Count++;else{if(t.Title&&t.Title.split(" (").length>0){var i=t.Title.split(" (");t.Code="User"==i[0]||"Storage"==i[0]?i[0]:"Usage",t.Period="Monthly",a.MountCount=1;var o=i[1]&&i[1].replace(/[{()} ]/g,"");o&&parseInt(o)>1&&(a.MountCount=parseInt(o),t.Period="Annual")}t.Count=1,this.push(t)}},n),a.InvoiceDetails=n,this.push(a)},a),n.LicenseHistory=a,n}}}]);
"use strict";angular.module("primeapps").directive("paymentForm",["$filter","ngToast","PaymentService","AppService",function(a,e,t,n){return{restrict:"EA",scope:{payment:"="},templateUrl:"view/setup/payment/paymentForm.html",controller:["$rootScope","$scope",function(r,c){function i(){c.visaCard="off",c.masterCard="off",c.maestroCard="off",c.amexCard="off",c.discoverCard="off",c.jcbCard="off"}function o(a){if(a){c.paymentInfoForm.cardNumber.$setValidity("cardNumber",!1);for(var e in p)if(p[e].test(a))return void c.paymentInfoForm.cardNumber.$setValidity("cardNumber",!0)}}c.expirationMonths=[],c.expirationYears=[],c.user=r.user;for(var s=1;13>s;s++)c.expirationMonths.push(s);for(var d=(new Date).getFullYear(),m=d-1;2050>m;m++)c.expirationYears.push(m+1);i();var p;p={visa:/^4[0-9]{12}(?:[0-9]{3})?$/,mastercard:/^5[1-5][0-9]{14}$/,maestro:/^6[7-9][0-9]{0,17}$/,amex:/^3[47][0-9]{13}$/,diners:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,discover:/^6(?:011|5[0-9]{2})[0-9]{12}$/,jcb:/^(?:2131|1800|35\d{3})\d{11}$/},c.changeCardType=function(a){i(),p.visa.test(a)?c.visaCard="on":p.mastercard.test(a)?c.masterCard="on":p.maestro.test(a)?c.maestroCard="on":p.amex.test(a)?c.amexCard="on":p.discover.test(a)?c.discoverCard="on":p.jcb.test(a)&&(c.jcbCard="on")},c.update=function(r){o(r.CardNumber),c.$broadcast("show-errors-check-validity"),c.paymentInfoForm.$valid&&(c.paymentUpdating=!0,t.update(r).then(function(){c.paymentUpdating=!1,c.$root.licenseStatus&&(c.$root.licenseStatus.LicenseUsage.IsInNotificationPeriod=!1),n.getMyAccount(!0),e.create({content:a("translate")("Setup.Settings.UpdateSuccess"),className:"success"})})["catch"](function(){c.paymentUpdating=!1}))},c.updateCampaign=function(n){c.campaingForm.campaignCode.$setValidity("campaignCode",!0),c.campaingForm.$valid&&(c.campaignUpdating=!0,t.checkCampaignCode(n.CampaignCode).then(function(r){return r.data?void t.updateCampaign(n.id,n.CampaignCode).then(function(){c.campaignUpdating=!1,e.create({content:a("translate")("Setup.Payment.CampaignUpdateSuccess"),className:"success"})})["catch"](function(){c.campaignUpdating=!1}):(c.campaingForm.campaignCode.$setValidity("campaignCode",!1),void(c.campaignUpdating=!1))}))},c.changeCurrency=function(n){t.changeCurrency(n).then(function(){r.user.currency=n,e.create({content:a("translate")("Setup.Settings.CurrencySuccess"),className:"success"})})}}]}}]);
"use strict";angular.module("primeapps").factory("WorkgroupService",["$http","config","$filter","entityTypes",function(e,t,a,n){return{getWorkgoups:function(){return e.post(t.apiUrl+"Instance/GetWorkgroups",{})},getWorkgoup:function(){return e.post(t.apiUrl+"Instance/GetWorkgroup",{})},create:function(a){return e.post(t.apiUrl+"Instance/Create",angular.toJson(a))},edit:function(a,n){return e.post(t.apiUrl+"Instance/Edit",{title:a,instanceID:n})},remove:function(a){return e.post(t.apiUrl+"Instance/Remove",angular.toJson(a))},leave:function(a){return e.post(t.apiUrl+"Instance/Leave",angular.toJson(a))},join:function(a){return e.post(t.apiUrl+"Instance/Join",angular.toJson(a))},decline:function(a){return e.post(t.apiUrl+"Instance/Decline",angular.toJson(a))},isAvailableToInvite:function(a,n){return e.post(t.apiUrl+"User/IsAvailableToInvite",{EMail:a,InstanceID:n})},saveType:function(a){return e.post(t.apiUrl+"Entity/SaveOrUpdateType",a)},removeType:function(a){return e.post(t.apiUrl+"Entity/RemoveType",a)},removeTypeHistory:function(a,n){return e.post(t.apiUrl+"User/RemoveTypeHistory",{EntityType:a,InstanceID:n})},upgradeLicense:function(a,n){return e.post(t.apiUrl+"License/Upgrade",{LicenseID:a,Frequency:n,IsFreeLicense:!0})},getValues:function(e,t,n,r,u){var i=[];return angular.forEach(e,function(e){var i={};switch(angular.copy(e,i),i.ValueId=e.id,e.Type){case 3:i.ValueInt=e.DefaultValue&&parseInt(e.DefaultValue);break;case 4:i.ValueDate=e.DefaultValue&&new Date(e.DefaultValue.split(".").reverse().join("-"));break;case 6:i.ValueList=e.DefaultValue,i.Values=e.Value.split(",");break;case 9:i.ValueText=a("translate")("true"==e.DefaultValue?"Common.Yes":"Common.No");break;case 10:var o=a("filter")(n,{EntityID:e.DefaultValue,InstanceID:u},!0)[0];i.ValueText=o&&o.EntityName,i.ValueObject=o,i.Values=a("filter")(n,{EntityType:e.Value,InstanceID:u},!0);break;case 13:var s=a("filter")(t,{EntityID:e.DefaultValue},!0)[0];i.ValueText=s?s.EntityName:"",i.Values=t;break;case 14:var l=a("filter")(r,{Code:e.DefaultValue},!0)[0];i.ValueText=l&&l.Name,i.Values=r}this.push(i)},i),i=a("orderBy")(i,"Order")},getResourceUsageForType:function(a,n){return e.post(t.apiUrl+"Entity/GetResourceUsageForType",{EntityType:a,InstanceID:n})},getAllEntityTypes:function(e){var t=[];return t.push({id:n.lead,name:a("translate")("Lead.Lead")}),t.push({id:n.account,name:a("translate")("Account.Account")}),t.push({id:n.contact,name:a("translate")("Contact.Contact")}),t.push({id:n.opportunity,name:a("translate")("Opportunity.Opportunity")}),t.push({id:n.activity,name:a("translate")("Activity.Activity")}),angular.forEach(e,function(e){t.push({id:e.id,name:e.Title})}),t}}}]);
"use strict";angular.module("primeapps").factory("MessagingService",["$http","config",function(e,t){return{getSetting:function(){return e.get(t.apiUrl+"messaging/get_config")},updateSMSSettings:function(n){return e.post(t.apiUrl+"messaging/update_sms_settings",n)},updateEMailSettings:function(n){return e.post(t.apiUrl+"messaging/update_email_settings",n)},updatePersonalEMailSettings:function(n){return e.post(t.apiUrl+"messaging/update_personal_email_settings",n)},removePersonalEMailSettings:function(n){return e.post(t.apiUrl+"messaging/remove_personal_email_settings",n)},removeEMailSettings:function(n){return e.post(t.apiUrl+"messaging/remove_email_settings",n)},removeSMSSettings:function(n){return e.post(t.apiUrl+"messaging/remove_sms_settings",n)}}}]);
"use strict";angular.module("primeapps").controller("PaymentFormController",["$rootScope","$scope","$state","helper","$http","config","ngToast","$filter","AuthService","$window",function(e,t,l,a,n,i,o,r,m,s){t.promotion={},a.hideLoader(),t.showPromotionModal=function(){t.promotionModal=t.promotionModal||$modal({scope:t,templateUrl:"/view/app/trial/promotionFormModal.html",size:"modal-sm",backdrop:"static",show:!1}),t.promotionModal.$promise.then(t.promotionModal.show)},t.sendEmail=function(e){if(e.$valid){t.submitting=!0;var l={};l.Subject="Demo Uzatma Talebi",l.TemplateWithBody='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office"><head> <title></title> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <style type="text/css"> body, .maintable { height: 100% !important; width: 100% !important; margin: 0; padding: 0; } img, a img { border: 0; outline: none; text-decoration: none; } .imagefix { display: block; } p { margin-top: 0; margin-right: 0; margin-left: 0; padding: 0; } .ReadMsgBody { width: 100%; } .ExternalClass { width: 100%; } .ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div { line-height: 100%; } img { -ms-interpolation-mode: bicubic; } body, table, td, p, a, li, blockquote { -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; } </style> <style type="text/css"> @media only screen and (max-width: 600px) { .rtable { width: 100% !important; table-layout: fixed; } .rtable tr { height: auto !important; display: block; } .contenttd { max-width: 100% !important; display: block; } .contenttd:after { content: ""; display: table; clear: both; } .hiddentds { display: none; } .imgtable, .imgtable table { max-width: 100% !important; height: auto; float: none; margin: 0 auto; } .imgtable.btnset td { display: inline-block; } .imgtable img { width: 100%; height: auto; display: block; } table { float: none; table-layout: fixed; } } </style> <!--[if gte mso 9]><xml> <o:OfficeDocumentSettings> <o:AllowPNG/> <o:PixelsPerInch>96</o:PixelsPerInch> </o:OfficeDocumentSettings></xml><![endif]--></head><body style="overflow: auto; padding:0; margin:0; font-size: 14px; font-family: arial, helvetica, sans-serif; cursor:auto; background-color:#444545"> <table cellspacing="0" cellpadding="0" width="100%" bgcolor="#444545"> <tr> <td style="FONT-SIZE: 0px; HEIGHT: 20px; LINE-HEIGHT: 0"></td> </tr> <tr> <td valign="top"> <table class="rtable" style="WIDTH: 600px; MARGIN: 0px auto" cellspacing="0" cellpadding="0" width="600" align="center" border="0"> <tr> <td class="contenttd" style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent"> <table style="WIDTH: 100%" cellspacing="0" cellpadding="0" align="left"> <tr class="hiddentds"> <td style="FONT-SIZE: 0px; HEIGHT: 0px; WIDTH: 367px; LINE-HEIGHT: 0; mso-line-height-rule: exactly"></td> <td style="FONT-SIZE: 0px; HEIGHT: 0px; WIDTH: 233px; LINE-HEIGHT: 0; mso-line-height-rule: exactly"></td> </tr> <tr style="HEIGHT: 10px"> <th class="contenttd" style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; VERTICAL-ALIGN: middle; BORDER-BOTTOM: medium none; FONT-WEIGHT: normal; PADDING-BOTTOM: 20px; TEXT-ALIGN: left; PADDING-TOP: 20px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 15px; BACKGROUND-COLOR: transparent"></th> <th class="contenttd" style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; VERTICAL-ALIGN: middle; BORDER-BOTTOM: medium none; FONT-WEIGHT: normal; PADDING-BOTTOM: 20px; TEXT-ALIGN: left; PADDING-TOP: 20px; PADDING-LEFT: 15px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent"></th> </tr> </table> </td> </tr> <tr> <td class="contenttd" style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: #feffff"> <table style="WIDTH: 100%" cellspacing="0" cellpadding="0" align="left"> <tr class="hiddentds"> <td style="FONT-SIZE: 0px; HEIGHT: 0px; WIDTH: 600px; LINE-HEIGHT: 0; mso-line-height-rule: exactly"></td> </tr> <tr style="HEIGHT: 20px"> <th class="contenttd" style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; VERTICAL-ALIGN: bottom; BORDER-BOTTOM: medium none; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: #1296f7"> <p style="FONT-SIZE: 36px; MARGIN-BOTTOM: 1em; FONT-FAMILY: arial, helvetica, sans-serif; MARGIN-TOP: 0px; COLOR: #fffeff; LINE-HEIGHT: 36px; BACKGROUND-COLOR: transparent; mso-line-height-rule: exactly" align="center"><br /> '+l.Subject+'</p> </th> </tr> </table> </td> </tr> <tr> <td class="contenttd" style="BORDER-TOP: #e73d11 5px solid; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: #feffff"> <table style="WIDTH: 100%" cellspacing="0" cellpadding="0" align="left"> <tr class="hiddentds"> <td style="FONT-SIZE: 0px; HEIGHT: 0px; WIDTH: 600px; LINE-HEIGHT: 0; mso-line-height-rule: exactly" colspan="2"></td> </tr> <tr style="HEIGHT: 71px"> <th class="contenttd" style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; VERTICAL-ALIGN: middle; BORDER-BOTTOM: medium none; FONT-WEIGHT: normal; PADDING-BOTTOM: 5px; TEXT-ALIGN: left; PADDING-TOP: 5px; PADDING-LEFT: 15px; BORDER-LEFT: medium none; PADDING-RIGHT: 15px; BACKGROUND-COLOR: transparent" colspan="2"> <div> <p style="FONT-SIZE: 18px; MARGIN-BOTTOM: 1em; FONT-FAMILY: geneve, arial, helvetica, sans-serif; MARGIN-TOP: 0px; COLOR: #2d2d2d; TEXT-ALIGN: justify; PADDING-LEFT: 110px; LINE-HEIGHT: 29px; BACKGROUND-COLOR: transparent; mso-line-height-rule: exactly" align="justify"><strong><br />&#304;sim Soyisim</strong>:'+t.promotion.fullName+"<br /> <strong>Telefon Numaras&#305;</strong>:"+t.promotion.phoneNumber+"<br /> <strong>M&uuml;&#351;teri Epostas&#305;</strong>:"+t.promotion.email+'</p> </div> </th> </tr> </table> </td> </tr> <tr> <td class="contenttd" style="BORDER-TOP: #e73d11 5px solid; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: #feffff"> <table style="WIDTH: 100%" cellspacing="0" cellpadding="0" align="left"> <tr class="hiddentds"> <td style="FONT-SIZE: 0px; HEIGHT: 0px; WIDTH: 600px; LINE-HEIGHT: 0; mso-line-height-rule: exactly"></td> </tr> <tr style="HEIGHT: 20px"> <th class="contenttd" style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; VERTICAL-ALIGN: top; BORDER-BOTTOM: medium none; FONT-WEIGHT: normal; PADDING-BOTTOM: 20px; TEXT-ALIGN: left; PADDING-TOP: 20px; PADDING-LEFT: 15px; BORDER-LEFT: medium none; PADDING-RIGHT: 15px; BACKGROUND-COLOR: transparent"></th> </tr> </table> </td> </tr> </table> </td> </tr> <tr> <td style="FONT-SIZE: 0px; HEIGHT: 8px; LINE-HEIGHT: 0">&nbsp;</td> </tr> </table> <!-- Created with MailStyler 2.0.1.300 --></body></html>',l.ToAddresses=["info@ofisim.com"],n.post(i.apiUrl+"messaging/send_external_email",l).then(function(){t.submitting=!1,o.create({content:r("translate")("Trial.RequestMessage"),className:"success",timeout:5e3})})}},t.logout=function(){m.logout().then(function(){m.logoutComplete(),s.location.href="/logout"})},t.sector=[{label:"Ağaç İşleri, Kağıt ve Kağıt Ürünleri",value:"Ağaç İşleri, Kağıt ve Kağıt Ürünleri"},{label:"Banka, Finans",value:"Banka, Finans"},{label:"Bilişim Teknolojileri",value:"Bilişim Teknolojileri"},{label:"Çevre",value:"Çevre"},{label:"Diğer",value:"Diğer"},{label:"Eğitim",value:"Eğitim"},{label:"Elektrik, Elektronik",value:"Elektrik, Elektronik"},{label:"Enerji",value:"Enerji"},{label:"Gıda",value:"Gıda"},{label:"Hukuk Firmaları",value:"Hukuk Firmaları"},{label:"İnşaat",value:"İnşaat"},{label:"Kamu Kurumları",value:"Kamu Kurumları"},{label:"Kar Amacı Gütmeyen Kurumlar",value:"Kar Amacı Gütmeyen Kurumlar"},{label:"Kimya, Petrol, Lastik ve Plastik",value:"Enerji"},{label:"Kültür, Sanat",value:"Kültür, Sanat"},{label:"Madencilik",value:"Madencilik"},{label:"Medya, İletişim",value:"Medya, İletişim"},{label:"Otomotiv",value:"Otomotiv"},{label:"Perakende",value:"Perakende"},{label:"Sağlık ve Sosyal Hizmetler",value:"Sağlık ve Sosyal Hizmetler"},{label:"Tarım, Avcılık, Balıkçılık",value:"Tarım, Avcılık, Balıkçılık"},{label:"Tekstil, Hazır Giyim, Deri",value:"Tekstil, Hazır Giyim, Deri"},{label:"Telekomünikasyon",value:"Telekomünikasyon"},{label:"Ticaret (Satış ve Pazarlama)",value:"Ticaret (Satış ve Pazarlama)"},{label:"Turizm, Konaklama",value:"Turizm, Konaklama"},{label:"Ulaştırma, Lojistik ve Haberleşme",value:"Ulaştırma, Lojistik ve Haberleşme"},{label:"Üretim",value:"Üretim"}]}]);
angular.module("primeapps").controller("SipPhoneController",["$rootScope","$scope","ngToast","$filter","$timeout","helper","sipHelper","$popover","$location","$state","$stateParams","$q","$window","$interval","$localStorage","$cache","config",function(e,n,t,a,o,i,s,r,l,c,u,d,m){n.isInbound=!1,n.transferNumber="",e.phoneSettings.sipUsers&&angular.forEach(e.phoneSettings.sipUsers,function(n){if(!n.name){var t=a("filter")(e.users,{id:parseInt(n.userId)},!0)[0];n.name=t.full_name}}),n.registerUnregister=function(){e.sipUser.userAgent&&e.sipUser.userAgent.isRegistered()?s.unRegister():s.register()},n.setToInCall=function(){n.callAccepting=!0;var o=e.sipUser.session;if(o){if(n.isInbound=s.isOutGoingRequest(o),s.isOutGoingRequest(o)===!1&&!o.hasAnswer){var i={media:{constraints:{audio:!0,video:!1}}};o.accept(i);var r=e.sipUser.lineInfo.ModuleName,l=e.sipUser.lineInfo.RecordId;r&&l&&s.goRecordDetail(r,l),n.callAccepting=!1}}else e.sipUser.numberToDial.length>2?(e.sipUser.lineInfo.PhoneStatus=a("translate")("Setup.Phone.Dialing"),e.sipUser.lineInfo.State="Dialing",e.sipUser.lineInfo.TalkingNumber=e.sipUser.numberToDial,s.dial(e.sipUser.lineInfo.TalkingNumber,!1),n.changePhoneScreen("connectingScreen")):t.create({content:a("translate")("Setup.Phone.NoNumber"),className:"warning"}),n.callAccepting=!1},n.dialOrAnswer=function(){o(n.setToInCall,500)},n.hangup=function(){var t=document.getElementById("IncomingSound");t.pause();var i=e.sipUser.session;i?(s.isOutGoingRequest(i)===!0?i.hasAnswer?(e.sipUser.lineInfo.PhoneStatus=a("translate")("Setup.Phone.EndedCall"),i.bye()):("Ringing"===e.sipUser.lineInfo.State&&i.cancel(),i.close(),i=null,e.sipUser.session=null,e.sipUser.lineInfo.PhoneStatus=a("translate")("Setup.Phone.Canceling"),o(function(){e.sipUser.lineInfo.PhoneStatus=a("translate")("Setup.Phone.Ready"),e.sipUser.lineInfo.State="Ready",n.changePhoneScreen("readyScreen")},2e3)):s.isOutGoingRequest(i)===!1&&(i.hasAnswer?(e.sipUser.lineInfo.PhoneStatus=a("translate")("Setup.Phone.EndedCall"),i.bye()):(e.sipUser.lineInfo.PhoneStatus=a("translate")("Setup.Phone.RejectedCall"),i.reject())),e.sipUser.session=null):(e.sipUser.lineInfo.PhoneStatus=a("translate")("Setup.Phone.Canceling"),o(function(){e.sipUser.lineInfo.PhoneStatus=a("translate")("Setup.Phone.Ready"),e.sipUser.lineInfo.State="Ready",n.changePhoneScreen("readyScreen")},2e3))},n.changePhoneScreen=function(n){e.sipUser.activePhoneScreen=n},n.clearPhoneInput=function(t){e.sipUser.numberToDial=e.sipUser.numberToDial.substring(0,e.sipUser.numberToDial.length-1),o(n.addAnimationToButton(t),200),e.sipUser.lineInfo.TalkingRecordInfo=null,n.sipUser.numberToDial.length>10&&s.findRecordGoDetail(e.sipUser.RecordDetailModuleName,e.sipUser.RecordDetailPhoneFieldName,n.sipUser.numberToDial)};var g=m.AudioContext||m.webkitAudioContext||m.mozAudioContext||m.oAudioContext||m.msAudioContext;g&&!e.context&&(e.context=new g),n.addAnimationToButton=function(e){angular.element(e).removeClass("clicked"),o(function(){angular.element(e).addClass("clicked")},100)},n.dialTone=function(t,a){n.stopDialNumber(),n.oscillator1=e.context.createOscillator(),n.oscillator1.type=0,n.oscillator1.frequency.value=t;var i=e.context.createGain?e.context.createGain():e.context.createGainNode();n.oscillator1.connect(i,0,0),i.connect(e.context.destination),i.gain.value=.1,n.oscillator1.start?n.oscillator1.start(0):n.oscillator1.noteOn(0),n.oscillator2=e.context.createOscillator(),n.oscillator2.type=0,n.oscillator2.frequency.value=a,i=e.context.createGain?e.context.createGain():e.context.createGainNode(),n.oscillator2.connect(i),i.connect(e.context.destination),i.gain.value=.1,n.oscillator2.start?n.oscillator2.start(0):n.oscillator2.noteOn(0),o(function(){n.stopDialNumber()},200)},n.putDialNumber=function(t,a,o,i){e.sipUser.numberToDial+=t.toString(),n.addAnimationToButton(i.currentTarget),n.dialTone(a,o),n.findRecord()},n.findRecord=function(t,a){if(e.sipUser.lineInfo.TalkingRecordInfo=null,t&&(n.sipUser.numberToDial=t),n.sipUser.numberToDial.length>10&&s.findRecordGoDetail(e.sipUser.RecordDetailModuleName,e.sipUser.RecordDetailPhoneFieldName,n.sipUser.numberToDial),a)switch(a.keyCode){case 97:var o=document.getElementsByClassName("number-dig")[0];n.addAnimationToButton(o),n.dialTone(697,1209);break;case 98:var o=document.getElementsByClassName("number-dig")[1];n.addAnimationToButton(o),n.dialTone(697,1336);break;case 99:var o=document.getElementsByClassName("number-dig")[2];n.addAnimationToButton(o),n.dialTone(697,1477);break;case 100:var o=document.getElementsByClassName("number-dig")[3];n.addAnimationToButton(o),n.dialTone(770,1209);break;case 101:var o=document.getElementsByClassName("number-dig")[4];n.addAnimationToButton(o),n.dialTone(770,1336);break;case 102:var o=document.getElementsByClassName("number-dig")[5];n.addAnimationToButton(o),n.dialTone(770,1477);break;case 103:var o=document.getElementsByClassName("number-dig")[6];n.addAnimationToButton(o),n.dialTone(852,1209);break;case 104:var o=document.getElementsByClassName("number-dig")[7];n.addAnimationToButton(o),n.dialTone(770,1477);break;case 105:var o=document.getElementsByClassName("number-dig")[8];n.addAnimationToButton(o),n.dialTone(770,1477);break;case 106:var o=document.getElementsByClassName("number-dig")[9];n.addAnimationToButton(o);break;case 96:var o=document.getElementsByClassName("number-dig")[10];n.addAnimationToButton(o),n.dialTone(770,1477);break;case 96:var o=document.getElementsByClassName("number-dig")[10];n.addAnimationToButton(o),n.dialTone(770,1477);break;case 18:var o=document.getElementsByClassName("number-dig")[11];n.addAnimationToButton(o),n.dialTone(770,1477);break;case 13:var o=document.getElementsByClassName("action-dig");n.dialOrAnswer(o),n.dialTone(770,1477)}},n.stopDialNumber=function(){n.oscillator1&&n.oscillator2&&(n.oscillator1.disconnect(),n.oscillator2.disconnect())},n.mute=function(){s.mute()},n.unmute=function(){s.unmute()},n.hold=function(){s.hold()},n.unhold=function(){s.unhold()},n.transfer=function(e){s.transfer(e)},n.isTransferChange=function(e){n.isTransfer=e}}]);