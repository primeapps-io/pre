"use strict";angular.module("primeapps").controller("WarehouseController",["$rootScope","$scope","$filter","$state","AnalyticsService","mdToast",function(a,s,e,o,r,t){return s.loading=!0,a.workgroup.has_analytics?(r.getWarehouseInfo().then(function(a){s.warehouseInfo=a.data,s.loading=!1}),s.changePassword=function(){s.databasePassword||s.warehouseForm.databasePassword.$setValidity("required",!1),s.warehouseForm.$valid&&(s.changing=!0,r.changeWarehousePassword(s.databasePassword).then(function(){t.success(e("translate")("Setup.Warehouse.PaswordSuccess"))})["catch"](function(a){400===a.status&&s.warehouseForm.databasePassword.$setValidity("password",!1)})["finally"](function(){s.changing=!1}))},void(s.setValid=function(){s.warehouseForm.databasePassword.$setValidity("required",!0),s.warehouseForm.databasePassword.$setValidity("password",!0)})):(t.warning(e("translate")("Common.Forbidden")),o.go("app.dashboard"),void(a.app="crm"))}]);