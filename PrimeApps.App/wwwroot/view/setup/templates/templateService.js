"use strict";angular.module("primeapps").factory("TemplateService",["$rootScope","$http","config","$filter","ModuleService",function(e,t,a,l,r){return{get:function(e){return t.get(a.apiUrl+"template/get/"+e)},getAll:function(e,l,r){return t.get(a.apiUrl+"template/get_all?type="+e+"&moduleName="+(l||"")+"&subject="+(r||""))},getAllList:function(e,l){return t.get(a.apiUrl+"template/get_all_list?type="+e+"&excelType="+l)},create:function(e){return t.post(a.apiUrl+"template/create",e)},update:function(e){return t.put(a.apiUrl+"template/update/"+e.id,e)},"delete":function(e){return t["delete"](a.apiUrl+"template/delete/"+e)},getFields:function(t){var a=angular.copy(t.fields),n=[];a=l("filter")(a,{lookup_type:"!relation"},!0);var p={};p.name="seperator-main",p.label="tr"===e.language?t.label_tr_singular:t.label_en_singular,p.order=0,p.seperator=!0,a.push(p);var o=0;return angular.forEach(a,function(t){if("lookup"===t.data_type&&"relation"!==t.lookup_type){var r=angular.copy(l("filter")(e.modules,{name:t.lookup_type},!0)[0]);if(o+=100,null===r||void 0===r)return;var n={};n.name="seperator-"+r.name,n.order=o,n.seperator=!0,n.label="tr"===e.language?r.label_tr_singular+" ("+t.label_tr+")":r.label_en_singular+" ("+t.label_en+")",a.push(n);var p=angular.copy(r.fields);p=l("filter")(p,{display_list:!0},!0),angular.forEach(p,function(l){"lookup"!==l.data_type&&(l.label="tr"===e.language?l.label_tr:l.label_en,l.labelExt="("+t.label+")",l.name=t.name+"."+l.name,l.order=parseInt(l.order)+o,l.parent_type=t.lookup_type,a.push(l))})}}),angular.forEach(a,function(e){if(!e.deleted&&r.hasFieldDisplayPermission(e)&&e.name&&"lookup"!==e.data_type){var t={};t.name=e.name,t.label=e.label,t.labelExt=e.labelExt,t.order=e.order,t.lookup_type=e.lookup_type,t.seperator=e.seperator,t.multiline_type=e.multiline_type,t.data_type=e.data_type,t.parent_type=e.parent_type,n.push(t)}}),n=l("orderBy")(n,"order")}}}]);