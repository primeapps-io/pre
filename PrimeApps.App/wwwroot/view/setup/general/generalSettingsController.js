"use strict";angular.module("primeapps").controller("GeneralSettingsController",["$rootScope","$scope","$filter","ngToast","GeneralSettingsService","$localStorage","helper","$state",function(e,t,i,a,n,s,l,o){t.hasAdminRight=i("filter")(e.profiles,{id:e.user.profile.id},!0)[0].has_admin_rights,t.hasAdminRight||l.hasCustomProfilePermission("general")||(a.create({content:i("translate")("Common.Forbidden"),className:"warning"}),o.go("app.dashboard")),n.getByKey("module","detail_view_type").then(function(e){e.data&&(t.setting=e.data,t.detailViewType=t.setting.value)}),t.saveDetailViewType=function(){t.savingDetailViewType=!0;var s=function(){e.detailViewType=t.detailViewType,t.savingDetailViewType=!1,a.create({content:i("translate")("Setup.Settings.UpdateSuccessGeneralSettings"),className:"success"})};t.setting?(t.setting.value=t.detailViewType,n.update(t.setting).then(function(){s()})):(t.setting={type:"module",key:"detail_view_type",value:t.detailViewType},n.create(t.setting).then(function(){s()}))}}]);