"use strict";angular.module("primeapps").controller("GeneralSettingsController",["$rootScope","$scope","$filter","GeneralSettingsService","$localStorage","helper","$state","mdToast","AppService",function(e,t,i,a,n,s,l,o,r){t.loading=!1,r.checkPermission().then(function(n){if(n&&n.data){var s=JSON.parse(n.data.profile),r=void 0;if(n.data.customProfilePermissions&&(r=JSON.parse(n.data.customProfilePermissions)),!s.HasAdminRights){var p=void 0;r&&(p=r.permissions.indexOf("general")>-1),p||l.go("app.setup.sms")}}e.breadcrumblist=[{title:i("translate")("Layout.Menu.Dashboard"),link:"#/app/dashboard"},{title:i("translate")("Setup.Nav.System"),link:"#/app/setup/sms"},{title:i("translate")("Common.General")}],t.goUrl=function(e){window.location=e},a.getByKey("module","detail_view_type").then(function(e){e.data&&(t.setting=e.data,t.detailViewType=t.setting.value)}),t.saveDetailViewType=function(){t.loading=!0;var n=function(){e.detailViewType=t.detailViewType,t.loading=!1,o.success(i("translate")("Setup.Settings.UpdateSuccessGeneralSettings"))};t.setting?(t.setting.value=t.detailViewType,a.update(t.setting).then(function(){n()})):(t.setting={type:"module",key:"detail_view_type",value:t.detailViewType},a.create(t.setting).then(function(){n()}))}})}]);