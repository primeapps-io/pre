"use strict";angular.module("primeapps").controller("ModuleLayoutController",["$timeout","$scope","$filter","$element","dragularService",function(n,r,e,o,a){var t,l,s=function(){t&&t.destroy(),l&&l.destroy();for(var n=r.$parent.moduleLayout,e=o.children().eq(0),s=[],c=[],i=0;i<e.children().length;i++){var u=e.children().eq(i);u[0].className.indexOf("subpanel")>-1&&s.push(u)}for(var d=0;d<s.length;d++)for(var f=s[d].children().children().children(),h=0;h<f.length;h++)f[h].className.indexOf("cell-container")>-1&&c.push(f[h]);t=a(e,{scope:r,nameSpace:"rows",containersModel:n.rows,classes:{mirror:"gu-mirror-module",transit:"gu-transit-module"},moves:function(n,r,e){return e.classList.contains("row-handle")}}),l=a(c,{scope:r,nameSpace:"cells",containersModel:function(){var r=[];return angular.forEach(n.rows,function(n){angular.forEach(n.columns,function(n){r.push(n.cells)})}),r}(),classes:{mirror:"gu-mirror-field",transit:"gu-transit-field"},moves:function(n,r,e){return e.classList.contains("cell-handle")}})};n(function(){s()},0),r.$on("dragulardrop",function(e){e.stopPropagation(),n(function(){r.$parent.refreshModule()},0)}),r.$parent.$watch("moduleChange",function(r){r&&n(function(){s()},0)})}]);