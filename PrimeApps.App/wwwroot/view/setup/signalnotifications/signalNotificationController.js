"use strict";angular.module("primeapps").controller("SignalNotificationController",["$rootScope","$scope","SignalNotificationService","helper","mdToast","$filter","$state",function(t,e,a,i,n,l,o){i.hasAdminRights||(n.error(l("translate")("Common.Forbidden")),o.go("app.dashboard")),e.loading=!0,t.breadcrumblist=[{title:l("translate")("Layout.Menu.Dashboard"),link:"#/app/dashboard"},{title:l("translate")("Setup.Nav.Notifications"),link:"#/app/setup/signalnotification"},{title:l("translate")("Setup.Nav.Notifications")}],e.goUrl2=function(t){var a=window.getSelection();0===a.toString().length&&e.showSideModal(t.id,null)},e.getTime=function(t){return kendo.toString(kendo.parseDate(t),"g")};const s=function(a){var i="-";return a.module_id&&(t.processLanguage(a.module),i=t.getLanguageValue(a.module.languages,"label","plural")),'<td class="hide-on-m2"><span>'+t.getLanguageValue(a.languages,"message")+'</span></td><td class="hide-on-m2"><span>'+a.user.full_name+'</span></td><td class="hide-on-m2"><span>'+i+'</span></td><td class="hide-on-m2">'+(a.record_id?'<div class="grid-list-button"> <span>'+l("translate")("Setup.SignalNotification.RecordDetail")+'</span><a href="#/app/record/'+a.module.name+"?id="+a.record_id+'"><i class= "fas fa-external-link-alt"></i></a> </div>':"-")+'</td><td class="hide-on-m2"><span>'+l("translate")("Setup.SignalNotification.TypeEnum."+a.type)+'</span></td><td class="hide-on-m2"><span>'+e.getTime(a.created_at)+'</span></td><td class="hide-on-m2"><span>'+l("translate")("Unread"!==a.status?"Setup.SignalNotification.StatusEnum.Read":"Setup.SignalNotification.StatusEnum.Unread")+'</span></td><td class="hide-on-m2"><span>'+(a.updated_at||"Unread"!==a.status?e.getTime(a.updated_at):"-")+'</td><td class="show-on-m2"><div>'+l("translate")("Setup.SignalNotification.Message")+": <strong>"+t.getLanguageValue(a.languages,"message")+"</strong></div><div>"+l("translate")("Setup.SignalNotification.User")+": <strong>"+a.user.full_name+"</strong></div><div>"+l("translate")("Setup.SignalNotification.Module")+": "+i+"</div><div>"+l("translate")("Setup.SignalNotification.Record")+": "+(a.record_id?'</span><a href="#/app/record/'+a.module.name+"?id="+a.record_id+'"><i class= "fas fa-external-link-alt"></i></a>':"-")+"</div><div>"+l("translate")("Setup.SignalNotification.Status")+": "+l("translate")("Setup.SignalNotification.TypeEnum."+a.type)+"</div><div>"+l("translate")("Setup.SignalNotification.CreatedAt")+": "+e.getTime(a.created_at)+"</div><div>"+l("translate")("Unread"!==a.status?"Setup.SignalNotification.StatusEnum.Read":"Setup.SignalNotification.StatusEnum.Unread")+"</div><div>"+l("translate")("Setup.SignalNotification.UpdatedAt")+": "+(a.updated_at||"Unread"!==a.status?e.getTime(a.updated_at):"-")+"</div></td>"};var d=function(){e.signalNotificationGridOptions={dataSource:{type:"odata-v4",page:1,pageSize:10,serverPaging:!0,serverFiltering:!0,serverSorting:!0,transport:{read:{url:"/api/signal_notification/find",type:"GET",dataType:"json",beforeSend:t.beforeSend()}},requestEnd:function(a){t.processLanguages(a.response.items||[]),e.loading=!1},schema:{data:"items",total:"count",model:{id:"id",fields:{Status:{type:"enums"},Type:{type:"enums"}}}}},scrollable:!1,persistSelection:!0,sortable:!0,noRecords:!0,pageable:{refresh:!0,pageSize:10,pageSizes:[10,25,50,100],buttonCount:5,info:!0},filterable:!0,filter:function(t){if(t.filter&&"Status"!==t.field&&"Type"!==t.field)for(var e=0;e<t.filter.filters.length;e++)t.filter.filters[e].ignoreCase=!0},rowTemplate:function(t){return"<tr>"+s(t)+"</tr>"},altRowTemplate:function(t){return'<tr class="k-alt">'+s(t)+"</tr>"},columns:[{media:"(min-width: 575px)",field:"Message",title:l("translate")("Setup.SignalNotification.Message")},{media:"(min-width: 575px)",field:"User.FullName",title:l("translate")("Setup.SignalNotification.User")},{media:"(min-width: 575px)",field:"Module.LabelEnPlural",title:l("translate")("Setup.SignalNotification.Module")},{media:"(min-width: 575px)",field:"RecordId",title:l("translate")("Setup.SignalNotification.Record")},{media:"(min-width: 575px)",field:"Type",title:l("translate")("Setup.SignalNotification.Type"),values:[{value:"Information",text:l("translate")("Setup.SignalNotification.TypeEnum.Information")},{value:"Error",text:l("translate")("Setup.SignalNotification.TypeEnum.Error")},{value:"Success",text:l("translate")("Setup.SignalNotification.TypeEnum.Success")},{value:"Warning",text:l("translate")("Setup.SignalNotification.TypeEnum.Warning")}]},{media:"(min-width: 575px)",field:"CreatedAt",title:l("translate")("Setup.SignalNotification.CreatedAt"),filterable:{ui:function(t){t.kendoDateTimePicker({format:"{0: dd-MM-yyyy  hh:mm}"})}}},{media:"(min-width: 575px)",field:"Status",title:l("translate")("Setup.SignalNotification.Status"),values:[{text:l("translate")("Setup.SignalNotification.StatusEnum.Read"),value:"Read"},{text:l("translate")("Setup.SignalNotification.StatusEnum.Unread"),value:"Unread"}]},{media:"(min-width: 575px)",field:"UpdatedAt",title:l("translate")("Setup.SignalNotification.UpdatedAt"),filterable:{ui:function(t){t.kendoDateTimePicker({format:"{0: dd-MM-yyyy  hh:mm}"})}}},{title:"Items",media:"(max-width: 575px)"}]}};angular.element(document).ready(function(){d()})}]);