"use strict";angular.module("primeapps").controller("SetupController",["$rootScope","$scope","$filter","$location","helper",function(e,t,r,a,p){t.helper=p,t.selectMenuItem=function(t){e.selectedSetupMenuLink=t.link},t.setMenuItems=function(){if(t.menuItems=[{link:"#/app/setup/settings",label:"Setup.Nav.PersonalSettings",order:1,app:"crm"},{link:"#/app/setup/importhistory",label:"Setup.Nav.Data",order:7,app:"crm"}],p.hasAdminRights()&&!e.preview){var s=[{link:"#/app/setup/users",label:"Setup.Nav.Users",order:2,app:"crm"},{link:"#/app/setup/organization",label:"Setup.Nav.OrganizationSettings",order:3,app:"crm"},{link:"#/app/setup/general",label:"Setup.Nav.System",order:8,app:"crm"}],n=t.menuItems.concat(s);t.menuItems=r("orderBy")(n,"order")}if(!p.hasAdminRights()&&e.customProfilePermissions&&e.customProfilePermissions.length>0)for(var i=0;i<e.customProfilePermissions.length;i++){var o=e.customProfilePermissions[i];if(o.profileId==e.user.profile.id){for(var u=[],l=0;l<o.permissions.length;l++){var c=o.permissions[l];"users"==c&&u.push({link:"#/app/setup/users",label:"Setup.Nav.Users",order:2,app:"crm"}),"general"==c&&u.push({link:"#/app/setup/general",label:"Setup.Nav.System",order:8,app:"crm"}),"organization"==c&&u.push({link:"#/app/setup/organization",label:"Setup.Nav.OrganizationSettings",order:3,app:"crm"})}var m=t.menuItems.concat(u);t.menuItems=r("orderBy")(m,"order")}}var d=a.path();switch(d){case"/app/setup/paymenthistory":d="/app/setup/payment";break;case"/app/setup/profiles":case"/app/setup/profile":d="/app/setup/users";break;case"app/setup/reportForm":d="/app/setup/reports"}var f=r("filter")(t.menuItems,{link:"#"+d})[0];t.selectMenuItem(f?f:t.menuItems[0]),angular.forEach(t.menuItems,function(t){t.active="common"===t.app||t.app===e.app?!0:!1})},kendo.ui.Grid.prototype.options.filterMenuInit=function(e){var t=e.container.find("select:eq(0)").data("kendoDropDownList"),a=null;if(t&&t.dataSource&&(a=r("filter")(t.dataSource.options.data,{value:"contains"},!0)[0]),a){t.value("contains"),t.trigger("change");var p=e.container.find("select:eq(2)").data("kendoDropDownList");p&&p.dataSource&&(p.value("contains"),p.trigger("change"))}},t.setMenuItems(),t.menuItemClass=function(t){return e.selectedSetupMenuLink===t.link?"active":""}}]);