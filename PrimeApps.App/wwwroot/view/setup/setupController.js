"use strict";angular.module("primeapps").controller("SetupController",["$rootScope","$scope","$filter","$location","helper",function(e,p,r,t,s){p.helper=s,p.selectMenuItem=function(p){e.selectedSetupMenuLink=p.link},p.setMenuItems=function(){if(p.menuItems=[{link:"#/app/setup/settings",label:"Setup.Nav.PersonalSettings",order:1,app:"crm"},{link:"#/app/setup/importhistory",label:"Setup.Nav.Data",order:7,app:"crm"}],s.hasAdminRights()&&!e.preview){var a=[{link:"#/app/setup/users",label:"Setup.Nav.Users",order:2,app:"crm"},{link:"#/app/setup/organization",label:"Setup.Nav.OrganizationSettings",order:3,app:"crm"},{link:"#/app/setup/general",label:"Setup.Nav.System",order:8,app:"crm"}],n=p.menuItems.concat(a);p.menuItems=r("orderBy")(n,"order")}if(!s.hasAdminRights()&&e.customProfilePermissions&&e.customProfilePermissions.length>0)for(var i=0;i<e.customProfilePermissions.length;i++){var o=e.customProfilePermissions[i];if(o.profileId==e.user.profile.id){for(var u=[],l=0;l<o.permissions.length;l++){var m=o.permissions[l];"users"==m&&u.push({link:"#/app/setup/users",label:"Setup.Nav.Users",order:2,app:"crm"}),"general"==m&&u.push({link:"#/app/setup/general",label:"Setup.Nav.System",order:8,app:"crm"}),"organization"==m&&u.push({link:"#/app/setup/organization",label:"Setup.Nav.OrganizationSettings",order:3,app:"crm"})}var c=p.menuItems.concat(u);p.menuItems=r("orderBy")(c,"order")}}var f=t.path();switch(f){case"/app/setup/paymenthistory":f="/app/setup/payment";break;case"/app/setup/profiles":case"/app/setup/profile":f="/app/setup/users";break;case"app/setup/reportForm":f="/app/setup/reports"}var d=r("filter")(p.menuItems,{link:"#"+f})[0];p.selectMenuItem(d?d:p.menuItems[0]),angular.forEach(p.menuItems,function(p){p.active="common"===p.app||p.app===e.app?!0:!1})},p.setMenuItems(),p.menuItemClass=function(p){return e.selectedSetupMenuLink===p.link?"active":""}}]);