<div ng-if="userExist()" class="onbehalfoftext">{{getPreviewUser()}} <md-button ng-click="switchBack()">{{'Auth.SwitchBack' | translate}}</md-button></div>
<header class="hide-on-m" ng-class="userExist() ? 'onbehalfof': ''">
    <div class="container-fluid">
        <div class="row justify-content-between align-items-center">
            <div class="col-auto">
                <div class="row align-items-center">
                    <div class="col-auto">
                        <a class="logo" ng-href="{{start_page}}" ng-click="closeSideModal()" title="">
                            <svg ng-if="!appLogo" class="primeapps_logo" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 335 70" style="enable-background:new 0 0 335 70;" xml:space="preserve"> <path class="st0" d="M8.6,4.6h17.1c8.5,0,13.2,5.7,13.2,12.7c0,9.4-8,18.3-18.7,18.3h-6.6l-3.2,17.9H0L8.6,4.6z M21.3,26.8 c3.6,0,6.9-3.3,6.9-8.1c0-3.1-1.7-5.1-4.6-5.1h-6.3l-2.3,13.2H21.3z M42.8,29.4c1.5-8.8,7.5-14.6,16.6-14.6c2,0,4.8,0.4,6.7,0.9 l-2.5,8.6c-1.7-0.5-3.5-0.8-4.8-0.8c-3.2,0-5.4,2.5-5.9,5.9l-4.3,24.2H38.6L42.8,29.4z M100,31.5c1.8-10.4,9.3-15.6,17.1-15.6 c4.1,0,6.9,1.7,8.5,4.8c2.7-3,6.2-4.8,10.3-4.8c7.9,0,13.5,5.1,11.6,15.6l-4.1,23.2h-10.1l3.9-22.5c0.9-5,0-7.5-3-7.5 c-3,0-4.8,3-5.9,8.8l-3.7,21.3h-10.1l3.7-21.3c1-5.7,0.1-8.8-2.8-8.8c-3,0-4.7,2.5-5.6,7.5l-4,22.5H95.9L100,31.5z M155.1,31.9 c1.8-10.4,9-16,18.1-16c6.7,0,12.2,4.6,12.2,11c0,10.8-12.2,12.2-21.5,12.6l-0.1,1c-0.7,3.6,0.8,6.4,5.4,6.4c3.5,0,7.3-1,10.8-2.1 l0.4,8.5c-4.3,1.5-7.9,2.4-12.8,2.4c-10.2,0-15.4-6.6-13.7-16.8L155.1,31.9z M175.2,27.9c0-2.1-1.5-3.3-3.5-3.3c-3,0-5.4,2-6.4,7.1 l-0.2,1.1C170.5,32.5,175.2,31.4,175.2,27.9z" /><path class="st1" d="M208.3,5.8h12l5.8,48.9h-10.4l-1.2-11.8h-13.4L196,54.7h-10.6L208.3,5.8z M213.8,34.3l-0.9-9.3 c-0.2-2.3-0.4-5.5-0.4-8.6c-1.2,3.1-2.4,6.3-3.4,8.6l-4.1,9.3H213.8z M238.4,70h-10.1l6.7-37.6c1.8-10.3,8.5-16.4,18.4-16.4 c8.3,0,14.3,6.1,12.6,16.4l-1.2,7c-2,11.1-8,16.3-17.9,16.3c-2,0-4-0.7-5.7-1.2L238.4,70z M247.9,46.9c3,0,5.7-2,6.7-7.5l1.2-7 c0.9-5-0.8-7.7-3.8-7.7c-3.2,0-6.1,2.7-6.9,7.7l-2.3,13.2C244.4,46.3,246,46.9,247.9,46.9z M276.2,70h-10.1l6.7-37.6 c1.8-10.3,8.5-16.4,18.4-16.4c8.3,0,14.3,6.1,12.6,16.4l-1.2,7c-2,11.1-8,16.3-17.9,16.3c-2,0-4-0.7-5.7-1.2L276.2,70z M285.7,46.9 c3,0,5.7-2,6.7-7.5l1.2-7c0.9-5-0.8-7.7-3.8-7.7c-3.2,0-6.1,2.7-6.9,7.7l-2.3,13.2C282.3,46.3,283.8,46.9,285.7,46.9z M308.2,45.1 c3,1.2,6.1,1.8,9.4,1.8c2.8,0,5.1-1.4,5.1-3.4c0-4.6-12.5-3.7-12.5-13.7c0-7.9,5.7-13.9,15.2-13.9c3.5,0,6.5,0.6,9.7,1.8l-2.8,8.5 c-2.5-0.9-4.9-1.5-7.7-1.5c-2.9,0-3.9,1.5-3.9,3c0,4.5,12.4,4.1,12.4,14.2c0,6.8-4.7,13.7-16.2,13.7c-4,0-7.7-0.9-11.4-2.3 L308.2,45.1z" /><path class="st2" d="M68,51.5c0,0,0.7-39.6,21.4-49.5c2.9,5.3,10,22.8-8.6,53.3C74,53,68,51.5,68,51.5z M69.9,35.5 c0,0-13.5-0.1-9.1,22.4c2.7-2.2,7.3-7.5,7.3-7.5L69.9,35.5z M83.7,64.1c0,0,16.1-15.1,4.5-23.3l-7.4,14.4L83.7,64.1z" /><path class="st3" d="M59.8,60.6l-0.5-2.4c-1.8-9.2-0.9-16,2.5-20.1c3.3-4,7.9-4,8.1-4l1.6,0l-2,17l-0.3,0.3 c-0.2,0.2-4.8,5.4-7.5,7.7L59.8,60.6z M68.2,37.2c-1.2,0.3-2.8,1.1-4.1,2.7c-1.2,1.5-2.1,3.5-2.5,6c-0.4,2.5-0.4,5.6,0.1,9 c2-1.9,4.1-4.4,4.9-5.2L68.2,37.2z M83.1,66.7l-3.8-11.6l8.4-16.5l1.4,1c3,2.1,4.6,4.7,4.8,7.9c0.3,3.6-1.2,7.6-4.4,12.1 c-2.3,3.2-4.6,5.4-4.7,5.5L83.1,66.7z M82.5,55.3l1.9,5.9c0.8-0.9,1.8-2.1,2.7-3.4c3.4-4.8,4-8.2,3.8-10.1 c-0.1-1.8-0.9-3.3-2.2-4.6L82.5,55.3z M81.5,57l-1.1-0.4c-6.7-2.2-12.7-3.7-12.7-3.7l-1.1-0.3l0-1.2c0-0.4,0.2-10.2,3-21.4 c1.6-6.6,3.8-12.3,6.6-16.9C79.5,7.2,83.8,3,88.8,0.6L90.1,0l0.7,1.2c1.9,3.5,4.1,9.4,3.9,17.9C94.4,30.3,90.2,42.7,82.1,56 L81.5,57z M69.6,50.3c1.9,0.5,6,1.7,10.6,3.1c7.4-12.5,11.3-24,11.5-34.4c0.2-6.9-1.4-11.9-2.9-15.2c-3.9,2.2-7.4,5.8-10.2,10.7 c-2.6,4.4-4.7,9.8-6.2,16.2C70.2,39.5,69.7,47.4,69.6,50.3z" /><path class="st4" d="M86.7,26.5L78.4,53l-7-2.2l8.3-26.5c0.6-1.9,2.6-3,4.6-2.4C86.2,22.5,87.3,24.6,86.7,26.5z M85.7,12.3 c-2.2,0-4,1.8-4,4s1.8,4,4,4c2.2,0,4-1.8,4-4S87.9,12.3,85.7,12.3z" /><path class="st5" d="M85.3,27.7l-7.8,25l-5.2-1.6l7.8-25c0.6-1.8,2.2-2.9,3.6-2.5C85.2,24.1,85.9,25.9,85.3,27.7z M85.7,13.3 c-1.6,0-3,1.3-3,3c0,1.6,1.3,3,3,3s3-1.3,3-3C88.7,14.6,87.4,13.3,85.7,13.3z" /></svg>
                            <img ng-src="{{ appLogo ? appLogo:'../images/logo.jpg'}}" alt="" />
                        </a>
                    </div>
                    <div class="col-auto">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item" ng-repeat="breadcrumb in breadcrumblist"
                                    ng-if="breadcrumb.title">
                                    <span ng-if="!breadcrumb.link">{{breadcrumb.title}}</span>
                                    <a href="{{breadcrumb.link}}" ng-if="breadcrumb.link">{{breadcrumb.title}}</a>
                                </li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
            <div class="col-auto">
                <div class="d-inline-flex align-items-center">
                    <div class="helpbar">
                        <md-button ng-if="preview" class="btn btn-secondary md-icon-button" ng-click="reload()" aria-label="{{'Common.Reload' | translate}}">
                            <i ng-class="reloading ? 'fa-spinner fa-spin fa-fw' : 'fa-sync-alt'" class="fas"></i>
                            <md-tooltip md-autohide="true" md-direction="bottom">{{'Common.Reload' | translate}}</md-tooltip>
                        </md-button>
                        <md-button class="md-button btn btn-warning filter-button md-icon-button" style="position: relative;overflow: inherit;" aria-label="{{'Setup.Nav.Notifications' | translate}}" ng-click="notificationShowModal()">
                            <i class="fas fa-bell"></i>
                            <span ng-if="unReadNotificationCount > 0" class="filter-badge">{{unReadNotificationCount}}</span>
                            <md-tooltip md-autohide="true" md-direction="bottom">{{'Setup.Nav.Notifications' | translate}}</md-tooltip>
                        </md-button>
                    </div>
                    <div class="accountbar">
                        <md-menu md-position-mode="target-right target">
                            <md-button aria-label="Account Bar" ng-click="$mdMenu.open()">
                                <span class="d-inline-flex justify-content-center align-items-center">
                                    <img ng-if="user.picture" ng-src="{{userPicture}}" class="img-circle" />
                                    <i ng-if="!user.picture" class="fas fa-user"></i>
                                </span>
                                <span class="md-truncate">
                                    <small>{{'Common.Welcome' | translate}}</small> {{user.first_name}} {{user.last_name}} <i class="fas fa-angle-down"></i>
                                </span>
                            </md-button>
                            <md-menu-content class="md-dense account-dropdown-box">
                                <div class="accountbar-in layout-padding" ng-include="'view/common/account-box.html'"></div>
                                <md-menu-divider style="margin: 0;"></md-menu-divider>
                                <div ng-if="getResult() && !preview">
                                    <div class="blackbg5">
                                        <div ng-if="useUserSettings" class="usermodalboxes whitebox">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <h5><i class="fas fa-globe"></i>  {{'Setup.Settings.Language' | translate}}</h5>
                                                <div>
                                                    <select kendo-drop-down-list
                                                            id="language"
                                                            name="language"
                                                            k-options="languageOptions"
                                                            k-on-change="changeLanguage(selectedLanguage.value)"
                                                            k-ng-model="selectedLanguage"></select>
                                                </div>
                                            </div>
                                        </div>

                                        <section class="collapsible">
                                            <div class="usermodalboxes whitebox">
                                                <button md-prevent-menu-close="false" class="btn collapsed d-flex justify-content-between align-items-center" type="button" data-toggle="collapse"
                                                        data-target="{{'#change_password'}}" aria-expanded="false" ng-click="clear()"
                                                        aria-controls="{{'change_password'}}">
                                                    <h5><i class="fas fa-lock"></i> {{'Setup.Settings.Title2' | translate}}</h5>
                                                    <span classs="collapsed_arrows">
                                                        <i class="fas fa-plus"></i>
                                                        <i class="fas fa-minus"></i>
                                                    </span>
                                                </button>
                                            </div>
                                            <div id="change_password" class="collapsible-body collapse" aria-labelledby="change_password">
                                                <form kendo-validator="passwordForm" ng-submit="changePassword(passwordModel, passwordForm)" autocomplete="off" novalidate ng-cloak class="disable-validation-msg">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label for="current">
                                                                    <span>{{'Setup.Settings.CurrentPassword' | translate}}</span>
                                                                </label>
                                                                <input type="password" id="current" name="current" minlength="6" maxlength="20" class="form-control k-textbox"
                                                                       required ng-model="passwordModel.current" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label for="new_password">
                                                                    <span>{{'Setup.Settings.Password' | translate}}</span>
                                                                </label>
                                                                <input type="password" id="new_password" name="new_password" class="k-textbox" maxlength="20"
                                                                       minlength="6" required
                                                                       ng-model="passwordModel.password"
                                                                       ng-blur="checkLength(passwordModel.password)" />

                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label for="confirm">
                                                                    <span>{{'Setup.Settings.PasswordAgain' | translate}}</span>
                                                                </label>
                                                                <input type="password" id="confirm" name="confirm" class="k-textbox"
                                                                       required ng-model="passwordModel.confirm"
                                                                       ng-blur="passwordNotMatch(passwordModel.password,passwordModel.confirm)" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <md-dialog-actions layout="row">
                                                        <md-button md-prevent-menu-close="false" class="btn btn-primary" type="submit" md-autofocus>
                                                            <i class="fas fa-save"></i>
                                                            {{'Common.Save' | translate}}
                                                        </md-button>
                                                        <span flex></span>
                                                    </md-dialog-actions>
                                                </form>
                                            </div>
                                        </section>
                                        <section class="collapsible">
                                            <div class="usermodalboxes whitebox">
                                                <button md-prevent-menu-close="false" class="btn collapsed d-flex justify-content-between align-items-center" type="button" data-toggle="collapse"
                                                        data-target="{{'#auth'}}" aria-expanded="false" ng-click="generateList($event)"
                                                        aria-controls="{{'auth'}}">
                                                    <h5><i class="fas fa-shield-alt"></i> {{'Auth.Authorizations' | translate}}</h5>
                                                    <span classs="collapsed_arrows">
                                                        <i class="fas fa-plus"></i>
                                                        <i class="fas fa-minus"></i>
                                                    </span>
                                                </button>
                                            </div>

                                            <div id="auth" class="collapsible-body collapse" aria-labelledby="auth">
                                                <div ng-if="authorizedList.length >0">
                                                    <span>{{'Auth.Authorized' | translate}}:</span>
                                                    <div ng-repeat="authorizedUser in authorizedList" class="account-dropdown-box account-dropdown-box2">
                                                        <div class="accountbar-in">
                                                            <div class="account-link d-flex">
                                                                <span>
                                                                    <img ng-if="authorizedUser.picture" ng-src="{{authorizedUser.picture}}" class="img-circle" />
                                                                    <i ng-if="!authorizedUser.picture" class="fas fa-user"></i>
                                                                </span>
                                                                <span class="md-truncate">{{authorizedUser.full_name}}<small class="md-truncate">{{authorizedUser.email}}</small> </span>
                                                            </div>
                                                            <div class="d-inline-flex padding0 onbehalfofbutton">
                                                                <md-button class="md-icon-button btn btn-primary" ng-click="login(authorizedUser)" aria-label="">
                                                                    <i class="fas fa-sign-in-alt"></i>
                                                                </md-button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-if="authorizeList.length >0">
                                                    <span>{{'Auth.Authorize' | translate}}:</span>
                                                    <div ng-repeat="authorizeUser in authorizeList" class="account-dropdown-box account-dropdown-box2">
                                                        <div class="accountbar-in">
                                                            <div class="account-link d-flex">
                                                                <span>
                                                                    <img ng-if="authorizeUser.picture" ng-src="{{authorizeUser.picture}}" class="img-circle" />
                                                                    <i ng-if="!authorizeUser.picture" class="fas fa-user"></i>
                                                                </span>
                                                                <span class="md-truncate">{{authorizeUser.full_name}}<small class="md-truncate">{{authorizeUser.email}}</small> </span>
                                                            </div>
                                                            <div class="d-inline-flex padding0 onbehalfofbutton">
                                                                <md-button md-prevent-menu-close="false" class="md-icon-button btn btn-secondary" ng-click="removeAuthorizeUser(authorizeUser)" aria-label=" {{'Common.Delete' | translate}}">
                                                                    <i class="fa fa-trash"></i><md-tooltip md-autohide="true" md-direction="bottom">{{'Common.Delete' | translate}}</md-tooltip>
                                                                </md-button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <select id="users" name="users" kendo-drop-down-list k-options="authorizationUserOptions" k-ng-model="authorizationUser"></select>
                                            </div>
                                        </section>
                                    </div>
                                </div>
                                <div class="appcolor">
                                    <div class="title"><h5>{{'Common.ThemeColor' | translate}}: </h5></div>
                                    <span ng-click="changeTheme('#1F4688','blue')"
                                          ng-class="appTheme =='blue' ? 'active':''"
                                          style="background: #1F4688;"></span>
                                    <span ng-click="changeTheme('#DC3023','red')"
                                          ng-class="appTheme =='red' ? 'active':''"
                                          style="background: #DC3023;"></span>
                                    <span ng-click="changeTheme('#8E44AD','purple')"
                                          ng-class="appTheme =='purple' ? 'active':''"
                                          style="background: #8E44AD;"></span>
                                    <span ng-click="changeTheme('#19B5FE','light-blue')"
                                          ng-class="appTheme =='light-blue' ? 'active':''"
                                          style="background: #19B5FE;"></span>
                                    <span ng-click="changeTheme('#25A65B','green')"
                                          ng-class="appTheme =='green' ? 'active':''"
                                          style="background: #25A65B;"></span>
                                    <span ng-click="changeTheme('#FFB61E','orange')"
                                          ng-class="appTheme =='orange'  ? 'active':''"
                                          style="background: #FF9D00;"></span>
                                    <span ng-click="changeTheme('#959EA4','gray')"
                                          ng-class="appTheme =='gray' ? 'active':''"
                                          style="background: #4D5C66;"></span>
                                </div>
                            </md-menu-content>
                        </md-menu>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
<div ng-show="globalLoading" class="progress progress-big"> <div class="progress-value"></div> </div>
<ng-include src="'view/common/appMenu.html'"></ng-include>


