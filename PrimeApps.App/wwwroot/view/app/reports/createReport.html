<div class="page panel panel-default setup-panel workflow-form report">
    <div class="panel-body">
        <div ng-if="loading" class="page-loading"><i class="fa fa-sm fa-spinner fa-pulse"></i></div>
        <div ng-show="!loading">
            <form name="reportForm" class="reportCreateForm" ng-submit="save()" autocomplete="off" novalidate>
                <div class="stepwizard">
                    <div class="stepwizard-row">
                        <div class="stepwizard-step" ng-click="validate() ? wizardStep = 0 : false">
                            <span class="btn btn-primary btn-circle">
                                <i class="fa fa-check" ng-show="wizardStep>0"></i>
                                <span ng-show="wizardStep<=0">1</span>
                            </span>
                            <p>{{'Report.ReportInfo' | translate}}</p>
                        </div>
                        <div class="stepwizard-step" ng-click="validate() ? wizardStep = 1 : false">
                            <span class="btn btn-primary btn-circle">
                                <i class="fa fa-check" ng-show="wizardStep>1"></i>
                                <span ng-show="wizardStep<=1">2</span>
                            </span>
                            <p>{{'Report.FilterOptions' | translate}}</p>
                        </div>
                        <div class="stepwizard-step" ng-click="validate() ? wizardStep = 2 : false">
                            <span class="btn btn-primary btn-circle">
                                <i class="fa fa-check" ng-show="wizardStep>2"></i>
                                <span ng-show="wizardStep<=2">3</span>
                            </span>
                            <p>{{'Report.AreaSelection' | translate }}</p>
                        </div>
                        <div class="stepwizard-step" ng-click="validate()  ?  wizardStep = 3 :false">
                            <span class="btn btn-primary btn-circle" ng-disabled="!lastStepClicked || !workflowForm.$valid">
                                <i class="fa fa-check" ng-show="wizardStep>3"></i>
                                <span ng-show="wizardStep<=3">4</span>
                            </span>
                            <p>{{'Report.ReportSummary' | translate}}</p>
                        </div>
                    </div>
                </div>
                <div class="step-info">
                    <!--<p ng-show="wizardStep==0">{{'Setup.Workflow.Info.Step1' | translate}}</p>-->
                    <!--<p ng-show="wizardStep==1">{{'Setup.Workflow.Info.Step2' | translate}}</p>-->
                    <!--<p ng-show="wizardStep==2">{{'Setup.Workflow.Info.Step3' | translate}}</p>-->
                </div>
                <div class="step1" ng-show="wizardStep == 0">
                    <div class="subpanel">
                        <h5 class="subpanel-heading">1- {{'Report.ReportInfo' | translate}}</h5>
                        <div class="subpanel-body">
                            <div class="row form-group"
                                 ng-class="{'has-error': reportForm.$submitted && reportForm.name.$invalid}">
                                <label class="col-sm-3 control-label">
                                    <span class="required-field">*</span>
                                    {{'Report.ReportName' | translate}}:
                                </label>
                                <div class="col-sm-5">
                                    <input name="name" class="form-control" maxlength="50" required ng-disabled="isSystem"
                                           ng-model="reportModel['name_'+user.language]" />
                                </div>
                            </div>
                            <div class="row form-group"
                                 ng-class="{'has-error': reportForm.$submitted && reportForm.module_id.$invalid}">
                                <label class="col-sm-3 control-label"><span class="required-field">*</span> {{'Report.Module' | translate}}:</label>
                                <div class="col-sm-5">
                                    <select class="form-control"
                                            name="module_id"
                                            required
                                            ng-model="reportModel.module_id"
                                            ng-change="selectModule()"
                                            ng-disabled="ReportId || isSystem"
                                            ng-options="o.id as o['label_' + language + '_singular'] for o in modules | filter:{display:'!false'}:true | orderNotZero | orderBy:'order'">
                                        <option value="">{{'Common.Select' | translate}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row form-group"
                                 ng-class="{'has-error': reportForm.$submitted && reportForm.category_id.$invalid}">
                                <label class="col-sm-3 control-label">
                                    <span class="required-field">*</span>
                                    <!--{{'Report.Module' | translate}}-->
                                    {{'Report.ReportCategory' | translate}} :
                                </label>
                                <div class="col-sm-5">
                                    <select class="form-control"
                                            name="category_id"
                                            required
                                            ng-model="reportModel.category_id"
                                            ng-disabled="isSystem"
                                            ng-options="o.id as o['name_'+user.language] for o in reportCategory | orderBy:'order'">
                                        <option value="">{{'Common.Select' | translate}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row form-group"
                                 ng-class="{'has-error': reportForm.$submitted && reportForm.report_type.$invalid}">
                                <label class="col-sm-3 control-label">
                                    <span class="required-field">*</span>
                                    {{'Report.ReportType' | translate}} :
                                </label>
                                <div class="col-sm-9">
                                    <label class="radio-inline listviewReport">
                                        <input name="report_type" required type="radio" style="margin-left: -16px;"
                                               ng-model="reportModel.report_type"
                                               value="tabular"
                                               ng-disabled="isEdit || isSystem">
                                        {{'Report.ListviewReport' | translate}}
                                        <!--<span>Liste raporları verilerinizi daha basit şekilde listelemenizi sağlar.</span>-->
                                    </label>
                                    <label class="radio-inline summaryReport">
                                        <input name="report_type" required type="radio"
                                               ng-model="reportModel.report_type"
                                               value="summary"
                                               style="margin-left: -16px;"
                                               ng-disabled="isEdit || isSystem">
                                        {{'Report.SummaryReport' | translate}}
                                        <!--<span>enizi sağlar.</span>-->
                                    </label>
                                    <label class="radio-inline singleReport">
                                        <input name="report_type" required type="radio"
                                               ng-model="reportModel.report_type"
                                               value="single"
                                               style="margin-left: -16px;"
                                               ng-disabled="isEdit || isSystem">
                                        {{'Report.Single' | translate}}
                                        <!--<span>Özet Raporlar, verilerinizi alt toplamlar, gruplandırmalar ve diğer özet bilgilerle birlikte görüntülemenizi sağlar.</span>-->
                                    </label>

                                </div>
                            </div>
                            <div class="row form-group">
                                <label class="col-sm-3 control-label">Paylaşım Bilgisi:</label>
                                <div class="col-sm-9">
                                    <div class="sharing">
                                        <label>
                                            <input type="radio" ng-model="reportModel.sharing_type" value="me" ng-disabled="isSystem">
                                            {{'View.ShareMe' | translate}}
                                        </label><br />
                                        <label ng-if="user.profile.has_admin_rights">
                                            <input type="radio" ng-model="reportModel.sharing_type" value="everybody" ng-disabled="isSystem">
                                            {{'View.ShareEveryone' | translate}}
                                        </label><br ng-if="user.profile.has_admin_rights" />
                                        <label>
                                            <input type="radio" ng-model="reportModel.sharing_type" value="custom" ng-disabled="isSystem">
                                            {{'View.ShareCustom' | translate}}
                                        </label>
                                    </div>
                                    <div class="shared-users" ng-if="reportModel.sharing_type === 'custom'">
                                        <span class="shared-users-label">{{'View.SharedUsers' | translate}}:</span>
                                        <tags-input name="shares"
                                                    class="shared-users-input"
                                                    ng-model="reportModel.shares"
                                                    ng-disabled="isSystem"
                                                    display-property="full_name"
                                                    key-property="id"
                                                    placeholder="{{'Common.MultiselectPlaceholder' | translate}}"
                                                    replace-spaces-with-dashes="false"
                                                    add-from-autocomplete-only="true">
                                            <auto-complete source="lookupUser($query)"
                                                           min-length="0"
                                                           load-on-focus="true"
                                                           load-on-empty="true"
                                                           max-results-to-show="9999"></auto-complete>

                                        </tags-input>
                                    </div>
                                </div>

                            </div>
                            <div class="form-group"
                                 ng-show="reportForm.$submitted && (reportForm.reportName.$error.required || reportForm.module.$error.required || reportForm.$error.reportType)">
                                <div class="col-sm-offset-3 col-sm-9">
                                    <div class="callout callout-danger">
                                        <p ng-if="reportForm.reportName.$error.required || reportForm.module.$error.required">
                                            {{'Module.RequiredError' | translate}}
                                        </p>
                                        <p ng-if="reportForm.$error.operations">
                                            {{'Report.ReportTypeRequiredError' | translate}}
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="wizard-buttons text-right">
                                <a href="#/app/reports" class="btn btn-custom">{{'Common.Cancel' | translate}}</a>
                                <button type="button" class="btn btn-primary btn-w-sm"
                                        ng-click="step1();">
                                    {{'Common.Next' | translate}} <i class="fa fa-angle-right pull-right" style="margin-top: 3px;"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="step2" ng-show="wizardStep == 1">
                    <div class="subpanel">
                        <h5 class="subpanel-heading">2- {{'Setup.Workflow.FilterCriteria' | translate}}</h5>
                        <div class="subpanel-body">
                            <div ng-if="loadingFilter" clas="page-loading">
                                <i class="fa fa-sm fa-spinner fa-pulse"></i>
                            </div>
                            <div ng-show="!loadingFilter">
                                <table class="filter-table">
                                    <thead>
                                        <tr>
                                            <th style="padding-left: 5px; padding-right: 10px;">{{'View.No' | translate}}</th>
                                            <th>{{'View.Field' | translate}}</th>
                                            <th>{{'View.Operator' | translate}}</th>
                                            <th>{{'View.Value' | translate}}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="filter in reportModel.filterList">
                                            <td>
                                                <span class="filter-no">{{filter.no}}.</span>
                                            </td>
                                            <td>
                                                <select id="field"
                                                        name="field"
                                                        class="form-control ng-animate-disabled"
                                                        ng-options="o as o['label_' + language] for o in module.fields | filter:{deleted:'!true'} | orderBy:'order' track by o.name"
                                                        ng-change="filter.value = null; filter.operator = null;  filter.disabled = false; filter.costumeDate =null "
                                                        ng-model="filter.field"
                                                        ng-disabled="isSystem">
                                                    <option value="">{{'Common.Select' | translate}}</option>
                                                </select>
                                            </td>
                                            <td>
                                                <select id="operator"
                                                        name="operator"
                                                        class="form-control ng-animate-disabled"
                                                        ng-options="o as o.label[language] for o in filter.field.operators | orderBy:'order' track by o.order"
                                                        ng-change="operatorChanged(filter.field, $index)"
                                                        ng-model="filter.operator"
                                                        ng-if="!filter.field.lookupModulePrimaryField  || filter.field.lookup_type ==='users'"
                                                        ng-disabled="isSystem">
                                                    <option value="">{{'Common.Select' | translate}}</option>
                                                </select>
                                                <select class="form-control ng-animate-disabled"
                                                        ng-options="o as o.label[language] for o in filter.field.lookupModulePrimaryField.operators | orderBy:'order' track by o.order"
                                                        ng-change="operatorChanged(filter.field, $index)"
                                                        ng-model="filter.operator"
                                                        ng-if="filter.field.lookupModulePrimaryField && filter.field.lookup_type !='users'"
                                                        ng-disabled="isSystem">
                                                    <option value="">{{'Common.Select' | translate}}</option>
                                                </select>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control ng-animate-disabled"
                                                       ng-model="filter.value"
                                                       ng-disabled="filter.disabled || isSystem"
                                                       maxlength="100"
                                                       ng-if="!filter.field.lookupModulePrimaryField ? (filter.field.data_type === 'text_single' || filter.field.data_type === 'text_multi' || filter.field.data_type === 'email' || filter.field.data_type === undefined) : (filter.field.lookupModulePrimaryField.data_type === 'text_single' || filter.field.lookupModulePrimaryField.data_type === 'text_multi' || filter.field.lookupModulePrimaryField.data_type === 'email' || filter.field.lookupModulePrimaryField.data_type === undefined)&& filter.field.lookup_type !='users'" />

                                                <input type="text"
                                                       class="form-control ng-animate-disabled"
                                                       ng-model="filter.value"
                                                       ng-disabled="filter.disabled || isSystem"
                                                       maxlength="50"
                                                       numeric
                                                       ng-if="!filter.field.lookupModulePrimaryField ? (filter.field.data_type === 'number' || filter.field.data_type === 'number_auto') : (filter.field.lookupModulePrimaryField.data_type === 'number' || filter.field.lookupModulePrimaryField.data_type === 'number_auto')" />

                                                <input type="text"
                                                       class="form-control ng-animate-disabled"
                                                       ng-model="filter.value"
                                                       ng-disabled="filter.disabled || isSystem"
                                                       maxlength="19"
                                                       places="filter.field.decimal_places || 2"
                                                       number-decimal
                                                       ng-if="!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'number_decimal' : filter.field.lookupModulePrimaryField.data_type === 'number_decimal'" />

                                                <input type="text"
                                                       class="form-control ng-animate-disabled"
                                                       ng-model="filter.value"
                                                       ng-disabled="filter.disabled || isSystem"
                                                       maxlength="50"
                                                       places="filter.field.decimal_places || 2"
                                                       currency-symbol="filter.field.currency_symbol"
                                                       number-currency
                                                       ng-if="!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'currency' : filter.field.lookupModulePrimaryField.data_type === 'currency'" />

                                                <select class="form-control ng-animate-disabled pull-left"
                                                        style="margin-right: 8px;"
                                                        ng-model="filter.costumeDate"
                                                        ng-change="dateChange(filter)"
                                                        ng-options="o.value as o.label for o in costumeDateFilter"
                                                        ng-if="!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'date_time' || filter.field.data_type === 'date'  : filter.field.lookupModulePrimaryField.data_type === 'date_time' || filter.field.data_type === 'date'"
                                                        ng-disabled="isSystem">
                                                    <option value="">{{'Common.Select' | translate}}</option>
                                                </select>
                                                <input type="number"
                                                       style="width: 50px;float: left; margin-right: 6px;"
                                                       class="form-control ng-animate-disabled "
                                                       ng-model="filter.valueX"
                                                       ng-change="nextPrevDateChange(filter)"
                                                       ng-disabled="isSystem"
                                                       ng-class="{'has-error': viewForm.$submitted && viewForm[filter.field.name+$index+'valueX'].$invalid}"
                                                       required
                                                       name="{{filter.field.name+$index+'valueX'}}"
                                                       ng-if="(!filter.field.lookupModulePrimaryField || filter.field.data_type === 'date_time' || filter.field.lookupModulePrimaryField.data_type === 'date') && (filter.costumeDate==='costumeN' || filter.costumeDate==='costumeW' || filter.costumeDate==='costumeM' || filter.costumeDate==='costumeY')">
                                                <select class="form-control ng-animate-disabled pull-left"
                                                        style="margin-right: 8px; width: 90px;"
                                                        ng-class="{'has-error': viewForm.$submitted && viewForm[filter.field.name+$index+'nextprevdatetype'].$invalid}"
                                                        required
                                                        name="{{filter.field.name+$index+'nextprevdatetype'}}"
                                                        ng-model="filter.nextprevdatetype"
                                                        ng-disabled="isSystem"
                                                        ng-change="nextPrevDateTypeChange(filter)"
                                                        ng-options="o.value as o.label for o in dateFormat"
                                                        ng-if="(!filter.field.lookupModulePrimaryField || filter.field.data_type === 'date_time' || filter.field.lookupModulePrimaryField.data_type === 'date') && (filter.costumeDate==='costumeN' || filter.costumeDate==='costumeW' || filter.costumeDate==='costumeM' || filter.costumeDate==='costumeY')">
                                                    <option value="">{{'Common.Select' | translate}}</option>
                                                </select>
                                                <span style="float: left;padding-top: 6px;"
                                                      ng-if="(!filter.field.lookupModulePrimaryField || filter.field.data_type === 'date_time' || filter.field.lookupModulePrimaryField.data_type === 'date')&& (filter.costumeDate==='costumeN' || filter.costumeDate==='costumeW' || filter.costumeDate==='costumeM' || filter.costumeDate==='costumeY')">
                                                    {{filter.valueX >0 ? ('View.After' | translate) : 'View.Before' | translate   }}
                                                </span>

                                                <input type="text"
                                                       class="form-control ng-animate-disabled hide"
                                                       ng-model="filter.value"
                                                       ng-disabled="isSystem"
                                                       ng-if="(!filter.field.lookupModulePrimaryField || filter.field.data_type === 'date_time' || filter.field.lookupModulePrimaryField.data_type === 'date') && (filter.costumeDate==='costumeN' || filter.costumeDate==='costumeW' || filter.costumeDate==='costumeM' || filter.costumeDate==='costumeY')">

                                                <input type="text"
                                                       class="form-control ng-animate-disabled"
                                                       ng-model="filter.value"
                                                       ng-disabled="filter.disabled || isSystem"
                                                       data-autoclose="1"
                                                       data-date-type="iso"
                                                       data-min-date="{{(filter.field.validation.min ? (filter.field.validation.min === 'today' ? currentDayMin : filter.field.validation.min) : undefined)}}"
                                                       data-max-date="{{(filter.field.validation.max ? (filter.field.validation.max === 'today' ? currentDayMax : filter.field.validation.max) : undefined)}}"
                                                       data-icon-left="fa fa-chevron-left"
                                                       data-icon-right="fa fa-chevron-right"
                                                       data-placement="bottom-right"
                                                       bs-datepicker
                                                       ng-if="(!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'date' : filter.field.lookupModulePrimaryField.data_type === 'date' )&& filter.costumeDate==='costume'">

                                                <div class="clearfix datetime-pick"
                                                     ng-if="(!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'date_time' : filter.field.lookupModulePrimaryField.data_type === 'date_time') && filter.costumeDate==='costume'">
                                                    <input type="text"
                                                           class="form-control ng-animate-disabled date-pick"
                                                           ng-model="filter.value"
                                                           ng-change="dateTimeChanged(filter.field)"
                                                           ng-disabled="filter.disabled || isSystem"
                                                           placeholder="{{'Common.Date' | translate}}"
                                                           data-autoclose="1"
                                                           data-date-type="iso"
                                                           data-min-date="{{(filter.field.validation.min ? (filter.field.validation.min === 'today' ? currentDayMin : filter.field.validation.min) : undefined)}}"
                                                           data-max-date="{{(filter.field.validation.max ? (filter.field.validation.max === 'today' ? currentDayMax : filter.field.validation.max) : undefined)}}"
                                                           data-icon-left="fa fa-chevron-left"
                                                           data-icon-right="fa fa-chevron-right"
                                                           data-placement="bottom-right"
                                                           bs-datepicker>
                                                    <input type="text"
                                                           class="form-control ng-animate-disabled time-pick"
                                                           ng-model="filter.value"
                                                           ng-disabled="!filter.value || isSystem"
                                                           placeholder="{{'Common.Time' | translate}}"
                                                           data-autoclose="1"
                                                           data-time-type="iso"
                                                           data-icon-up="fa fa-chevron-up"
                                                           data-icon-down="fa fa-chevron-down"
                                                           data-length="1"
                                                           data-minute-step="10"
                                                           data-arrow-behavior="picker"
                                                           data-placement="bottom-right"
                                                           bs-timepicker>
                                                </div>

                                                <input type="text"
                                                       class="form-control ng-animate-disabled"
                                                       ng-model="filter.value"
                                                       ng-disabled="filter.disabled || isSystem"
                                                       placeholder="{{'Common.Time' | translate}}"
                                                       data-autoclose="1"
                                                       data-time-type="iso"
                                                       data-icon-up="fa fa-chevron-up"
                                                       data-icon-down="fa fa-chevron-down"
                                                       data-length="1"
                                                       data-minute-step="10"
                                                       data-arrow-behavior="picker"
                                                       data-placement="bottom-right"
                                                       bs-timepicker
                                                       ng-if="!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'time' : filter.field.lookupModulePrimaryField.data_type === 'time'">

                                                <select class="form-control ng-animate-disabled"
                                                        ng-model="filter.value"
                                                        ng-disabled="filter.disabled || isSystem"
                                                        ng-options="o as o.label[language] for o in modulePicklists[!filter.field.lookupModulePrimaryField ? filter.field.picklist_id : filter.field.lookupModulePrimaryField.picklist_id] track by o.id"
                                                        ng-if="!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'picklist' : filter.field.lookupModulePrimaryField.data_type === 'picklist'">
                                                    <option value="">{{'Common.Select' | translate}}</option>
                                                </select>


                                                <tags-input class="ng-animate-disabled"
                                                            ng-model="filter.value"
                                                            display-property="labelStr"
                                                            key-property="id"
                                                            placeholder="{{'Common.MultiselectPlaceholder' | translate}}"
                                                            replace-spaces-with-dashes="false"
                                                            add-from-autocomplete-only="true"
                                                            ng-disabled="filter.disabled || isSystem"
                                                            ng-if="!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'multiselect' : filter.field.lookupModulePrimaryField.data_type === 'multiselect'">
                                                    <auto-complete source="multiselect($query, filter.field)"
                                                                   min-length="0"
                                                                   load-on-focus="true"
                                                                   load-on-empty="true"
                                                                   max-results-to-show="9999"></auto-complete>
                                                </tags-input>

                                                <tags-input class="ng-animate-disabled"
                                                            ng-model="filter.value"
                                                            display-property="full_name"
                                                            key-property="id"
                                                            max-tags="1"
                                                            placeholder="{{'Common.Search' | translate}}"
                                                            replace-spaces-with-dashes="false"
                                                            add-from-autocomplete-only="true"
                                                            ng-disabled="filter.disabled || isSystem"
                                                            ng-if="!filter.field.lookupModulePrimaryField ? (filter.field.data_type === 'lookup' && filter.field.lookup_type === 'users') :  filter.field.lookup_type === 'users'">
                                                    <auto-complete source="lookupUser($query, 'logged_in_user')"
                                                                   min-length="0"
                                                                   load-on-focus="true"
                                                                   load-on-empty="true"
                                                                   max-results-to-show="9999"></auto-complete>
                                                </tags-input>

                                                <input type="text"
                                                       class="form-control ng-animate-disabled"
                                                       ng-model="filter.value"
                                                       ng-disabled="filter.disabled || isSystem"
                                                       maxlength="100"
                                                       ng-if="!filter.field.lookupModulePrimaryField ? (filter.field.data_type === 'lookup' && filter.field.lookup_type != 'users') : (filter.field.lookupModulePrimaryField.data_type === 'lookup' && filter.lookupModulePrimaryField.field.lookup_type != 'users')" />

                                                <select class="form-control ng-animate-disabled"
                                                        ng-model="filter.value"
                                                        ng-disabled="isSystem"
                                                        ng-options="o as o.label[language] for o in modulePicklists['yes_no'] track by o.id"
                                                        ng-if="!filter.field.lookupModulePrimaryField ? filter.field.data_type === 'checkbox' : filter.field.lookupModulePrimaryField.data_type === 'checkbox'">
                                                    <option value="">{{'Common.Select' | translate}}</option>
                                                </select>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="wizard-buttons text-right">
                                <a href="#/app/reports" class="btn btn-custom">{{'Common.Cancel' | translate}}</a>
                                <button type="button" class="btn btn-primary btn-w-sm" ng-click="wizardStep = 0">{{'Common.Previous' | translate}} <i class="fa fa-angle-left pull-left" style="margin-top: 3px;"></i></button>
                                <button type="button" class="btn btn-primary btn-w-sm"
                                        ng-click="step2()">
                                    {{'Common.Next' | translate}} <i class="fa fa-angle-right pull-right" style="margin-top: 3px;"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="step3" ng-if="wizardStep == 2">
                    <div class="subpanel">
                        <h5 class="subpanel-heading">3- {{'Report.AreaSelection' | translate}}</h5>
                        <div class="subpanel-body  custom-body view-area-panel"
                             ng-if="reportModel.report_type=='tabular'"
                             style="padding: 0;">
                            <div class="sub-tab-body" ng-init="setFields()">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="subpanel">
                                            <h5 class="subpanel-heading">{{'Report.ViewedArea' | translate}}</h5>
                                            <div class="subpanel-body">
                                                <div class="row row-custom">
                                                    <div class="col-sm-12">
                                                        <div class="fields-header">
                                                            <span class="title-left">{{'View.AvailableFields' | translate}}</span>
                                                            <span class="title-right">{{'View.SelectedFields' | translate}}</span>
                                                        </div>
                                                        <div class="fields clearfix">
                                                            <div id="availableFields" class="container-left">
                                                                <div ng-repeat="field in fields.availableFields"
                                                                     ng-class="{'dragable':!field.seperator, 'seperator':field.seperator, 'seperator-main':field.name === 'seperator-main'}">
                                                                    {{field.label}} <i class="fa fa-arrows" ng-if="!field.seperator"></i>
                                                                </div>
                                                            </div>
                                                            <div class="container-middle">
                                                                <i class="fa fa-exchange"></i>
                                                            </div>
                                                            <div id="selectedFields" class="container-right">
                                                                <div ng-repeat="field in fields.selectedFields" class="dragable">{{field.label + ' ' + field.labelExt}} <i class="fa fa-arrows"></i></div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="subpanel-body  custom-body group-area" ng-if="reportModel.report_type=='summary'"
                             style="padding: 0;">
                            <div class="sub-tab-body">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="subpanel">
                                            <h5 class="subpanel-heading">{{'Report.GroupArea' | translate}}</h5>
                                            <div class="subpanel-body">
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <div class="form-group"
                                                             ng-class="{'has-error': reportForm.$submitted && reportForm.group_field.$invalid}">
                                                            <label>
                                                                <span class="required-field">*</span>{{'Report.GroupArea' | translate}}:
                                                            </label>
                                                            <select class="form-control"
                                                                    name="group_field"
                                                                    ng-model="reportModel.group_field"
                                                                    ng-change="changeGroupField()"
                                                                    required
                                                                    ng-disabled="isSystem"
                                                                    ng-options="o.name as o.label for o in fields.availableFields">
                                                                <option value="">
                                                                    {{'Common.Select' | translate}}
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="form-group">
                                                            <label for="sel2">
                                                                {{'Report.OrderArea' | translate}}:
                                                            </label>
                                                            <select class="form-control"
                                                                    ng-model="reportModel.sort_field" id="sel2"
                                                                    ng-disabled="isSystem"
                                                                    ng-options="o.name as o.label for o in fields.availableFields">
                                                                <option value="">
                                                                    {{'Common.Select' | translate}}
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="subpanel-body custom-body" style="padding: 0;">
                            <div class="sub-tab-body">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="subpanel">
                                            <h5 class="subpanel-heading">
                                                {{'Report.CalculationFields' | translate}}
                                            </h5>
                                            <div class="subpanel-body">
                                                <div class="row row-custom">
                                                    <div class="col-sm-12">
                                                        <label style="margin-bottom: 15px;" ng-show="">
                                                            Not :Eğer
                                                            herhangi bir seçim
                                                            alanı seçilmes kayıt saysını
                                                            hesaplama alana olarak setlenir
                                                        </label>
                                                        <br>

                                                        <table class="table calculation-area-table">
                                                            <thead>
                                                                <tr>
                                                                    <th style="text-align: center;"></th>
                                                                    <th style="text-align: center;">
                                                                        {{'Report.sum' | translate}}
                                                                    </th>
                                                                    <th style="text-align: center;">
                                                                        {{'Report.avg' | translate}}
                                                                    </th>
                                                                    <th style="text-align: center;">
                                                                        {{ 'Report.min' | translate }}
                                                                    </th>
                                                                    <th style="text-align: center;">
                                                                        {{'Report.max' | translate }}
                                                                    </th>
                                                                    <th style="text-align: center;">

                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr ng-repeat="field in numberField">
                                                                    <td class="text-center"> {{field.label}}</td>
                                                                    <td class="text-center">
                                                                        <input type="radio" ng-model="field.Aggregation"
                                                                               ng-click="aggregationChange({field:field.name,aggregation_type:'sum'},field)"
                                                                               value="sum-{{field.name}}"
                                                                               name="{{ reportModel.report_type === 'summary' || reportModel.report_type ===  'single' ? module.id : field.name }}"
                                                                               ng-disabled="isSystem"
                                                                               style="">
                                                                    </td>
                                                                    <td class="text-center">
                                                                        <input type="radio" ng-model="field.Aggregation"
                                                                               value="avg-{{field.name}}"
                                                                               ng-click="aggregationChange({field:field.name,aggregation_type:'avg'},field)"
                                                                               name="{{ reportModel.report_type ===  'summary' || reportModel.report_type ===  'single' ? module.id : field.name }}"
                                                                               ng-disabled="isSystem"
                                                                               style="">
                                                                    </td>
                                                                    <td class="text-center">
                                                                        <input type="radio" ng-model="field.Aggregation"
                                                                               value="min-{{field.name}}"
                                                                               ng-click="aggregationChange({field:field.name,aggregation_type:'min'},field)"
                                                                               name="{{ reportModel.report_type ===  'summary' || reportModel.report_type ===  'single' ? module.id : field.name }}"
                                                                               ng-disabled="isSystem"
                                                                               style="">
                                                                    </td>
                                                                    <td class="text-center">
                                                                        <input type="radio" ng-model="field.Aggregation"
                                                                               value="max-{{field.name}}"
                                                                               ng-click="aggregationChange({field:field.name,aggregation_type:'max'},field)"
                                                                               name="{{ reportModel.report_type ===  'summary' || reportModel.report_type ===  'single' ? module.id : field.name }}"
                                                                               ng-disabled="isSystem"
                                                                               style="">
                                                                    </td>
                                                                    <td class="text-center" ng-click="removeSelectAggregation(field)">
                                                                        <input type="button" class="btn btn-custom" ng-click="removeSelectAggregation(field)" ng-disabled="isSystem" value="{{'Report.RemoveSelection' | translate }}" />
                                                                    </td>

                                                                </tr>
                                                                <tr ng-if="reportModel.report_type !=  'tabular'">
                                                                    <td class="text-center">
                                                                        {{'Report.count' | translate}}
                                                                    </td>
                                                                    <td colspan="5" class="text-center">
                                                                        <input type="radio"
                                                                               ng-model="countField.Aggregation"
                                                                               ng-click="aggregationChange({field:'created_by',aggregation_type:'count'})"
                                                                               value="count-created_by"
                                                                               name="{{ reportModel.report_type ===  'summary' || reportModel.report_type ===  'single' ? module.id : 'created_at' }}"
                                                                               ng-disabled="isSystem"
                                                                               style="">
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="subpanel-body  custom-body group-area" ng-if="reportModel.report_type=='summary'"
                             style="padding: 0;">
                            <div class="sub-tab-body">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="subpanel">
                                            <h5 class="subpanel-heading">{{'Report.Chart.Name' | translate}}</h5>
                                            <div class="subpanel-body">
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <div class="form-group"
                                                             ng-class="{'has-error': reportForm.$submitted && reportForm.chartTypes.$invalid}">
                                                            <label for="chartTypes">
                                                                {{'Report.Chart.Type' | translate}} :
                                                            </label>
                                                            <select class="form-control" id="chartTypes"
                                                                    ng-model="reportModel.chart.type"
                                                                    name="chartTypes"
                                                                    required
                                                                    ng-disabled="isSystem"
                                                                    ng-options="o.name as o.label for o in chartTypes">
                                                                <option value="">
                                                                    {{'Common.Select' | translate}}
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="form-group"
                                                             ng-class="{'has-error': reportForm.$submitted && reportForm.xaxis_name.$invalid}">
                                                            <label for="xaxis_name">
                                                                {{'Report.Chart.XaxisName' | translate}}:
                                                            </label>
                                                            <input class="form-control"
                                                                   id="xaxis_name"
                                                                   required
                                                                   ng-disabled="isSystem"
                                                                   ng-model="reportModel.chart['xaxis_name_'+user.language]"
                                                                   name="xaxis_name" />

                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="form-group"
                                                             ng-class="{'has-error': reportForm.$submitted && reportForm.yaxis_name.$invalid}">
                                                            <label for="yaxis_name">
                                                                {{'Report.Chart.YaxisName' | translate}}:
                                                            </label>
                                                            <input class="form-control"
                                                                   id="yaxis_name"
                                                                   required
                                                                   ng-disabled="isSystem"
                                                                   ng-model="reportModel.chart['yaxis_name_'+user.language]"
                                                                   name="yaxis_name" />
                                                        </div>

                                                    </div>

                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>

                        </div>

                        <div class="subpanel-body  custom-body group-area" ng-if="reportModel.report_type=='single'"
                             style="padding: 0;">
                            <div class="sub-tab-body">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="subpanel">
                                            <h5 class="subpanel-heading">{{'Report.Widget.Name' | translate}}</h5>
                                            <div class="subpanel-body">
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <div class="form-group"
                                                             ng-class="{'has-error': reportForm.$submitted && reportForm.yaxis_name.$invalid}">
                                                            <label>
                                                                {{'Report.Widget.Icon' | translate}}:
                                                            </label>

                                                            <button type="button" data-container="form"
                                                                    class="form-control btn btn-default"
                                                                    data-placeholder="{{'Common.Icon' | translate}}-"
                                                                    ng-model="reportModel.widget.icon"
                                                                    data-html="1" data-toggle="true"
                                                                    bs-options="icon.value as icon.label for icon in icons"
                                                                    ng-disabled="isSystem"
                                                                    bs-select>
                                                                <span class="caret"></span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="form-group"
                                                             ng-class="{'has-error': reportForm.$submitted && reportForm.colorpicker.$invalid}">
                                                            <label>
                                                                {{'Report.Widget.Color' | translate}}:
                                                            </label>
                                                            <input name="colorpicker" type="color"
                                                                   class="form-control"
                                                                   ng-disabled="isSystem"
                                                                   required
                                                                   ng-model="reportModel.widget.color">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>
                    <div class="wizard-buttons text-right">
                        <a href="#/app/reports" class="btn btn-custom">
                            {{'Common.Cancel' | translate}}
                        </a>
                        <button type="button" class="btn btn-primary btn-w-sm" ng-click="stepBack(1)">
                            {{'Common.Previous' | translate}} <i class="fa fa-angle-left pull-left"
                                                                 style="margin-top: 3px;"></i>
                        </button>
                        <button type="button" class="btn btn-primary btn-w-sm"
                                ng-click="step3()">
                            {{'Common.Next' | translate}} <i class="fa fa-angle-right pull-right"
                                                             style="margin-top: 3px;"></i>
                        </button>
                    </div>
                </div>
                <div class="step4" ng-show="wizardStep == 3">
                    <div class="subpanel">
                        <h5 class="subpanel-heading">4- {{'Report.ReportSummary' | translate}} </h5>
                        <div class="subpanel-body  custom-body view-area-panel"
                             style="padding: 0;">
                            <div class="sub-tab-body">
                                <div class="row ">
                                    <label class="col-sm-3 control-label">
                                        {{'Report.ReportName' | translate}}:
                                    </label>
                                    <div class="col-sm-5">
                                        <span> {{ reportModel['name_'+user.language] }} </span>
                                    </div>
                                </div>
                                <div class="row ">
                                    <label class="col-sm-3 control-label">
                                        {{'Report.Module' | translate}}:
                                    </label>
                                    <div class="col-sm-5">
                                        <span> {{ module['label_'+language+'_plural'] }} </span>
                                    </div>
                                </div>

                                <div class="row ">
                                    <label class="col-sm-3 control-label">
                                        {{'Report.ReportType' | translate}}:
                                    </label>
                                    <div class="col-sm-5">
                                        <span> {{ reportModel.report_type  === 'summary' ? ('Report.SummaryReport' | translate) :  reportModel.report_type  === 'single' ? ('Report.Single' | translate) :('Report.ListviewReport' | translate) }} </span>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="wizard-buttons text-right">
                        <a href="#/app/reports" class="btn btn-custom">{{'Common.Cancel' | translate}}</a>
                        <button type="button" class="btn btn-primary btn-w-sm" ng-click="wizardStep = 2">
                            <i class="fa fa-angle-left pull-left" style="margin-top: 3px;"></i>{{'Common.Previous' | translate}}
                        </button>
                        <button type="submit" class="btn btn-primary btn-w-lg" ladda="saving" ng-disabled="isSystem">
                            <i class="fa fa-check-circle pull-left"></i> {{'Common.Save' | translate}}
                        </button>
                    </div>
                </div>
            </form>

        </div>
    </div>
</div>