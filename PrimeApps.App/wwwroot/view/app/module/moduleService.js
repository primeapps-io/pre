angular.module("primeapps").factory("ModuleService",["$rootScope","$http","config","$q","$filter","$cache","$window","helper","operations","ngTableParams","icons","dataTypes","operators","activityTypes","transactionTypes","yesNo","components",function($rootScope,$http,config,$q,$filter,$cache,$window,helper,operations,ngTableParams,icons,dataTypes,operators,activityTypes,transactionTypes,yesNo,components){return{myAccount:function(){return $http.post(config.apiUrl+"User/MyAccount",{})},getAllUser:function(){return $http.get(config.apiUrl+"User/get_all")},getUserLicenseStatus:function(){return $http.post(config.apiUrl+"License/GetUserLicenseStatus",{})},addUser:function(e){return $http.post(config.apiUrl+"User/add_user",e)},deleteUser:function(e,a){return $http.post(config.apiUrl+"Instance/Dismiss",{UserID:e.ID,EMail:e.email,HasAccount:e.hasAccount,InstanceID:a})},getUserEmailControl:function(e){return $http.get(config.apiUrl+"User/get_user_email_control?Email="+e)},get:function(e){return $http.get(config.apiUrl+"template/get/"+e)},create:function(e){return $http.post(config.apiUrl+"module/create",e)},update:function(e,a){return $http.put(config.apiUrl+"module/update/"+a,e)},"delete":function(e){return $http["delete"](config.apiUrl+"module/delete/"+e)},createModuleRelation:function(e,a){return $http.post(config.apiUrl+"module/create_relation/"+a,e)},updateModuleRelation:function(e,a){return $http.put(config.apiUrl+"module/update_relation/"+a+"/"+e.id,e)},deleteModuleRelation:function(e){return $http["delete"](config.apiUrl+"module/delete_relation/"+e)},createModuleDependency:function(e,a){return $http.post(config.apiUrl+"module/create_dependency/"+a,e)},updateModuleDependency:function(e,a){return $http.put(config.apiUrl+"module/update_dependency/"+a+"/"+e.id,e)},deleteModuleDependency:function(e){return $http["delete"](config.apiUrl+"module/delete_dependency/"+e)},getRecord:function(e,a,l){return $http.get(config.apiUrl+"record/get/"+e+"/"+a,{ignoreNotFound:l})},findRecords:function(e,a){return $rootScope.activeModuleName=null,("current_accounts"===e||"kasa_hareketleri"===e||"banka_hareketleri"===e||"stock_transactions"===e)&&("stock_transactions"===e&&a.sort_field?a.sort_field="transaction_date,id":"stock_transactions"!==e&&a.sort_field&&(a.sort_field+=",id")),$http.post(config.apiUrl+"record/find/"+e,a)},insertRecord:function(e,a){return $http.post(config.apiUrl+"record/create/"+e+"?timezone_offset="+-1*(new Date).getTimezoneOffset(),a)},updateRecord:function(e,a){return delete a.process_id,delete a.process_status,delete a.process_status_order,delete a.operation_type,delete a.process_request_updated_by,delete a.process_request_updated_at,delete a.freeze,$http.put(config.apiUrl+"record/update/"+e+"?timezone_offset="+-1*(new Date).getTimezoneOffset(),a)},deleteRecord:function(e,a){if($rootScope.branchAvailable&&"calisanlar"===e){var l=$q.defer(),i=this;return this.getRecord(e,a).then(function(t){if(t.data){var r=$filter("filter")($rootScope.workgroup.users,{email:t.data.e_posta},!0)[0];r&&i.deleteUser(r,$rootScope.workgroup.tenant_id),$http["delete"](config.apiUrl+"record/delete/"+e+"/"+a).then(function(e){return l.resolve(e),l.promise})}}),l.promise}return $http["delete"](config.apiUrl+"record/delete/"+e+"/"+a)},addRelations:function(e,a,l){return $http.post(config.apiUrl+"record/add_relations/"+e+"/"+a,l)},deleteRelation:function(e,a,l){return $http({method:"DELETE",url:config.apiUrl+"record/delete_relation/"+e+"/"+a,data:l,headers:{"Content-type":"application/json;charset=utf-8"}})},insertRecordBulk:function(e,a){for(var l=0;l<a.length;l++){a[l]}return $http.post(config.apiUrl+"record/create_bulk/"+e,a)},deleteRecordBulk:function(e,a){return $http({method:"DELETE",url:config.apiUrl+"record/delete_bulk/"+e,data:a,headers:{"Content-type":"application/json;charset=utf-8"}})},updateRecordBulk:function(e,a){return delete a.record.shared_users_edit,delete a.record.shared_users,delete a.record.shared_user_groups_edit,delete a.record.shared_user_groups,delete a.record.shared_read,$http({method:"Put",url:config.apiUrl+"record/update_bulk/"+e,data:a,headers:{"Content-type":"application/json;charset=utf-8"}})},findPicklist:function(e){return $http.post(config.apiUrl+"picklist/find",e)},setViewState:function(e,a,l){return l&&(e.id=l),e.module_id=a,$http.put(config.apiUrl+"view/set_view_state",e)},deleteView:function(e){return $http["delete"](config.apiUrl+"view/delete/"+e)},approveMultipleProcessRequest:function(e,a){return $http.put(config.apiUrl+"process_request/approve_multiple_request",{record_ids:e,module_name:a})},approveProcessRequest:function(e,a,l){return $http.put(config.apiUrl+"process_request/approve",{record_id:l,module_name:a,operation_type:e})},rejectProcessRequest:function(e,a,l,i){return $http.put(config.apiUrl+"process_request/reject",{record_id:i,module_name:a,operation_type:e,message:l})},deleteProcessRequest:function(e,a){return $http.put(config.apiUrl+"process_request/delete",{record_id:a,module_id:e})},send_approval:function(e,a,l){return $http.put(config.apiUrl+"process_request/send_approval",{record_id:l,module_name:a,operation_type:e})},sendApprovalManuel:function(e){return $http.post(config.apiUrl+"process_request/send_approval_manuel",e)},getProcess:function(e){return $http.get(config.apiUrl+"process/get/"+e)},getAllProcess:function(){return $http.get(config.apiUrl+"process/get_all")},convertSalesInvoice:function(e){return $http.post(config.apiUrl+"convert/convert_sales_orders",e)},convertPurchaseInvoice:function(e){return $http.post(config.apiUrl+"convert/convert_purchase_orders",e)},sendSMS:function(e,a,l,i,t,r){return $http.post(config.apiUrl+"messaging/send_sms",{module_id:e,Ids:a,Query:l,IsAllSelected:i,Message:t,phone_field:r})},sendEMail:function(e,a,l,i,t,r,s,o,n,f,u,d,c,p,m){return $http.post(config.apiUrl+"messaging/send_email",{module_id:e,Ids:a,Query:l,is_all_selected:i,Message:t,e_mail_field:r,Cc:s,Bcc:o,sender_alias:n,provider_type:u,sender_e_mail:f,attachment_container:d,subject:c,attachment_link:p,attachment_name:m})},getTemplates:function(e,a){return $http.get(config.apiUrl+"template/get_all?moduleName="+e+"&type="+a)},processRecordSingle:function(e,a,l){for(var i=0;i<a.fields.length;i++){var t=a.fields[i];this.processRecordField(e,t,l)}return e},formatRecordFieldValues:function(e,a,l){for(var i=0;i<a.fields.length;i++){var t=a.fields[i];this.formatFieldValue(t,e[t.name],l,e,a)}},processRecordMulti:function(e,a,l,i,t,r,s,o,n,f,u,d){for(var c=[],p=function(e,a,l,i,t,r,s,o,n,f,u,d){var c="#/app/module/";if(u.external_link)return void(e.link=d?u.external_link+"?id="+e.value_id+"&back="+l:u.external_link+"?id="+a.id+"&back="+l);"rehber"===l&&(c="#/app/",l="directory");var p;if(f&&(p=f.$parent.record),f&&!p&&(p=f.$parent.$parent.record),f&&!p&&(p=f.$parent.$parent.$parent.record),e.primary||"email"===e.data_type||"url"===e.data_type||"lookup"===e.data_type||"location"===e.data_type){if(e.primary&&!e.isJoin)return void(e.link=c+l+"?id="+a.id+(t?"&ptype="+i+"&pid="+t+"&rtab="+r+(p&&p.freeze?"&freeze=true":"")+(o?"&pptype="+s+"&ppid="+o+"&prtab="+n:""):""));if(e.primary&&e.isJoin&&"users"!==e.value_type&&"profiles"!==e.value_type&&"roles"!==e.value_type)return void(e.link=c+e.value_type+"?id="+e.value_id+(t?"&ptype="+i+"&pid="+t+(p&&p.freeze?"&freeze=true":""):"&back="+l));if("lookup"===e.data_type&&"users"!==e.lookup_type&&"profiles"!==e.lookup_type&&"roles"!==e.lookup_type){var m=e.lookup_type;"object"==typeof e.lookup_type&&(m=e.lookup_type.id);var _=a[e.name+"."+m+".id"];return void(e.link=c+m+"?id="+_+(t?"&ptype="+i+"&pid="+t+"&rtab="+r+(p&&p.freeze?"&freeze=true":"")+(o?"&pptype="+s+"&ppid="+o+"&prtab="+n:""):"&back="+l))}"email"===e.data_type&&(e.link="mailto:"+e.value),"url"===e.data_type&&(e.link=e.value),"location"===e.data_type&&(e.link="http://www.google.com/maps/place/"+e.value)}},m=function(e,a,l,i,t){switch(e.data_type){case"text_single":e.mask&&t?a.valueFormatted=$filter("mask")(t,e.mask):(a.value=t,a.valueFormatted=e.valueFormatted);break;case"lookup":if(!l[i])return;a.value=l[i],a.lookup_type="relation"!==e.lookup_type?e.lookup_type:l[e.lookup_relation],a.valueFormatted=a.value;break;case"picklist":case"multiselect":case"tag":case"checkbox":a.value=e.valueFormatted,a.valueFormatted=e.valueFormatted;break;default:a.value=t,a.valueFormatted=e.valueFormatted}},_=angular.copy(e),v=0;v<_.length;v++){var h=_[v],b={};b.id=h.id||h[a.name+"_id"],h["process.process_requests.process_id"]?(b.isProcessItem=!0,b["process.process_requests.process_status"]=h["process.process_requests.process_status"]):b.isProcessItem=!1,b.shared_users_edit=h.shared_users_edit,b.shared_users=h.shared_users,b.shared_user_groups_edit=h.shared_user_groups_edit,b.shared_user_groups=h.shared_user_groups,b.shared_read=h.shared_read,b.fields=[];for(var g=0;g<i.length;g++){var y=i[g],k=angular.copy(a),$=y.field,w=!1;if(y.field.indexOf(".")>-1){var S=y.field.split(".");if(null!=S[3]&&"primary"===S[3])continue;k=$filter("filter")($rootScope.modules,{name:S[1]},!0)[0],$=S[2],w=!0}for(var D=0;D<k.fields.length;D++){var z=k.fields[D];if($===z.name&&this.hasFieldDisplayPermission(z)){if(null==l){var M=this.getPicklists(a);l=M.$$state.value}this.processRecordsField(h,z,!0),this.formatFieldValue(z,h[y.field],l,h,a);var Y={data_type:z.data_type,name:z.name,primary:z.primary,value:"",isJoin:w,isHtml:z.multiline_type_use_html,image_size_list:z.image_size_list};"rating"===z.data_type&&(Y.max=z.validation.min_length);for(var F in h)if(h.hasOwnProperty(F)){var q=h[F],P=!1;if(F.indexOf(".")>-1){var x=F.split(".");w&&z.primary&&(Y.value_id=h[x[0]+"."+x[1]+".id"],Y.value_type=x[1],P=!0),F=x[2]}if(F!==z.name)continue;m(z,Y,h,F,q),p(Y,h,t,s,r,o,n,f,u,d,z,P)}Y.order=y.order||z.order,b.fields.push(Y)}}}c.push(b)}return c},processRecordField:function(e,a,l){var i=a.name;switch(a.data_type){case"lookup":var t={},r=null===e[i+".id"];void 0===e[i+".id"]&&(a.inline_edit=!1,r=!0);for(var s in e)if(e.hasOwnProperty(s)){var o=e[s];if(s.startsWith(i+".")){if(!r){var n=s.split(".");if(n[0]!==a.name)continue;t[n[1]]=o}delete e[s]}}if(r)return;if("users"===a.lookup_type)t.primary_value=t.full_name;else if("profiles"===a.lookup_type)t.primary_value=t["name_"+$rootScope.language];else if("roles"===a.lookup_type)t.primary_value=t["label_"+$rootScope.user.tenant_language];else if("relation"===a.lookup_type)t=e[a.lookup_relation]&&e.related_to?e.related_to:null;else{var f=$filter("filter")($rootScope.modules,{name:a.lookup_type},!0)[0],u=$filter("filter")(f.fields,{primary:!0,deleted:!1},!0)[0];t.primary_value=t[u.name]}e[i]=t;break;case"picklist":var d=$filter("filter")(l[a.picklist_id],{labelStr:e[i],inactive:"!true"},!0)[0];e[i]=d;break;case"multiselect":var c=[];if(e[i]&&e[i].length>0)for(var p=0;p<e[i].length;p++){var m=e[i][p],d=$filter("filter")(l[a.picklist_id],{labelStr:m,inactive:"!true"},!0)[0];d&&c.push(d)}e[i]=c;break;case"date":case"date_time":case"time":if(void 0===e[i]||null===e[i]||!e[i].length)return;e[i]=new Date(e[i])}},processRecordsField:function(e,a){var l=a.name;switch(a.data_type){case"lookup":var i=$filter("filter")($rootScope.modules,{name:a.lookup_type},!0)[0];if(null===i||void 0===i)return;var t=$filter("filter")(i.fields,{primary:!0},!0)[0];e[l]=e[a.name+"."+a.lookup_type+"."+t.name+".primary"];break;case"date":case"date_time":case"time":if(void 0===e[l]||null===e[l]||!e[l].length)return;e[l]=new Date(e[l])}},processUser:function(e){var a={};return a.id=e.id,a.primary_value=e.first_name+" "+e.last_name,a.email=e.email,a},processRecords:function(e,a,l){for(var i=[],t=angular.copy(e),r=0;r<t.length;r++){for(var s=t[r],o=0;o<a.fields.length;o++){var n=a.fields[o];this.processRecordsField(s,n,l),this.formatFieldValue(n,s[n.name],l,s,a)}i.push(s)}return i},formatFieldValue:function(e,a,l,i,t){if(e.valueFormatted="",void 0!==a&&null!==a)switch(e.data_type){case"number_decimal":e.valueFormatted=$filter("number")(a,e.decimal_places||2);break;case"number_auto":var r=a.toString();e.auto_number_prefix&&(r=e.auto_number_prefix+r),e.auto_number_suffix&&(r+=e.auto_number_suffix),e.valueFormatted=r;break;case"currency":var s;if(i&&i.currency)if(angular.isObject(i.currency))s=i.currency.value;else{var o=$filter("filter")(t.fields,{name:"currency"},!0)[0],n=$filter("filter")(l[o.picklist_id],{labelStr:i.currency})[0];n&&n.value&&(s=n.value)}e.valueFormatted=$filter("currency")(a,s||e.currency_symbol||$rootScope.currencySymbol,e.decimal_places||2);break;case"date":e.valueFormatted=$filter("date")(a,"shortDate");break;case"date_time":e.valueFormatted=$filter("date")(a,"short");break;case"time":e.valueFormatted=$filter("date")(a,"shortTime");break;case"picklist":if(angular.isObject(a))e.valueFormatted=a.label[$rootScope.language];else{var f=$filter("filter")(l[e.picklist_id],{labelStr:a},!0)[0];e.valueFormatted=f?f.label[$rootScope.language]:a}break;case"multiselect":for(var u=0;u<a.length;u++){var d=a[u];if(angular.isObject(d))e.valueFormatted+=(d.label?d.label[$rootScope.language]:"")+"; ";else{var f=$filter("filter")(l[e.picklist_id],{labelStr:d},!0)[0];e.valueFormatted+=(f?f.label[$rootScope.language]:d)+"; "}}e.valueFormatted=e.valueFormatted.slice(0,-2);break;case"tag":for(var u=0;u<a.length;u++){var d=a[u];e.valueFormatted+=angular.isObject(d)?" "+d:" "+d+";"}break;case"checkbox":e.valueFormatted=$filter("filter")(l.yes_no,{system_code:a.toString()})[0].label[$rootScope.language];break;default:e.valueFormatted=a}},getPicklists:function(e,a){var l=$q.defer(),i=angular.copy(e.fields),t={},r=[];if(a)for(var s=0;s<e.fields.length;s++){var o=e.fields[s];if("lookup"===o.data_type&&"users"!==o.lookup_type&&"profiles"!==o.lookup_type&&"roles"!==o.lookup_type&&"relation"!==o.lookup_type){var n=$filter("filter")($rootScope.modules,{name:o.lookup_type},!0)[0];if(!n)continue;for(var f=0;f<n.fields.length;f++){var u=n.fields[f];("picklist"===u.data_type||"multiselect"===u.data_type)&&i.push(u)}}}for(var d=function(a,l){if(e.dependencies&&e.dependencies.length>0){var i=$filter("filter")(e.dependencies,{child_field:l.name},!0)[0];if(i&&i.deleted!==!0&&"list_field"===i.dependency_type)for(var t=0;t<a.length;t++){var r=a[t];r.hidden=!0}}},c=0;c<i.length;c++){var p=i[c];if(p.picklist_id){var m=$cache.get("picklist_"+p.picklist_id);if(9e5===p.picklist_id){if(m){t[p.picklist_id]=m;continue}for(var _=[],v=0;v<$rootScope.modules.length;v++){var h=$rootScope.modules[v];if(h.display&&"activities"!==h.name&&helper.hasPermission(h.name,operations.read)){var b={};b.id=parseInt(h.id)+9e5,b.type=9e5,b.system_code=h.name,b.order=h.order,b.label={},b.label.en=h.label_en_singular,b.label.tr=h.label_tr_singular,b.labelStr=h["label_"+$rootScope.user.tenant_language+"_singular"],b.value=h.name,_.push(b)}}_=$filter("orderBy")(_,"order"),t[9e5]=_,$cache.put("picklist_"+9e5,_);continue}m?(m=$filter("orderByLabel")(m,$rootScope.language),p.picklist_sortorder&&!p.deleted&&(m=$filter("orderBy")(m,p.picklist_sortorder)),d(m,p),t[p.picklist_id]=m):r.push(p.picklist_id)}}var g=$cache.get("picklist_activity_type");t.activity_type=g?g:activityTypes;var y=$cache.get("picklist_transaction_type");y?t.transaction_type=y:"accounts"===e.name?t.transaction_type=$filter("filter")(transactionTypes,{type:1},!0):"suppliers"===e.name&&(t.transaction_type=$filter("filter")(transactionTypes,{type:2},!0));var k=$cache.get("picklist_yes_no");return t.yes_no=k?k:yesNo,r.length<=0?(l.resolve(t),l.promise):(r=r.getUnique(),this.findPicklist(r).then(function(a){if(!a.data)return l.resolve(t),l.promise;for(var s=0;s<i.length;s++){var o=i[s];if(o.picklist_id&&!(r.indexOf(o.picklist_id)<0)){var n=helper.mergePicklists(a.data);if(t[o.picklist_id]=$filter("filter")(n,{type:o.picklist_id},!0),t[o.picklist_id]=$filter("orderByLabel")(t[o.picklist_id],$rootScope.language),o.picklist_sortorder&&!o.deleted&&(t[o.picklist_id]=$filter("orderBy")(t[o.picklist_id],o.picklist_sortorder)),e.dependencies&&e.dependencies.length>0){var f=$filter("filter")(e.dependencies,{child_field:o.name},!0)[0];if(f&&1!=f.deleted&&"list_field"===f.dependency_type)for(var u=0;u<t[o.picklist_id].length;u++){var c=t[o.picklist_id][u];c.hidden=!0}}d(t[o.picklist_id],o),$cache.put("picklist_"+o.picklist_id,t[o.picklist_id])}}l.resolve(t)})["catch"](function(e){l.reject(e.data)}),l.promise)},moduleFieldsConvertByKey:function(e){for(var a=[],l=0;l<e.length;l++)a[e[l].name]=e[l];return a},lookup:function(e,a,l,i,t,r){var s=$q.defer(),o=a.lookup_type,n=this,f="lookup"===a.data_type&&a.show_as_dropdown;if("text_single"!==a.lookupModulePrimaryField.data_type&&"picklist"!==a.lookupModulePrimaryField.data_type&&"email"!=a.lookupModulePrimaryField.data_type&&"number"!==a.lookupModulePrimaryField.data_type&&"number_auto"!==a.lookupModulePrimaryField.data_type)return s.resolve([]),s.promise;if("relation"===o&&(o=void 0!==l[a.lookup_relation]?l[a.lookup_relation].value:null),!o)return s.resolve([]),s.promise;var u="users"!==o&&"profiles"!==o&&"roles"!==o?helper.hasPermission(o,operations.read):!0;if(!(u||$rootScope.branchAvailable&&"branches"===o))return s.resolve([]),s.promise;if(!e&&!f)return s.resolve([]),s.promise;var d=$filter("filter")($rootScope.modules,{name:o},!0)[0],c=[];if(c.push(a.lookupModulePrimaryField.name),i)for(var p=0;p<i.length;p++){var m=i[p];m!==a.lookupModulePrimaryField.name&&"id"!==m&&c.push(m)}var _=[];if("number"!==a.lookupModulePrimaryField.data_type&&"number_auto"!==a.lookupModulePrimaryField.data_type)if(t)_.push({field:a.lookupModulePrimaryField.name,operator:"is",value:e,no:1});else switch(a.lookup_search_type){case"contains":_.push({field:a.lookupModulePrimaryField.name,operator:"contains",value:e,no:1});break;case"starts_with":_.push({field:a.lookupModulePrimaryField.name,operator:"starts_with",value:e,no:1});break;default:_.push({field:a.lookupModulePrimaryField.name,operator:"starts_with",value:e,no:1})}else _.push({field:a.lookupModulePrimaryField.name,operator:"equals",value:parseInt(e),no:1});var v={fields:c,filters:_,sort_field:a.lookupModulePrimaryField.name,sort_direction:"asc",limit:1e3,offset:0};f&&(v.filters=[],v.limit=1e3);var h=v.filters.length;("users"===d.name||$rootScope.branchAvailable&&"branches"===o)&&v.filters.push({field:"is_active",operator:"equals",value:!0,no:h+1}),"users"===d.name&&v.filters.push({field:"email",operator:"not_contain",value:"integration_",no:h+1});var b=n.moduleFieldsConvertByKey(d.fields);if(a.filters)for(var g=v.filters.length,y=0;y<a.filters.length;y++){var k=a.filters[y];g++;var $,w=k.value.match(/^\W+(.+)]/i);if(null!==w&&"users"!==a.lookup_type&&"profiles"!==a.lookup_type&&"roles"!==a.lookup_type){var S=w[1].split(".");1===S.length&&l[S[0]]&&($=l[S[0]]),2===S.length&&l[S[0]]&&($=l[S[0]][S[1]]),3===S.length&&l[S[0]]&&($=l[S[0]][S[1]][S[2]]),null!=$&&(v.filters.push({field:k.filter_field,operator:k.operator,value:$,no:g}),v.fields.push(k.filter_field))}else{var D=b[k.filter_field];switch(D.data_type){case"multiselect":case"tag":$=k.value.split("|");break;default:$=k.value}v.filters.push({field:k.filter_field,operator:k.operator,value:$,no:g}),v.fields.push(k.filter_field)}}if(r)for(var z=0;z<r.length;z++){var M=r[z];M.no=v.filters.length+1,v.filters.push(M)}return this.findRecords(o,v).then(function(e){if(!e.data||!e.data.length)return s.resolve([]),s.promise;var l=[];if(i)n.getPicklists(d).then(function(i){for(var t=0;t<e.data.length;t++){var r=e.data[t],o=angular.copy(r);o=n.processRecordSingle(o,d,i),o.primary_value=r[a.lookupModulePrimaryField.name],l.push(o),s.resolve(l)}});else for(var t=0;t<e.data.length;t++){var r=e.data[t];"profiles"===o&&1===r.id&&(r.name="tr"===$rootScope.user.tenant_language?"Sistem Yöneticisi":"Administrator");var f=angular.copy(r);f.primary_value=r[a.lookupModulePrimaryField.name],l.push(f),s.resolve(l)}})["catch"](function(e){s.reject(e.data)}),s.promise},prepareRecord:function(e,a,l){function i(e){var a=document.createElement("div");return a.innerHTML=e,a.innerHTML.toString()}var t=angular.copy(e),r=angular.copy(l);if(l)for(var s=0;s<a.dependencies.length;s++){var o=a.dependencies[s];if("display"===o.dependency_type&&!o.deleted&&!angular.equals(e[o.parent_field],l[o.parent_field]))if(o.values_array&&o.values_array.length>0){for(var n=!0,f=0;f<o.values_array.length;f++){var u=o.values_array[f];if(Array.isArray(e[o.parent_field]))for(var d=0;d<e[o.parent_field].length;d++){var c=e[o.parent_field][d];c.id.toString()===u&&(n=!1)}else e[o.parent_field].id.toString()===u&&(n=!1)}n&&o.child_field&&(t[o.child_field]=null)}else!e[o.parent_field]&&o.child_field&&(t[o.child_field]=null)}for(var s=0;s<a.fields.length;s++){var p=a.fields[s];if("string"==typeof t[p.name]&&""===t[p.name].trim()&&(t[p.name]=void 0),l||t[p.name])if(!l||l[p.name]||t[p.name])if("checkbox"===p.data_type&&null===t[p.name]&&l[p.name]&&(t[p.name]=!1),p.deleted)delete t[p.name];else if(void 0!==t[p.name]&&null!==t[p.name]){switch(r||(r={}),p.data_type){case"number":t[p.name]=parseInt(t[p.name]),r[p.name]=r[p.name]?parseInt(r[p.name]):null;break;case"number_decimal":break;case"checkbox":null===t[p.name]&&void 0===t[p.name]&&(t[p.name]=!1);break;case"currency":t[p.name]=parseFloat(t[p.name]),r[p.name]=r[p.name]?parseFloat(r[p.name]):null;break;case"date":var m=moment(t[p.name]).format().split("+"),_=moment(r[p.name]).format().split("+");t[p.name]=m[0],r[p.name]=r[p.name]?_[0]:null;break;case"picklist":case"lookup":t[p.name]=t[p.name].id,r[p.name]=r[p.name]?r[p.name].id:null;break;case"text_multi":var v=t[p.name];if(p.multiline_type_use_html===!0){var h=i(v);t[p.name]=h}break;case"multiselect":for(var b=[],g=[],f=0;f<t[p.name].length;f++){var y=t[p.name][f];b.push(y.id)}if(r[p.name])for(var d=0;d<r[p.name].length;d++){var k=r[p.name][d];g.push(k.id)}t[p.name]=b&&b.length?b:null,r[p.name]=g&&g.length?g:null;break;case"tag":var $=[];angular.forEach(t[p.name],function(e){$.push(e.text)}),t[p.name]=$.toString()}l&&angular.equals(r[p.name],t[p.name])&&delete t[p.name]}else t[p.name]=null;else delete t[p.name]}if(t.shared_read&&t.shared_read.length){t.shared_users=[],t.shared_user_groups=[];for(var w=0;w<t.shared_read.length;w++){var S=t.shared_read[w];"user"===S.type&&t.shared_users.push(S.id),"group"===S.type&&t.shared_user_groups.push(S.id)}t.shared_users.length||(t.shared_users=null),t.shared_user_groups.length||(t.shared_user_groups=null),delete t.shared_read}else t.shared_users=null,t.shared_user_groups=null,delete t.shared_read;if(t.shared_edit&&t.shared_edit.length){t.shared_users_edit=[],t.shared_user_groups_edit=[];for(var D=0;D<t.shared_edit.length;D++){var z=t.shared_edit[D];"user"===z.type&&t.shared_users_edit.push(z.id),"group"===z.type&&t.shared_user_groups_edit.push(z.id)}t.shared_users_edit.length||(t.shared_users_edit=null),t.shared_user_groups_edit.length||(t.shared_user_groups_edit=null),delete t.shared_edit}else t.shared_users_edit=null,t.shared_user_groups_edit=null,delete t.shared_edit;return t},prepareRecordBulk:function(e,a){for(var l=this,i=[],t=0;t<e.length;t++){var r=e[t],s=l.prepareRecord(r,a);i.push(s)}return i},calculate:function(field,module,record){if(module.calculations){var calculation=$filter("filter")(module.calculations,{field_1:field.name},!0)[0];if(calculation||(calculation=$filter("filter")(module.calculations,{field_2:field.name},!0)[0]),calculation){var calculations=$filter("filter")(module.calculations,{result_field:calculation.result_field},!0);calculations=$filter("orderBy")(calculations,"order");for(var result=0,resultField="",i=0;i<calculations.length;i++){var calculation=calculations[i];result=eval((result||record[calculation.field_1]||0)+calculation.operator+(record[calculation.field_2]||calculation.custom_value||0)),resultField=calculation.result_field}record[resultField]=result||0,this.setCustomCalculations(module,record)}}},setDefaultValues:function(e,a,l){for(var i=0;i<e.fields.length;i++){var t=e.fields[i];if(!t.deleted){var r=t.name;if(void 0!==t.default_value&&null!==t.default_value&&!a[r]){switch(t.data_type){case"text_single":case"text_multi":case"number":case"number_decimal":case"currency":case"url":case"email":case"image":a[r]=t.default_value;break;case"date":case"time":case"date_time":"[now]"===t.default_value&&(a[r]=(new Date).toISOString());break;case"picklist":var s=$filter("filter")(l[t.picklist_id],{id:parseInt(t.default_value)},!0)[0];s||(s={},s.id=a[r],s.type=t.picklist_id,s.label={},s.label.tr=a[r],s.label.en=a[r],s.labelStr=a[r],s.required=!1,s.order=9999,helper.getPicklists([t.picklist_id],!0)),a[t.name]=s;break;case"lookup":var o="[me]"!==t.default_value?parseInt(t.default_value):$rootScope.user.id,n=angular.copy(t);this.getRecord(t.lookup_type,o,!0).then(function(e){var l={};l.id=e.data.id,l.primary_value=e.data[n.lookupModulePrimaryField.name],a[n.name]=l});break;case"multiselect":var f=t.default_value.split(";");a[r]=[];for(var u=0;u<f.length;u++){var d=f[u],c=$filter("filter")(l[t.picklist_id],{id:parseInt(d)},!0)[0];c||(c={},c.id=a[r],c.type=t.picklist_id,c.label={},c.label.tr=a[r],c.label.en=a[r],c.labelStr=a[r],c.required=!1,c.order=9999,c.inactive||helper.getPicklists([t.picklist_id],!0)),t.default_value&&a[r].push(c)}break;case"checkbox":a[t.name]="true"===t.default_value?!0:!1}this.setDisplayDependency(e,a)}}}var p=$filter("filter")(e.fields,{name:"currency",deleted:"!true"})[0];if(("products"===e.name||"quotes"===e.name||"sales_orders"===e.name||"purchase_orders"===e.name)&&!a.currency&&p&&$rootScope.currencySymbol){var m=angular.copy($rootScope.currencySymbol);"₺"===m&&(m="₺");var _=$filter("filter")(l[p.picklist_id],{value:m},!0)[0];a.currency=_,this.setDisplayDependency(e,a)}},setDependency:function(e,a,l,i,t){var r=this;if(!l.id&&l.event_start_date&&"event_start_date"===e.name){var s=new Date(l.event_start_date);0===s.getHours()&&0===s.getSeconds()&&0===s.getMilliseconds()&&(s.setHours(8),l.event_start_date=s),l.event_end_date=new Date(s.getTime()+36e5)}if(l.event_start_date&&l.event_end_date&&"event_end_date"===e.name){var o=new Date(l.event_start_date),n=new Date(l.event_end_date);o>n&&(l.event_start_date=new Date(n.getTime()-36e5))}if(!l.id&&"start_date"===e.calendar_date_type&&l[e.name]){var f=new Date(l[e.name]);0===f.getHours()&&0===f.getSeconds()&&0===f.getMilliseconds()&&(f.setHours(8),l[e.name]=f);var u=$filter("filter")(a.fields,{calendar_date_type:"end_date"},!0)[0];u&&(l[u.name]=new Date(f.getTime()+36e5))}if("end_date"===e.calendar_date_type&&l[e.name]){var d=$filter("filter")(a.fields,{calendar_date_type:"start_date"},!0)[0];if(d&&l[d.name]){var f=new Date(l[d.name]),c=new Date(l[e.name]);f>c&&(l[d.name]=new Date(c.getTime()-36e5))}}if("task_due_date"===e.name&&$rootScope.taskReminderAuto){var p=new Date(l.task_due_date);p.setTime(p.getTime()+288e5),l.task_reminder=p}if(a.dependencies){var m=$filter("filter")(a.dependencies,{parent_field:e.name},!0);if(m&&m.length)for(var _=0;_<m.length;_++){var v=m[_];if(!v.deleted){var h=$filter("filter")(a.fields,{name:v.child_field},!0)[0];if(v.clear)l[v.child_field]=void 0,t.$broadcast("angucomplete-alt:clearInput",v.child_field);else{if(!h)continue;switch(v.dependency_type){case"list_value":case"list_field":l.id||(l[v.child_field]=null);for(var b=i[h.picklist_id],g=0;g<b.length;g++){var y=b[g];delete y.hidden}if("list_value"===v.dependency_type){if(!l[v.parent_field])continue;var k=[];for(var $ in v.value_maps)if(v.value_maps.hasOwnProperty($)){var w=v.value_maps[$];$===l[v.parent_field].id.toString()&&(k=w)}if(!k.length)continue;for(var S=0;S<b.length;S++){var D=b[S];k.indexOf(D.id)<0&&(D.hidden=!0)}}else if("list_field"===v.dependency_type){if(!l[v.parent_field]){for(var z=0;z<b.length;z++){var M=b[z];M.hidden=!0}continue}for(var Y=l[v.parent_field][v.field_map_parent],F=0;F<b.length;F++){var q=b[F];q[v.field_map_child]!==Y&&(q.hidden=!0)}}break;case"list_text":l[v.child_field]=l[v.parent_field]?l[v.parent_field].value||l[v.parent_field].label[$rootScope.language]:null;break;case"lookup_text":l[v.child_field]=l[v.parent_field]?l[v.parent_field][v.field_map_parent]:null;break;case"lookup_list":case"lookup_field":if(!l[v.parent_field])continue;var P=l[v.parent_field][v.field_map_parent],x=i[h.picklist_id],B=null;if("lookup_list"===v.dependency_type){for(var U=0;U<x.length;U++){var T=x[U];T[v.field_map_child]===P&&(B=T)}!B||l.id&&l[v.child_field]||(l[v.child_field]=B)}else if("lookup_field"===v.dependency_type&&P){var O=$filter("filter")($rootScope.modules,{name:h.lookup_type},!0)[0],R=angular.copy(h);R.lookupModulePrimaryField=$filter("filter")(O.fields,{name:v.field_map_child},!0)[0];var C=[h.lookupModulePrimaryField.name];r.lookup(P,R,l,C,!0).then(function(e){if(e[0]){var i=e[0];i.primary_value=i[h.lookupModulePrimaryField.name],l[v.child_field]=i,h.valueChangeDontRun=!0,r.customActions(a,l,t.moduleForm),t.$broadcast("angucomplete-alt:changeInput",v.child_field,i)}})}}}this.calculate(h,a,l)}}}},setDependencyFilter:function(e,a,l,i){var t=angular.copy(l),r=angular.copy(e);if(e.indexOf(".")>-1){var s=e.split(".");t=$filter("filter")($rootScope.modules,{name:s[1]},!0)[0],r=s[2]}if(t.dependencies&&t.dependencies.length){var o=$filter("filter")(t.dependencies,{parent_field:r},!0);if(o&&o.length)for(var n=angular.copy(t.fields),f=0;f<o.length;f++){var u=o[f];if(!u.deleted){var d=$filter("filter")(n,{name:u.child_field},!0)[0];if(d&&a&&"list_field"===u.dependency_type){for(var c=i[d.picklist_id],p=0;p<c.length;p++){var m=c[p];delete m.hidden}for(var _=a[u.field_map_parent],v=0;v<c.length;v++){var h=c[v];h[u.field_map_child]!==_&&(h.hidden=!0)}}}}}},setDisplayDependency:function(e,a){if(e.display_dependencies)for(var l=0;l<e.display_dependencies.length;l++){var i=e.display_dependencies[l];if(!i.deleted){var t=null;if(t=i.dependent_section?$filter("filter")(e.sections,{name:i.dependent_section},!0)[0]:$filter("filter")(e.fields,{name:i.dependent_field},!0)[0])if(void 0!==a[i.field]){var r=null,s=angular.copy(a[i.field]);if(angular.isArray(s)){if(!a[i.field].length){t.hidden=!0,delete a[i.dependent_field];continue}for(var o=0;o<s.length;o++){var n=s[o],f=$filter("filter")(i.values,n.id,!0)[0];!r&&f&&(r=f)}}else i.values?s&&(r="boolean"==typeof s?s:s.id?$filter("filter")(i.values,s.id,!0)[0]:$filter("filter")(i.values,s,!0)[0]):r=s;if(i.otherwise||r)if(i.otherwise&&r)t.hidden=!0,delete a[i.dependent_field];else{if(!i.dependent_section){var u=$filter("filter")(e.fields,{name:i.field},!0)[0];if(u.hidden){t.hidden=!0,delete a[i.dependent_field];continue}}t.hidden=!1}else t.hidden=!0,delete a[i.dependent_field]}else t.hidden=!0,delete a[i.dependent_field]}}},customActions:function(e,a,l,i,t){if("izinler"===e.name){var r=function(e){if(a.calisan&&a.izin_turu&&a.izin_turu_data){var l=moment().date(1).month(0).year(moment().year()).format("YYYY-MM-DD");if(a.izin_turu_data.yillik_izin&&a.calisan_data){var i=moment(a.calisan_data.ise_baslama_tarihi),t=i.get("date"),r=i.get("month"),s=moment().get("year"),o=moment().date(t).month(r).year(s).format("YYYY-MM-DD");moment(o).isAfter(moment().format("YYYY-MM-DD"))&&(s-=1),l=moment().date(t).month(r).year(s).format("YYYY-MM-DD")}a.izin_turu_data.her_ay_yenilenir&&(l=moment().date(1).month(moment().month()).year(moment().year()).format("YYYY-MM-DD"));var n={fields:["hesaplanan_alinacak_toplam_izin","baslangic_tarihi","bitis_tarihi","izin_turu","process.process_requests.process_status"],filters:[{field:"calisan",operator:"equals",value:a.calisan.id,no:1},{field:"baslangic_tarihi",operator:"greater_equal",value:l,no:2},{field:"deleted",operator:"equals",value:!1,no:3},{field:"process.process_requests.process_status",operator:"not_equal",value:3,no:4}],limit:999999};e.findRecords("izinler",n).then(function(e){var l=0;if(a.alinan_izinler=e.data,a.izin_turu_data&&!a.izin_turu_data.yillik_izin){if(e.data.length>0){var i=$filter("filter")(e.data,{izin_turu:a.izin_turu.id},!0);angular.forEach(i,function(e){e.hesaplanan_alinacak_toplam_izin&&(l+=e.hesaplanan_alinacak_toplam_izin)})}else delete a.alinan_izinler,a.mevcut_kullanilabilir_izin=a.izin_turu_data.yillik_hakedilen_limit_gun;if(a.izin_turu_data.saatlik_kullanim_yapilir){var t=a.izin_turu_data.toplam_calisma_saati,r=a.izin_turu_data.yillik_hakedilen_limit_gun;
if(a.izin_turu_data.ogle_tatilini_dikkate_al){var s=parseFloat(moment.duration(moment(a.izin_turu_data.ogle_tatili_bitis).diff(moment(a.izin_turu_data.ogle_tatili_baslangic))).asHours().toFixed(2));t-=s}var o=r*t-l;a.mevcut_kullanilabilir_izin=o}else a.mevcut_kullanilabilir_izin=a.izin_turu_data.yillik_hakedilen_limit_gun-l}else if(a.izin_turu&&a.izin_turu_data&&a.calisan_data&&a.izin_turu_data.yillik_izin&&a.calisan.e_posta===a.calisan_data.e_posta){a.mevcut_kullanilabilir_izin=a.calisan_data.kalan_izin_hakki?a.calisan_data.kalan_izin_hakki:0}})}},s=this;if(a.calisan){var o=$filter("filter")($rootScope.modules,{name:"calisanlar"},!0)[0];o=o?"calisanlar":"human_resources",this.getRecord(o,a.calisan.id).then(function(e){var l=e.data;a.calisan_data=l,a.goreve_baslama_tarihi=l.ise_baslama_tarihi,a.dogum_tarihi=l.dogum_tarihi,r(s)})}a.izin_turu&&(!a.izin_turu_data||a.izin_turu_data&&a.izin_turu_data.id!=a.izin_turu.id)&&(a.mevcut_kullanilabilir_izin=0,this.getRecord("izin_turleri",a.izin_turu.id).then(function(l){var o=l.data;a.izin_turu_data=o,t&&(t.izinTuruData=o,r(s),s.setCustomCalculations(e,a,i,t))}))}if("current_accounts"===e.name){var n=$filter("filter")(t.modules,{name:"sales_invoices"},!0);if(n.length<1)return!1;if("collection"===t.subtype)switch(a.currency.system_code){case"try":$filter("filter")(t.module.fields,{name:"alacak"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"alacak_usd"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"alacak_euro"},!0)[0].display_form=!1,a.alacak_euro&&delete a.alacak_euro,a.alacak_usd&&delete a.alacak_usd;break;case"usd":$filter("filter")(t.module.fields,{name:"alacak"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"alacak_usd"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"alacak_euro"},!0)[0].display_form=!1,a.alacak&&delete a.alacak,a.alacak_euro&&delete a.alacak_euro;break;case"eur":$filter("filter")(t.module.fields,{name:"alacak"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"alacak_usd"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"alacak_euro"},!0)[0].display_form=!0,a.alacak&&delete a.alacak,a.alacak_usd&&delete a.alacak_usd}else if("payment"===t.subtype)switch(a.currency.system_code){case"try":$filter("filter")(t.module.fields,{name:"borc_tl"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"borc_usd"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"borc_euro"},!0)[0].display_form=!1;break;case"usd":$filter("filter")(t.module.fields,{name:"borc_tl"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"borc_usd"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"borc_euro"},!0)[0].display_form=!1;break;case"eur":$filter("filter")(t.module.fields,{name:"borc_tl"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"borc_usd"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"borc_euro"},!0)[0].display_form=!0}if($filter("filter")(t.module.fields,{name:"banka"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"payment_due"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"odendi"},!0)[0].display_form=!1,a.payment_method)switch(a.payment_method.system_code){case"cash":$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].validation.required=!0,$filter("filter")(t.module.fields,{name:"banka"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"payment_due"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"odendi"},!0)[0].display_form=!1,a.banka&&delete a.banka;break;case"bank_transfer":case"credit_card":$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"payment_due"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"odendi"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"banka"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"banka"},!0)[0].validation.required=!0,a.kasa&&delete a.kasa;break;case"cheque":case"bill":$filter("filter")(t.module.fields,{name:"banka"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"payment_due"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"odendi"},!0)[0].display_form=!0,a.odendi&&($filter("filter")(t.module.fields,{name:"banka"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"banka"},!0)[0].validation.required=!1,$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].validation.required=!1)}}},customValidations:function(e,a){function l(e,a){var i=6===moment(e).isoWeekday(),t=7===moment(e).isoWeekday();return i||t||!moment(e).isBusinessDay()?"subtract"===a?l(moment(e).subtract(1,"days"),a):"add"===a?l(moment(e).add(1,"days"),a):void 0:e}if("izinler"===e.name){var i=a.izin_turu_data;if(moment(a.baslangic_tarihi).isSame(a.bitis_tarihi))return $filter("translate")("Leave.Validations.SameDate");if(a.talep_edilen_izin<=0)return $filter("translate")("Leave.Validations.Requested0OfDaysNot");if(a.alinan_izinler&&a.alinan_izinler.length>0)for(var t=0;t<a.alinan_izinler.length;t++)if(!a.id||a.id!==a.alinan_izinler[t].id){var r=moment(moment(Date.parse(moment(a.baslangic_tarihi))).format("YYYY-MM-DDTHH:mm:ss")),s=moment(moment(Date.parse(moment(a.bitis_tarihi))).format("YYYY-MM-DDTHH:mm:ss"));if((r.isBetween(moment(a.alinan_izinler[t].baslangic_tarihi),moment(a.alinan_izinler[t].bitis_tarihi),null,"[)")||s.isBetween(moment(a.alinan_izinler[t].baslangic_tarihi),moment(a.alinan_izinler[t].bitis_tarihi),null,"(]")||r.isSameOrBefore(moment(a.alinan_izinler[t].baslangic_tarihi))&&s.isSameOrAfter(moment(a.alinan_izinler[t].bitis_tarihi)))&&a.alinan_izinler[t].id!==a.id)return $filter("translate")("Leave.Validations.AlreadyHave")}if(i.ilk_izin_kullanimi_hakedis_zamani_ay&&null!==i.ilk_izin_kullanimi_hakedis_zamani_ay&&0!==i.ilk_izin_kullanimi_hakedis_zamani_ay){var o=moment().diff(a.goreve_baslama_tarihi,"months"),n=i.ilk_izin_kullanimi_hakedis_zamani_ay;if(n>o)return $filter("translate")("Leave.Validations.FirstLeaveUse",{month:n})}if(i.yillik_izin){if(null===a.mevcut_kullanilabilir_izin)return $filter("translate")("Leave.Validations.LeaveEnd");if(a.id&&a.process_status){var f=$filter("filter")(a.alinan_izinler,{id:a.id},!0)[0];if(f&&a.hesaplanan_alinacak_toplam_izin>f.hesaplanan_alinacak_toplam_izin&&a.mevcut_kullanilabilir_izin+f.hesaplanan_alinacak_toplam_izin<a.hesaplanan_alinacak_toplam_izin&&!i.izin_borclanma_yapilabilir)return $filter("translate")("Leave.Validations.LeaveEnd")}else if((0===a.mevcut_kullanilabilir_izin||a.mevcut_kullanilabilir_izin<a.hesaplanan_alinacak_toplam_izin)&&!i.izin_borclanma_yapilabilir)return $filter("translate")("Leave.Validations.LeaveEnd");return a.mevcut_kullanilabilir_izin=a.calisan_data.kalan_izin_hakki||0,delete a.goreve_baslama_tarihi,delete a.calisan_data,delete a.izin_turu_data,delete a.dogum_tarihi,delete a.alinan_izinler,""}var u=$filter("filter")(a.alinan_izinler,function(e){return e.izin_turu===a.izin_turu.id&&null!==e["process.process_requests.process_status"]&&(!a.id||a.id&&a.id!==e.id)});if(i.yillik_hakedilen_limit_gun&&0!==i.yillik_hakedilen_limit_gun){var d=0;if(u&&u.length>0&&angular.forEach(u,function(e){e.hesaplanan_alinacak_toplam_izin&&(d+=e.hesaplanan_alinacak_toplam_izin)}),a.izin_turu_data&&a.izin_turu_data.saatlik_kullanim_yapilir){var c=a.izin_turu_data.toplam_calisma_saati;if(a.izin_turu_data.ogle_tatilini_dikkate_al){var p=parseFloat(moment.duration(moment(a.izin_turu_data.ogle_tatili_bitis).diff(moment(a.izin_turu_data.ogle_tatili_baslangic))).asHours().toFixed(2));c-=p}var m=c*i.yillik_hakedilen_limit_gun;if(m<d+a.hesaplanan_alinacak_toplam_izin)return a.izin_turu_data.her_ay_yenilenir?$filter("translate")("Leave.Validations.NotHaveLimitHourMonth",{total_hour:m,remaining_hour:m-d}):$filter("translate")("Leave.Validations.NotHaveLimitHour",{total_hour:m,remaining_hour:m-d})}else if(d+a.hesaplanan_alinacak_toplam_izin>i.yillik_hakedilen_limit_gun)return a.izin_turu_data.her_ay_yenilenir?$filter("translate")("Leave.Validations.NotHaveLimitDayMonth",{total_hour:i.yillik_hakedilen_limit_gun,remaining_hour:i.yillik_hakedilen_limit_gun-d}):$filter("translate")("Leave.Validations.NotHaveLimitDay",{total_hour:i.yillik_hakedilen_limit_gun,remaining_hour:i.yillik_hakedilen_limit_gun-d})}if(null!==i.tek_seferde_alinabilecek_en_fazla_izin_gun&&0!==i.tek_seferde_alinabilecek_en_fazla_izin_gun)if(a.izin_turu_data&&a.izin_turu_data.saatlik_kullanim_yapilir){var c=a.izin_turu_data.toplam_calisma_saati;if(a.izin_turu_data.ogle_tatilini_dikkate_al){var p=parseFloat(moment.duration(moment(a.izin_turu_data.ogle_tatili_bitis).diff(moment(a.izin_turu_data.ogle_tatili_baslangic))).asHours().toFixed(2));c-=p}var m=c*i.tek_seferde_alinabilecek_en_fazla_izin_gun;if(m<a.talep_edilen_izin)return $filter("translate")("Leave.Validations.OneGoHour",{total_hour:i.tek_seferde_alinabilecek_en_fazla_izin_gun*m})}else if(i.tek_seferde_alinabilecek_en_fazla_izin_gun<a.talep_edilen_izin)return $filter("translate")("Leave.Validations.OneGoDay",{total_hour:i.tek_seferde_alinabilecek_en_fazla_izin_gun});if(null===i.resmi_tatiller_ile_birlestirilebilir||i.resmi_tatiller_ile_birlestirilebilir===!1){var _=moment(a.baslangic_tarihi),v=moment(a.bitis_tarihi),h=_.add(-1,"days"),b=$filter("filter")($rootScope.moduleSettings,{key:"work_saturdays"},!0);b=b.length>0&&"t"===b[0].value?!0:!1;var g=7===moment(h).isoWeekday();g||b||(g=6===moment(h).isoWeekday());var y=moment(moment(h).format("YYYY-MM-DD")).isBusinessDay();if(y)for(var t=0;t<$rootScope.holidaysData.length;t++){var k=$rootScope.holidaysData[t];k.half_day&&moment(k.date).isBusinessDay()&&moment(h.format("YYYY-MM-DD")).isSame(moment(k.date).format("YYYY-MM-DD"))&&(y=!1)}if(!g&&!y)return $filter("translate")("Leave.Validations.InfusibleWithHolidays");var $=v;if(i.saatlik_kullanim_yapilir&&($=v.add(1,"days")),g=7===moment($).isoWeekday(),g||b||(g=6===moment($).isoWeekday()),y=moment(moment($).format("YYYY-MM-DD")).isBusinessDay())for(var t=0;t<$rootScope.holidaysData.length;t++){var k=$rootScope.holidaysData[t];k.half_day&&moment(k.date).isBusinessDay()&&moment($.format("YYYY-MM-DD")).isSame(moment(k.date).format("YYYY-MM-DD"))&&(y=!1)}if(!g&&!y)return $filter("translate")("Leave.Validations.InfusibleWithHolidays")}if(i.dogum_gunu_izni)if(i["1_hafta_once_ve_3_hafta_sonra_arasinda_kullanilir"]){var w=moment(a.baslangic_tarihi),S=moment(a.dogum_tarihi).set("year",w.get("year")).subtract(1,"weeks"),D=moment(a.dogum_tarihi).set("year",w.get("year")).add(3,"weeks"),z=moment(w.format("YYYY-MM-DD")).isBetween(S.format("YYYY-MM-DD"),D.format("YYYY-MM-DD"),null,"[]");if(!z)return"Mutlu Yıllar! Doğumgünü iznini doğum gününün 1 hafta öncesinden başlayarak 3 hafta sonrasına kadar olan 4 haftalık süre diliminde kullanabilirsin. İzin tarihini değiştirerek tekrar denemelisin."}else{var M=moment(a.dogum_tarihi),_=moment(a.baslangic_tarihi);if(M=moment(M.year(_.year()).toISOString()),i.dogum_gunu_izni_kullanimi.includes("15")){var Y=_.diff(M,"days");if(0>Y&&(Y=-1*Y),Y>15)return $filter("translate")("Leave.Validations.BirthDayLimitDay")}else if(M.month()!==_.month())return $filter("translate")("Leave.Validations.BirthDayLimitMonth")}if(i["3_gun_arka_arkaya_kullanilamasin"]&&u&&u.length>0&&u.length>0){for(var w=moment(a.baslangic_tarihi).format("YYYY-MM-DD"),F=l(moment(w).subtract(1,"days"),"subtract").format("YYYY-MM-DD"),q=l(moment(F).subtract(1,"days"),"subtract").format("YYYY-MM-DD"),P=l(moment(w).add(1,"days"),"add").format("YYYY-MM-DD"),x=l(moment(P).add(1,"days"),"add").format("YYYY-MM-DD"),B=!1,U=!1,T=!1,O=!1,R=0,C=0,L=0,I=0,t=0;t<u.length;t++)moment(u[t].baslangic_tarihi).format("YYYY-MM-DD")===F?(R=u[t].hesaplanan_alinacak_toplam_izin,B=!0):moment(u[t].baslangic_tarihi).format("YYYY-MM-DD")===q?(C=u[t].hesaplanan_alinacak_toplam_izin,U=!0):moment(u[t].baslangic_tarihi).format("YYYY-MM-DD")===P?(L=u[t].hesaplanan_alinacak_toplam_izin,T=!0):moment(u[t].baslangic_tarihi).format("YYYY-MM-DD")===x&&(I=u[t].hesaplanan_alinacak_toplam_izin,O=!0);if(B&&U&&R+C>=16||T&&O&&L+I>=16||B&&T&&R+L>=16)return"Üst üste 16 saatlik mazeret izni girişi yaptığın için, 16 saati takiben mazeret izni girişi yapamazsın."}return delete a.goreve_baslama_tarihi,delete a.calisan_data,delete a.dogum_tarihi,delete a.izin_turu_data,delete a.alinan_izinler,""}},setCustomCalculations:function(e,a,l,i){if("calisanlar"!==e.name&&"human_resources"!==e.name||a.id||(a.sabit_devreden_izin=a.devreden_izin),"izinler"===e.name){if(a.baslangic_tarihi&&!a.bitis_tarihi&&a.izin_turu_data&&a.izin_turu_data.saatlik_kullanim_yapilir){var t=new Date(a.baslangic_tarihi);t.setHours(8,0,0,0),a.bitis_tarihi=new Date(t).toISOString(),a.baslangic_tarihi=new Date(t).toISOString()}if(a.baslangic_tarihi&&a.bitis_tarihi){var r=new Date(a.baslangic_tarihi),s=new Date(a.bitis_tarihi);r>s&&(s=angular.copy(r),a.bitis_tarihi=new Date(s).toISOString(),a.baslangic_tarihi=new Date(r).toISOString())}if(a.izin_turu_data&&a.baslangic_tarihi&&a.bitis_tarihi){if(a.izin_turu_data.sadece_tam_gun_olarak_kullanilir){var s=new Date(a.bitis_tarihi),r=new Date(a.baslangic_tarihi);r.setHours(8,0,0,0),s.setHours(8,0,0,0),a.bitis_tarihi=new Date(s).toISOString(),a.baslangic_tarihi=new Date(r).toISOString()}if(!a.izin_turu_data.saatlik_kullanim_yapilir&&!a.izin_turu_data.sadece_tam_gun_olarak_kullanilir){var s=new Date(a.bitis_tarihi),r=new Date(a.baslangic_tarihi);s.setHours(0,0,0,0),r.setHours(0,0,0,0),r.toISOString()===s.toISOString()&&(a.from_entry_type=l[i.customLeaveFields.from_entry_type.picklist_id][0]),"entry_type_afternoon"===a.to_entry_type.system_code?s.setHours(12,0,0,0):s.setHours(8,0,0,0),a.bitis_tarihi=new Date(s).toISOString(),"entry_type_afternoon"===a.from_entry_type.system_code?r.setHours(12,0,0,0):r.setHours(8,0,0,0),a.baslangic_tarihi=new Date(r).toISOString()}var o=0,n=moment(a.baslangic_tarihi),f=moment(a.bitis_tarihi);if(a.izin_turu_data.saatlik_kullanim_yapilir){var u=a.izin_turu_data.toplam_calisma_saati;if(a.izin_turu_data.ogle_tatilini_dikkate_al){var d=parseFloat(moment.duration(moment(a.izin_turu_data.ogle_tatili_bitis).diff(moment(a.izin_turu_data.ogle_tatili_baslangic))).asHours().toFixed(2));u-=d}if(!moment(n.format("YYYY-MM-DD")).isSame(f.format("YYYY-MM-DD"))){var s=new Date(a.baslangic_tarihi);s=angular.copy(s),a.bitis_tarihi=new Date(s).toISOString(),f=moment(a.bitis_tarihi)}var c=moment.duration(moment(a.bitis_tarihi).diff(moment(a.baslangic_tarihi)))._data;(c.hours<0||c.minutes<0)&&(s.setHours(moment(a.baslangic_tarihi).hour(),moment(a.baslangic_tarihi).minute(),0,0),a.bitis_tarihi=new Date(s).toISOString(),f=moment(a.bitis_tarihi));var p=moment.duration(f.diff(n)).asHours(),m=a.izin_turu_data.toplam_calisma_saati;if(p>m){var _=p-m;s=moment(s).add(-_,"hours"),a.bitis_tarihi=new Date(s).toISOString(),f=moment(a.bitis_tarihi)}var o=f.diff(n,"minutes")/60;if(a.izin_turu_data.ogle_tatilini_dikkate_al){var v="HH:mm:ss",h=moment(a.izin_turu_data.ogle_tatili_baslangic).format(v),b=moment(a.izin_turu_data.ogle_tatili_bitis).format(v),g=moment(n).format(v),y=moment(f).format(v),k=0;moment(h,v).isSameOrBefore(moment(g,v))?k=moment(b,v).isSameOrBefore(moment(g,v))?0:moment(b,v).isSameOrBefore(moment(y,v))?moment(b,v).diff(moment(g,v),"minutes")/60:o:moment(h,v).isSameOrBefore(moment(y,v))&&(moment(b,v).isSameOrBefore(moment(y,v))?k=moment(b,v).diff(moment(h,v),"minutes")/60:moment(b,v).isSameOrAfter(moment(y,v))&&(k=moment(y,v).diff(moment(h,v),"minutes")/60)),o-=k}}else if(o=a.izin_turu_data.izin_hakkindan_takvim_gunu_olarak_dusulsun?f.diff(n,"days"):n.businessDiff(f),!a.izin_turu_data||a.izin_turu_data.saatlik_kullanim_yapilir||a.izin_turu_data.sadece_tam_gun_olarak_kullanilir){var s=new Date(a.bitis_tarihi),r=new Date(a.baslangic_tarihi);a.izin_turu_data.sadece_tam_gun_olarak_kullanilir||(s.setHours(0,0,0,0),a.bitis_tarihi=new Date(s).toISOString(),r.setHours(0,0,0,0),a.baslangic_tarihi=new Date(r).toISOString()),n=moment(a.baslangic_tarihi),f=moment(a.bitis_tarihi),o=a.izin_turu_data.izin_hakkindan_takvim_gunu_olarak_dusulsun?f.diff(n,"days"):n.businessDiff(f)}else{var $=o;if(n.format("YYYY.MM.DD")!==f.format("YYYY.MM.DD")){if(a.from_entry_type.id!==a.to_entry_type.id){var w=moment(moment(a.baslangic_tarihi).format("YYYY-MM-DD")).isBusinessDay(),S=moment(moment(a.bitis_tarihi).format("YYYY-MM-DD")).isBusinessDay();w&&"entry_type_afternoon"===a.from_entry_type.system_code&&($=o-.5),S&&"entry_type_afternoon"==a.to_entry_type.system_code&&($=o-.5)}}else $=o-.5;$>=0&&(o=$)}var D=$filter("filter")($rootScope.moduleSettings,{key:"work_saturdays"},!0);if(D.length>0?D=D[0]:D.value="f",a.izin_turu_data.cuma_gunu_alinan_izinlere_cumartesiyi_de_ekle&&o>=1&&"t"!==D.value&&!a.izin_turu_data.saatlik_kullanim_yapilir&&!a.izin_turu_data.izin_hakkindan_takvim_gunu_olarak_dusulsun){var z=moment(n).weekdaysInBetween(f,[5]),M=5===moment(n).isoWeekday();if(M&&moment(n).isBusinessDay()&&(f.diff(n,"days")<=3?(a.izin_turu_data.sadece_tam_gun_olarak_kullanilir||!a.izin_turu_data.sadece_tam_gun_olarak_kullanilir&&"entry_type_afternoon"!==a.from_entry_type.system_code&&"entry_type_afternoon"===a.to_entry_type.system_code&&moment(f).isBusinessDay()||!a.izin_turu_data.sadece_tam_gun_olarak_kullanilir&&"entry_type_afternoon"!==a.from_entry_type.system_code&&!a.izin_turu_data.sadece_cuma_ise_tek_gun_say)&&(o+=1):o>=2&&"entry_type_afternoon"!==a.from_entry_type.system_code?o+=1:(a.izin_turu_data.sadece_tam_gun_olarak_kullanilir||!a.izin_turu_data.sadece_tam_gun_olarak_kullanilir&&"entry_type_afternoon"!==a.from_entry_type.system_code)&&(1!==o||a.izin_turu_data.sadece_cuma_ise_tek_gun_say||(o+=1))),5===moment(f).isoWeekday()&&moment(f).isBusinessDay()&&f.diff(n,"days")<2&&(o-=1),z)if(z.length)for(var Y=0;Y<z.length;Y++)moment(z[Y]).isBusinessDay()&&(o+=1);else z.isBusinessDay()&&(o+=1)}if(!a.izin_turu_data.izin_hakkindan_takvim_gunu_olarak_dusulsun)for(var F=0;F<$rootScope.holidaysData.length;F++){var q=$rootScope.holidaysData[F];q.half_day&&moment(q.date).isBusinessDay()&&moment(moment(q.date).format("YYYY-MM-DD")).isBetween(moment(a.baslangic_tarihi).format("YYYY-MM-DD"),moment(a.bitis_tarihi).format("YYYY-MM-DD"),null,"[)")?o-=.5:!q.half_day&&moment(q.date).isBusinessDay()&&moment(moment(q.date).format("YYYY-MM-DD")).isBetween(moment(a.baslangic_tarihi).format("YYYY-MM-DD"),moment(a.bitis_tarihi).format("YYYY-MM-DD"),null,"[)")?o-=1:o>1&&q.half_day&&6===moment(moment(q.date).format("YYYY-MM-DD")).day()&&moment(moment(q.date).format("YYYY-MM-DD")).isBetween(moment(a.baslangic_tarihi).format("YYYY-MM-DD"),moment(a.bitis_tarihi).format("YYYY-MM-DD"),null,"[)")?o-=1:o>1&&!q.half_day&&6===moment(moment(q.date).format("YYYY-MM-DD")).day()&&moment(moment(q.date).format("YYYY-MM-DD")).isBetween(moment(a.baslangic_tarihi).format("YYYY-MM-DD"),moment(a.bitis_tarihi).format("YYYY-MM-DD"),null,"[)")&&(o-=1)}a.izin_turu_data.saatlik_kullanim_yapilir&&a.izin_turu_data.saatlik_kullanimi_yukari_yuvarla&&(o=Math.ceil(o));var P=o;a.izin_turu_data.yillik_izin||a.izin_turu_data.izin_hakkindan_dusulsun||(o=0),a.hesaplanan_alinacak_toplam_izin=o,a.talep_edilen_izin=P}}},updateView:function(e,a){return $http.put(config.apiUrl+"view/update/"+a,e)},getViews:function(e,a,l){var i=this,t=$q.defer(),r=$filter("filter")($rootScope.modules,{id:e},!0)[0];if(a){var s=[],o={};o.active=!0;for(var n=[],f=1,u=0;u<a.length;u++){var d,c=a[u];if(c.indexOf(".")>-1){var p=c.split("."),m=$filter("filter")($rootScope.modules,{name:p[1]},!0)[0];d=$filter("filter")(m.fields,{name:p[2]},!0)[0]}else d=$filter("filter")(r.fields,{name:c},!0)[0];if(d&&i.hasFieldDisplayPermission(d)){var _={};_.field=c,_.order=f,n.push(_),f++}}return o.fields=n,s.push(o),t.resolve(s),t.promise}return l&&l.views?(t.resolve(l.views),t.promise):($http.get(config.apiUrl+"view/get_all/"+e).then(function(e){if(!e.data)return t.resolve([]),t.promise;for(var a=[],l=0;l<e.data.length;l++){for(var s=e.data[l],o=[],n=0;n<s.fields.length;n++){var f,u=s.fields[n];if(u.field.indexOf(".")>-1){var d=u.field.split("."),c=$filter("filter")($rootScope.modules,{name:d[1]},!0)[0];if(!c)continue;f=$filter("filter")(c.fields,{name:d[2]},!0)[0]}else f=$filter("filter")(r.fields,{name:u.field},!0)[0];f&&i.hasFieldDisplayPermission(f)&&o.push(u)}s.fields=o,s.label=s["label_"+$rootScope.language],a.push(s)}a=$filter("orderBy")(a,"label_"+$rootScope.language),t.resolve(a)})["catch"](function(e){t.reject(e.data)}),t.promise)},getViewState:function(e,a){var l=$q.defer();return a&&a.viewState?(l.resolve(a.viewState),l.promise):($http.get(config.apiUrl+"view/get_view_state/"+e).then(function(e){l.resolve(e.data)})["catch"](function(e){l.reject(e.data)}),l.promise)},getViewFields:function(e,a){for(var l=[],i=angular.copy(e.fields),t=0;t<a.length;t++){var r=a[t],s=i,o=r.field,n=null;if(r.field.indexOf(".")>-1){var f=r.field.split(".");if(null!=f[3]&&"primary"===f[3])continue;s=angular.copy($filter("filter")($rootScope.modules,{name:f[1]},!0)[0].fields),o=f[2],n=f[0]}var u=$filter("filter")(s,{name:o},!0)[0];if(u&&this.hasFieldDisplayPermission(u)){null!=n&&(u.parentField=$filter("filter")(i,{name:n},!0)[0]);var d=angular.copy(u);d.fieldName=r.field,d.order=r.order,l.push(d)}}return l},setFilters:function(e,a,l,i,t,r,s){if("lookup"===a.data_type&&"users"===a.lookup_type&&"[me]"===i&&(i=$rootScope.user.id),"email"===a.data_type&&"[me.email]"===i&&(i=$rootScope.user.email),"date"===a.data_type&&i){{moment(i).format("YYYY-MM-DD")}moment(i).isValid()&&(i=moment(i).format("YYYY-MM-DD"))}e||(e=[]),("empty"===t||"not_empty"===t)&&(i="-");var o=$filter("filter")(e,{field:l,operator:t,no:parseInt(r)},!0)[0];if(o)o.operator=t,o.value=i,"document"===a.data_type&&(o.document_search=a.document_search);else{r=r?parseInt(r):e.length+1;var n={};n.field=l,n.operator=t,n.value=i,n.no=r,n.isView=s,"document"===a.data_type&&(n.document_search=a.document_search),e.push(n)}return e},setTable:function(e,a,l,i,t,r,s,o,n,f,u,d,c,p,m,_,v,h){var b=this,g=r+"_"+s;e.isManyToMany=d&&"many_to_many"===d.relation_type,e.isManyToMany&&(g=r+"_"+d.relation_field+"_"+e.module.name),$rootScope.activePages||($rootScope.activePages={}),$rootScope.activeFilters||($rootScope.activeFilters={}),e.tableParams=new ngTableParams({page:1,count:i,load:!1},{counts:l,getData:function(l,i){function o(){var a=angular.copy(e.view.filters);if(a=$filter("orderBy")(a,"no"),a&&a.length>0)for(var l=0;l<a.length;l++){var i=a[l],r=[],s=i.field,o=i.field,n=null;if(s.indexOf(".")<0)r=e.module.fields;else{var f=s.split(".");"process_requests"!==f[1]&&"process_approvers"!==f[1]&&(r=$filter("filter")($rootScope.modules,{name:f[1]},!0)[0].fields),("process_requests"===f[1]||"process_approvers"===f[1])&&(n={},n.data_type="number",n.name="process_status"),"process_approvers"===f[1]&&(n={},n.data_type="lookup",n.lookup_type="users",n.name="user_id"),o=f[2]}n||(n=$filter("filter")(r,{name:o},!0)[0]),n&&("lookup"===n.data_type&&"users"===n.lookup_type&&"0"===i.value&&(i.value=$rootScope.user.id),"multiselect"===n.data_type&&(i.value=i.value.split("|")),"tag"===n.data_type&&(i.value=i.value.split("|")),t=b.setFilters(t,n,s,i.value,i.operator,i.no,!0))}}function k(){e.loading||a.start(),b.getPicklists(e.module,!0).then(function(k){e.tableParams.picklists=k;for(var w in i.filters)if(i.filters.hasOwnProperty(w)){var S=i.filters[w];b.setDependencyFilter(w,S.value,e.module,i.picklists)}b.getViews(e.module.id,u,$).then(function(u){b.getViewState(e.module.id,$).then(function(k){var w=$||{},S=i.count(),D=i.sorting(),z=i.sortClicked,M=null,Y=null,F=e.viewid;D&&Object.keys(D).length>0&&(M=Object.keys(D)[0],Y=D[M]);var q=function(a,l,i){var t;t=i?$filter("filter")(u,{id:parseInt(i)},!0)[0]:$filter("filter")(u,{active:!0})[0],k={},k.active_view=t.id,k.sort_field=a,k.sort_direction=l,k.row_per_page=10,e.viewid&&null!==e.viewid||b.setViewState(k,e.module.id).then(function(e){k.id=e.data.id})};z?k?("kasa_hareketleri"===e.module.name||"banka_hareketleri"===e.module.name?(M="islem_tarihi,id",Y="desc"):"current_accounts"===e.module.name?(M="date,id",Y="desc"):"stock_transactions"===e.module.name?(M="transaction_date,id",Y="desc"):(k.sort_field=M,k.sort_direction=Y),b.setViewState(k,e.module.id,k.id)):q(M,Y,F):k&&k.sort_field&&!F?(M=k.sort_field,Y=k.sort_direction):("kasa_hareketleri"===e.module.name||"banka_hareketleri"===e.module.name?(M="islem_tarihi,id",Y="desc"):"current_accounts"===e.module.name?(M="date,id",Y="desc"):"stock_transactions"===e.module.name?(M="transaction_date,id",Y="desc"):(M="created_at",Y="desc"),q(M,Y,F));var P={};P[M]=Y,i.sorting(P),w.sorting=P,y(u,k,r);var x=e.view&&e.view.filter_logic;if(i.filters&&Object.keys(i.filters).length>0){o();var B=angular.copy(i.filters);if(B)for(var U in B)if(B.hasOwnProperty(U)){var T=B[U],O=[],R=U,C=!1;if(U.indexOf(".")<0)O=e.module.fields;else{var L=U.split(".");O=$filter("filter")($rootScope.modules,{name:L[1]},!0)[0].fields,R=L[2]}var I=$filter("filter")(O,{name:R},!0)[0];if(!I)continue;if(T.operator||(T.operator=$filter("orderBy")(I.operators,"order")[0]),"empty"!==T.operator.name&&"not_empty"!==T.operator.name&&(void 0===T.value||null===T.value||""===T.value||angular.isArray(T.value)&&!T.value.length||("number"===I.data_type||"number_decimal"===I.data_type||"number_auto"===I.data_type||"currency"===I.data_type)&&isNaN(T.value))){delete B[U],delete i.filters[U];var H=t&&$filter("filter")(t,{field:U},!0)[0];!H||angular.isUndefined(H.isView)||H.isView||t.splice(t.indexOf(H),1);continue}var H=t&&$filter("filter")(t,{field:U},!0)[0];H&&!angular.isUndefined(H.isView)&&H.isView&&(angular.isArray(T.value)&&T.value.length||("number"===I.data_type||"number_decimal"===I.data_type||"number_auto"===I.data_type||"currency"===I.data_type)&&!isNaN(T.value)||void 0!==T.value||null!==T.value||""!==T.value)&&t.splice(t.indexOf(H),1);var V,A;if("lookup"===I.data_type&&"users"!==I.lookup_type&&"profiles"!==I.lookup_type&&"roles"!==I.lookup_type&&(V=$filter("filter")($rootScope.modules,{name:I.lookup_type},!0)[0],A=$filter("filter")(V.fields,{primary:!0},!0)[0]),"empty"!==T.operator.name&&"not_empty"!==T.operator.name){if("lookup"!==I.data_type||"users"!==I.lookup_type&&"profiles"!==I.lookup_type&&"roles"!==I.lookup_type||(T.value=T.value[0].id),"lookup"===I.data_type&&"users"!==I.lookup_type&&"profiles"!==I.lookup_type&&"roles"!==I.lookup_type&&(U=I.name+"."+I.lookup_type+"."+A.name,I=A),"picklist"===I.data_type&&(T.value=T.value.label[$rootScope.user.tenant_language]),"multiselect"===I.data_type){for(var E=[],j=0;j<T.value.length;j++){var N=T.value[j];E.push(N.label[$rootScope.user.tenant_language])}T.value=E}if("tag"===I.data_type){for(var E=[],j=0;j<T.value.length;j++){var N=T.value[j];E.push(N.text)}T.value=E}"checkbox"===I.data_type&&(T.value=T.value.system_code)}else if("lookup"===I.data_type&&"users"!==I.lookup_type&&"profiles"!==I.lookup_type&&"roles"!==I.lookup_type){U=I.name+"."+I.lookup_type+"."+A.name;var W=t&&$filter("filter")(t,{field:U},!0)[0];W&&t.splice(t.indexOf(W),1)}if(t)for(var G=0;G<t.length;G++){var Q=t[G];Q.field===U&&Q.operator===T.operator.name&&Q.value===T.value&&(C=!0)}if(C)continue;t=b.setFilters(t,I,U,T.value,T.operator.name),x&&(x="("+x+" and "+t.length+")")}$rootScope.activeFilters[g]=i.filters}var K=[],J=e.view.fields,X=[],Z="";if(e.isManyToMany){var ea=d.related_module===c?d.related_module+"2":d.related_module,aa=$filter("filter")(e.module.fields,{primary:!0},!0)[0];Z=ea+"_id."+d.related_module+"."+aa.name}for(var la=0;la<J.length;la++){var ia=J[la];if(e.isManyToMany){var ta=$filter("filter")(e.module.fields,{name:ia.field},!0)[0];if(ia.field.indexOf(".")<0&&"lookup"!==ta.data_type){var ra=d.related_module===c?d.related_module+"2":d.related_module,sa=ra+"_id."+d.related_module+"."+ia.field;K.push(sa);var oa=angular.copy(ia);oa.field=sa,X.push(oa)}}else K.push(ia.field)}if(e.isManyToMany){var na=d.related_module===c?d.related_module+"2":d.related_module;M=na+"_id."+d.related_module+"."+M,J=X,e.view.fields=X}if($filter("filter")(e.module.fields,{name:"currency",deleted:"!true"},!0)[0]&&K.indexOf("currency")<0&&!e.isManyToMany&&K.push("currency"),i.filters&&Object.keys(i.filters).length||(o(),e.view.filter_logic&&(x=e.view.filter_logic)),d){var fa="ids-"+e.parentModule+i.page()+"_"+e.parentModule+"_"+e.module.name;if(e.relatedModuleInModal&&$cache.get(fa)&&$cache.get(fa).length>0){var ua=$filter("filter")(t,{operator:"!not_in"},!0)[0];if(t.length>0&&!ua){var da={field:"id",no:t.length+1,operator:"not_in",value:$cache.get(fa)};if(t.length>0)for(var ca=0;ca<t.length;ca++){var pa=t[ca];pa.operator!==da.operator&&pa.value!==da.value&&t.push(da)}else t.push(da)}}}var ma={fields:K,filters:t,sort_field:M,sort_direction:Y,limit:S,offset:(i.page()-1)*S};x&&(ma.filter_logic=x),e.isManyToMany&&(ma.many_to_many=c),w.views=u,w.viewState=k,w.count=S,i.refreshing||(e.fields=b.getViewFields(e.module,J)),e.findRequest=ma,e.viewFields=J,w.findRequest=ma,e.parentModule||e.viewid||$cache.put(g,w),components.run("EmptyList","Script",e);var _a=function(t,r){e.listFindRequest=t,components.run("BeforeListRequest","Script",e),b.findRecords(e.module.name,e.listFindRequest).then(function(a){var t=!1;if(i.filters)for(var o in i.filters)if(i.filters.hasOwnProperty(o)){var u=i.filters[o];if(u.hasOwnProperty("value")){t=!0;break}}e.isEmpty=a.data.length<1&&!t;var c=b.processRecordMulti(a.data,e.module,e.tableParams.picklists,J,s,n,f,p,m,_,v,h);if(d&&(d.loading=!1),e.parentModule||e.viewid||(r["rows-"+o+i.page()]=c,$cache.put(o,r)),d&&!e.relatedModuleInModal){var g=[];e.listFindRequest={fields:"one_to_many"===d.relation_type?["id"]:[e.module.name+"_id"],filters:[{field:"one_to_many"===d.relation_type?d.relation_field:e.parentModule+"_id",no:1,operator:"equals",value:e.parentId}],limit:9999999,offset:0};var y=d.relation_type?d.relation_type:"many_to_many";e.listFindRequest[y]=e.parentModule,b.findRecords(e.module.name,e.listFindRequest).then(function(e){if(e.data.length>0){for(var a=0;a<e.data.length;a++){var l=e.data[a];g.push(Object.values(l)[0])}$cache.put(fa,g)}})}i.reloading=!1,i.sortClicked=!1,l.resolve(c)})["finally"](function(){e.loading=!1,e.parentId&&components.run("SubListLoaded","Script",e),a.stop(),i.pagination&&($window.scrollTo(0,0),i.pagination=!1)})};if(1===i.page()){var va=angular.copy(ma);if(va.fields=["total_count()"],va.limit=1,va.offset=0,delete va.sort_field,delete va.sort_direction,ma.filters)for(var ha=0;ha<ma.filters.length;ha++){var ba=ma.filters[ha];ba.field.indexOf(".")>-1&&ba.field.indexOf("process_approvers")<0&&va.fields.push(ba.field)}e.isManyToMany&&va.fields.indexOf(Z)<0&&va.fields.push(Z),b.findRecords(e.module.name,va).then(function(t){t=t.data;var r=0,o=!1;if(i.filters)for(var f in i.filters)if(i.filters.hasOwnProperty(f)){var u=i.filters[f];if(u.hasOwnProperty("value")){o=!0;break}}null!==t&&t.length&&null!==t[0]&&null!==t[0].total_count?(_a(ma,w),r=t[0].total_count):(l.resolve([]),e.isEmpty=t.length<1&&!o,e.parentId&&components.run("SubListLoaded","Script",e),e.loading=!1,a.stop()),i.total(r),w.total=r,n&&(e.$parent.$parent["currentTotalCount"+s]=r),d&&(d.total=r),i.pagination&&($window.scrollTo(0,0),i.pagination=!1)})["catch"](function(){e.loading=!1,a.stop()})}else d&&i.total(d.total),_a(ma,w)})})})}i.pagination&&$window.scrollTo(0,0),$rootScope.activePages[g]=i.page();var $=$cache.get(g);if(e.selectedRows=[],e.isAllSelected=!1,i.reloading||!$||e.parentModule)if(i.reloading){if(i.page(1),$rootScope.activePages[g]=1,$rootScope.activeFilters[g]=null,i.refreshing&&($=null,t=angular.copy(i.filterList),i.filters=null,i.refreshing=!1),i.renew&&(t=angular.copy(i.filterList)),$){var w={};w.views=angular.copy($.views),w.viewState=angular.copy($.viewState),$=w}k()}else k();else b.getPicklists(e.module).then(function(t){if(e.tableParams.picklists=t,$.views&&$.views.length&&!e.viewid){y($.views,$.viewState,r),e.fields=b.getViewFields(e.module,e.view.fields),i.sorting($.sorting),i.$params.count=$.count,i.total($.total);
var s=$["rows-"+o+i.page()];s&&s.length?(i.total($.total||d.total),e.findRequest=$.findRequest,d&&(d.total=d.total||$.total,d.loading=!1),l.resolve(s),e.loading=!1,a.stop()):k()}else k();for(var o in i.filters)if(i.filters.hasOwnProperty(o)){var n=i.filters[o];b.setDependencyFilter(o,n.value,e.module,i.picklists)}})}}),e.tableParams.filterList=t&&t.length?t:void 0,e.tableParams.isSelectable=o,e.$parent.loadingModal&&(e.tableParams.showFilter=!0),$rootScope.activePages[g]&&e.tableParams.page($rootScope.activePages[g]),$rootScope.activeFilters[g]&&(e.tableParams.filters=$rootScope.activeFilters[g],e.tableParams.showFilter=!0),e.tableParams.load=!0;var y=function(a,l,i){if(e.views=a,e.selectedView){e.view=e.selectedView;for(var t=0;t<a.length;t++){var r=a[t];r.active=r.id===e.selectedView.id}}else l&&i===e.module.name?l&&(e.view=$filter("filter")(a,{id:l.active_view},!0)[0]):e.view=$filter("filter")(a,{active:!0})[0];l&&!e.view&&(e.view=$filter("filter")(a,{active:!0})[0],l.active_view=e.view.id,l.sort_field="created_at",l.sort_direction="desc",l.row_per_page=10,b.setViewState(l,e.module.id,l.id))};e.setDependency=function(a){b.setDependencyFilter(a.fieldName,e.tableParams.filters[a.fieldName].value,e.module,e.tableParams.picklists)};var k=function(a){if(e.tableParams.filters[a.fieldName].operator){var l=new Date(e.tableParams.filters[a.fieldName].value);switch(e.tableParams.filters[a.fieldName].operator.name){case"greater":l.setHours(23),l.setMinutes(59),l.setSeconds(59),l.setMilliseconds(99);break;case"less":l.setHours(0),l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0)}e.tableParams.filters[a.fieldName].value=l}};e.dateTimeChanged=function(e){k(e)},e.operatorChanged=function(a){"empty"===e.tableParams.filters[a.fieldName].operator.name||"not_empty"===e.tableParams.filters[a.fieldName].operator.name?(e.tableParams.filters[a.fieldName].value=null,e.tableParams.filters[a.fieldName].disabled=!0):e.tableParams.filters[a.fieldName].disabled=!1}},getCSVData:function(e,a){var l=this,i=$q.defer(),t=angular.copy(e.findRequest);return t.limit=3e3,t.offset=0,l.findRecords(e.module.name,t).then(function(t){for(var r=l.processRecordMulti(t.data,e.module,e.tableParams.picklists,e.viewFields,a),s=[],o=[],n=$filter("orderBy")(e.fields,"order"),f=0;f<n.length;f++){var u=n[f];o.push(u["label_"+$rootScope.language]+(u.parentField?" ("+u.parentField["label_"+$rootScope.language]+")":""))}s.push(o);for(var d=0;d<r.length;d++){for(var c=r[d],p=[],m=$filter("orderBy")(c.fields,"order"),_=0;_<m.length;_++){var v=m[_];p.push("currency"===v.data_type||"number_decimal"===v.data_type?v.value||"":v.valueFormatted||"")}s.push(p)}i.resolve(s)}),i.promise},getYesNo:function(e){var a={};return a.yes=$filter("filter")(e,{system_code:"true"})[0].label[$rootScope.language],a.no=$filter("filter")(e,{system_code:"false"})[0].label[$rootScope.language],a},getIcons:function(){return icons.icons},getActionButtons:function(e,a){var l=$q.defer(),i="action_button_"+e,t=$cache.get(i);return t&&!a?(l.resolve(t),l.promise):($http.get(config.apiUrl+"action_button/get/"+e).then(function(e){$cache.put(i,e.data),l.resolve(e.data)})["catch"](function(e){l.reject(e.data)}),l.promise)},hasFieldDisplayPermission:function(e){if(!e.permissions)return!0;var a=$filter("filter")(e.permissions,{profile_id:$rootScope.user.profile.id},!0)[0],l=function(e){if(!e.sectionObj||!e.sectionObj.permissions)return!0;var a=$filter("filter")(e.sectionObj.permissions,{profile_id:$rootScope.user.profile.id},!0)[0];return a?"none"!==a.type:!0};return a&&"none"===a.type?!1:l(e)},hasFieldFullPermission:function(e){if(!e.permissions)return!0;var a=$filter("filter")(e.permissions,{profile_id:$rootScope.user.profile.id},!0)[0],l=function(e){if(!e.sectionObj||!e.sectionObj.permissions)return!0;var a=$filter("filter")(e.sectionObj.permissions,{profile_id:$rootScope.user.profile.id},!0)[0];return a?"full"===a.type:!0};return a&&"full"!==a.type?!1:l(e)},hasSectionDisplayPermission:function(e){if(!e.permissions)return!0;var a=$filter("filter")(e.permissions,{profile_id:$rootScope.user.profile.id},!0)[0];return a?"none"!==a.type:!0},hasSectionFullPermission:function(e){if(!e.permissions)return!0;var a=$filter("filter")(e.permissions,{profile_id:$rootScope.user.profile.id},!0)[0];return a?"full"===a.type:!0},hasActionButtonDisplayPermission:function(e){if(!e.permissions)return!0;var a=$filter("filter")(e.permissions,{profile_id:$rootScope.user.profile.id},!0)[0];return a?"none"!==a.type:!0},getDailyRates:function(){return $http.get(config.apiUrl+"exchange_rates/get_daily_rates")},getAllTenantSettingsByType:function(e,a){return $http.get(config.apiUrl+"settings/get_all/"+e+(a?"?user_id="+a:""))},tenantSettingUpdate:function(e){return $http.put(config.apiUrl+"settings/update/"+e.id,e)}}}]),angular.module("primeapps").constant("icons",{icons:[{value:"fa fa-adjust",label:'<i class="fa fa-adjust"> Adjust'},{value:"fa fa-anchor",label:'<i class="fa fa-anchor"> Anchor'},{value:"fa fa-archive",label:'<i class="fa fa-archive"> Archive'},{value:"fa fa-area-chart",label:'<i class="fa fa-area-chart"> Area-chart',chart:!0},{value:"fa fa-arrows",label:'<i class="fa fa-arrows"> Arrows'},{value:"fa fa-arrows-h",label:'<i class="fa fa-arrows-h"> Arrows-h'},{value:"fa fa-arrows-v",label:'<i class="fa fa-arrows-v"> Arrows-v'},{value:"fa fa-asterisk",label:'<i class="fa fa-asterisk"> Asterisk'},{value:"fa fa-at",label:'<i class="fa fa-at"> At'},{value:"fa fa-automobile",label:'<i class="fa fa-automobile"> Automobile'},{value:"fa fa-ban",label:'<i class="fa fa-ban"> Ban'},{value:"fa fa-bank",label:'<i class="fa fa-bank"> Bank'},{value:"fa fa-bar-chart",label:'<i class="fa fa-bar-chart"> Bar-chart',chart:!0},{value:"fa fa-bar-chart-o",label:'<i class="fa fa-bar-chart-o"> Bar-chart-o'},{value:"fa fa-barcode",label:'<i class="fa fa-barcode"> Barcode'},{value:"fa fa-bars",label:'<i class="fa fa-bars"> Bars'},{value:"fa fa-bed",label:'<i class="fa fa-bed"> Bed'},{value:"fa fa-beer",label:'<i class="fa fa-beer"> Beer'},{value:"fa fa-bell",label:'<i class="fa fa-bell"> Bell'},{value:"fa fa-bell-o",label:'<i class="fa fa-bell-o"> Bell-o'},{value:"fa fa-bell-slash",label:'<i class="fa fa-bell-slash"> Bell-slash'},{value:"fa fa-bell-slash-o",label:'<i class="fa fa-bell-slash-o"> Bell-slash-o'},{value:"fa fa-bicycle",label:'<i class="fa fa-bicycle"> Bicycle'},{value:"fa fa-binoculars",label:'<i class="fa fa-binoculars"> Binoculars'},{value:"fa fa-birthday-cake",label:'<i class="fa fa-birthday-cake"> Birthday-cake'},{value:"fa fa-bolt",label:'<i class="fa fa-bolt"> Bolt'},{value:"fa fa-bomb",label:'<i class="fa fa-bomb"> Bomb'},{value:"fa fa-book",label:'<i class="fa fa-book"> Book'},{value:"fa fa-bookmark",label:'<i class="fa fa-bookmark"> Bookmark'},{value:"fa fa-bookmark-o",label:'<i class="fa fa-bookmark-o"> Bookmark-o'},{value:"fa fa-briefcase",label:'<i class="fa fa-briefcase"> Briefcase'},{value:"fa fa-bug",label:'<i class="fa fa-bug"> Bug'},{value:"fa fa-building",label:'<i class="fa fa-building"> Building'},{value:"fa fa-building-o",label:'<i class="fa fa-building-o"> Building-o'},{value:"fa fa-bullhorn",label:'<i class="fa fa-bullhorn"> Bullhorn'},{value:"fa fa-bullseye",label:'<i class="fa fa-bullseye"> Bullseye'},{value:"fa fa-bus",label:'<i class="fa fa-bus"> Bus'},{value:"fa fa-cab",label:'<i class="fa fa-cab"> Cab'},{value:"fa fa-calculator",label:'<i class="fa fa-calculator"> Calculator'},{value:"fa fa-calendar",label:'<i class="fa fa-calendar"> Calendar'},{value:"fa fa-calendar-o",label:'<i class="fa fa-calendar-o"> Calendar-o'},{value:"fa fa-camera",label:'<i class="fa fa-camera"> Camera'},{value:"fa fa-camera-retro",label:'<i class="fa fa-camera-retro"> Camera-retro'},{value:"fa fa-car",label:'<i class="fa fa-car"> Car'},{value:"fa fa-caret-square-o-down",label:'<i class="fa fa-caret-square-o-down"> Caret-square-o-down'},{value:"fa fa-caret-square-o-left",label:'<i class="fa fa-caret-square-o-left"> Caret-square-o-left'},{value:"fa fa-caret-square-o-right",label:'<i class="fa fa-caret-square-o-right"> Caret-square-o-right'},{value:"fa fa-caret-square-o-up",label:'<i class="fa fa-caret-square-o-up"> Caret-square-o-up'},{value:"fa fa-cart-arrow-down",label:'<i class="fa fa-cart-arrow-down"> Cart-arrow-down'},{value:"fa fa-cart-plus",label:'<i class="fa fa-cart-plus"> Cart-plus'},{value:"fa fa-cc",label:'<i class="fa fa-cc"> Cc'},{value:"fa fa-certificate",label:'<i class="fa fa-certificate"> Certificate'},{value:"fa fa-check",label:'<i class="fa fa-check"> Check'},{value:"fa fa-check-circle",label:'<i class="fa fa-check-circle"> Check-circle'},{value:"fa fa-check-circle-o",label:'<i class="fa fa-check-circle-o"> Check-circle-o'},{value:"fa fa-check-square",label:'<i class="fa fa-check-square"> Check-square'},{value:"fa fa-check-square-o",label:'<i class="fa fa-check-square-o"> Check-square-o'},{value:"fa fa-child",label:'<i class="fa fa-child"> Child'},{value:"fa fa-circle",label:'<i class="fa fa-circle"> Circle'},{value:"fa fa-circle-o",label:'<i class="fa fa-circle-o"> Circle-o'},{value:"fa fa-circle-o-notch",label:'<i class="fa fa-circle-o-notch"> Circle-o-notch'},{value:"fa fa-circle-thin",label:'<i class="fa fa-circle-thin"> Circle-thin'},{value:"fa fa-clock-o",label:'<i class="fa fa-clock-o"> Clock-o'},{value:"fa fa-close",label:'<i class="fa fa-close"> Close'},{value:"fa fa-cloud",label:'<i class="fa fa-cloud"> Cloud'},{value:"fa fa-cloud-download",label:'<i class="fa fa-cloud-download"> Cloud-download'},{value:"fa fa-cloud-upload",label:'<i class="fa fa-cloud-upload"> Cloud-upload'},{value:"fa fa-code",label:'<i class="fa fa-code"> Code'},{value:"fa fa-code-fork",label:'<i class="fa fa-code-fork"> Code-fork'},{value:"fa fa-coffee",label:'<i class="fa fa-coffee"> Coffee'},{value:"fa fa-cog",label:'<i class="fa fa-cog"> Cog'},{value:"fa fa-cogs",label:'<i class="fa fa-cogs"> Cogs'},{value:"fa fa-comment",label:'<i class="fa fa-comment"> Comment'},{value:"fa fa-comment-o",label:'<i class="fa fa-comment-o"> Comment-o'},{value:"fa fa-comments",label:'<i class="fa fa-comments"> Comments'},{value:"fa fa-comments-o",label:'<i class="fa fa-comments-o"> Comments-o'},{value:"fa fa-compass",label:'<i class="fa fa-compass"> Compass'},{value:"fa fa-copyright",label:'<i class="fa fa-copyright"> Copyright'},{value:"fa fa-credit-card",label:'<i class="fa fa-credit-card"> Credit-card'},{value:"fa fa-crop",label:'<i class="fa fa-crop"> Crop'},{value:"fa fa-crosshairs",label:'<i class="fa fa-crosshairs"> Crosshairs'},{value:"fa fa-cube",label:'<i class="fa fa-cube"> Cube'},{value:"fa fa-cubes",label:'<i class="fa fa-cubes"> Cubes'},{value:"fa fa-cutlery",label:'<i class="fa fa-cutlery"> Cutlery'},{value:"fa fa-dashboard",label:'<i class="fa fa-dashboard"> Dashboard'},{value:"fa fa-database",label:'<i class="fa fa-database"> Database'},{value:"fa fa-desktop",label:'<i class="fa fa-desktop"> Desktop'},{value:"fa fa-diamond",label:'<i class="fa fa-diamond"> Diamond'},{value:"fa fa-dot-circle-o",label:'<i class="fa fa-dot-circle-o"> Dot-circle-o'},{value:"fa fa-download",label:'<i class="fa fa-download"> Download'},{value:"fa fa-edit",label:'<i class="fa fa-edit"> Edit'},{value:"fa fa-ellipsis-h",label:'<i class="fa fa-ellipsis-h"> Ellipsis-h'},{value:"fa fa-ellipsis-v",label:'<i class="fa fa-ellipsis-v"> Ellipsis-v'},{value:"fa fa-envelope",label:'<i class="fa fa-envelope"> Envelope'},{value:"fa fa-envelope-o",label:'<i class="fa fa-envelope-o"> Envelope-o'},{value:"fa fa-envelope-square",label:'<i class="fa fa-envelope-square"> Envelope-square'},{value:"fa fa-eraser",label:'<i class="fa fa-eraser"> Eraser'},{value:"fa fa-exchange",label:'<i class="fa fa-exchange"> Exchange'},{value:"fa fa-exclamation",label:'<i class="fa fa-exclamation"> Exclamation'},{value:"fa fa-exclamation-circle",label:'<i class="fa fa-exclamation-circle"> Exclamation-circle'},{value:"fa fa-exclamation-triangle",label:'<i class="fa fa-exclamation-triangle"> Exclamation-triangle'},{value:"fa fa-external-link",label:'<i class="fa fa-external-link"> External-link'},{value:"fa fa-external-link-square",label:'<i class="fa fa-external-link-square"> External-link-square'},{value:"fa fa-eye",label:'<i class="fa fa-eye"> Eye'},{value:"fa fa-eye-slash",label:'<i class="fa fa-eye-slash"> Eye-slash'},{value:"fa fa-eyedropper",label:'<i class="fa fa-eyedropper"> Eyedropper'},{value:"fa fa-fax",label:'<i class="fa fa-fax"> Fax'},{value:"fa fa-female",label:'<i class="fa fa-female"> Female'},{value:"fa fa-fighter-jet",label:'<i class="fa fa-fighter-jet"> Fighter-jet'},{value:"fa fa-file-archive-o",label:'<i class="fa fa-file-archive-o"> File-archive-o'},{value:"fa fa-file-audio-o",label:'<i class="fa fa-file-audio-o"> File-audio-o'},{value:"fa fa-file-code-o",label:'<i class="fa fa-file-code-o"> File-code-o'},{value:"fa fa-file-excel-o",label:'<i class="fa fa-file-excel-o"> File-excel-o'},{value:"fa fa-file-image-o",label:'<i class="fa fa-file-image-o"> File-image-o'},{value:"fa fa-file-movie-o",label:'<i class="fa fa-file-movie-o"> File-movie-o'},{value:"fa fa-file-pdf-o",label:'<i class="fa fa-file-pdf-o"> File-pdf-o'},{value:"fa fa-file-photo-o",label:'<i class="fa fa-file-photo-o"> File-photo-o'},{value:"fa fa-file-picture-o",label:'<i class="fa fa-file-picture-o"> File-picture-o'},{value:"fa fa-file-powerpoint-o",label:'<i class="fa fa-file-powerpoint-o"> File-powerpoint-o'},{value:"fa fa-file-sound-o",label:'<i class="fa fa-file-sound-o"> File-sound-o'},{value:"fa fa-file-video-o",label:'<i class="fa fa-file-video-o"> File-video-o'},{value:"fa fa-file-word-o",label:'<i class="fa fa-file-word-o"> File-word-o'},{value:"fa fa-file-zip-o",label:'<i class="fa fa-file-zip-o"> File-zip-o'},{value:"fa fa-film",label:'<i class="fa fa-film"> Film'},{value:"fa fa-filter",label:'<i class="fa fa-filter"> Filter'},{value:"fa fa-fire",label:'<i class="fa fa-fire"> Fire'},{value:"fa fa-fire-extinguisher",label:'<i class="fa fa-fire-extinguisher"> Fire-extinguisher'},{value:"fa fa-flag",label:'<i class="fa fa-flag"> Flag'},{value:"fa fa-flag-checkered",label:'<i class="fa fa-flag-checkered"> Flag-checkered'},{value:"fa fa-flag-o",label:'<i class="fa fa-flag-o"> Flag-o'},{value:"fa fa-flash",label:'<i class="fa fa-flash"> Flash'},{value:"fa fa-flask",label:'<i class="fa fa-flask"> Flask'},{value:"fa fa-folder",label:'<i class="fa fa-folder"> Folder'},{value:"fa fa-folder-o",label:'<i class="fa fa-folder-o"> Folder-o'},{value:"fa fa-folder-open",label:'<i class="fa fa-folder-open"> Folder-open'},{value:"fa fa-folder-open-o",label:'<i class="fa fa-folder-open-o"> Folder-open-o'},{value:"fa fa-frown-o",label:'<i class="fa fa-frown-o"> Frown-o'},{value:"fa fa-futbol-o",label:'<i class="fa fa-futbol-o"> Futbol-o'},{value:"fa fa-gamepad",label:'<i class="fa fa-gamepad"> Gamepad'},{value:"fa fa-gavel",label:'<i class="fa fa-gavel"> Gavel'},{value:"fa fa-gear",label:'<i class="fa fa-gear"> Gear'},{value:"fa fa-gears",label:'<i class="fa fa-gears"> Gears'},{value:"fa fa-gift",label:'<i class="fa fa-gift"> Gift'},{value:"fa fa-glass",label:'<i class="fa fa-glass"> Glass'},{value:"fa fa-globe",label:'<i class="fa fa-globe"> Globe'},{value:"fa fa-graduation-cap",label:'<i class="fa fa-graduation-cap"> Graduation-cap'},{value:"fa fa-group",label:'<i class="fa fa-group"> Group'},{value:"fa fa-hdd-o",label:'<i class="fa fa-hdd-o"> Hdd-o'},{value:"fa fa-headphones",label:'<i class="fa fa-headphones"> Headphones'},{value:"fa fa-heart",label:'<i class="fa fa-heart"> Heart'},{value:"fa fa-heart-o",label:'<i class="fa fa-heart-o"> Heart-o'},{value:"fa fa-heartbeat",label:'<i class="fa fa-heartbeat"> Heartbeat'},{value:"fa fa-history",label:'<i class="fa fa-history"> History'},{value:"fa fa-home",label:'<i class="fa fa-home"> Home'},{value:"fa fa-hotel",label:'<i class="fa fa-hotel"> Hotel'},{value:"fa fa-image",label:'<i class="fa fa-image"> Image'},{value:"fa fa-inbox",label:'<i class="fa fa-inbox"> Inbox'},{value:"fa fa-info",label:'<i class="fa fa-info"> Info'},{value:"fa fa-info-circle",label:'<i class="fa fa-info-circle"> Info-circle'},{value:"fa fa-institution",label:'<i class="fa fa-institution"> Institution'},{value:"fa fa-key",label:'<i class="fa fa-key"> Key'},{value:"fa fa-keyboard-o",label:'<i class="fa fa-keyboard-o"> Keyboard-o'},{value:"fa fa-language",label:'<i class="fa fa-language"> Language'},{value:"fa fa-laptop",label:'<i class="fa fa-laptop"> Laptop'},{value:"fa fa-leaf",label:'<i class="fa fa-leaf"> Leaf'},{value:"fa fa-legal",label:'<i class="fa fa-legal"> Legal'},{value:"fa fa-lemon-o",label:'<i class="fa fa-lemon-o"> Lemon-o'},{value:"fa fa-level-down",label:'<i class="fa fa-level-down"> Level-down'},{value:"fa fa-level-up",label:'<i class="fa fa-level-up"> Level-up'},{value:"fa fa-life-bouy",label:'<i class="fa fa-life-bouy"> Life-bouy'},{value:"fa fa-life-buoy",label:'<i class="fa fa-life-buoy"> Life-buoy'},{value:"fa fa-life-ring",label:'<i class="fa fa-life-ring"> Life-ring'},{value:"fa fa-life-saver",label:'<i class="fa fa-life-saver"> Life-saver'},{value:"fa fa-lightbulb-o",label:'<i class="fa fa-lightbulb-o"> Lightbulb-o'},{value:"fa fa-line-chart",label:'<i class="fa fa-line-chart"> Line-chart',chart:!0},{value:"fa fa-location-arrow",label:'<i class="fa fa-location-arrow"> Location-arrow'},{value:"fa fa-lock",label:'<i class="fa fa-lock"> Lock'},{value:"fa fa-magic",label:'<i class="fa fa-magic"> Magic'},{value:"fa fa-magnet",label:'<i class="fa fa-magnet"> Magnet'},{value:"fa fa-mail-forward",label:'<i class="fa fa-mail-forward"> Mail-forward'},{value:"fa fa-mail-reply",label:'<i class="fa fa-mail-reply"> Mail-reply'},{value:"fa fa-mail-reply-all",label:'<i class="fa fa-mail-reply-all"> Mail-reply-all'},{value:"fa fa-male",label:'<i class="fa fa-male"> Male'},{value:"fa fa-meh-o",label:'<i class="fa fa-meh-o"> Meh-o'},{value:"fa fa-microphone",label:'<i class="fa fa-microphone"> Microphone'},{value:"fa fa-microphone-slash",label:'<i class="fa fa-microphone-slash"> Microphone-slash'},{value:"fa fa-minus",label:'<i class="fa fa-minus"> Minus'},{value:"fa fa-minus-circle",label:'<i class="fa fa-minus-circle"> Minus-circle'},{value:"fa fa-minus-square",label:'<i class="fa fa-minus-square"> Minus-square'},{value:"fa fa-minus-square-o",label:'<i class="fa fa-minus-square-o"> Minus-square-o'},{value:"fa fa-mobile",label:'<i class="fa fa-mobile"> Mobile'},{value:"fa fa-mobile-phone",label:'<i class="fa fa-mobile-phone"> Mobile-phone'},{value:"fa fa-money",label:'<i class="fa fa-money"> Money'},{value:"fa fa-moon-o",label:'<i class="fa fa-moon-o"> Moon-o'},{value:"fa fa-mortar-board",label:'<i class="fa fa-mortar-board"> Mortar-board'},{value:"fa fa-motorcycle",label:'<i class="fa fa-motorcycle"> Motorcycle'},{value:"fa fa-music",label:'<i class="fa fa-music"> Music'},{value:"fa fa-navicon",label:'<i class="fa fa-navicon"> Navicon'},{value:"fa fa-newspaper-o",label:'<i class="fa fa-newspaper-o"> Newspaper-o'},{value:"fa fa-paint-brush",label:'<i class="fa fa-paint-brush"> Paint-brush'},{value:"fa fa-paper-plane",label:'<i class="fa fa-paper-plane"> Paper-plane'},{value:"fa fa-paper-plane-o",label:'<i class="fa fa-paper-plane-o"> Paper-plane-o'},{value:"fa fa-paw",label:'<i class="fa fa-paw"> Paw'},{value:"fa fa-pencil",label:'<i class="fa fa-pencil"> Pencil'},{value:"fa fa-pencil-square",label:'<i class="fa fa-pencil-square"> Pencil-square'},{value:"fa fa-pencil-square-o",label:'<i class="fa fa-pencil-square-o"> Pencil-square-o'},{value:"fa fa-phone",label:'<i class="fa fa-phone"> Phone'},{value:"fa fa-phone-square",label:'<i class="fa fa-phone-square"> Phone-square'},{value:"fa fa-photo",label:'<i class="fa fa-photo"> Photo'},{value:"fa fa-picture-o",label:'<i class="fa fa-picture-o"> Picture-o'},{value:"fa fa-pie-chart",label:'<i class="fa fa-pie-chart"> Pie-chart',chart:!0},{value:"fa fa-plane",label:'<i class="fa fa-plane"> Plane'},{value:"fa fa-plug",label:'<i class="fa fa-plug"> Plug'},{value:"fa fa-plus",label:'<i class="fa fa-plus"> Plus'},{value:"fa fa-plus-circle",label:'<i class="fa fa-plus-circle"> Plus-circle'},{value:"fa fa-plus-square",label:'<i class="fa fa-plus-square"> Plus-square'},{value:"fa fa-plus-square-o",label:'<i class="fa fa-plus-square-o"> Plus-square-o'},{value:"fa fa-power-off",label:'<i class="fa fa-power-off"> Power-off'},{value:"fa fa-print",label:'<i class="fa fa-print"> Print'},{value:"fa fa-puzzle-piece",label:'<i class="fa fa-puzzle-piece"> Puzzle-piece'},{value:"fa fa-qrcode",label:'<i class="fa fa-qrcode"> Qrcode'},{value:"fa fa-question",label:'<i class="fa fa-question"> Question'},{value:"fa fa-question-circle",label:'<i class="fa fa-question-circle"> Question-circle'},{value:"fa fa-quote-left",label:'<i class="fa fa-quote-left"> Quote-left'},{value:"fa fa-quote-right",label:'<i class="fa fa-quote-right"> Quote-right'},{value:"fa fa-random",label:'<i class="fa fa-random"> Random'},{value:"fa fa-recycle",label:'<i class="fa fa-recycle"> Recycle'},{value:"fa fa-refresh",label:'<i class="fa fa-refresh"> Refresh'},{value:"fa fa-remove",label:'<i class="fa fa-remove"> Remove'},{value:"fa fa-reorder",label:'<i class="fa fa-reorder"> Reorder'},{value:"fa fa-reply",label:'<i class="fa fa-reply"> Reply'},{value:"fa fa-reply-all",label:'<i class="fa fa-reply-all"> Reply-all'},{value:"fa fa-retweet",label:'<i class="fa fa-retweet"> Retweet'},{value:"fa fa-road",label:'<i class="fa fa-road"> Road'},{value:"fa fa-rocket",label:'<i class="fa fa-rocket"> Rocket'},{value:"fa fa-rss",label:'<i class="fa fa-rss"> Rss'},{value:"fa fa-rss-square",label:'<i class="fa fa-rss-square"> Rss-square'},{value:"fa fa-search",label:'<i class="fa fa-search"> Search'},{value:"fa fa-search-minus",label:'<i class="fa fa-search-minus"> Search-minus'},{value:"fa fa-search-plus",label:'<i class="fa fa-search-plus"> Search-plus'},{value:"fa fa-send",label:'<i class="fa fa-send"> Send'},{value:"fa fa-send-o",label:'<i class="fa fa-send-o"> Send-o'},{value:"fa fa-server",label:'<i class="fa fa-server"> Server'},{value:"fa fa-share",label:'<i class="fa fa-share"> Share'},{value:"fa fa-share-alt",label:'<i class="fa fa-share-alt"> Share-alt'},{value:"fa fa-share-alt-square",label:'<i class="fa fa-share-alt-square"> Share-alt-square'},{value:"fa fa-share-square",label:'<i class="fa fa-share-square"> Share-square'},{value:"fa fa-share-square-o",label:'<i class="fa fa-share-square-o"> Share-square-o'},{value:"fa fa-shield",label:'<i class="fa fa-shield"> Shield'},{value:"fa fa-ship",label:'<i class="fa fa-ship"> Ship'},{value:"fa fa-shopping-cart",label:'<i class="fa fa-shopping-cart"> Shopping-cart'},{value:"fa fa-sign-in",label:'<i class="fa fa-sign-in"> Sign-in'},{value:"fa fa-sign-out",label:'<i class="fa fa-sign-out"> Sign-out'},{value:"fa fa-signal",label:'<i class="fa fa-signal"> Signal'},{value:"fa fa-sitemap",label:'<i class="fa fa-sitemap"> Sitemap'},{value:"fa fa-sliders",label:'<i class="fa fa-sliders"> Sliders'},{value:"fa fa-smile-o",label:'<i class="fa fa-smile-o"> Smile-o'},{value:"fa fa-soccer-ball-o",label:'<i class="fa fa-soccer-ball-o"> Soccer-ball-o'},{value:"fa fa-sort",label:'<i class="fa fa-sort"> Sort'},{value:"fa fa-sort-alpha-asc",label:'<i class="fa fa-sort-alpha-asc"> Sort-alpha-asc'},{value:"fa fa-sort-alpha-desc",label:'<i class="fa fa-sort-alpha-desc"> Sort-alpha-desc'},{value:"fa fa-sort-amount-asc",label:'<i class="fa fa-sort-amount-asc"> Sort-amount-asc'},{value:"fa fa-sort-amount-desc",label:'<i class="fa fa-sort-amount-desc"> Sort-amount-desc'},{value:"fa fa-sort-asc",label:'<i class="fa fa-sort-asc"> Sort-asc'},{value:"fa fa-sort-desc",label:'<i class="fa fa-sort-desc"> Sort-desc'},{value:"fa fa-sort-down",label:'<i class="fa fa-sort-down"> Sort-down'},{value:"fa fa-sort-numeric-asc",label:'<i class="fa fa-sort-numeric-asc"> Sort-numeric-asc'},{value:"fa fa-sort-numeric-desc",label:'<i class="fa fa-sort-numeric-desc"> Sort-numeric-desc'},{value:"fa fa-sort-up",label:'<i class="fa fa-sort-up"> Sort-up'},{value:"fa fa-space-shuttle",label:'<i class="fa fa-space-shuttle"> Space-shuttle'},{value:"fa fa-spinner",label:'<i class="fa fa-spinner"> Spinner'},{value:"fa fa-spoon",label:'<i class="fa fa-spoon"> Spoon'},{value:"fa fa-square",label:'<i class="fa fa-square"> Square'},{value:"fa fa-square-o",label:'<i class="fa fa-square-o"> Square-o'},{value:"fa fa-star",label:'<i class="fa fa-star"> Star'},{value:"fa fa-star-half",label:'<i class="fa fa-star-half"> Star-half'},{value:"fa fa-star-half-empty",label:'<i class="fa fa-star-half-empty"> Star-half-empty'},{value:"fa fa-star-half-full",label:'<i class="fa fa-star-half-full"> Star-half-full'},{value:"fa fa-star-half-o",label:'<i class="fa fa-star-half-o"> Star-half-o'},{value:"fa fa-star-o",label:'<i class="fa fa-star-o"> Star-o'},{value:"fa fa-street-view",label:'<i class="fa fa-street-view"> Street-view'},{value:"fa fa-suitcase",label:'<i class="fa fa-suitcase"> Suitcase'},{value:"fa fa-sun-o",label:'<i class="fa fa-sun-o"> Sun-o'},{value:"fa fa-support",label:'<i class="fa fa-support"> Support'},{value:"fa fa-tablet",label:'<i class="fa fa-tablet"> Tablet'},{value:"fa fa-tachometer",label:'<i class="fa fa-tachometer"> Tachometer'},{value:"fa fa-tag",label:'<i class="fa fa-tag"> Tag'},{value:"fa fa-tags",label:'<i class="fa fa-tags"> Tags'},{value:"fa fa-tasks",label:'<i class="fa fa-tasks"> Tasks'},{value:"fa fa-taxi",label:'<i class="fa fa-taxi"> Taxi'},{value:"fa fa-terminal",label:'<i class="fa fa-terminal"> Terminal'},{value:"fa fa-thumb-tack",label:'<i class="fa fa-thumb-tack"> Thumb-tack'},{value:"fa fa-thumbs-down",label:'<i class="fa fa-thumbs-down"> Thumbs-down'},{value:"fa fa-thumbs-o-down",label:'<i class="fa fa-thumbs-o-down"> Thumbs-o-down'},{value:"fa fa-thumbs-o-up",label:'<i class="fa fa-thumbs-o-up"> Thumbs-o-up'},{value:"fa fa-thumbs-up",label:'<i class="fa fa-thumbs-up"> Thumbs-up'},{value:"fa fa-ticket",label:'<i class="fa fa-ticket"> Ticket'},{value:"fa fa-times",label:'<i class="fa fa-times"> Times'},{value:"fa fa-times-circle",label:'<i class="fa fa-times-circle"> Times-circle'},{value:"fa fa-times-circle-o",label:'<i class="fa fa-times-circle-o"> Times-circle-o'},{value:"fa fa-tint",label:'<i class="fa fa-tint"> Tint'},{value:"fa fa-toggle-down",label:'<i class="fa fa-toggle-down"> Toggle-down'},{value:"fa fa-toggle-left",label:'<i class="fa fa-toggle-left"> Toggle-left'},{value:"fa fa-toggle-off",label:'<i class="fa fa-toggle-off"> Toggle-off'},{value:"fa fa-toggle-on",label:'<i class="fa fa-toggle-on"> Toggle-on'},{value:"fa fa-toggle-right",label:'<i class="fa fa-toggle-right"> Toggle-right'},{value:"fa fa-toggle-up",label:'<i class="fa fa-toggle-up"> Toggle-up'},{value:"fa fa-trash",label:'<i class="fa fa-trash"> Trash'},{value:"fa fa-trash-o",label:'<i class="fa fa-trash-o"> Trash-o'},{value:"fa fa-tree",label:'<i class="fa fa-tree"> Tree'},{value:"fa fa-trophy",label:'<i class="fa fa-trophy"> Trophy'},{value:"fa fa-truck",label:'<i class="fa fa-truck"> Truck'},{value:"fa fa-tty",label:'<i class="fa fa-tty"> Tty'},{value:"fa fa-umbrella",label:'<i class="fa fa-umbrella"> Umbrella'},{value:"fa fa-university",label:'<i class="fa fa-university"> University'},{value:"fa fa-unlock",label:'<i class="fa fa-unlock"> Unlock'},{value:"fa fa-unlock-alt",label:'<i class="fa fa-unlock-alt"> Unlock-alt'},{value:"fa fa-unsorted",label:'<i class="fa fa-unsorted"> Unsorted'},{value:"fa fa-upload",label:'<i class="fa fa-upload"> Upload'},{value:"fa fa-user",label:'<i class="fa fa-user"> User'},{value:"fa fa-user-plus",label:'<i class="fa fa-user-plus"> User-plus'},{value:"fa fa-user-secret",label:'<i class="fa fa-user-secret"> User-secret'},{value:"fa fa-user-times",label:'<i class="fa fa-user-times"> User-times'},{value:"fa fa-users",label:'<i class="fa fa-users"> Users'},{value:"fa fa-video-camera",label:'<i class="fa fa-video-camera"> Video-camera'},{value:"fa fa-volume-down",label:'<i class="fa fa-volume-down"> Volume-down'},{value:"fa fa-volume-off",label:'<i class="fa fa-volume-off"> Volume-off'},{value:"fa fa-volume-up",label:'<i class="fa fa-volume-up"> Volume-up'},{value:"fa fa-warning",label:'<i class="fa fa-warning"> Warning'},{value:"fa fa-wheelchair",label:'<i class="fa fa-wheelchair"> Wheelchair'},{value:"fa fa-wifi",label:'<i class="fa fa-wifi"> Wifi'},{value:"fa fa-wrench",label:'<i class="fa fa-wrench"> Wrench'}]});