angular.module("primeapps").factory("ModuleService",["$rootScope","$http","config","$q","$filter","$cache","$window","helper","operations","ngTableParams","icons","dataTypes","operators","activityTypes","transactionTypes","yesNo","components",function($rootScope,$http,config,$q,$filter,$cache,$window,helper,operations,ngTableParams,icons,dataTypes,operators,activityTypes,transactionTypes,yesNo,components){return{myAccount:function(){return $http.post(config.apiUrl+"User/MyAccount",{})},getAllUser:function(){return $http.get(config.apiUrl+"User/get_all")},getUserLicenseStatus:function(){return $http.post(config.apiUrl+"License/GetUserLicenseStatus",{})},addUser:function(a){return $http.post(config.apiUrl+"User/add_user",a)},deleteUser:function(a,e){return $http.post(config.apiUrl+"Instance/Dismiss",{UserID:a.ID,EMail:a.email,HasAccount:a.hasAccount,InstanceID:e})},getUserEmailControl:function(a){return $http.get(config.apiUrl+"User/get_user_email_control?Email="+a)},get:function(a){return $http.get(config.apiUrl+"template/get/"+a)},create:function(a){return $http.post(config.apiUrl+"module/create",a)},update:function(a,e){return $http.put(config.apiUrl+"module/update/"+e,a)},"delete":function(a){return $http["delete"](config.apiUrl+"module/delete/"+a)},createModuleRelation:function(a,e){return $http.post(config.apiUrl+"module/create_relation/"+e,a)},updateModuleRelation:function(a,e){return $http.put(config.apiUrl+"module/update_relation/"+e+"/"+a.id,a)},deleteModuleRelation:function(a){return $http["delete"](config.apiUrl+"module/delete_relation/"+a)},createModuleDependency:function(a,e){return $http.post(config.apiUrl+"module/create_dependency/"+e,a)},updateModuleDependency:function(a,e){return $http.put(config.apiUrl+"module/update_dependency/"+e+"/"+a.id,a)},deleteModuleDependency:function(a){return $http["delete"](config.apiUrl+"module/delete_dependency/"+a)},getRecord:function(a,e,l){return $http.get(config.apiUrl+"record/get/"+a+"/"+e,{ignoreNotFound:l})},findRecords:function(a,e){return $rootScope.activeModuleName=null,("current_accounts"===a||"kasa_hareketleri"===a||"banka_hareketleri"===a||"stock_transactions"===a)&&("stock_transactions"===a&&e.sort_field?e.sort_field="transaction_date,id":"stock_transactions"!==a&&e.sort_field&&(e.sort_field+=",id")),$http.post(config.apiUrl+"record/find/"+a,e)},insertRecord:function(a,e){return $http.post(config.apiUrl+"record/create/"+a+"?timezone_offset="+-1*(new Date).getTimezoneOffset(),e)},updateRecord:function(a,e){return delete e.process_id,delete e.process_status,delete e.process_status_order,delete e.operation_type,delete e.process_request_updated_by,delete e.process_request_updated_at,delete e.freeze,$http.put(config.apiUrl+"record/update/"+a+"?timezone_offset="+-1*(new Date).getTimezoneOffset(),e)},deleteRecord:function(a,e){if($rootScope.branchAvailable&&"calisanlar"===a){var l=$q.defer(),i=this;return this.getRecord(a,e).then(function(t){if(t.data){var r=$filter("filter")($rootScope.workgroup.users,{email:t.data.e_posta},!0)[0];r&&i.deleteUser(r,$rootScope.workgroup.tenant_id),$http["delete"](config.apiUrl+"record/delete/"+a+"/"+e).then(function(a){return l.resolve(a),l.promise})}}),l.promise}return $http["delete"](config.apiUrl+"record/delete/"+a+"/"+e)},addRelations:function(a,e,l){return $http.post(config.apiUrl+"record/add_relations/"+a+"/"+e,l)},deleteRelation:function(a,e,l){return $http({method:"DELETE",url:config.apiUrl+"record/delete_relation/"+a+"/"+e,data:l,headers:{"Content-type":"application/json;charset=utf-8"}})},insertRecordBulk:function(a,e){for(var l=0;l<e.length;l++){e[l]}return $http.post(config.apiUrl+"record/create_bulk/"+a,e)},deleteRecordBulk:function(a,e){return $http({method:"DELETE",url:config.apiUrl+"record/delete_bulk/"+a,data:e,headers:{"Content-type":"application/json;charset=utf-8"}})},updateRecordBulk:function(a,e){return delete e.record.shared_users_edit,delete e.record.shared_users,delete e.record.shared_user_groups_edit,delete e.record.shared_user_groups,delete e.record.shared_read,$http({method:"Put",url:config.apiUrl+"record/update_bulk/"+a,data:e,headers:{"Content-type":"application/json;charset=utf-8"}})},findPicklist:function(a){return $http.post(config.apiUrl+"picklist/find",a)},setViewState:function(a,e,l){return l&&(a.id=l),a.module_id=e,$http.put(config.apiUrl+"view/set_view_state",a)},deleteView:function(a){return $http["delete"](config.apiUrl+"view/delete/"+a)},approveMultipleProcessRequest:function(a,e){return $http.put(config.apiUrl+"process_request/approve_multiple_request",{record_ids:a,module_name:e})},approveProcessRequest:function(a,e,l){return $http.put(config.apiUrl+"process_request/approve",{record_id:l,module_name:e,operation_type:a})},rejectProcessRequest:function(a,e,l,i){return $http.put(config.apiUrl+"process_request/reject",{record_id:i,module_name:e,operation_type:a,message:l})},deleteProcessRequest:function(a,e){return $http.put(config.apiUrl+"process_request/delete",{record_id:e,module_id:a})},send_approval:function(a,e,l){return $http.put(config.apiUrl+"process_request/send_approval",{record_id:l,module_name:e,operation_type:a})},sendApprovalManuel:function(a){return $http.post(config.apiUrl+"process_request/send_approval_manuel",a)},getProcess:function(a){return $http.get(config.apiUrl+"process/get/"+a)},getAllProcess:function(){return $http.get(config.apiUrl+"process/get_all")},convertSalesInvoice:function(a){return $http.post(config.apiUrl+"convert/convert_sales_orders",a)},convertPurchaseInvoice:function(a){return $http.post(config.apiUrl+"convert/convert_purchase_orders",a)},sendSMS:function(a,e,l,i,t,r){return $http.post(config.apiUrl+"messaging/send_sms",{module_id:a,Ids:e,Query:l,IsAllSelected:i,Message:t,phone_field:r})},sendEMail:function(a,e,l,i,t,r,s,o,n,f,u,d,c,p,_){return $http.post(config.apiUrl+"messaging/send_email",{module_id:a,Ids:e,Query:l,is_all_selected:i,Message:t,e_mail_field:r,Cc:s,Bcc:o,sender_alias:n,provider_type:u,sender_e_mail:f,attachment_container:d,subject:c,attachment_link:p,attachment_name:_})},getTemplates:function(a,e){return $http.get(config.apiUrl+"template/get_all?moduleName="+a+"&type="+e)},processRecordSingle:function(a,e,l){for(var i=0;i<e.fields.length;i++){var t=e.fields[i];this.processRecordField(a,t,l)}return a},formatRecordFieldValues:function(a,e,l){for(var i=0;i<e.fields.length;i++){var t=e.fields[i];this.formatFieldValue(t,a[t.name],l,a,e)}},processRecordMulti:function(a,e,l,i,t,r,s,o,n,f,u,d){for(var c=[],p=function(a,e,l,i,t,r,s,o,n,f,u,d){var c="#/app/module/";if(u.external_link)return void(a.link=d?u.external_link+"?id="+a.value_id+"&back="+l:u.external_link+"?id="+e.id+"&back="+l);"rehber"===l&&(c="#/app/",l="directory");var p;if(f&&(p=f.$parent.record),f&&!p&&(p=f.$parent.$parent.record),f&&!p&&(p=f.$parent.$parent.$parent.record),a.primary||"email"==a.data_type||"url"==a.data_type||"lookup"==a.data_type||"location"==a.data_type){if(a.primary&&!a.isJoin)return void(a.link=c+l+"?id="+e.id+(t?"&ptype="+i+"&pid="+t+"&rtab="+r+(p&&p.freeze?"&freeze=true":"")+(o?"&pptype="+s+"&ppid="+o+"&prtab="+n:""):""));if(a.primary&&a.isJoin&&"users"!=a.value_type&&"profiles"!=a.value_type&&"roles"!=a.value_type)return void(a.link=c+a.value_type+"?id="+a.value_id+(t?"&ptype="+i+"&pid="+t+(p&&p.freeze?"&freeze=true":""):"&back="+l));if("lookup"===a.data_type&&"users"!=a.lookup_type&&"profiles"!=a.lookup_type&&"roles"!=a.lookup_type){var _=a.lookup_type;"object"==typeof a.lookup_type&&(_=a.lookup_type.id);var m=e[a.name+"."+_+".id"];return void(a.link=c+_+"?id="+m+(t?"&ptype="+i+"&pid="+t+"&rtab="+r+(p&&p.freeze?"&freeze=true":"")+(o?"&pptype="+s+"&ppid="+o+"&prtab="+n:""):"&back="+l))}"email"===a.data_type&&(a.link="mailto:"+a.value),"url"===a.data_type&&(a.link=a.value),"location"===a.data_type&&(a.link="http://www.google.com/maps/place/"+a.value)}},_=function(a,e,l,i,t){switch(a.data_type){case"text_single":a.mask&&t?e.valueFormatted=$filter("mask")(t,a.mask):(e.value=t,e.valueFormatted=a.valueFormatted);break;case"lookup":if(!l[i])return;e.value=l[i],e.lookup_type="relation"!=a.lookup_type?a.lookup_type:l[a.lookup_relation],e.valueFormatted=e.value;break;case"picklist":case"multiselect":case"tag":case"checkbox":e.value=a.valueFormatted,e.valueFormatted=a.valueFormatted;break;default:e.value=t,e.valueFormatted=a.valueFormatted}},m=angular.copy(a),v=0;v<m.length;v++){var h=m[v],b={};b.id=h.id||h[e.name+"_id"],h["process.process_requests.process_id"]?(b.isProcessItem=!0,b["process.process_requests.process_status"]=h["process.process_requests.process_status"]):b.isProcessItem=!1,b.shared_users_edit=h.shared_users_edit,b.shared_users=h.shared_users,b.shared_user_groups_edit=h.shared_user_groups_edit,b.shared_user_groups=h.shared_user_groups,b.shared_read=h.shared_read,b.fields=[];for(var g=0;g<i.length;g++){var y=i[g],k=angular.copy(e),$=y.field,w=!1;if(y.field.indexOf(".")>-1){var S=y.field.split(".");if(null!=S[3]&&"primary"===S[3])continue;k=$filter("filter")($rootScope.modules,{name:S[1]},!0)[0],$=S[2],w=!0}for(var D=0;D<k.fields.length;D++){var z=k.fields[D];if($===z.name&&this.hasFieldDisplayPermission(z)){if(null==l){var M=this.getPicklists(e);l=M.$$state.value}this.processRecordsField(h,z,!0),this.formatFieldValue(z,h[y.field],l,h,e);var Y={data_type:z.data_type,name:z.name,primary:z.primary,value:"",isJoin:w,isHtml:z.multiline_type_use_html,image_size_list:z.image_size_list};"rating"===z.data_type&&(Y.max=z.validation.min_length);for(var F in h)if(h.hasOwnProperty(F)){var q=h[F],P=!1;if(F.indexOf(".")>-1){var x=F.split(".");w&&z.primary&&(Y.value_id=h[x[0]+"."+x[1]+".id"],Y.value_type=x[1],P=!0),F=x[2]}if(F!==z.name)continue;_(z,Y,h,F,q),p(Y,h,t,s,r,o,n,f,u,d,z,P)}Y.order=y.order||z.order,b.fields.push(Y)}}}c.push(b)}return c},processRecordField:function(a,e,l){var i=e.name;switch(e.data_type){case"lookup":var t={},r=null===a[i+".id"];void 0===a[i+".id"]&&(e.inline_edit=!1,r=!0);for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];if(s.startsWith(i+".")){if(!r){var n=s.split(".");if(n[0]!==e.name)continue;t[n[1]]=o}delete a[s]}}if(r)return;if("users"===e.lookup_type)t.primary_value=t.full_name;else if("profiles"===e.lookup_type)t.primary_value=t.name;else if("roles"===e.lookup_type)t.primary_value=t["label_"+$rootScope.user.tenant_language];else if("relation"===e.lookup_type)t=a[e.lookup_relation]&&a.related_to?a.related_to:null;else{var f=$filter("filter")($rootScope.modules,{name:e.lookup_type},!0)[0],u=$filter("filter")(f.fields,{primary:!0,deleted:!1},!0)[0];t.primary_value=t[u.name]}a[i]=t;break;case"picklist":var d=$filter("filter")(l[e.picklist_id],{labelStr:a[i],inactive:"!true"},!0)[0];a[i]=d;break;case"multiselect":var c=[];if(a[i]&&a[i].length>0)for(var p=0;p<a[i].length;p++){var _=a[i][p],d=$filter("filter")(l[e.picklist_id],{labelStr:_,inactive:"!true"},!0)[0];d&&c.push(d)}a[i]=c;break;case"date":case"date_time":case"time":if(void 0===a[i]||null===a[i]||!a[i].length)return;a[i]=new Date(a[i])}},processRecordsField:function(a,e){var l=e.name;switch(e.data_type){case"lookup":var i=$filter("filter")($rootScope.modules,{name:e.lookup_type},!0)[0];if(null===i||void 0===i)return;var t=$filter("filter")(i.fields,{primary:!0},!0)[0];a[l]=a[e.name+"."+e.lookup_type+"."+t.name+".primary"];break;case"date":case"date_time":case"time":if(void 0===a[l]||null===a[l]||!a[l].length)return;a[l]=new Date(a[l])}},processUser:function(a){var e={};return e.id=a.id,e.primary_value=a.first_name+" "+a.last_name,e.email=a.email,e},processRecords:function(a,e,l){for(var i=[],t=angular.copy(a),r=0;r<t.length;r++){for(var s=t[r],o=0;o<e.fields.length;o++){var n=e.fields[o];this.processRecordsField(s,n,l),this.formatFieldValue(n,s[n.name],l,s,e)}i.push(s)}return i},formatFieldValue:function(a,e,l,i,t){if(a.valueFormatted="",void 0!==e&&null!==e)switch(a.data_type){case"number_decimal":a.valueFormatted=$filter("number")(e,a.decimal_places||2);break;case"number_auto":var r=e.toString();a.auto_number_prefix&&(r=a.auto_number_prefix+r),a.auto_number_suffix&&(r+=a.auto_number_suffix),a.valueFormatted=r;break;case"currency":var s;if(i&&i.currency)if(angular.isObject(i.currency))s=i.currency.value;else{var o=$filter("filter")(t.fields,{name:"currency"},!0)[0],n=$filter("filter")(l[o.picklist_id],{labelStr:i.currency})[0];n&&n.value&&(s=n.value)}a.valueFormatted=$filter("currency")(e,s||a.currency_symbol||$rootScope.currencySymbol,a.decimal_places||2);break;case"date":a.valueFormatted=$filter("date")(e,"shortDate");break;case"date_time":a.valueFormatted=$filter("date")(e,"short");break;case"time":a.valueFormatted=$filter("date")(e,"shortTime");break;case"picklist":if(angular.isObject(e))a.valueFormatted=e.label[$rootScope.language];else{var f=$filter("filter")(l[a.picklist_id],{labelStr:e},!0)[0];a.valueFormatted=f?f.label[$rootScope.language]:e}break;case"multiselect":for(var u=0;u<e.length;u++){var d=e[u];if(angular.isObject(d))a.valueFormatted+=(d.label?d.label[$rootScope.language]:"")+"; ";else{var f=$filter("filter")(l[a.picklist_id],{labelStr:d},!0)[0];a.valueFormatted+=(f?f.label[$rootScope.language]:d)+"; "}}a.valueFormatted=a.valueFormatted.slice(0,-2);break;case"tag":for(var u=0;u<e.length;u++){var d=e[u];a.valueFormatted+=angular.isObject(d)?" "+d:" "+d+";"}break;case"checkbox":a.valueFormatted=$filter("filter")(l.yes_no,{system_code:e.toString()})[0].label[$rootScope.language];break;default:a.valueFormatted=e}},getPicklists:function(a,e){var l=$q.defer(),i=angular.copy(a.fields),t={},r=[];if(e)for(var s=0;s<a.fields.length;s++){var o=a.fields[s];if("lookup"===o.data_type&&"users"!==o.lookup_type&&"profiles"!==o.lookup_type&&"roles"!==o.lookup_type&&"relation"!==o.lookup_type){var n=$filter("filter")($rootScope.modules,{name:o.lookup_type},!0)[0];if(!n)continue;for(var f=0;f<n.fields.length;f++){var u=n.fields[f];("picklist"===u.data_type||"multiselect"===u.data_type)&&i.push(u)}}}for(var d=function(e,l){if(a.dependencies&&a.dependencies.length>0){var i=$filter("filter")(a.dependencies,{child_field:l.name},!0)[0];if(i&&i.deleted!==!0&&"list_field"===i.dependency_type)for(var t=0;t<e.length;t++){var r=e[t];r.hidden=!0}}},c=0;c<i.length;c++){var p=i[c];if(p.picklist_id){var _=$cache.get("picklist_"+p.picklist_id);if(9e5===p.picklist_id){if(_){t[p.picklist_id]=_;continue}for(var m=[],v=0;v<$rootScope.modules.length;v++){var h=$rootScope.modules[v];if(h.display&&"activities"!==h.name&&helper.hasPermission(h.name,operations.read)){var b={};b.id=parseInt(h.id)+9e5,b.type=9e5,b.system_code=h.name,b.order=h.order,b.label={},b.label.en=h.label_en_singular,b.label.tr=h.label_tr_singular,b.labelStr=h["label_"+$rootScope.user.tenant_language+"_singular"],b.value=h.name,m.push(b)}}m=$filter("orderBy")(m,"order"),t[9e5]=m,$cache.put("picklist_"+9e5,m);continue}_?(_=$filter("orderByLabel")(_,$rootScope.language),p.picklist_sortorder&&!p.deleted&&(_=$filter("orderBy")(_,p.picklist_sortorder)),d(_,p),t[p.picklist_id]=_):r.push(p.picklist_id)}}var g=$cache.get("picklist_activity_type");t.activity_type=g?g:activityTypes;var y=$cache.get("picklist_transaction_type");y?t.transaction_type=y:"accounts"===a.name?t.transaction_type=$filter("filter")(transactionTypes,{type:1},!0):"suppliers"===a.name&&(t.transaction_type=$filter("filter")(transactionTypes,{type:2},!0));var k=$cache.get("picklist_yes_no");return t.yes_no=k?k:yesNo,r.length<=0?(l.resolve(t),l.promise):(r=r.getUnique(),this.findPicklist(r).then(function(e){if(!e.data)return l.resolve(t),l.promise;for(var s=0;s<i.length;s++){var o=i[s];if(o.picklist_id&&!(r.indexOf(o.picklist_id)<0)){var n=helper.mergePicklists(e.data);if(t[o.picklist_id]=$filter("filter")(n,{type:o.picklist_id},!0),t[o.picklist_id]=$filter("orderByLabel")(t[o.picklist_id],$rootScope.language),o.picklist_sortorder&&!o.deleted&&(t[o.picklist_id]=$filter("orderBy")(t[o.picklist_id],o.picklist_sortorder)),a.dependencies&&a.dependencies.length>0){var f=$filter("filter")(a.dependencies,{child_field:o.name},!0)[0];if(f&&1!=f.deleted&&"list_field"===f.dependency_type)for(var u=0;u<t[o.picklist_id].length;u++){var c=t[o.picklist_id][u];c.hidden=!0}}d(t[o.picklist_id],o),$cache.put("picklist_"+o.picklist_id,t[o.picklist_id])}}l.resolve(t)})["catch"](function(a){l.reject(a.data)}),l.promise)},lookup:function(a,e,l,i,t){var r=$q.defer(),s=e.lookup_type,o=this,n="lookup"===e.data_type&&e.show_as_dropdown;if("text_single"!==e.lookupModulePrimaryField.data_type&&"picklist"!==e.lookupModulePrimaryField.data_type&&"email"!=e.lookupModulePrimaryField.data_type&&"number"!==e.lookupModulePrimaryField.data_type&&"number_auto"!==e.lookupModulePrimaryField.data_type)return r.resolve([]),r.promise;if("relation"===s&&(s=void 0!==l[e.lookup_relation]?l[e.lookup_relation].value:null),!s)return r.resolve([]),r.promise;var f="users"!==s&&"profiles"!==s&&"roles"!==s?helper.hasPermission(s,operations.read):!0;if(!(f||$rootScope.branchAvailable&&"branchs"===s))return r.resolve([]),r.promise;if(!a&&!n)return r.resolve([]),r.promise;var u=$filter("filter")($rootScope.modules,{name:s},!0)[0],d=[];if(d.push(e.lookupModulePrimaryField.name),i)for(var c=0;c<i.length;c++){var p=i[c];p!==e.lookupModulePrimaryField.name&&"id"!==p&&d.push(p)}var _=[];if("number"!==e.lookupModulePrimaryField.data_type&&"number_auto"!==e.lookupModulePrimaryField.data_type)if(t)_.push({field:e.lookupModulePrimaryField.name,operator:"is",value:a,no:1});else switch(e.lookup_search_type){case"contains":_.push({field:e.lookupModulePrimaryField.name,operator:"contains",value:a,no:1});break;case"starts_with":_.push({field:e.lookupModulePrimaryField.name,operator:"starts_with",value:a,no:1});break;default:_.push({field:e.lookupModulePrimaryField.name,operator:"starts_with",value:a,no:1})}else _.push({field:e.lookupModulePrimaryField.name,operator:"equals",value:parseInt(a),no:1});var m={fields:d,filters:_,sort_field:e.lookupModulePrimaryField.name,sort_direction:"asc",limit:1e3,offset:0};if(n&&(m.filters=[],m.limit=1e3),"users"===u.name||$rootScope.branchAvailable&&"branchs"===s){var v=m.filters.length+1;m.filters.push({field:"is_active",operator:"equals",value:!0,no:v},{field:"email",operator:"not_contain",value:"integration",no:v+1})}if(e.filters)for(var h=m.filters.length,b=0;b<e.filters.length;b++){var g=e.filters[b];h++;var y=g.value.match(/^\W+(.+)]/i);if(null!==y&&"users"!==e.lookup_type&&"profiles"!==e.lookup_type&&"roles"!==e.lookup_type){var k,$=y[1].split(".");1===$.length&&l[$[0]]&&(k=l[$[0]]),2===$.length&&l[$[0]]&&(k=l[$[0]][$[1]]),3===$.length&&l[$[0]]&&(k=l[$[0]][$[1]][$[2]]),null!=k&&(m.filters.push({field:g.filter_field,operator:g.operator,value:k,no:h}),m.fields.push(g.filter_field))}else m.filters.push({field:g.filter_field,operator:g.operator,value:g.value,no:h}),m.fields.push(g.filter_field)}return this.findRecords(s,m).then(function(a){if(!a.data||!a.data.length)return r.resolve([]),r.promise;var l=[];if(i)o.getPicklists(u).then(function(i){for(var t=0;t<a.data.length;t++){var s=a.data[t],n=angular.copy(s);n=o.processRecordSingle(n,u,i),n.primary_value=s[e.lookupModulePrimaryField.name],l.push(n),r.resolve(l)}});else for(var t=0;t<a.data.length;t++){var n=a.data[t];"profiles"===s&&1===n.id&&(n.name="tr"===$rootScope.user.tenant_language?"Sistem Yöneticisi":"Administrator");var f=angular.copy(n);f.primary_value=n[e.lookupModulePrimaryField.name],l.push(f),r.resolve(l)}})["catch"](function(a){r.reject(a.data)}),r.promise},prepareRecord:function(a,e,l){function i(a){var e=document.createElement("div");return e.innerHTML=a,e.innerHTML.toString()}var t=angular.copy(a),r=angular.copy(l);if(l)for(var s=0;s<e.dependencies.length;s++){var o=e.dependencies[s];if("display"===o.dependency_type&&!o.deleted&&!angular.equals(a[o.parent_field],l[o.parent_field]))if(o.values_array&&o.values_array.length>0){for(var n=!0,f=0;f<o.values_array.length;f++){var u=o.values_array[f];if(Array.isArray(a[o.parent_field]))for(var d=0;d<a[o.parent_field].length;d++){var c=a[o.parent_field][d];c.id.toString()===u&&(n=!1)}else a[o.parent_field].id.toString()===u&&(n=!1)}n&&o.child_field&&(t[o.child_field]=null)}else!a[o.parent_field]&&o.child_field&&(t[o.child_field]=null)}for(var s=0;s<e.fields.length;s++){var p=e.fields[s];if("string"==typeof t[p.name]&&""===t[p.name].trim()&&(t[p.name]=void 0),l||t[p.name])if(!l||l[p.name]||t[p.name])if("checkbox"===p.data_type&&null===t[p.name]&&l[p.name]&&(t[p.name]=!1),p.deleted)delete t[p.name];else if(void 0!==t[p.name]&&null!==t[p.name]){switch(r||(r={}),p.data_type){case"number":t[p.name]=parseInt(t[p.name]),r[p.name]=r[p.name]?parseInt(r[p.name]):null;break;case"number_decimal":break;case"checkbox":null===t[p.name]&&void 0===t[p.name]&&(t[p.name]=!1);break;case"currency":t[p.name]=parseFloat(t[p.name]),r[p.name]=r[p.name]?parseFloat(r[p.name]):null;break;case"date":var _=moment(t[p.name]).format().split("+"),m=moment(r[p.name]).format().split("+");t[p.name]=_[0],r[p.name]=r[p.name]?m[0]:null;break;case"picklist":case"lookup":t[p.name]=t[p.name].id,r[p.name]=r[p.name]?r[p.name].id:null;break;case"text_multi":var v=t[p.name];if(p.multiline_type_use_html===!0){var h=i(v);t[p.name]=h}break;case"multiselect":for(var b=[],g=[],f=0;f<t[p.name].length;f++){var y=t[p.name][f];b.push(y.id)}if(r[p.name])for(var d=0;d<r[p.name].length;d++){var k=r[p.name][d];g.push(k.id)}t[p.name]=b&&b.length?b:null,r[p.name]=g&&g.length?g:null;break;case"tag":var $=[];angular.forEach(t[p.name],function(a){$.push(a.text)}),t[p.name]=$.toString()}l&&angular.equals(r[p.name],t[p.name])&&delete t[p.name]}else t[p.name]=null;else delete t[p.name]}if(t.shared_read&&t.shared_read.length){t.shared_users=[],t.shared_user_groups=[];for(var w=0;w<t.shared_read.length;w++){var S=t.shared_read[w];"user"===S.type&&t.shared_users.push(S.id),"group"===S.type&&t.shared_user_groups.push(S.id)}t.shared_users.length||(t.shared_users=null),t.shared_user_groups.length||(t.shared_user_groups=null),delete t.shared_read}else t.shared_users=null,t.shared_user_groups=null,delete t.shared_read;if(t.shared_edit&&t.shared_edit.length){t.shared_users_edit=[],t.shared_user_groups_edit=[];for(var D=0;D<t.shared_edit.length;D++){var z=t.shared_edit[D];"user"===z.type&&t.shared_users_edit.push(z.id),"group"===z.type&&t.shared_user_groups_edit.push(z.id)}t.shared_users_edit.length||(t.shared_users_edit=null),t.shared_user_groups_edit.length||(t.shared_user_groups_edit=null),delete t.shared_edit}else t.shared_users_edit=null,t.shared_user_groups_edit=null,delete t.shared_edit;return t},prepareRecordBulk:function(a,e){for(var l=this,i=[],t=0;t<a.length;t++){var r=a[t],s=l.prepareRecord(r,e);i.push(s)}return i},calculate:function(field,module,record){if(module.calculations){var calculation=$filter("filter")(module.calculations,{field_1:field.name},!0)[0];if(calculation||(calculation=$filter("filter")(module.calculations,{field_2:field.name},!0)[0]),calculation){var calculations=$filter("filter")(module.calculations,{result_field:calculation.result_field},!0);calculations=$filter("orderBy")(calculations,"order");for(var result=0,resultField="",i=0;i<calculations.length;i++){var calculation=calculations[i];result=eval((result||record[calculation.field_1]||0)+calculation.operator+(record[calculation.field_2]||calculation.custom_value||0)),resultField=calculation.result_field}record[resultField]=result||0,this.setCustomCalculations(module,record)}}},setDefaultValues:function(a,e,l){for(var i=0;i<a.fields.length;i++){var t=a.fields[i];if(!t.deleted){var r=t.name;if(void 0!==t.default_value&&null!==t.default_value&&!e[r]){switch(t.data_type){case"text_single":case"text_multi":case"number":case"number_decimal":case"currency":case"url":case"email":case"image":e[r]=t.default_value;break;case"date":case"time":case"date_time":"[now]"===t.default_value&&(e[r]=(new Date).toISOString());break;case"picklist":var s=$filter("filter")(l[t.picklist_id],{id:parseInt(t.default_value)},!0)[0];s||(s={},s.id=e[r],s.type=t.picklist_id,s.label={},s.label.tr=e[r],s.label.en=e[r],s.labelStr=e[r],s.required=!1,s.order=9999,helper.getPicklists([t.picklist_id],!0)),e[t.name]=s;break;case"lookup":var o="[me]"!==t.default_value?parseInt(t.default_value):$rootScope.user.id,n=angular.copy(t);this.getRecord(t.lookup_type,o,!0).then(function(a){var l={};l.id=a.data.id,l.primary_value=a.data[n.lookupModulePrimaryField.name],e[n.name]=l});break;case"multiselect":var f=t.default_value.split(";");e[r]=[];for(var u=0;u<f.length;u++){var d=f[u],c=$filter("filter")(l[t.picklist_id],{id:parseInt(d)},!0)[0];c||(c={},c.id=e[r],c.type=t.picklist_id,c.label={},c.label.tr=e[r],c.label.en=e[r],c.labelStr=e[r],c.required=!1,c.order=9999,c.inactive||helper.getPicklists([t.picklist_id],!0)),t.default_value&&e[r].push(c)}break;case"checkbox":e[t.name]="true"===t.default_value?!0:!1}this.setDisplayDependency(a,e)}}}var p=$filter("filter")(a.fields,{name:"currency",deleted:"!true"})[0];if(("products"===a.name||"quotes"===a.name||"sales_orders"===a.name||"purchase_orders"===a.name)&&!e.currency&&p&&$rootScope.currencySymbol){var _=angular.copy($rootScope.currencySymbol);"₺"===_&&(_="₺");var m=$filter("filter")(l[p.picklist_id],{value:_},!0)[0];e.currency=m,this.setDisplayDependency(a,e)}},setDependency:function(a,e,l,i,t){var r=this;if(!l.id&&l.event_start_date&&"event_start_date"===a.name){var s=new Date(l.event_start_date);0===s.getHours()&&0===s.getSeconds()&&0===s.getMilliseconds()&&(s.setHours(8),l.event_start_date=s),l.event_end_date=new Date(s.getTime()+36e5)}if(l.event_start_date&&l.event_end_date&&"event_end_date"===a.name){var o=new Date(l.event_start_date),n=new Date(l.event_end_date);o>n&&(l.event_start_date=new Date(n.getTime()-36e5))}if(!l.id&&"start_date"===a.calendar_date_type&&l[a.name]){var f=new Date(l[a.name]);0===f.getHours()&&0===f.getSeconds()&&0===f.getMilliseconds()&&(f.setHours(8),l[a.name]=f);var u=$filter("filter")(e.fields,{calendar_date_type:"end_date"},!0)[0];u&&(l[u.name]=new Date(f.getTime()+36e5))}if("end_date"===a.calendar_date_type&&l[a.name]){var d=$filter("filter")(e.fields,{calendar_date_type:"start_date"},!0)[0];if(d&&l[d.name]){var f=new Date(l[d.name]),c=new Date(l[a.name]);f>c&&(l[d.name]=new Date(c.getTime()-36e5))}}if("task_due_date"===a.name&&$rootScope.taskReminderAuto){var p=new Date(l.task_due_date);p.setTime(p.getTime()+288e5),l.task_reminder=p}if(e.dependencies){var _=$filter("filter")(e.dependencies,{parent_field:a.name},!0);if(_&&_.length)for(var m=0;m<_.length;m++){var v=_[m];if(!v.deleted){var h=$filter("filter")(e.fields,{name:v.child_field},!0)[0];if(v.clear)l[v.child_field]=void 0,t.$broadcast("angucomplete-alt:clearInput",v.child_field);else{if(!h)continue;switch(v.dependency_type){case"list_value":case"list_field":l.id||(l[v.child_field]=null);for(var b=i[h.picklist_id],g=0;g<b.length;g++){var y=b[g];delete y.hidden}if("list_value"===v.dependency_type){if(!l[v.parent_field])continue;var k=[];for(var $ in v.value_maps)if(v.value_maps.hasOwnProperty($)){var w=v.value_maps[$];$===l[v.parent_field].id.toString()&&(k=w)}if(!k.length)continue;for(var S=0;S<b.length;S++){var D=b[S];k.indexOf(D.id)<0&&(D.hidden=!0)}}else if("list_field"===v.dependency_type){if(!l[v.parent_field]){for(var z=0;z<b.length;z++){var M=b[z];M.hidden=!0}continue}for(var Y=l[v.parent_field][v.field_map_parent],F=0;F<b.length;F++){var q=b[F];q[v.field_map_child]!==Y&&(q.hidden=!0)}}break;case"list_text":l[v.child_field]=l[v.parent_field]?l[v.parent_field].value||l[v.parent_field].label[$rootScope.language]:null;break;case"lookup_text":l[v.child_field]=l[v.parent_field]?l[v.parent_field][v.field_map_parent]:null;break;case"lookup_list":case"lookup_field":if(!l[v.parent_field])continue;var P=l[v.parent_field][v.field_map_parent],x=i[h.picklist_id],U=null;if("lookup_list"===v.dependency_type){for(var B=0;B<x.length;B++){var T=x[B];T[v.field_map_child]===P&&(U=T)}!U||l.id&&l[v.child_field]||(l[v.child_field]=U)}else if("lookup_field"===v.dependency_type&&P){var O=$filter("filter")($rootScope.modules,{name:h.lookup_type},!0)[0],R=angular.copy(h);R.lookupModulePrimaryField=$filter("filter")(O.fields,{name:v.field_map_child},!0)[0];var C=[h.lookupModulePrimaryField.name];r.lookup(P,R,l,C,!0).then(function(a){if(a[0]){var i=a[0];i.primary_value=i[h.lookupModulePrimaryField.name],l[v.child_field]=i,h.valueChangeDontRun=!0,r.customActions(e,l,t.moduleForm),t.$broadcast("angucomplete-alt:changeInput",v.child_field,i)}})}}}this.calculate(h,e,l)}}}},setDependencyFilter:function(a,e,l,i){var t=angular.copy(l),r=angular.copy(a);if(a.indexOf(".")>-1){var s=a.split(".");t=$filter("filter")($rootScope.modules,{name:s[1]},!0)[0],r=s[2]}if(t.dependencies&&t.dependencies.length){var o=$filter("filter")(t.dependencies,{parent_field:r},!0);if(o&&o.length)for(var n=angular.copy(t.fields),f=0;f<o.length;f++){var u=o[f];if(!u.deleted){var d=$filter("filter")(n,{name:u.child_field},!0)[0];if(d&&e&&"list_field"===u.dependency_type){for(var c=i[d.picklist_id],p=0;p<c.length;p++){var _=c[p];delete _.hidden}for(var m=e[u.field_map_parent],v=0;v<c.length;v++){var h=c[v];h[u.field_map_child]!==m&&(h.hidden=!0)}}}}}},setDisplayDependency:function(a,e){if(a.display_dependencies)for(var l=0;l<a.display_dependencies.length;l++){var i=a.display_dependencies[l];if(!i.deleted){var t=null;if(t=i.dependent_section?$filter("filter")(a.sections,{name:i.dependent_section},!0)[0]:$filter("filter")(a.fields,{name:i.dependent_field},!0)[0])if(void 0!==e[i.field]){var r=null,s=angular.copy(e[i.field]);if(angular.isArray(s)){if(!e[i.field].length){t.hidden=!0,delete e[i.dependent_field];continue}for(var o=0;o<s.length;o++){var n=s[o],f=$filter("filter")(i.values,n.id,!0)[0];!r&&f&&(r=f)}}else i.values?s&&(r="boolean"==typeof s?s:s.id?$filter("filter")(i.values,s.id,!0)[0]:$filter("filter")(i.values,s,!0)[0]):r=s;if(i.otherwise||r)if(i.otherwise&&r)t.hidden=!0,delete e[i.dependent_field];else{if(!i.dependent_section){var u=$filter("filter")(a.fields,{name:i.field},!0)[0];if(u.hidden){t.hidden=!0,delete e[i.dependent_field];continue}}t.hidden=!1}else t.hidden=!0,delete e[i.dependent_field]}else t.hidden=!0,delete e[i.dependent_field]}}},customActions:function(a,e,l,i,t){if("izinler"===a.name){var r=function(a){if(e.calisan&&e.izin_turu&&e.izin_turu_data){var l=moment().date(1).month(0).year(moment().year()).format("YYYY-MM-DD");if(e.izin_turu_data.yillik_izin&&e.calisan_data){var i=moment(e.calisan_data.ise_baslama_tarihi),t=i.get("date"),r=i.get("month"),s=moment().get("year"),o=moment().date(t).month(r).year(s).format("YYYY-MM-DD");moment(o).isAfter(moment().format("YYYY-MM-DD"))&&(s-=1),l=moment().date(t).month(r).year(s).format("YYYY-MM-DD")}e.izin_turu_data.her_ay_yenilenir&&(l=moment().date(1).month(moment().month()).year(moment().year()).format("YYYY-MM-DD"));var n={fields:["hesaplanan_alinacak_toplam_izin","baslangic_tarihi","bitis_tarihi","izin_turu","process.process_requests.process_status"],filters:[{field:"calisan",operator:"equals",value:e.calisan.id,no:1},{field:"baslangic_tarihi",operator:"greater_equal",value:l,no:2},{field:"deleted",operator:"equals",value:!1,no:3},{field:"process.process_requests.process_status",operator:"not_equal",value:3,no:4}],limit:999999};a.findRecords("izinler",n).then(function(a){var l=0;if(e.alinan_izinler=a.data,e.izin_turu_data&&!e.izin_turu_data.yillik_izin){if(a.data.length>0){var i=$filter("filter")(a.data,{izin_turu:e.izin_turu.id},!0);angular.forEach(i,function(a){a.hesaplanan_alinacak_toplam_izin&&(l+=a.hesaplanan_alinacak_toplam_izin)})}else delete e.alinan_izinler,e.mevcut_kullanilabilir_izin=e.izin_turu_data.yillik_hakedilen_limit_gun;if(e.izin_turu_data.saatlik_kullanim_yapilir){var t=e.izin_turu_data.toplam_calisma_saati,r=e.izin_turu_data.yillik_hakedilen_limit_gun;if(e.izin_turu_data.ogle_tatilini_dikkate_al){var s=parseFloat(moment.duration(moment(e.izin_turu_data.ogle_tatili_bitis).diff(moment(e.izin_turu_data.ogle_tatili_baslangic))).asHours().toFixed(2));t-=s}var o=r*t-l;e.mevcut_kullanilabilir_izin=o}else e.mevcut_kullanilabilir_izin=e.izin_turu_data.yillik_hakedilen_limit_gun-l
}else if(e.izin_turu&&e.izin_turu_data&&e.calisan_data&&e.izin_turu_data.yillik_izin&&e.calisan.e_posta===e.calisan_data.e_posta){e.mevcut_kullanilabilir_izin=e.calisan_data.kalan_izin_hakki?e.calisan_data.kalan_izin_hakki:0}})}},s=this;if(e.calisan){var o=$filter("filter")($rootScope.modules,{name:"calisanlar"},!0)[0];o=o?"calisanlar":"human_resources",this.getRecord(o,e.calisan.id).then(function(a){var l=a.data;e.calisan_data=l,e.goreve_baslama_tarihi=l.ise_baslama_tarihi,e.dogum_tarihi=l.dogum_tarihi,r(s)})}e.izin_turu&&(!e.izin_turu_data||e.izin_turu_data&&e.izin_turu_data.id!=e.izin_turu.id)&&(e.mevcut_kullanilabilir_izin=0,this.getRecord("izin_turleri",e.izin_turu.id).then(function(l){var o=l.data;e.izin_turu_data=o,t&&(t.izinTuruData=o,r(s),s.setCustomCalculations(a,e,i,t))}))}if("current_accounts"===a.name){var n=$filter("filter")(t.modules,{name:"sales_invoices"},!0);if(n.length<1)return!1;if("collection"===t.subtype)switch(e.currency.system_code){case"try":$filter("filter")(t.module.fields,{name:"alacak"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"alacak_usd"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"alacak_euro"},!0)[0].display_form=!1,e.alacak_euro&&delete e.alacak_euro,e.alacak_usd&&delete e.alacak_usd;break;case"usd":$filter("filter")(t.module.fields,{name:"alacak"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"alacak_usd"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"alacak_euro"},!0)[0].display_form=!1,e.alacak&&delete e.alacak,e.alacak_euro&&delete e.alacak_euro;break;case"eur":$filter("filter")(t.module.fields,{name:"alacak"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"alacak_usd"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"alacak_euro"},!0)[0].display_form=!0,e.alacak&&delete e.alacak,e.alacak_usd&&delete e.alacak_usd}else if("payment"===t.subtype)switch(e.currency.system_code){case"try":$filter("filter")(t.module.fields,{name:"borc_tl"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"borc_usd"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"borc_euro"},!0)[0].display_form=!1;break;case"usd":$filter("filter")(t.module.fields,{name:"borc_tl"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"borc_usd"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"borc_euro"},!0)[0].display_form=!1;break;case"eur":$filter("filter")(t.module.fields,{name:"borc_tl"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"borc_usd"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"borc_euro"},!0)[0].display_form=!0}if($filter("filter")(t.module.fields,{name:"banka"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"payment_due"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"odendi"},!0)[0].display_form=!1,e.payment_method)switch(e.payment_method.system_code){case"cash":$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].validation.required=!0,$filter("filter")(t.module.fields,{name:"banka"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"payment_due"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"odendi"},!0)[0].display_form=!1,e.banka&&delete e.banka;break;case"bank_transfer":case"credit_card":$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"payment_due"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"odendi"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"banka"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"banka"},!0)[0].validation.required=!0,e.kasa&&delete e.kasa;break;case"cheque":case"bill":$filter("filter")(t.module.fields,{name:"banka"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].display_form=!1,$filter("filter")(t.module.fields,{name:"payment_due"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"odendi"},!0)[0].display_form=!0,e.odendi&&($filter("filter")(t.module.fields,{name:"banka"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].display_form=!0,$filter("filter")(t.module.fields,{name:"banka"},!0)[0].validation.required=!1,$filter("filter")(t.module.fields,{name:"kasa"},!0)[0].validation.required=!1)}}},customValidations:function(a,e){function l(a,e){var i=6===moment(a).isoWeekday(),t=7===moment(a).isoWeekday();return i||t||!moment(a).isBusinessDay()?"subtract"===e?l(moment(a).subtract(1,"days"),e):"add"===e?l(moment(a).add(1,"days"),e):void 0:a}if("izinler"===a.name){var i=e.izin_turu_data;if(moment(e.baslangic_tarihi).isSame(e.bitis_tarihi))return $filter("translate")("Leave.Validations.SameDate");if(e.talep_edilen_izin<=0)return $filter("translate")("Leave.Validations.Requested0OfDaysNot");if(e.alinan_izinler&&e.alinan_izinler.length>0)for(var t=0;t<e.alinan_izinler.length;t++)if(!e.id||e.id!==e.alinan_izinler[t].id){var r=moment(moment(Date.parse(moment(e.baslangic_tarihi))).format("YYYY-MM-DDTHH:mm:ss")),s=moment(moment(Date.parse(moment(e.bitis_tarihi))).format("YYYY-MM-DDTHH:mm:ss"));if((r.isBetween(moment(e.alinan_izinler[t].baslangic_tarihi),moment(e.alinan_izinler[t].bitis_tarihi),null,"[)")||s.isBetween(moment(e.alinan_izinler[t].baslangic_tarihi),moment(e.alinan_izinler[t].bitis_tarihi),null,"(]")||r.isSameOrBefore(moment(e.alinan_izinler[t].baslangic_tarihi))&&s.isSameOrAfter(moment(e.alinan_izinler[t].bitis_tarihi)))&&e.alinan_izinler[t].id!==e.id)return $filter("translate")("Leave.Validations.AlreadyHave")}if(i.ilk_izin_kullanimi_hakedis_zamani_ay&&null!==i.ilk_izin_kullanimi_hakedis_zamani_ay&&0!==i.ilk_izin_kullanimi_hakedis_zamani_ay){var o=moment().diff(e.goreve_baslama_tarihi,"months"),n=i.ilk_izin_kullanimi_hakedis_zamani_ay;if(n>o)return $filter("translate")("Leave.Validations.FirstLeaveUse",{month:n})}if(i.yillik_izin){if(null===e.mevcut_kullanilabilir_izin)return $filter("translate")("Leave.Validations.LeaveEnd");if(e.id&&e.process_status){var f=$filter("filter")(e.alinan_izinler,{id:e.id},!0)[0];if(f&&e.hesaplanan_alinacak_toplam_izin>f.hesaplanan_alinacak_toplam_izin&&e.mevcut_kullanilabilir_izin+f.hesaplanan_alinacak_toplam_izin<e.hesaplanan_alinacak_toplam_izin&&!i.izin_borclanma_yapilabilir)return $filter("translate")("Leave.Validations.LeaveEnd")}else if((0===e.mevcut_kullanilabilir_izin||e.mevcut_kullanilabilir_izin<e.hesaplanan_alinacak_toplam_izin)&&!i.izin_borclanma_yapilabilir)return $filter("translate")("Leave.Validations.LeaveEnd");return e.mevcut_kullanilabilir_izin=e.calisan_data.kalan_izin_hakki||0,delete e.goreve_baslama_tarihi,delete e.calisan_data,delete e.izin_turu_data,delete e.dogum_tarihi,delete e.alinan_izinler,""}var u=$filter("filter")(e.alinan_izinler,function(a){return a.izin_turu===e.izin_turu.id&&null!==a["process.process_requests.process_status"]&&(!e.id||e.id&&e.id!==a.id)});if(i.yillik_hakedilen_limit_gun&&0!==i.yillik_hakedilen_limit_gun){var d=0;if(u&&u.length>0&&angular.forEach(u,function(a){a.hesaplanan_alinacak_toplam_izin&&(d+=a.hesaplanan_alinacak_toplam_izin)}),e.izin_turu_data&&e.izin_turu_data.saatlik_kullanim_yapilir){var c=e.izin_turu_data.toplam_calisma_saati;if(e.izin_turu_data.ogle_tatilini_dikkate_al){var p=parseFloat(moment.duration(moment(e.izin_turu_data.ogle_tatili_bitis).diff(moment(e.izin_turu_data.ogle_tatili_baslangic))).asHours().toFixed(2));c-=p}var _=c*i.yillik_hakedilen_limit_gun;if(_<d+e.hesaplanan_alinacak_toplam_izin)return e.izin_turu_data.her_ay_yenilenir?$filter("translate")("Leave.Validations.NotHaveLimitHourMonth",{total_hour:_,remaining_hour:_-d}):$filter("translate")("Leave.Validations.NotHaveLimitHour",{total_hour:_,remaining_hour:_-d})}else if(d+e.hesaplanan_alinacak_toplam_izin>i.yillik_hakedilen_limit_gun)return e.izin_turu_data.her_ay_yenilenir?$filter("translate")("Leave.Validations.NotHaveLimitDayMonth",{total_hour:i.yillik_hakedilen_limit_gun,remaining_hour:i.yillik_hakedilen_limit_gun-d}):$filter("translate")("Leave.Validations.NotHaveLimitDay",{total_hour:i.yillik_hakedilen_limit_gun,remaining_hour:i.yillik_hakedilen_limit_gun-d})}if(null!==i.tek_seferde_alinabilecek_en_fazla_izin_gun&&0!==i.tek_seferde_alinabilecek_en_fazla_izin_gun)if(e.izin_turu_data&&e.izin_turu_data.saatlik_kullanim_yapilir){var c=e.izin_turu_data.toplam_calisma_saati;if(e.izin_turu_data.ogle_tatilini_dikkate_al){var p=parseFloat(moment.duration(moment(e.izin_turu_data.ogle_tatili_bitis).diff(moment(e.izin_turu_data.ogle_tatili_baslangic))).asHours().toFixed(2));c-=p}var _=c*i.tek_seferde_alinabilecek_en_fazla_izin_gun;if(_<e.talep_edilen_izin)return $filter("translate")("Leave.Validations.OneGoHour",{total_hour:i.tek_seferde_alinabilecek_en_fazla_izin_gun*_})}else if(i.tek_seferde_alinabilecek_en_fazla_izin_gun<e.talep_edilen_izin)return $filter("translate")("Leave.Validations.OneGoDay",{total_hour:i.tek_seferde_alinabilecek_en_fazla_izin_gun});if(null===i.resmi_tatiller_ile_birlestirilebilir||i.resmi_tatiller_ile_birlestirilebilir===!1){var m=moment(e.baslangic_tarihi),v=moment(e.bitis_tarihi),h=m.add(-1,"days"),b=$filter("filter")($rootScope.moduleSettings,{key:"work_saturdays"},!0);b=b.length>0&&"t"===b[0].value?!0:!1;var g=7===moment(h).isoWeekday();g||b||(g=6===moment(h).isoWeekday());var y=moment(moment(h).format("YYYY-MM-DD")).isBusinessDay();if(y)for(var t=0;t<$rootScope.holidaysData.length;t++){var k=$rootScope.holidaysData[t];k.half_day&&moment(k.date).isBusinessDay()&&moment(h.format("YYYY-MM-DD")).isSame(moment(k.date).format("YYYY-MM-DD"))&&(y=!1)}if(!g&&!y)return $filter("translate")("Leave.Validations.InfusibleWithHolidays");var $=v;if(i.saatlik_kullanim_yapilir&&($=v.add(1,"days")),g=7===moment($).isoWeekday(),g||b||(g=6===moment($).isoWeekday()),y=moment(moment($).format("YYYY-MM-DD")).isBusinessDay())for(var t=0;t<$rootScope.holidaysData.length;t++){var k=$rootScope.holidaysData[t];k.half_day&&moment(k.date).isBusinessDay()&&moment($.format("YYYY-MM-DD")).isSame(moment(k.date).format("YYYY-MM-DD"))&&(y=!1)}if(!g&&!y)return $filter("translate")("Leave.Validations.InfusibleWithHolidays")}if(i.dogum_gunu_izni)if(i["1_hafta_once_ve_3_hafta_sonra_arasinda_kullanilir"]){var w=moment(e.baslangic_tarihi),S=moment(e.dogum_tarihi).set("year",w.get("year")).subtract(1,"weeks"),D=moment(e.dogum_tarihi).set("year",w.get("year")).add(3,"weeks"),z=moment(w.format("YYYY-MM-DD")).isBetween(S.format("YYYY-MM-DD"),D.format("YYYY-MM-DD"),null,"[]");if(!z)return"Mutlu Yıllar! Doğumgünü iznini doğum gününün 1 hafta öncesinden başlayarak 3 hafta sonrasına kadar olan 4 haftalık süre diliminde kullanabilirsin. İzin tarihini değiştirerek tekrar denemelisin."}else{var M=moment(e.dogum_tarihi),m=moment(e.baslangic_tarihi);if(M=moment(M.year(m.year()).toISOString()),i.dogum_gunu_izni_kullanimi.includes("15")){var Y=m.diff(M,"days");if(0>Y&&(Y=-1*Y),Y>15)return $filter("translate")("Leave.Validations.BirthDayLimitDay")}else if(M.month()!==m.month())return $filter("translate")("Leave.Validations.BirthDayLimitMonth")}if(i["3_gun_arka_arkaya_kullanilamasin"]&&u&&u.length>0&&u.length>0){for(var w=moment(e.baslangic_tarihi).format("YYYY-MM-DD"),F=l(moment(w).subtract(1,"days"),"subtract").format("YYYY-MM-DD"),q=l(moment(F).subtract(1,"days"),"subtract").format("YYYY-MM-DD"),P=l(moment(w).add(1,"days"),"add").format("YYYY-MM-DD"),x=l(moment(P).add(1,"days"),"add").format("YYYY-MM-DD"),U=!1,B=!1,T=!1,O=!1,R=0,C=0,L=0,I=0,t=0;t<u.length;t++)moment(u[t].baslangic_tarihi).format("YYYY-MM-DD")===F?(R=u[t].hesaplanan_alinacak_toplam_izin,U=!0):moment(u[t].baslangic_tarihi).format("YYYY-MM-DD")===q?(C=u[t].hesaplanan_alinacak_toplam_izin,B=!0):moment(u[t].baslangic_tarihi).format("YYYY-MM-DD")===P?(L=u[t].hesaplanan_alinacak_toplam_izin,T=!0):moment(u[t].baslangic_tarihi).format("YYYY-MM-DD")===x&&(I=u[t].hesaplanan_alinacak_toplam_izin,O=!0);if(U&&B&&R+C>=16||T&&O&&L+I>=16||U&&T&&R+L>=16)return"Üst üste 16 saatlik mazeret izni girişi yaptığın için, 16 saati takiben mazeret izni girişi yapamazsın."}return delete e.goreve_baslama_tarihi,delete e.calisan_data,delete e.dogum_tarihi,delete e.izin_turu_data,delete e.alinan_izinler,""}},setCustomCalculations:function(a,e,l,i){if("calisanlar"!==a.name&&"human_resources"!==a.name||e.id||(e.sabit_devreden_izin=e.devreden_izin),"izinler"===a.name){if(e.baslangic_tarihi&&!e.bitis_tarihi&&e.izin_turu_data&&e.izin_turu_data.saatlik_kullanim_yapilir){var t=new Date(e.baslangic_tarihi);t.setHours(8,0,0,0),e.bitis_tarihi=new Date(t).toISOString(),e.baslangic_tarihi=new Date(t).toISOString()}if(e.baslangic_tarihi&&e.bitis_tarihi){var r=new Date(e.baslangic_tarihi),s=new Date(e.bitis_tarihi);r>s&&(s=angular.copy(r),e.bitis_tarihi=new Date(s).toISOString(),e.baslangic_tarihi=new Date(r).toISOString())}if(e.izin_turu_data&&e.baslangic_tarihi&&e.bitis_tarihi){if(e.izin_turu_data.sadece_tam_gun_olarak_kullanilir){var s=new Date(e.bitis_tarihi),r=new Date(e.baslangic_tarihi);r.setHours(8,0,0,0),s.setHours(8,0,0,0),e.bitis_tarihi=new Date(s).toISOString(),e.baslangic_tarihi=new Date(r).toISOString()}if(!e.izin_turu_data.saatlik_kullanim_yapilir&&!e.izin_turu_data.sadece_tam_gun_olarak_kullanilir){var s=new Date(e.bitis_tarihi),r=new Date(e.baslangic_tarihi);s.setHours(0,0,0,0),r.setHours(0,0,0,0),r.toISOString()===s.toISOString()&&(e.from_entry_type=l[i.customLeaveFields.from_entry_type.picklist_id][0]),"entry_type_afternoon"===e.to_entry_type.system_code?s.setHours(12,0,0,0):s.setHours(8,0,0,0),e.bitis_tarihi=new Date(s).toISOString(),"entry_type_afternoon"===e.from_entry_type.system_code?r.setHours(12,0,0,0):r.setHours(8,0,0,0),e.baslangic_tarihi=new Date(r).toISOString()}var o=0,n=moment(e.baslangic_tarihi),f=moment(e.bitis_tarihi);if(e.izin_turu_data.saatlik_kullanim_yapilir){var u=e.izin_turu_data.toplam_calisma_saati;if(e.izin_turu_data.ogle_tatilini_dikkate_al){var d=parseFloat(moment.duration(moment(e.izin_turu_data.ogle_tatili_bitis).diff(moment(e.izin_turu_data.ogle_tatili_baslangic))).asHours().toFixed(2));u-=d}if(!moment(n.format("YYYY-MM-DD")).isSame(f.format("YYYY-MM-DD"))){var s=new Date(e.baslangic_tarihi);s=angular.copy(s),e.bitis_tarihi=new Date(s).toISOString(),f=moment(e.bitis_tarihi)}var c=moment.duration(moment(e.bitis_tarihi).diff(moment(e.baslangic_tarihi)))._data;(c.hours<0||c.minutes<0)&&(s.setHours(moment(e.baslangic_tarihi).hour(),moment(e.baslangic_tarihi).minute(),0,0),e.bitis_tarihi=new Date(s).toISOString(),f=moment(e.bitis_tarihi));var p=moment.duration(f.diff(n)).asHours(),_=e.izin_turu_data.toplam_calisma_saati;if(p>_){var m=p-_;s=moment(s).add(-m,"hours"),e.bitis_tarihi=new Date(s).toISOString(),f=moment(e.bitis_tarihi)}var o=f.diff(n,"minutes")/60;if(e.izin_turu_data.ogle_tatilini_dikkate_al){var v="HH:mm:ss",h=moment(e.izin_turu_data.ogle_tatili_baslangic).format(v),b=moment(e.izin_turu_data.ogle_tatili_bitis).format(v),g=moment(n).format(v),y=moment(f).format(v),k=0;moment(h,v).isSameOrBefore(moment(g,v))?k=moment(b,v).isSameOrBefore(moment(g,v))?0:moment(b,v).isSameOrBefore(moment(y,v))?moment(b,v).diff(moment(g,v),"minutes")/60:o:moment(h,v).isSameOrBefore(moment(y,v))&&(moment(b,v).isSameOrBefore(moment(y,v))?k=moment(b,v).diff(moment(h,v),"minutes")/60:moment(b,v).isSameOrAfter(moment(y,v))&&(k=moment(y,v).diff(moment(h,v),"minutes")/60)),o-=k}}else if(o=e.izin_turu_data.izin_hakkindan_takvim_gunu_olarak_dusulsun?f.diff(n,"days"):n.businessDiff(f),!e.izin_turu_data||e.izin_turu_data.saatlik_kullanim_yapilir||e.izin_turu_data.sadece_tam_gun_olarak_kullanilir){var s=new Date(e.bitis_tarihi),r=new Date(e.baslangic_tarihi);e.izin_turu_data.sadece_tam_gun_olarak_kullanilir||(s.setHours(0,0,0,0),e.bitis_tarihi=new Date(s).toISOString(),r.setHours(0,0,0,0),e.baslangic_tarihi=new Date(r).toISOString()),n=moment(e.baslangic_tarihi),f=moment(e.bitis_tarihi),o=e.izin_turu_data.izin_hakkindan_takvim_gunu_olarak_dusulsun?f.diff(n,"days"):n.businessDiff(f)}else{var $=o;if(n.format("YYYY.MM.DD")!==f.format("YYYY.MM.DD")){if(e.from_entry_type.id!==e.to_entry_type.id){var w=moment(moment(e.baslangic_tarihi).format("YYYY-MM-DD")).isBusinessDay(),S=moment(moment(e.bitis_tarihi).format("YYYY-MM-DD")).isBusinessDay();w&&"entry_type_afternoon"===e.from_entry_type.system_code&&($=o-.5),S&&"entry_type_afternoon"==e.to_entry_type.system_code&&($=o-.5)}}else $=o-.5;$>=0&&(o=$)}var D=$filter("filter")($rootScope.moduleSettings,{key:"work_saturdays"},!0);if(D.length>0?D=D[0]:D.value="f",e.izin_turu_data.cuma_gunu_alinan_izinlere_cumartesiyi_de_ekle&&o>=1&&"t"!==D.value&&!e.izin_turu_data.saatlik_kullanim_yapilir&&!e.izin_turu_data.izin_hakkindan_takvim_gunu_olarak_dusulsun){var z=moment(n).weekdaysInBetween(f,[5]),M=5===moment(n).isoWeekday();if(M&&moment(n).isBusinessDay()&&(f.diff(n,"days")<=3?(e.izin_turu_data.sadece_tam_gun_olarak_kullanilir||!e.izin_turu_data.sadece_tam_gun_olarak_kullanilir&&"entry_type_afternoon"!==e.from_entry_type.system_code&&"entry_type_afternoon"===e.to_entry_type.system_code&&moment(f).isBusinessDay()||!e.izin_turu_data.sadece_tam_gun_olarak_kullanilir&&"entry_type_afternoon"!==e.from_entry_type.system_code&&!e.izin_turu_data.sadece_cuma_ise_tek_gun_say)&&(o+=1):o>=2&&"entry_type_afternoon"!==e.from_entry_type.system_code?o+=1:(e.izin_turu_data.sadece_tam_gun_olarak_kullanilir||!e.izin_turu_data.sadece_tam_gun_olarak_kullanilir&&"entry_type_afternoon"!==e.from_entry_type.system_code)&&(1!==o||e.izin_turu_data.sadece_cuma_ise_tek_gun_say||(o+=1))),5===moment(f).isoWeekday()&&moment(f).isBusinessDay()&&f.diff(n,"days")<2&&(o-=1),z)if(z.length)for(var Y=0;Y<z.length;Y++)moment(z[Y]).isBusinessDay()&&(o+=1);else z.isBusinessDay()&&(o+=1)}if(!e.izin_turu_data.izin_hakkindan_takvim_gunu_olarak_dusulsun)for(var F=0;F<$rootScope.holidaysData.length;F++){var q=$rootScope.holidaysData[F];q.half_day&&moment(q.date).isBusinessDay()&&moment(moment(q.date).format("YYYY-MM-DD")).isBetween(moment(e.baslangic_tarihi).format("YYYY-MM-DD"),moment(e.bitis_tarihi).format("YYYY-MM-DD"),null,"[)")?o-=.5:!q.half_day&&moment(q.date).isBusinessDay()&&moment(moment(q.date).format("YYYY-MM-DD")).isBetween(moment(e.baslangic_tarihi).format("YYYY-MM-DD"),moment(e.bitis_tarihi).format("YYYY-MM-DD"),null,"[)")?o-=1:o>1&&q.half_day&&6===moment(moment(q.date).format("YYYY-MM-DD")).day()&&moment(moment(q.date).format("YYYY-MM-DD")).isBetween(moment(e.baslangic_tarihi).format("YYYY-MM-DD"),moment(e.bitis_tarihi).format("YYYY-MM-DD"),null,"[)")?o-=1:o>1&&!q.half_day&&6===moment(moment(q.date).format("YYYY-MM-DD")).day()&&moment(moment(q.date).format("YYYY-MM-DD")).isBetween(moment(e.baslangic_tarihi).format("YYYY-MM-DD"),moment(e.bitis_tarihi).format("YYYY-MM-DD"),null,"[)")&&(o-=1)}e.izin_turu_data.saatlik_kullanim_yapilir&&e.izin_turu_data.saatlik_kullanimi_yukari_yuvarla&&(o=Math.ceil(o));var P=o;e.izin_turu_data.yillik_izin||e.izin_turu_data.izin_hakkindan_dusulsun||(o=0),e.hesaplanan_alinacak_toplam_izin=o,e.talep_edilen_izin=P}}},updateView:function(a,e){return $http.put(config.apiUrl+"view/update/"+e,a)},getViews:function(a,e,l){var i=this,t=$q.defer(),r=$filter("filter")($rootScope.modules,{id:a},!0)[0];if(e){var s=[],o={};o.active=!0;for(var n=[],f=1,u=0;u<e.length;u++){var d,c=e[u];if(c.indexOf(".")>-1){var p=c.split("."),_=$filter("filter")($rootScope.modules,{name:p[1]},!0)[0];d=$filter("filter")(_.fields,{name:p[2]},!0)[0]}else d=$filter("filter")(r.fields,{name:c},!0)[0];if(d&&i.hasFieldDisplayPermission(d)){var m={};m.field=c,m.order=f,n.push(m),f++}}return o.fields=n,s.push(o),t.resolve(s),t.promise}return l&&l.views?(t.resolve(l.views),t.promise):($http.get(config.apiUrl+"view/get_all/"+a).then(function(a){if(!a.data)return t.resolve([]),t.promise;for(var e=[],l=0;l<a.data.length;l++){for(var s=a.data[l],o=[],n=0;n<s.fields.length;n++){var f,u=s.fields[n];if(u.field.indexOf(".")>-1){var d=u.field.split("."),c=$filter("filter")($rootScope.modules,{name:d[1]},!0)[0];if(!c)continue;f=$filter("filter")(c.fields,{name:d[2]},!0)[0]}else f=$filter("filter")(r.fields,{name:u.field},!0)[0];f&&i.hasFieldDisplayPermission(f)&&o.push(u)}s.fields=o,s.label=s["label_"+$rootScope.language],e.push(s)}e=$filter("orderBy")(e,"label_"+$rootScope.language),t.resolve(e)})["catch"](function(a){t.reject(a.data)}),t.promise)},getViewState:function(a,e){var l=$q.defer();return e&&e.viewState?(l.resolve(e.viewState),l.promise):($http.get(config.apiUrl+"view/get_view_state/"+a).then(function(a){l.resolve(a.data)})["catch"](function(a){l.reject(a.data)}),l.promise)},getViewFields:function(a,e){for(var l=[],i=angular.copy(a.fields),t=0;t<e.length;t++){var r=e[t],s=i,o=r.field,n=null;if(r.field.indexOf(".")>-1){var f=r.field.split(".");if(null!=f[3]&&"primary"===f[3])continue;s=angular.copy($filter("filter")($rootScope.modules,{name:f[1]},!0)[0].fields),o=f[2],n=f[0]}var u=$filter("filter")(s,{name:o},!0)[0];if(u&&this.hasFieldDisplayPermission(u)){null!=n&&(u.parentField=$filter("filter")(i,{name:n},!0)[0]);var d=angular.copy(u);d.fieldName=r.field,d.order=r.order,l.push(d)}}return l},setFilters:function(a,e,l,i,t,r,s){if("lookup"===e.data_type&&"users"===e.lookup_type&&"[me]"===i&&(i=$rootScope.user.id),"email"===e.data_type&&"[me.email]"===i&&(i=$rootScope.user.email),"date"===e.data_type&&i){{moment(i).format("YYYY-MM-DD")}moment(i).isValid()&&(i=moment(i).format("YYYY-MM-DD"))}a||(a=[]),("empty"===t||"not_empty"===t)&&(i="-");var o=$filter("filter")(a,{field:l,operator:t,no:parseInt(r)},!0)[0];if(o)o.operator=t,o.value=i,"document"===e.data_type&&(o.document_search=e.document_search);else{r=r?parseInt(r):a.length+1;var n={};n.field=l,n.operator=t,n.value=i,n.no=r,n.isView=s,"document"===e.data_type&&(n.document_search=e.document_search),a.push(n)}return a},setTable:function(a,e,l,i,t,r,s,o,n,f,u,d,c,p,_,m,v,h){var b=this,g=r+"_"+s;a.isManyToMany=d&&"many_to_many"===d.relation_type,a.isManyToMany&&(g=r+"_"+d.relation_field+"_"+a.module.name),$rootScope.activePages||($rootScope.activePages={}),$rootScope.activeFilters||($rootScope.activeFilters={}),a.tableParams=new ngTableParams({page:1,count:i,load:!1},{counts:l,getData:function(l,i){function o(){var e=angular.copy(a.view.filters);if(e=$filter("orderBy")(e,"no"),e&&e.length>0)for(var l=0;l<e.length;l++){var i=e[l],r=[],s=i.field,o=i.field,n=null;if(s.indexOf(".")<0)r=a.module.fields;else{var f=s.split(".");"process_requests"!==f[1]&&"process_approvers"!==f[1]&&(r=$filter("filter")($rootScope.modules,{name:f[1]},!0)[0].fields),("process_requests"===f[1]||"process_approvers"===f[1])&&(n={},n.data_type="number",n.name="process_status"),"process_approvers"===f[1]&&(n={},n.data_type="lookup",n.lookup_type="users",n.name="user_id"),o=f[2]}n||(n=$filter("filter")(r,{name:o},!0)[0]),n&&("lookup"===n.data_type&&"users"===n.lookup_type&&"0"===i.value&&(i.value=$rootScope.user.id),"multiselect"===n.data_type&&(i.value=i.value.split("|")),"tag"===n.data_type&&(i.value=i.value.split("|")),t=b.setFilters(t,n,s,i.value,i.operator,i.no,!0))}}function k(){a.loading||e.start(),b.getPicklists(a.module,!0).then(function(k){a.tableParams.picklists=k;for(var w in i.filters)if(i.filters.hasOwnProperty(w)){var S=i.filters[w];b.setDependencyFilter(w,S.value,a.module,i.picklists)}b.getViews(a.module.id,u,$).then(function(u){b.getViewState(a.module.id,$).then(function(k){var w=$||{},S=i.count(),D=i.sorting(),z=i.sortClicked,M=null,Y=null,F=a.viewid;D&&Object.keys(D).length>0&&(M=Object.keys(D)[0],Y=D[M]);var q=function(e,l,i){var t;t=i?$filter("filter")(u,{id:parseInt(i)},!0)[0]:$filter("filter")(u,{active:!0})[0],k={},k.active_view=t.id,k.sort_field=e,k.sort_direction=l,k.row_per_page=10,a.viewid&&null!==a.viewid||b.setViewState(k,a.module.id).then(function(a){k.id=a.data.id})};z?k?("kasa_hareketleri"===a.module.name||"banka_hareketleri"===a.module.name?(M="islem_tarihi,id",Y="desc"):"current_accounts"===a.module.name?(M="date,id",Y="desc"):"stock_transactions"===a.module.name?(M="transaction_date,id",Y="desc"):(k.sort_field=M,k.sort_direction=Y),b.setViewState(k,a.module.id,k.id)):q(M,Y,F):k&&k.sort_field&&!F?(M=k.sort_field,Y=k.sort_direction):("kasa_hareketleri"===a.module.name||"banka_hareketleri"===a.module.name?(M="islem_tarihi,id",Y="desc"):"current_accounts"===a.module.name?(M="date,id",Y="desc"):"stock_transactions"===a.module.name?(M="transaction_date,id",Y="desc"):(M="created_at",Y="desc"),q(M,Y,F));var P={};P[M]=Y,i.sorting(P),w.sorting=P,y(u,k,r);var x=a.view&&a.view.filter_logic;if(i.filters&&Object.keys(i.filters).length>0){o();var U=angular.copy(i.filters);if(U)for(var B in U)if(U.hasOwnProperty(B)){var T=U[B],O=[],R=B,C=!1;if(B.indexOf(".")<0)O=a.module.fields;else{var L=B.split(".");O=$filter("filter")($rootScope.modules,{name:L[1]},!0)[0].fields,R=L[2]}var I=$filter("filter")(O,{name:R},!0)[0];if(!I)continue;if(T.operator||(T.operator=$filter("orderBy")(I.operators,"order")[0]),"empty"!==T.operator.name&&"not_empty"!==T.operator.name&&(void 0===T.value||null===T.value||""===T.value||angular.isArray(T.value)&&!T.value.length||("number"===I.data_type||"number_decimal"===I.data_type||"number_auto"===I.data_type||"currency"===I.data_type)&&isNaN(T.value))){delete U[B],delete i.filters[B];var H=t&&$filter("filter")(t,{field:B},!0)[0];!H||angular.isUndefined(H.isView)||H.isView||t.splice(t.indexOf(H),1);continue}var H=t&&$filter("filter")(t,{field:B},!0)[0];H&&!angular.isUndefined(H.isView)&&H.isView&&(angular.isArray(T.value)&&T.value.length||("number"===I.data_type||"number_decimal"===I.data_type||"number_auto"===I.data_type||"currency"===I.data_type)&&!isNaN(T.value)||void 0!==T.value||null!==T.value||""!==T.value)&&t.splice(t.indexOf(H),1);var V,A;if("lookup"===I.data_type&&"users"!==I.lookup_type&&"profiles"!==I.lookup_type&&"roles"!==I.lookup_type&&(V=$filter("filter")($rootScope.modules,{name:I.lookup_type},!0)[0],A=$filter("filter")(V.fields,{primary:!0},!0)[0]),"empty"!==T.operator.name&&"not_empty"!==T.operator.name){if("lookup"!==I.data_type||"users"!==I.lookup_type&&"profiles"!==I.lookup_type&&"roles"!==I.lookup_type||(T.value=T.value[0].id),"lookup"===I.data_type&&"users"!==I.lookup_type&&"profiles"!==I.lookup_type&&"roles"!==I.lookup_type&&(B=I.name+"."+I.lookup_type+"."+A.name,I=A),"picklist"===I.data_type&&(T.value=T.value.label[$rootScope.user.tenant_language]),"multiselect"===I.data_type){for(var E=[],j=0;j<T.value.length;j++){var N=T.value[j];E.push(N.label[$rootScope.user.tenant_language])}T.value=E}if("tag"===I.data_type){for(var E=[],j=0;j<T.value.length;j++){var N=T.value[j];E.push(N.text)}T.value=E}"checkbox"===I.data_type&&(T.value=T.value.system_code)}else if("lookup"===I.data_type&&"users"!==I.lookup_type&&"profiles"!==I.lookup_type&&"roles"!==I.lookup_type){B=I.name+"."+I.lookup_type+"."+A.name;var W=t&&$filter("filter")(t,{field:B},!0)[0];W&&t.splice(t.indexOf(W),1)}if(t)for(var G=0;G<t.length;G++){var Q=t[G];Q.field===B&&Q.operator===T.operator.name&&Q.value===T.value&&(C=!0)}if(C)continue;t=b.setFilters(t,I,B,T.value,T.operator.name),x&&(x="("+x+" and "+t.length+")")}$rootScope.activeFilters[g]=i.filters}var J=[],K=a.view.fields,X=[],Z="";if(a.isManyToMany){var ae=d.related_module===c?d.related_module+"2":d.related_module,ee=$filter("filter")(a.module.fields,{primary:!0},!0)[0];Z=ae+"_id."+d.related_module+"."+ee.name}for(var le=0;le<K.length;le++){var ie=K[le];if(a.isManyToMany){var te=$filter("filter")(a.module.fields,{name:ie.field},!0)[0];if(ie.field.indexOf(".")<0&&"lookup"!==te.data_type){var re=d.related_module===c?d.related_module+"2":d.related_module,se=re+"_id."+d.related_module+"."+ie.field;J.push(se);var oe=angular.copy(ie);oe.field=se,X.push(oe)}}else J.push(ie.field)}if(a.isManyToMany){var ne=d.related_module===c?d.related_module+"2":d.related_module;M=ne+"_id."+d.related_module+"."+M,K=X,a.view.fields=X}if($filter("filter")(a.module.fields,{name:"currency",deleted:"!true"},!0)[0]&&J.indexOf("currency")<0&&!a.isManyToMany&&J.push("currency"),i.filters&&Object.keys(i.filters).length||(o(),a.view.filter_logic&&(x=a.view.filter_logic)),d){var fe="ids-"+a.parentModule+i.page()+"_"+a.parentModule+"_"+a.module.name;if(a.relatedModuleInModal&&$cache.get(fe)&&$cache.get(fe).length>0){var ue=$filter("filter")(t,{operator:"!not_in"},!0)[0];if(t.length>0&&!ue){var de={field:"id",no:t.length+1,operator:"not_in",value:$cache.get(fe)};if(t.length>0)for(var ce=0;ce<t.length;ce++){var pe=t[ce];pe.operator!==de.operator&&pe.value!==de.value&&t.push(de)}else t.push(de)}}}var _e={fields:J,filters:t,sort_field:M,sort_direction:Y,limit:S,offset:(i.page()-1)*S};x&&(_e.filter_logic=x),a.isManyToMany&&(_e.many_to_many=c),w.views=u,w.viewState=k,w.count=S,i.refreshing||(a.fields=b.getViewFields(a.module,K)),a.findRequest=_e,a.viewFields=K,w.findRequest=_e,a.parentModule||a.viewid||$cache.put(g,w);var me=function(t,r){a.listFindRequest=t,components.run("BeforeListRequest","Script",a),b.findRecords(a.module.name,a.listFindRequest).then(function(e){var t=!1;if(i.filters)for(var o in i.filters)if(i.filters.hasOwnProperty(o)){var u=i.filters[o];if(u.hasOwnProperty("value")){t=!0;break}}a.isEmpty=e.data.length<1&&!t;var c=b.processRecordMulti(e.data,a.module,a.tableParams.picklists,K,s,n,f,p,_,m,v,h);if(d&&(d.loading=!1),a.parentModule||a.viewid||(r["rows-"+o+i.page()]=c,$cache.put(o,r)),d&&!a.relatedModuleInModal){var g=[];a.listFindRequest={fields:"one_to_many"===d.relation_type?["id"]:[a.module.name+"_id"],filters:[{field:"one_to_many"===d.relation_type?d.relation_field:a.parentModule+"_id",no:1,operator:"equals",value:a.parentId}],limit:9999999,offset:0};var y=d.relation_type?d.relation_type:"many_to_many";a.listFindRequest[y]=a.parentModule,b.findRecords(a.module.name,a.listFindRequest).then(function(a){if(a.data.length>0){for(var e=0;e<a.data.length;e++){var l=a.data[e];g.push(Object.values(l)[0])}$cache.put(fe,g)}})}i.reloading=!1,i.sortClicked=!1,l.resolve(c)})["finally"](function(){a.loading=!1,a.parentId&&components.run("SubListLoaded","Script",a),e.stop(),i.pagination&&($window.scrollTo(0,0),i.pagination=!1)})};if(1===i.page()){var ve=angular.copy(_e);if(ve.fields=["total_count()"],ve.limit=1,ve.offset=0,delete ve.sort_field,delete ve.sort_direction,_e.filters)for(var he=0;he<_e.filters.length;he++){var be=_e.filters[he];be.field.indexOf(".")>-1&&be.field.indexOf("process_approvers")<0&&ve.fields.push(be.field)}a.isManyToMany&&ve.fields.indexOf(Z)<0&&ve.fields.push(Z),b.findRecords(a.module.name,ve).then(function(t){t=t.data;var r=0,o=!1;if(i.filters)for(var f in i.filters)if(i.filters.hasOwnProperty(f)){var u=i.filters[f];if(u.hasOwnProperty("value")){o=!0;break}}null!==t&&t.length&&null!==t[0]&&null!==t[0].total_count?(me(_e,w),r=t[0].total_count):(l.resolve([]),a.isEmpty=t.length<1&&!o,a.parentId&&components.run("SubListLoaded","Script",a),a.loading=!1,e.stop()),i.total(r),w.total=r,n&&(a.$parent.$parent["currentTotalCount"+s]=r),d&&(d.total=r),i.pagination&&($window.scrollTo(0,0),i.pagination=!1)})["catch"](function(){a.loading=!1,e.stop()})}else d&&i.total(d.total),me(_e,w)})})})}i.pagination&&$window.scrollTo(0,0),$rootScope.activePages[g]=i.page();var $=$cache.get(g);if(a.selectedRows=[],a.isAllSelected=!1,i.reloading||!$||a.parentModule)if(i.reloading){if(i.page(1),$rootScope.activePages[g]=1,$rootScope.activeFilters[g]=null,i.refreshing&&($=null,t=angular.copy(i.filterList),i.filters=null,i.refreshing=!1),i.renew&&(t=angular.copy(i.filterList)),$){var w={};w.views=angular.copy($.views),w.viewState=angular.copy($.viewState),$=w}k()}else k();else b.getPicklists(a.module).then(function(t){if(a.tableParams.picklists=t,$.views&&$.views.length&&!a.viewid){y($.views,$.viewState,r),a.fields=b.getViewFields(a.module,a.view.fields),i.sorting($.sorting),i.$params.count=$.count,i.total($.total);var s=$["rows-"+o+i.page()];s&&s.length?(i.total($.total||d.total),a.findRequest=$.findRequest,d&&(d.total=d.total||$.total,d.loading=!1),l.resolve(s),a.loading=!1,e.stop()):k()
}else k();for(var o in i.filters)if(i.filters.hasOwnProperty(o)){var n=i.filters[o];b.setDependencyFilter(o,n.value,a.module,i.picklists)}})}}),a.tableParams.filterList=t&&t.length?t:void 0,a.tableParams.isSelectable=o,a.$parent.loadingModal&&(a.tableParams.showFilter=!0),$rootScope.activePages[g]&&a.tableParams.page($rootScope.activePages[g]),$rootScope.activeFilters[g]&&(a.tableParams.filters=$rootScope.activeFilters[g],a.tableParams.showFilter=!0),a.tableParams.load=!0;var y=function(e,l,i){if(a.views=e,a.selectedView){a.view=a.selectedView;for(var t=0;t<e.length;t++){var r=e[t];r.active=r.id===a.selectedView.id}}else l&&i===a.module.name?l&&(a.view=$filter("filter")(e,{id:l.active_view},!0)[0]):a.view=$filter("filter")(e,{active:!0})[0];l&&!a.view&&(a.view=$filter("filter")(e,{active:!0})[0],l.active_view=a.view.id,l.sort_field="created_at",l.sort_direction="desc",l.row_per_page=10,b.setViewState(l,a.module.id,l.id))};a.setDependency=function(e){b.setDependencyFilter(e.fieldName,a.tableParams.filters[e.fieldName].value,a.module,a.tableParams.picklists)};var k=function(e){if(a.tableParams.filters[e.fieldName].operator){var l=new Date(a.tableParams.filters[e.fieldName].value);switch(a.tableParams.filters[e.fieldName].operator.name){case"greater":l.setHours(23),l.setMinutes(59),l.setSeconds(59),l.setMilliseconds(99);break;case"less":l.setHours(0),l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0)}a.tableParams.filters[e.fieldName].value=l}};a.dateTimeChanged=function(a){k(a)},a.operatorChanged=function(e){"empty"===a.tableParams.filters[e.fieldName].operator.name||"not_empty"===a.tableParams.filters[e.fieldName].operator.name?(a.tableParams.filters[e.fieldName].value=null,a.tableParams.filters[e.fieldName].disabled=!0):a.tableParams.filters[e.fieldName].disabled=!1}},getCSVData:function(a,e){var l=this,i=$q.defer(),t=angular.copy(a.findRequest);return t.limit=3e3,t.offset=0,l.findRecords(a.module.name,t).then(function(t){for(var r=l.processRecordMulti(t.data,a.module,a.tableParams.picklists,a.viewFields,e),s=[],o=[],n=$filter("orderBy")(a.fields,"order"),f=0;f<n.length;f++){var u=n[f];o.push(u["label_"+$rootScope.language]+(u.parentField?" ("+u.parentField["label_"+$rootScope.language]+")":""))}s.push(o);for(var d=0;d<r.length;d++){for(var c=r[d],p=[],_=$filter("orderBy")(c.fields,"order"),m=0;m<_.length;m++){var v=_[m];p.push("currency"===v.data_type||"number_decimal"===v.data_type?v.value||"":v.valueFormatted||"")}s.push(p)}i.resolve(s)}),i.promise},getYesNo:function(a){var e={};return e.yes=$filter("filter")(a,{system_code:"true"})[0].label[$rootScope.language],e.no=$filter("filter")(a,{system_code:"false"})[0].label[$rootScope.language],e},getIcons:function(){return icons.icons},getActionButtons:function(a,e){var l=$q.defer(),i="action_button_"+a,t=$cache.get(i);return t&&!e?(l.resolve(t),l.promise):($http.get(config.apiUrl+"action_button/get/"+a).then(function(a){$cache.put(i,a.data),l.resolve(a.data)})["catch"](function(a){l.reject(a.data)}),l.promise)},hasFieldDisplayPermission:function(a){if(!a.permissions)return!0;var e=$filter("filter")(a.permissions,{profile_id:$rootScope.user.profile.id},!0)[0],l=function(a){if(!a.sectionObj||!a.sectionObj.permissions)return!0;var e=$filter("filter")(a.sectionObj.permissions,{profile_id:$rootScope.user.profile.id},!0)[0];return e?"none"!==e.type:!0};return e&&"none"===e.type?!1:l(a)},hasFieldFullPermission:function(a){if(!a.permissions)return!0;var e=$filter("filter")(a.permissions,{profile_id:$rootScope.user.profile.id},!0)[0],l=function(a){if(!a.sectionObj||!a.sectionObj.permissions)return!0;var e=$filter("filter")(a.sectionObj.permissions,{profile_id:$rootScope.user.profile.id},!0)[0];return e?"full"===e.type:!0};return e&&"full"!==e.type?!1:l(a)},hasSectionDisplayPermission:function(a){if(!a.permissions)return!0;var e=$filter("filter")(a.permissions,{profile_id:$rootScope.user.profile.id},!0)[0];return e?"none"!==e.type:!0},hasSectionFullPermission:function(a){if(!a.permissions)return!0;var e=$filter("filter")(a.permissions,{profile_id:$rootScope.user.profile.id},!0)[0];return e?"full"===e.type:!0},hasActionButtonDisplayPermission:function(a){if(!a.permissions)return!0;var e=$filter("filter")(a.permissions,{profile_id:$rootScope.user.profile.id},!0)[0];return e?"none"!==e.type:!0},getDailyRates:function(){return $http.get(config.apiUrl+"exchange_rates/get_daily_rates")},getAllTenantSettingsByType:function(a,e){return $http.get(config.apiUrl+"settings/get_all/"+a+(e?"?user_id="+e:""))},tenantSettingUpdate:function(a){return $http.put(config.apiUrl+"settings/update/"+a.id,a)}}}]),angular.module("primeapps").constant("icons",{icons:[{value:"fa fa-adjust",label:'<i class="fa fa-adjust"> Adjust'},{value:"fa fa-anchor",label:'<i class="fa fa-anchor"> Anchor'},{value:"fa fa-archive",label:'<i class="fa fa-archive"> Archive'},{value:"fa fa-area-chart",label:'<i class="fa fa-area-chart"> Area-chart',chart:!0},{value:"fa fa-arrows",label:'<i class="fa fa-arrows"> Arrows'},{value:"fa fa-arrows-h",label:'<i class="fa fa-arrows-h"> Arrows-h'},{value:"fa fa-arrows-v",label:'<i class="fa fa-arrows-v"> Arrows-v'},{value:"fa fa-asterisk",label:'<i class="fa fa-asterisk"> Asterisk'},{value:"fa fa-at",label:'<i class="fa fa-at"> At'},{value:"fa fa-automobile",label:'<i class="fa fa-automobile"> Automobile'},{value:"fa fa-ban",label:'<i class="fa fa-ban"> Ban'},{value:"fa fa-bank",label:'<i class="fa fa-bank"> Bank'},{value:"fa fa-bar-chart",label:'<i class="fa fa-bar-chart"> Bar-chart',chart:!0},{value:"fa fa-bar-chart-o",label:'<i class="fa fa-bar-chart-o"> Bar-chart-o'},{value:"fa fa-barcode",label:'<i class="fa fa-barcode"> Barcode'},{value:"fa fa-bars",label:'<i class="fa fa-bars"> Bars'},{value:"fa fa-bed",label:'<i class="fa fa-bed"> Bed'},{value:"fa fa-beer",label:'<i class="fa fa-beer"> Beer'},{value:"fa fa-bell",label:'<i class="fa fa-bell"> Bell'},{value:"fa fa-bell-o",label:'<i class="fa fa-bell-o"> Bell-o'},{value:"fa fa-bell-slash",label:'<i class="fa fa-bell-slash"> Bell-slash'},{value:"fa fa-bell-slash-o",label:'<i class="fa fa-bell-slash-o"> Bell-slash-o'},{value:"fa fa-bicycle",label:'<i class="fa fa-bicycle"> Bicycle'},{value:"fa fa-binoculars",label:'<i class="fa fa-binoculars"> Binoculars'},{value:"fa fa-birthday-cake",label:'<i class="fa fa-birthday-cake"> Birthday-cake'},{value:"fa fa-bolt",label:'<i class="fa fa-bolt"> Bolt'},{value:"fa fa-bomb",label:'<i class="fa fa-bomb"> Bomb'},{value:"fa fa-book",label:'<i class="fa fa-book"> Book'},{value:"fa fa-bookmark",label:'<i class="fa fa-bookmark"> Bookmark'},{value:"fa fa-bookmark-o",label:'<i class="fa fa-bookmark-o"> Bookmark-o'},{value:"fa fa-briefcase",label:'<i class="fa fa-briefcase"> Briefcase'},{value:"fa fa-bug",label:'<i class="fa fa-bug"> Bug'},{value:"fa fa-building",label:'<i class="fa fa-building"> Building'},{value:"fa fa-building-o",label:'<i class="fa fa-building-o"> Building-o'},{value:"fa fa-bullhorn",label:'<i class="fa fa-bullhorn"> Bullhorn'},{value:"fa fa-bullseye",label:'<i class="fa fa-bullseye"> Bullseye'},{value:"fa fa-bus",label:'<i class="fa fa-bus"> Bus'},{value:"fa fa-cab",label:'<i class="fa fa-cab"> Cab'},{value:"fa fa-calculator",label:'<i class="fa fa-calculator"> Calculator'},{value:"fa fa-calendar",label:'<i class="fa fa-calendar"> Calendar'},{value:"fa fa-calendar-o",label:'<i class="fa fa-calendar-o"> Calendar-o'},{value:"fa fa-camera",label:'<i class="fa fa-camera"> Camera'},{value:"fa fa-camera-retro",label:'<i class="fa fa-camera-retro"> Camera-retro'},{value:"fa fa-car",label:'<i class="fa fa-car"> Car'},{value:"fa fa-caret-square-o-down",label:'<i class="fa fa-caret-square-o-down"> Caret-square-o-down'},{value:"fa fa-caret-square-o-left",label:'<i class="fa fa-caret-square-o-left"> Caret-square-o-left'},{value:"fa fa-caret-square-o-right",label:'<i class="fa fa-caret-square-o-right"> Caret-square-o-right'},{value:"fa fa-caret-square-o-up",label:'<i class="fa fa-caret-square-o-up"> Caret-square-o-up'},{value:"fa fa-cart-arrow-down",label:'<i class="fa fa-cart-arrow-down"> Cart-arrow-down'},{value:"fa fa-cart-plus",label:'<i class="fa fa-cart-plus"> Cart-plus'},{value:"fa fa-cc",label:'<i class="fa fa-cc"> Cc'},{value:"fa fa-certificate",label:'<i class="fa fa-certificate"> Certificate'},{value:"fa fa-check",label:'<i class="fa fa-check"> Check'},{value:"fa fa-check-circle",label:'<i class="fa fa-check-circle"> Check-circle'},{value:"fa fa-check-circle-o",label:'<i class="fa fa-check-circle-o"> Check-circle-o'},{value:"fa fa-check-square",label:'<i class="fa fa-check-square"> Check-square'},{value:"fa fa-check-square-o",label:'<i class="fa fa-check-square-o"> Check-square-o'},{value:"fa fa-child",label:'<i class="fa fa-child"> Child'},{value:"fa fa-circle",label:'<i class="fa fa-circle"> Circle'},{value:"fa fa-circle-o",label:'<i class="fa fa-circle-o"> Circle-o'},{value:"fa fa-circle-o-notch",label:'<i class="fa fa-circle-o-notch"> Circle-o-notch'},{value:"fa fa-circle-thin",label:'<i class="fa fa-circle-thin"> Circle-thin'},{value:"fa fa-clock-o",label:'<i class="fa fa-clock-o"> Clock-o'},{value:"fa fa-close",label:'<i class="fa fa-close"> Close'},{value:"fa fa-cloud",label:'<i class="fa fa-cloud"> Cloud'},{value:"fa fa-cloud-download",label:'<i class="fa fa-cloud-download"> Cloud-download'},{value:"fa fa-cloud-upload",label:'<i class="fa fa-cloud-upload"> Cloud-upload'},{value:"fa fa-code",label:'<i class="fa fa-code"> Code'},{value:"fa fa-code-fork",label:'<i class="fa fa-code-fork"> Code-fork'},{value:"fa fa-coffee",label:'<i class="fa fa-coffee"> Coffee'},{value:"fa fa-cog",label:'<i class="fa fa-cog"> Cog'},{value:"fa fa-cogs",label:'<i class="fa fa-cogs"> Cogs'},{value:"fa fa-comment",label:'<i class="fa fa-comment"> Comment'},{value:"fa fa-comment-o",label:'<i class="fa fa-comment-o"> Comment-o'},{value:"fa fa-comments",label:'<i class="fa fa-comments"> Comments'},{value:"fa fa-comments-o",label:'<i class="fa fa-comments-o"> Comments-o'},{value:"fa fa-compass",label:'<i class="fa fa-compass"> Compass'},{value:"fa fa-copyright",label:'<i class="fa fa-copyright"> Copyright'},{value:"fa fa-credit-card",label:'<i class="fa fa-credit-card"> Credit-card'},{value:"fa fa-crop",label:'<i class="fa fa-crop"> Crop'},{value:"fa fa-crosshairs",label:'<i class="fa fa-crosshairs"> Crosshairs'},{value:"fa fa-cube",label:'<i class="fa fa-cube"> Cube'},{value:"fa fa-cubes",label:'<i class="fa fa-cubes"> Cubes'},{value:"fa fa-cutlery",label:'<i class="fa fa-cutlery"> Cutlery'},{value:"fa fa-dashboard",label:'<i class="fa fa-dashboard"> Dashboard'},{value:"fa fa-database",label:'<i class="fa fa-database"> Database'},{value:"fa fa-desktop",label:'<i class="fa fa-desktop"> Desktop'},{value:"fa fa-diamond",label:'<i class="fa fa-diamond"> Diamond'},{value:"fa fa-dot-circle-o",label:'<i class="fa fa-dot-circle-o"> Dot-circle-o'},{value:"fa fa-download",label:'<i class="fa fa-download"> Download'},{value:"fa fa-edit",label:'<i class="fa fa-edit"> Edit'},{value:"fa fa-ellipsis-h",label:'<i class="fa fa-ellipsis-h"> Ellipsis-h'},{value:"fa fa-ellipsis-v",label:'<i class="fa fa-ellipsis-v"> Ellipsis-v'},{value:"fa fa-envelope",label:'<i class="fa fa-envelope"> Envelope'},{value:"fa fa-envelope-o",label:'<i class="fa fa-envelope-o"> Envelope-o'},{value:"fa fa-envelope-square",label:'<i class="fa fa-envelope-square"> Envelope-square'},{value:"fa fa-eraser",label:'<i class="fa fa-eraser"> Eraser'},{value:"fa fa-exchange",label:'<i class="fa fa-exchange"> Exchange'},{value:"fa fa-exclamation",label:'<i class="fa fa-exclamation"> Exclamation'},{value:"fa fa-exclamation-circle",label:'<i class="fa fa-exclamation-circle"> Exclamation-circle'},{value:"fa fa-exclamation-triangle",label:'<i class="fa fa-exclamation-triangle"> Exclamation-triangle'},{value:"fa fa-external-link",label:'<i class="fa fa-external-link"> External-link'},{value:"fa fa-external-link-square",label:'<i class="fa fa-external-link-square"> External-link-square'},{value:"fa fa-eye",label:'<i class="fa fa-eye"> Eye'},{value:"fa fa-eye-slash",label:'<i class="fa fa-eye-slash"> Eye-slash'},{value:"fa fa-eyedropper",label:'<i class="fa fa-eyedropper"> Eyedropper'},{value:"fa fa-fax",label:'<i class="fa fa-fax"> Fax'},{value:"fa fa-female",label:'<i class="fa fa-female"> Female'},{value:"fa fa-fighter-jet",label:'<i class="fa fa-fighter-jet"> Fighter-jet'},{value:"fa fa-file-archive-o",label:'<i class="fa fa-file-archive-o"> File-archive-o'},{value:"fa fa-file-audio-o",label:'<i class="fa fa-file-audio-o"> File-audio-o'},{value:"fa fa-file-code-o",label:'<i class="fa fa-file-code-o"> File-code-o'},{value:"fa fa-file-excel-o",label:'<i class="fa fa-file-excel-o"> File-excel-o'},{value:"fa fa-file-image-o",label:'<i class="fa fa-file-image-o"> File-image-o'},{value:"fa fa-file-movie-o",label:'<i class="fa fa-file-movie-o"> File-movie-o'},{value:"fa fa-file-pdf-o",label:'<i class="fa fa-file-pdf-o"> File-pdf-o'},{value:"fa fa-file-photo-o",label:'<i class="fa fa-file-photo-o"> File-photo-o'},{value:"fa fa-file-picture-o",label:'<i class="fa fa-file-picture-o"> File-picture-o'},{value:"fa fa-file-powerpoint-o",label:'<i class="fa fa-file-powerpoint-o"> File-powerpoint-o'},{value:"fa fa-file-sound-o",label:'<i class="fa fa-file-sound-o"> File-sound-o'},{value:"fa fa-file-video-o",label:'<i class="fa fa-file-video-o"> File-video-o'},{value:"fa fa-file-word-o",label:'<i class="fa fa-file-word-o"> File-word-o'},{value:"fa fa-file-zip-o",label:'<i class="fa fa-file-zip-o"> File-zip-o'},{value:"fa fa-film",label:'<i class="fa fa-film"> Film'},{value:"fa fa-filter",label:'<i class="fa fa-filter"> Filter'},{value:"fa fa-fire",label:'<i class="fa fa-fire"> Fire'},{value:"fa fa-fire-extinguisher",label:'<i class="fa fa-fire-extinguisher"> Fire-extinguisher'},{value:"fa fa-flag",label:'<i class="fa fa-flag"> Flag'},{value:"fa fa-flag-checkered",label:'<i class="fa fa-flag-checkered"> Flag-checkered'},{value:"fa fa-flag-o",label:'<i class="fa fa-flag-o"> Flag-o'},{value:"fa fa-flash",label:'<i class="fa fa-flash"> Flash'},{value:"fa fa-flask",label:'<i class="fa fa-flask"> Flask'},{value:"fa fa-folder",label:'<i class="fa fa-folder"> Folder'},{value:"fa fa-folder-o",label:'<i class="fa fa-folder-o"> Folder-o'},{value:"fa fa-folder-open",label:'<i class="fa fa-folder-open"> Folder-open'},{value:"fa fa-folder-open-o",label:'<i class="fa fa-folder-open-o"> Folder-open-o'},{value:"fa fa-frown-o",label:'<i class="fa fa-frown-o"> Frown-o'},{value:"fa fa-futbol-o",label:'<i class="fa fa-futbol-o"> Futbol-o'},{value:"fa fa-gamepad",label:'<i class="fa fa-gamepad"> Gamepad'},{value:"fa fa-gavel",label:'<i class="fa fa-gavel"> Gavel'},{value:"fa fa-gear",label:'<i class="fa fa-gear"> Gear'},{value:"fa fa-gears",label:'<i class="fa fa-gears"> Gears'},{value:"fa fa-gift",label:'<i class="fa fa-gift"> Gift'},{value:"fa fa-glass",label:'<i class="fa fa-glass"> Glass'},{value:"fa fa-globe",label:'<i class="fa fa-globe"> Globe'},{value:"fa fa-graduation-cap",label:'<i class="fa fa-graduation-cap"> Graduation-cap'},{value:"fa fa-group",label:'<i class="fa fa-group"> Group'},{value:"fa fa-hdd-o",label:'<i class="fa fa-hdd-o"> Hdd-o'},{value:"fa fa-headphones",label:'<i class="fa fa-headphones"> Headphones'},{value:"fa fa-heart",label:'<i class="fa fa-heart"> Heart'},{value:"fa fa-heart-o",label:'<i class="fa fa-heart-o"> Heart-o'},{value:"fa fa-heartbeat",label:'<i class="fa fa-heartbeat"> Heartbeat'},{value:"fa fa-history",label:'<i class="fa fa-history"> History'},{value:"fa fa-home",label:'<i class="fa fa-home"> Home'},{value:"fa fa-hotel",label:'<i class="fa fa-hotel"> Hotel'},{value:"fa fa-image",label:'<i class="fa fa-image"> Image'},{value:"fa fa-inbox",label:'<i class="fa fa-inbox"> Inbox'},{value:"fa fa-info",label:'<i class="fa fa-info"> Info'},{value:"fa fa-info-circle",label:'<i class="fa fa-info-circle"> Info-circle'},{value:"fa fa-institution",label:'<i class="fa fa-institution"> Institution'},{value:"fa fa-key",label:'<i class="fa fa-key"> Key'},{value:"fa fa-keyboard-o",label:'<i class="fa fa-keyboard-o"> Keyboard-o'},{value:"fa fa-language",label:'<i class="fa fa-language"> Language'},{value:"fa fa-laptop",label:'<i class="fa fa-laptop"> Laptop'},{value:"fa fa-leaf",label:'<i class="fa fa-leaf"> Leaf'},{value:"fa fa-legal",label:'<i class="fa fa-legal"> Legal'},{value:"fa fa-lemon-o",label:'<i class="fa fa-lemon-o"> Lemon-o'},{value:"fa fa-level-down",label:'<i class="fa fa-level-down"> Level-down'},{value:"fa fa-level-up",label:'<i class="fa fa-level-up"> Level-up'},{value:"fa fa-life-bouy",label:'<i class="fa fa-life-bouy"> Life-bouy'},{value:"fa fa-life-buoy",label:'<i class="fa fa-life-buoy"> Life-buoy'},{value:"fa fa-life-ring",label:'<i class="fa fa-life-ring"> Life-ring'},{value:"fa fa-life-saver",label:'<i class="fa fa-life-saver"> Life-saver'},{value:"fa fa-lightbulb-o",label:'<i class="fa fa-lightbulb-o"> Lightbulb-o'},{value:"fa fa-line-chart",label:'<i class="fa fa-line-chart"> Line-chart',chart:!0},{value:"fa fa-location-arrow",label:'<i class="fa fa-location-arrow"> Location-arrow'},{value:"fa fa-lock",label:'<i class="fa fa-lock"> Lock'},{value:"fa fa-magic",label:'<i class="fa fa-magic"> Magic'},{value:"fa fa-magnet",label:'<i class="fa fa-magnet"> Magnet'},{value:"fa fa-mail-forward",label:'<i class="fa fa-mail-forward"> Mail-forward'},{value:"fa fa-mail-reply",label:'<i class="fa fa-mail-reply"> Mail-reply'},{value:"fa fa-mail-reply-all",label:'<i class="fa fa-mail-reply-all"> Mail-reply-all'},{value:"fa fa-male",label:'<i class="fa fa-male"> Male'},{value:"fa fa-meh-o",label:'<i class="fa fa-meh-o"> Meh-o'},{value:"fa fa-microphone",label:'<i class="fa fa-microphone"> Microphone'},{value:"fa fa-microphone-slash",label:'<i class="fa fa-microphone-slash"> Microphone-slash'},{value:"fa fa-minus",label:'<i class="fa fa-minus"> Minus'},{value:"fa fa-minus-circle",label:'<i class="fa fa-minus-circle"> Minus-circle'},{value:"fa fa-minus-square",label:'<i class="fa fa-minus-square"> Minus-square'},{value:"fa fa-minus-square-o",label:'<i class="fa fa-minus-square-o"> Minus-square-o'},{value:"fa fa-mobile",label:'<i class="fa fa-mobile"> Mobile'},{value:"fa fa-mobile-phone",label:'<i class="fa fa-mobile-phone"> Mobile-phone'},{value:"fa fa-money",label:'<i class="fa fa-money"> Money'},{value:"fa fa-moon-o",label:'<i class="fa fa-moon-o"> Moon-o'},{value:"fa fa-mortar-board",label:'<i class="fa fa-mortar-board"> Mortar-board'},{value:"fa fa-motorcycle",label:'<i class="fa fa-motorcycle"> Motorcycle'},{value:"fa fa-music",label:'<i class="fa fa-music"> Music'},{value:"fa fa-navicon",label:'<i class="fa fa-navicon"> Navicon'},{value:"fa fa-newspaper-o",label:'<i class="fa fa-newspaper-o"> Newspaper-o'},{value:"fa fa-paint-brush",label:'<i class="fa fa-paint-brush"> Paint-brush'},{value:"fa fa-paper-plane",label:'<i class="fa fa-paper-plane"> Paper-plane'},{value:"fa fa-paper-plane-o",label:'<i class="fa fa-paper-plane-o"> Paper-plane-o'},{value:"fa fa-paw",label:'<i class="fa fa-paw"> Paw'},{value:"fa fa-pencil",label:'<i class="fa fa-pencil"> Pencil'},{value:"fa fa-pencil-square",label:'<i class="fa fa-pencil-square"> Pencil-square'},{value:"fa fa-pencil-square-o",label:'<i class="fa fa-pencil-square-o"> Pencil-square-o'},{value:"fa fa-phone",label:'<i class="fa fa-phone"> Phone'},{value:"fa fa-phone-square",label:'<i class="fa fa-phone-square"> Phone-square'},{value:"fa fa-photo",label:'<i class="fa fa-photo"> Photo'},{value:"fa fa-picture-o",label:'<i class="fa fa-picture-o"> Picture-o'},{value:"fa fa-pie-chart",label:'<i class="fa fa-pie-chart"> Pie-chart',chart:!0},{value:"fa fa-plane",label:'<i class="fa fa-plane"> Plane'},{value:"fa fa-plug",label:'<i class="fa fa-plug"> Plug'},{value:"fa fa-plus",label:'<i class="fa fa-plus"> Plus'},{value:"fa fa-plus-circle",label:'<i class="fa fa-plus-circle"> Plus-circle'},{value:"fa fa-plus-square",label:'<i class="fa fa-plus-square"> Plus-square'},{value:"fa fa-plus-square-o",label:'<i class="fa fa-plus-square-o"> Plus-square-o'},{value:"fa fa-power-off",label:'<i class="fa fa-power-off"> Power-off'},{value:"fa fa-print",label:'<i class="fa fa-print"> Print'},{value:"fa fa-puzzle-piece",label:'<i class="fa fa-puzzle-piece"> Puzzle-piece'},{value:"fa fa-qrcode",label:'<i class="fa fa-qrcode"> Qrcode'},{value:"fa fa-question",label:'<i class="fa fa-question"> Question'},{value:"fa fa-question-circle",label:'<i class="fa fa-question-circle"> Question-circle'},{value:"fa fa-quote-left",label:'<i class="fa fa-quote-left"> Quote-left'},{value:"fa fa-quote-right",label:'<i class="fa fa-quote-right"> Quote-right'},{value:"fa fa-random",label:'<i class="fa fa-random"> Random'},{value:"fa fa-recycle",label:'<i class="fa fa-recycle"> Recycle'},{value:"fa fa-refresh",label:'<i class="fa fa-refresh"> Refresh'},{value:"fa fa-remove",label:'<i class="fa fa-remove"> Remove'},{value:"fa fa-reorder",label:'<i class="fa fa-reorder"> Reorder'},{value:"fa fa-reply",label:'<i class="fa fa-reply"> Reply'},{value:"fa fa-reply-all",label:'<i class="fa fa-reply-all"> Reply-all'},{value:"fa fa-retweet",label:'<i class="fa fa-retweet"> Retweet'},{value:"fa fa-road",label:'<i class="fa fa-road"> Road'},{value:"fa fa-rocket",label:'<i class="fa fa-rocket"> Rocket'},{value:"fa fa-rss",label:'<i class="fa fa-rss"> Rss'},{value:"fa fa-rss-square",label:'<i class="fa fa-rss-square"> Rss-square'},{value:"fa fa-search",label:'<i class="fa fa-search"> Search'},{value:"fa fa-search-minus",label:'<i class="fa fa-search-minus"> Search-minus'},{value:"fa fa-search-plus",label:'<i class="fa fa-search-plus"> Search-plus'},{value:"fa fa-send",label:'<i class="fa fa-send"> Send'},{value:"fa fa-send-o",label:'<i class="fa fa-send-o"> Send-o'},{value:"fa fa-server",label:'<i class="fa fa-server"> Server'},{value:"fa fa-share",label:'<i class="fa fa-share"> Share'},{value:"fa fa-share-alt",label:'<i class="fa fa-share-alt"> Share-alt'},{value:"fa fa-share-alt-square",label:'<i class="fa fa-share-alt-square"> Share-alt-square'},{value:"fa fa-share-square",label:'<i class="fa fa-share-square"> Share-square'},{value:"fa fa-share-square-o",label:'<i class="fa fa-share-square-o"> Share-square-o'},{value:"fa fa-shield",label:'<i class="fa fa-shield"> Shield'},{value:"fa fa-ship",label:'<i class="fa fa-ship"> Ship'},{value:"fa fa-shopping-cart",label:'<i class="fa fa-shopping-cart"> Shopping-cart'},{value:"fa fa-sign-in",label:'<i class="fa fa-sign-in"> Sign-in'},{value:"fa fa-sign-out",label:'<i class="fa fa-sign-out"> Sign-out'},{value:"fa fa-signal",label:'<i class="fa fa-signal"> Signal'},{value:"fa fa-sitemap",label:'<i class="fa fa-sitemap"> Sitemap'},{value:"fa fa-sliders",label:'<i class="fa fa-sliders"> Sliders'},{value:"fa fa-smile-o",label:'<i class="fa fa-smile-o"> Smile-o'},{value:"fa fa-soccer-ball-o",label:'<i class="fa fa-soccer-ball-o"> Soccer-ball-o'},{value:"fa fa-sort",label:'<i class="fa fa-sort"> Sort'},{value:"fa fa-sort-alpha-asc",label:'<i class="fa fa-sort-alpha-asc"> Sort-alpha-asc'},{value:"fa fa-sort-alpha-desc",label:'<i class="fa fa-sort-alpha-desc"> Sort-alpha-desc'},{value:"fa fa-sort-amount-asc",label:'<i class="fa fa-sort-amount-asc"> Sort-amount-asc'},{value:"fa fa-sort-amount-desc",label:'<i class="fa fa-sort-amount-desc"> Sort-amount-desc'},{value:"fa fa-sort-asc",label:'<i class="fa fa-sort-asc"> Sort-asc'},{value:"fa fa-sort-desc",label:'<i class="fa fa-sort-desc"> Sort-desc'},{value:"fa fa-sort-down",label:'<i class="fa fa-sort-down"> Sort-down'},{value:"fa fa-sort-numeric-asc",label:'<i class="fa fa-sort-numeric-asc"> Sort-numeric-asc'},{value:"fa fa-sort-numeric-desc",label:'<i class="fa fa-sort-numeric-desc"> Sort-numeric-desc'},{value:"fa fa-sort-up",label:'<i class="fa fa-sort-up"> Sort-up'},{value:"fa fa-space-shuttle",label:'<i class="fa fa-space-shuttle"> Space-shuttle'},{value:"fa fa-spinner",label:'<i class="fa fa-spinner"> Spinner'},{value:"fa fa-spoon",label:'<i class="fa fa-spoon"> Spoon'},{value:"fa fa-square",label:'<i class="fa fa-square"> Square'},{value:"fa fa-square-o",label:'<i class="fa fa-square-o"> Square-o'},{value:"fa fa-star",label:'<i class="fa fa-star"> Star'},{value:"fa fa-star-half",label:'<i class="fa fa-star-half"> Star-half'},{value:"fa fa-star-half-empty",label:'<i class="fa fa-star-half-empty"> Star-half-empty'},{value:"fa fa-star-half-full",label:'<i class="fa fa-star-half-full"> Star-half-full'},{value:"fa fa-star-half-o",label:'<i class="fa fa-star-half-o"> Star-half-o'},{value:"fa fa-star-o",label:'<i class="fa fa-star-o"> Star-o'},{value:"fa fa-street-view",label:'<i class="fa fa-street-view"> Street-view'},{value:"fa fa-suitcase",label:'<i class="fa fa-suitcase"> Suitcase'},{value:"fa fa-sun-o",label:'<i class="fa fa-sun-o"> Sun-o'},{value:"fa fa-support",label:'<i class="fa fa-support"> Support'},{value:"fa fa-tablet",label:'<i class="fa fa-tablet"> Tablet'},{value:"fa fa-tachometer",label:'<i class="fa fa-tachometer"> Tachometer'},{value:"fa fa-tag",label:'<i class="fa fa-tag"> Tag'},{value:"fa fa-tags",label:'<i class="fa fa-tags"> Tags'},{value:"fa fa-tasks",label:'<i class="fa fa-tasks"> Tasks'},{value:"fa fa-taxi",label:'<i class="fa fa-taxi"> Taxi'},{value:"fa fa-terminal",label:'<i class="fa fa-terminal"> Terminal'},{value:"fa fa-thumb-tack",label:'<i class="fa fa-thumb-tack"> Thumb-tack'},{value:"fa fa-thumbs-down",label:'<i class="fa fa-thumbs-down"> Thumbs-down'},{value:"fa fa-thumbs-o-down",label:'<i class="fa fa-thumbs-o-down"> Thumbs-o-down'},{value:"fa fa-thumbs-o-up",label:'<i class="fa fa-thumbs-o-up"> Thumbs-o-up'},{value:"fa fa-thumbs-up",label:'<i class="fa fa-thumbs-up"> Thumbs-up'},{value:"fa fa-ticket",label:'<i class="fa fa-ticket"> Ticket'},{value:"fa fa-times",label:'<i class="fa fa-times"> Times'},{value:"fa fa-times-circle",label:'<i class="fa fa-times-circle"> Times-circle'},{value:"fa fa-times-circle-o",label:'<i class="fa fa-times-circle-o"> Times-circle-o'},{value:"fa fa-tint",label:'<i class="fa fa-tint"> Tint'},{value:"fa fa-toggle-down",label:'<i class="fa fa-toggle-down"> Toggle-down'},{value:"fa fa-toggle-left",label:'<i class="fa fa-toggle-left"> Toggle-left'},{value:"fa fa-toggle-off",label:'<i class="fa fa-toggle-off"> Toggle-off'},{value:"fa fa-toggle-on",label:'<i class="fa fa-toggle-on"> Toggle-on'},{value:"fa fa-toggle-right",label:'<i class="fa fa-toggle-right"> Toggle-right'},{value:"fa fa-toggle-up",label:'<i class="fa fa-toggle-up"> Toggle-up'},{value:"fa fa-trash",label:'<i class="fa fa-trash"> Trash'},{value:"fa fa-trash-o",label:'<i class="fa fa-trash-o"> Trash-o'},{value:"fa fa-tree",label:'<i class="fa fa-tree"> Tree'},{value:"fa fa-trophy",label:'<i class="fa fa-trophy"> Trophy'},{value:"fa fa-truck",label:'<i class="fa fa-truck"> Truck'},{value:"fa fa-tty",label:'<i class="fa fa-tty"> Tty'},{value:"fa fa-umbrella",label:'<i class="fa fa-umbrella"> Umbrella'},{value:"fa fa-university",label:'<i class="fa fa-university"> University'},{value:"fa fa-unlock",label:'<i class="fa fa-unlock"> Unlock'},{value:"fa fa-unlock-alt",label:'<i class="fa fa-unlock-alt"> Unlock-alt'},{value:"fa fa-unsorted",label:'<i class="fa fa-unsorted"> Unsorted'},{value:"fa fa-upload",label:'<i class="fa fa-upload"> Upload'},{value:"fa fa-user",label:'<i class="fa fa-user"> User'},{value:"fa fa-user-plus",label:'<i class="fa fa-user-plus"> User-plus'},{value:"fa fa-user-secret",label:'<i class="fa fa-user-secret"> User-secret'},{value:"fa fa-user-times",label:'<i class="fa fa-user-times"> User-times'},{value:"fa fa-users",label:'<i class="fa fa-users"> Users'},{value:"fa fa-video-camera",label:'<i class="fa fa-video-camera"> Video-camera'},{value:"fa fa-volume-down",label:'<i class="fa fa-volume-down"> Volume-down'},{value:"fa fa-volume-off",label:'<i class="fa fa-volume-off"> Volume-off'},{value:"fa fa-volume-up",label:'<i class="fa fa-volume-up"> Volume-up'},{value:"fa fa-warning",label:'<i class="fa fa-warning"> Warning'},{value:"fa fa-wheelchair",label:'<i class="fa fa-wheelchair"> Wheelchair'},{value:"fa fa-wifi",label:'<i class="fa fa-wifi"> Wifi'},{value:"fa fa-wrench",label:'<i class="fa fa-wrench"> Wrench'}]});